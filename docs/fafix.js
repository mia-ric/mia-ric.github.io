// ==UserScript==
// @name         FaFiX - FanFiktion Extension
// @namespace    https://mia-ric.github.io
// @version      0.1.0
// @description  A FanFiktion-related TamperMonkey script.
// @author       MIA
// @resource     customCSS https://mia-ric.github.io/fafix.css
// @downloadURL  https://mia-ric.github.io/fafix.js
// @updateURL    https://mia-ric.github.io/fafix.js
// @match        https://www.fanfiktion.de/*
// @icon         data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==
// @grant        GM_getResourceText
// @grant        GM_addStyle
// ==/UserScript==
(function(){"use strict";/**
    * @vue/shared v3.5.13
    * (c) 2018-present Yuxi (Evan) You and Vue contributors
    * @license MIT
    **//*! #__NO_SIDE_EFFECTS__ */function Xi(i){const e=Object.create(null);for(const t of i.split(","))e[t]=1;return t=>t in e}const bt=Object.freeze({}),_s=Object.freeze([]),pn=()=>{},uw=()=>!1,Po=i=>i.charCodeAt(0)===111&&i.charCodeAt(1)===110&&(i.charCodeAt(2)>122||i.charCodeAt(2)<97),il=i=>i.startsWith("onUpdate:"),jt=Object.assign,jh=(i,e)=>{const t=i.indexOf(e);t>-1&&i.splice(t,1)},dw=Object.prototype.hasOwnProperty,pt=(i,e)=>dw.call(i,e),He=Array.isArray,$r=i=>rl(i)==="[object Map]",Qp=i=>rl(i)==="[object Set]",je=i=>typeof i=="function",Dt=i=>typeof i=="string",hr=i=>typeof i=="symbol",wt=i=>i!==null&&typeof i=="object",Vh=i=>(wt(i)||je(i))&&je(i.then)&&je(i.catch),eg=Object.prototype.toString,rl=i=>eg.call(i),$h=i=>rl(i).slice(8,-1),tg=i=>rl(i)==="[object Object]",Gh=i=>Dt(i)&&i!=="NaN"&&i[0]!=="-"&&""+parseInt(i,10)===i,Lo=Xi(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),fw=Xi("bind,cloak,else-if,else,for,html,if,model,on,once,pre,show,slot,text,memo"),sl=i=>{const e=Object.create(null);return t=>e[t]||(e[t]=i(t))},pw=/-(\w)/g,ui=sl(i=>i.replace(pw,(e,t)=>t?t.toUpperCase():"")),gw=/\B([A-Z])/g,ur=sl(i=>i.replace(gw,"-$1").toLowerCase()),ol=sl(i=>i.charAt(0).toUpperCase()+i.slice(1)),Gr=sl(i=>i?`on${ol(i)}`:""),dr=(i,e)=>!Object.is(i,e),zs=(i,...e)=>{for(let t=0;t<i.length;t++)i[t](...e)},al=(i,e,t,n=!1)=>{Object.defineProperty(i,e,{configurable:!0,enumerable:!1,writable:n,value:t})},qh=i=>{const e=parseFloat(i);return isNaN(e)?i:e};let ng;const Ro=()=>ng||(ng=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function Uh(i){if(He(i)){const e={};for(let t=0;t<i.length;t++){const n=i[t],r=Dt(n)?yw(n):Uh(n);if(r)for(const s in r)e[s]=r[s]}return e}else if(Dt(i)||wt(i))return i}const mw=/;(?![^(]*\))/g,xw=/:([^]+)/,bw=/\/\*[^]*?\*\//g;function yw(i){const e={};return i.replace(bw,"").split(mw).forEach(t=>{if(t){const n=t.split(xw);n.length>1&&(e[n[0].trim()]=n[1].trim())}}),e}function Tn(i){let e="";if(Dt(i))e=i;else if(He(i))for(let t=0;t<i.length;t++){const n=Tn(i[t]);n&&(e+=n+" ")}else if(wt(i))for(const t in i)i[t]&&(e+=t+" ");return e.trim()}const vw="html,body,base,head,link,meta,style,title,address,article,aside,footer,header,hgroup,h1,h2,h3,h4,h5,h6,nav,section,div,dd,dl,dt,figcaption,figure,picture,hr,img,li,main,ol,p,pre,ul,a,b,abbr,bdi,bdo,br,cite,code,data,dfn,em,i,kbd,mark,q,rp,rt,ruby,s,samp,small,span,strong,sub,sup,time,u,var,wbr,area,audio,map,track,video,embed,object,param,source,canvas,script,noscript,del,ins,caption,col,colgroup,table,thead,tbody,td,th,tr,button,datalist,fieldset,form,input,label,legend,meter,optgroup,option,output,progress,select,textarea,details,dialog,menu,summary,template,blockquote,iframe,tfoot",ww="svg,animate,animateMotion,animateTransform,circle,clipPath,color-profile,defs,desc,discard,ellipse,feBlend,feColorMatrix,feComponentTransfer,feComposite,feConvolveMatrix,feDiffuseLighting,feDisplacementMap,feDistantLight,feDropShadow,feFlood,feFuncA,feFuncB,feFuncG,feFuncR,feGaussianBlur,feImage,feMerge,feMergeNode,feMorphology,feOffset,fePointLight,feSpecularLighting,feSpotLight,feTile,feTurbulence,filter,foreignObject,g,hatch,hatchpath,image,line,linearGradient,marker,mask,mesh,meshgradient,meshpatch,meshrow,metadata,mpath,path,pattern,polygon,polyline,radialGradient,rect,set,solidcolor,stop,switch,symbol,text,textPath,title,tspan,unknown,use,view",kw="annotation,annotation-xml,maction,maligngroup,malignmark,math,menclose,merror,mfenced,mfrac,mfraction,mglyph,mi,mlabeledtr,mlongdiv,mmultiscripts,mn,mo,mover,mpadded,mphantom,mprescripts,mroot,mrow,ms,mscarries,mscarry,msgroup,msline,mspace,msqrt,msrow,mstack,mstyle,msub,msubsup,msup,mtable,mtd,mtext,mtr,munder,munderover,none,semantics",Sw=Xi(vw),Cw=Xi(ww),Aw=Xi(kw),Mw=Xi("itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly");function ig(i){return!!i||i===""}const rg=i=>!!(i&&i.__v_isRef===!0),ll=i=>Dt(i)?i:i==null?"":He(i)||wt(i)&&(i.toString===eg||!je(i.toString))?rg(i)?ll(i.value):JSON.stringify(i,sg,2):String(i),sg=(i,e)=>rg(e)?sg(i,e.value):$r(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((t,[n,r],s)=>(t[Kh(n,s)+" =>"]=r,t),{})}:Qp(e)?{[`Set(${e.size})`]:[...e.values()].map(t=>Kh(t))}:hr(e)?Kh(e):wt(e)&&!He(e)&&!tg(e)?String(e):e,Kh=(i,e="")=>{var t;return hr(i)?`Symbol(${(t=i.description)!=null?t:e})`:i};/**
    * @vue/reactivity v3.5.13
    * (c) 2018-present Yuxi (Evan) You and Vue contributors
    * @license MIT
    **/function di(i,...e){console.warn(`[Vue warn] ${i}`,...e)}let Yn;class Tw{constructor(e=!1){this.detached=e,this._active=!0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=Yn,!e&&Yn&&(this.index=(Yn.scopes||(Yn.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let e,t;if(this.scopes)for(e=0,t=this.scopes.length;e<t;e++)this.scopes[e].pause();for(e=0,t=this.effects.length;e<t;e++)this.effects[e].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let e,t;if(this.scopes)for(e=0,t=this.scopes.length;e<t;e++)this.scopes[e].resume();for(e=0,t=this.effects.length;e<t;e++)this.effects[e].resume()}}run(e){if(this._active){const t=Yn;try{return Yn=this,e()}finally{Yn=t}}else di("cannot run an inactive effect scope.")}on(){Yn=this}off(){Yn=this.parent}stop(e){if(this._active){this._active=!1;let t,n;for(t=0,n=this.effects.length;t<n;t++)this.effects[t].stop();for(this.effects.length=0,t=0,n=this.cleanups.length;t<n;t++)this.cleanups[t]();if(this.cleanups.length=0,this.scopes){for(t=0,n=this.scopes.length;t<n;t++)this.scopes[t].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!e){const r=this.parent.scopes.pop();r&&r!==this&&(this.parent.scopes[this.index]=r,r.index=this.index)}this.parent=void 0}}}function Ew(){return Yn}let yt;const Jh=new WeakSet;class og{constructor(e){this.fn=e,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,Yn&&Yn.active&&Yn.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,Jh.has(this)&&(Jh.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||lg(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,fg(this),cg(this);const e=yt,t=fi;yt=this,fi=!0;try{return this.fn()}finally{yt!==this&&di("Active effect was not restored correctly - this is likely a Vue internal bug."),hg(this),yt=e,fi=t,this.flags&=-3}}stop(){if(this.flags&1){for(let e=this.deps;e;e=e.nextDep)tu(e);this.deps=this.depsTail=void 0,fg(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?Jh.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){eu(this)&&this.run()}get dirty(){return eu(this)}}let ag=0,Do,No;function lg(i,e=!1){if(i.flags|=8,e){i.next=No,No=i;return}i.next=Do,Do=i}function Zh(){ag++}function Qh(){if(--ag>0)return;if(No){let e=No;for(No=void 0;e;){const t=e.next;e.next=void 0,e.flags&=-9,e=t}}let i;for(;Do;){let e=Do;for(Do=void 0;e;){const t=e.next;if(e.next=void 0,e.flags&=-9,e.flags&1)try{e.trigger()}catch(n){i||(i=n)}e=t}}if(i)throw i}function cg(i){for(let e=i.deps;e;e=e.nextDep)e.version=-1,e.prevActiveLink=e.dep.activeLink,e.dep.activeLink=e}function hg(i){let e,t=i.depsTail,n=t;for(;n;){const r=n.prevDep;n.version===-1?(n===t&&(t=r),tu(n),Ow(n)):e=n,n.dep.activeLink=n.prevActiveLink,n.prevActiveLink=void 0,n=r}i.deps=e,i.depsTail=t}function eu(i){for(let e=i.deps;e;e=e.nextDep)if(e.dep.version!==e.version||e.dep.computed&&(ug(e.dep.computed)||e.dep.version!==e.version))return!0;return!!i._dirty}function ug(i){if(i.flags&4&&!(i.flags&16)||(i.flags&=-17,i.globalVersion===_o))return;i.globalVersion=_o;const e=i.dep;if(i.flags|=2,e.version>0&&!i.isSSR&&i.deps&&!eu(i)){i.flags&=-3;return}const t=yt,n=fi;yt=i,fi=!0;try{cg(i);const r=i.fn(i._value);(e.version===0||dr(r,i._value))&&(i._value=r,e.version++)}catch(r){throw e.version++,r}finally{yt=t,fi=n,hg(i),i.flags&=-3}}function tu(i,e=!1){const{dep:t,prevSub:n,nextSub:r}=i;if(n&&(n.nextSub=r,i.prevSub=void 0),r&&(r.prevSub=n,i.nextSub=void 0),t.subsHead===i&&(t.subsHead=r),t.subs===i&&(t.subs=n,!n&&t.computed)){t.computed.flags&=-5;for(let s=t.computed.deps;s;s=s.nextDep)tu(s,!0)}!e&&!--t.sc&&t.map&&t.map.delete(t.key)}function Ow(i){const{prevDep:e,nextDep:t}=i;e&&(e.nextDep=t,i.prevDep=void 0),t&&(t.prevDep=e,i.nextDep=void 0)}let fi=!0;const dg=[];function Wi(){dg.push(fi),fi=!1}function Yi(){const i=dg.pop();fi=i===void 0?!0:i}function fg(i){const{cleanup:e}=i;if(i.cleanup=void 0,e){const t=yt;yt=void 0;try{e()}finally{yt=t}}}let _o=0,Iw=class{constructor(e,t){this.sub=e,this.dep=t,this.version=t.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}};class cl{constructor(e){this.computed=e,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0,this.subsHead=void 0}track(e){if(!yt||!fi||yt===this.computed)return;let t=this.activeLink;if(t===void 0||t.sub!==yt)t=this.activeLink=new Iw(yt,this),yt.deps?(t.prevDep=yt.depsTail,yt.depsTail.nextDep=t,yt.depsTail=t):yt.deps=yt.depsTail=t,pg(t);else if(t.version===-1&&(t.version=this.version,t.nextDep)){const n=t.nextDep;n.prevDep=t.prevDep,t.prevDep&&(t.prevDep.nextDep=n),t.prevDep=yt.depsTail,t.nextDep=void 0,yt.depsTail.nextDep=t,yt.depsTail=t,yt.deps===t&&(yt.deps=n)}return yt.onTrack&&yt.onTrack(jt({effect:yt},e)),t}trigger(e){this.version++,_o++,this.notify(e)}notify(e){Zh();try{for(let t=this.subsHead;t;t=t.nextSub)t.sub.onTrigger&&!(t.sub.flags&8)&&t.sub.onTrigger(jt({effect:t.sub},e));for(let t=this.subs;t;t=t.prevSub)t.sub.notify()&&t.sub.dep.notify()}finally{Qh()}}}function pg(i){if(i.dep.sc++,i.sub.flags&4){const e=i.dep.computed;if(e&&!i.dep.subs){e.flags|=20;for(let n=e.deps;n;n=n.nextDep)pg(n)}const t=i.dep.subs;t!==i&&(i.prevSub=t,t&&(t.nextSub=i)),i.dep.subsHead===void 0&&(i.dep.subsHead=i),i.dep.subs=i}}const hl=new WeakMap,qr=Symbol("Object iterate"),nu=Symbol("Map keys iterate"),zo=Symbol("Array iterate");function Ut(i,e,t){if(fi&&yt){let n=hl.get(i);n||hl.set(i,n=new Map);let r=n.get(t);r||(n.set(t,r=new cl),r.map=n,r.key=t),r.track({target:i,type:e,key:t})}}function Ci(i,e,t,n,r,s){const o=hl.get(i);if(!o){_o++;return}const a=l=>{l&&l.trigger({target:i,type:e,key:t,newValue:n,oldValue:r,oldTarget:s})};if(Zh(),e==="clear")o.forEach(a);else{const l=He(i),c=l&&Gh(t);if(l&&t==="length"){const h=Number(n);o.forEach((u,d)=>{(d==="length"||d===zo||!hr(d)&&d>=h)&&a(u)})}else switch((t!==void 0||o.has(void 0))&&a(o.get(t)),c&&a(o.get(zo)),e){case"add":l?c&&a(o.get("length")):(a(o.get(qr)),$r(i)&&a(o.get(nu)));break;case"delete":l||(a(o.get(qr)),$r(i)&&a(o.get(nu)));break;case"set":$r(i)&&a(o.get(qr));break}}Qh()}function Pw(i,e){const t=hl.get(i);return t&&t.get(e)}function Fs(i){const e=et(i);return e===i?e:(Ut(e,"iterate",zo),En(i)?e:e.map(gn))}function ul(i){return Ut(i=et(i),"iterate",zo),i}const Lw={__proto__:null,[Symbol.iterator](){return iu(this,Symbol.iterator,gn)},concat(...i){return Fs(this).concat(...i.map(e=>He(e)?Fs(e):e))},entries(){return iu(this,"entries",i=>(i[1]=gn(i[1]),i))},every(i,e){return ji(this,"every",i,e,void 0,arguments)},filter(i,e){return ji(this,"filter",i,e,t=>t.map(gn),arguments)},find(i,e){return ji(this,"find",i,e,gn,arguments)},findIndex(i,e){return ji(this,"findIndex",i,e,void 0,arguments)},findLast(i,e){return ji(this,"findLast",i,e,gn,arguments)},findLastIndex(i,e){return ji(this,"findLastIndex",i,e,void 0,arguments)},forEach(i,e){return ji(this,"forEach",i,e,void 0,arguments)},includes(...i){return ru(this,"includes",i)},indexOf(...i){return ru(this,"indexOf",i)},join(i){return Fs(this).join(i)},lastIndexOf(...i){return ru(this,"lastIndexOf",i)},map(i,e){return ji(this,"map",i,e,void 0,arguments)},pop(){return Fo(this,"pop")},push(...i){return Fo(this,"push",i)},reduce(i,...e){return gg(this,"reduce",i,e)},reduceRight(i,...e){return gg(this,"reduceRight",i,e)},shift(){return Fo(this,"shift")},some(i,e){return ji(this,"some",i,e,void 0,arguments)},splice(...i){return Fo(this,"splice",i)},toReversed(){return Fs(this).toReversed()},toSorted(i){return Fs(this).toSorted(i)},toSpliced(...i){return Fs(this).toSpliced(...i)},unshift(...i){return Fo(this,"unshift",i)},values(){return iu(this,"values",gn)}};function iu(i,e,t){const n=ul(i),r=n[e]();return n!==i&&!En(i)&&(r._next=r.next,r.next=()=>{const s=r._next();return s.value&&(s.value=t(s.value)),s}),r}const Rw=Array.prototype;function ji(i,e,t,n,r,s){const o=ul(i),a=o!==i&&!En(i),l=o[e];if(l!==Rw[e]){const u=l.apply(i,s);return a?gn(u):u}let c=t;o!==i&&(a?c=function(u,d){return t.call(this,gn(u),d,i)}:t.length>2&&(c=function(u,d){return t.call(this,u,d,i)}));const h=l.call(o,c,n);return a&&r?r(h):h}function gg(i,e,t,n){const r=ul(i);let s=t;return r!==i&&(En(i)?t.length>3&&(s=function(o,a,l){return t.call(this,o,a,l,i)}):s=function(o,a,l){return t.call(this,o,gn(a),l,i)}),r[e](s,...n)}function ru(i,e,t){const n=et(i);Ut(n,"iterate",zo);const r=n[e](...t);return(r===-1||r===!1)&&Bo(t[0])?(t[0]=et(t[0]),n[e](...t)):r}function Fo(i,e,t=[]){Wi(),Zh();const n=et(i)[e].apply(i,t);return Qh(),Yi(),n}const Dw=Xi("__proto__,__v_isRef,__isVue"),mg=new Set(Object.getOwnPropertyNames(Symbol).filter(i=>i!=="arguments"&&i!=="caller").map(i=>Symbol[i]).filter(hr));function Nw(i){hr(i)||(i=String(i));const e=et(this);return Ut(e,"has",i),e.hasOwnProperty(i)}class xg{constructor(e=!1,t=!1){this._isReadonly=e,this._isShallow=t}get(e,t,n){if(t==="__v_skip")return e.__v_skip;const r=this._isReadonly,s=this._isShallow;if(t==="__v_isReactive")return!r;if(t==="__v_isReadonly")return r;if(t==="__v_isShallow")return s;if(t==="__v_raw")return n===(r?s?Cg:Sg:s?kg:wg).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(n)?e:void 0;const o=He(e);if(!r){let l;if(o&&(l=Lw[t]))return l;if(t==="hasOwnProperty")return Nw}const a=Reflect.get(e,t,Ht(e)?e:n);return(hr(t)?mg.has(t):Dw(t))||(r||Ut(e,"get",t),s)?a:Ht(a)?o&&Gh(t)?a:a.value:wt(a)?r?Ag(a):ou(a):a}}class bg extends xg{constructor(e=!1){super(!1,e)}set(e,t,n,r){let s=e[t];if(!this._isShallow){const l=Vi(s);if(!En(n)&&!Vi(n)&&(s=et(s),n=et(n)),!He(e)&&Ht(s)&&!Ht(n))return l?!1:(s.value=n,!0)}const o=He(e)&&Gh(t)?Number(t)<e.length:pt(e,t),a=Reflect.set(e,t,n,Ht(e)?e:r);return e===et(r)&&(o?dr(n,s)&&Ci(e,"set",t,n,s):Ci(e,"add",t,n)),a}deleteProperty(e,t){const n=pt(e,t),r=e[t],s=Reflect.deleteProperty(e,t);return s&&n&&Ci(e,"delete",t,void 0,r),s}has(e,t){const n=Reflect.has(e,t);return(!hr(t)||!mg.has(t))&&Ut(e,"has",t),n}ownKeys(e){return Ut(e,"iterate",He(e)?"length":qr),Reflect.ownKeys(e)}}class yg extends xg{constructor(e=!1){super(!0,e)}set(e,t){return di(`Set operation on key "${String(t)}" failed: target is readonly.`,e),!0}deleteProperty(e,t){return di(`Delete operation on key "${String(t)}" failed: target is readonly.`,e),!0}}const _w=new bg,zw=new yg,Fw=new bg(!0),Bw=new yg(!0),su=i=>i,dl=i=>Reflect.getPrototypeOf(i);function Hw(i,e,t){return function(...n){const r=this.__v_raw,s=et(r),o=$r(s),a=i==="entries"||i===Symbol.iterator&&o,l=i==="keys"&&o,c=r[i](...n),h=t?su:e?au:gn;return!e&&Ut(s,"iterate",l?nu:qr),{next(){const{value:u,done:d}=c.next();return d?{value:u,done:d}:{value:a?[h(u[0]),h(u[1])]:h(u),done:d}},[Symbol.iterator](){return this}}}}function fl(i){return function(...e){{const t=e[0]?`on key "${e[0]}" `:"";di(`${ol(i)} operation ${t}failed: target is readonly.`,et(this))}return i==="delete"?!1:i==="clear"?void 0:this}}function Xw(i,e){const t={get(r){const s=this.__v_raw,o=et(s),a=et(r);i||(dr(r,a)&&Ut(o,"get",r),Ut(o,"get",a));const{has:l}=dl(o),c=e?su:i?au:gn;if(l.call(o,r))return c(s.get(r));if(l.call(o,a))return c(s.get(a));s!==o&&s.get(r)},get size(){const r=this.__v_raw;return!i&&Ut(et(r),"iterate",qr),Reflect.get(r,"size",r)},has(r){const s=this.__v_raw,o=et(s),a=et(r);return i||(dr(r,a)&&Ut(o,"has",r),Ut(o,"has",a)),r===a?s.has(r):s.has(r)||s.has(a)},forEach(r,s){const o=this,a=o.__v_raw,l=et(a),c=e?su:i?au:gn;return!i&&Ut(l,"iterate",qr),a.forEach((h,u)=>r.call(s,c(h),c(u),o))}};return jt(t,i?{add:fl("add"),set:fl("set"),delete:fl("delete"),clear:fl("clear")}:{add(r){!e&&!En(r)&&!Vi(r)&&(r=et(r));const s=et(this);return dl(s).has.call(s,r)||(s.add(r),Ci(s,"add",r,r)),this},set(r,s){!e&&!En(s)&&!Vi(s)&&(s=et(s));const o=et(this),{has:a,get:l}=dl(o);let c=a.call(o,r);c?vg(o,a,r):(r=et(r),c=a.call(o,r));const h=l.call(o,r);return o.set(r,s),c?dr(s,h)&&Ci(o,"set",r,s,h):Ci(o,"add",r,s),this},delete(r){const s=et(this),{has:o,get:a}=dl(s);let l=o.call(s,r);l?vg(s,o,r):(r=et(r),l=o.call(s,r));const c=a?a.call(s,r):void 0,h=s.delete(r);return l&&Ci(s,"delete",r,void 0,c),h},clear(){const r=et(this),s=r.size!==0,o=$r(r)?new Map(r):new Set(r),a=r.clear();return s&&Ci(r,"clear",void 0,void 0,o),a}}),["keys","values","entries",Symbol.iterator].forEach(r=>{t[r]=Hw(r,i,e)}),t}function pl(i,e){const t=Xw(i,e);return(n,r,s)=>r==="__v_isReactive"?!i:r==="__v_isReadonly"?i:r==="__v_raw"?n:Reflect.get(pt(t,r)&&r in n?t:n,r,s)}const Ww={get:pl(!1,!1)},Yw={get:pl(!1,!0)},jw={get:pl(!0,!1)},Vw={get:pl(!0,!0)};function vg(i,e,t){const n=et(t);if(n!==t&&e.call(i,n)){const r=$h(i);di(`Reactive ${r} contains both the raw and reactive versions of the same object${r==="Map"?" as keys":""}, which can lead to inconsistencies. Avoid differentiating between the raw and reactive versions of an object and only use the reactive version if possible.`)}}const wg=new WeakMap,kg=new WeakMap,Sg=new WeakMap,Cg=new WeakMap;function $w(i){switch(i){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function Gw(i){return i.__v_skip||!Object.isExtensible(i)?0:$w($h(i))}function ou(i){return Vi(i)?i:gl(i,!1,_w,Ww,wg)}function qw(i){return gl(i,!1,Fw,Yw,kg)}function Ag(i){return gl(i,!0,zw,jw,Sg)}function Ai(i){return gl(i,!0,Bw,Vw,Cg)}function gl(i,e,t,n,r){if(!wt(i))return di(`value cannot be made ${e?"readonly":"reactive"}: ${String(i)}`),i;if(i.__v_raw&&!(e&&i.__v_isReactive))return i;const s=r.get(i);if(s)return s;const o=Gw(i);if(o===0)return i;const a=new Proxy(i,o===2?n:t);return r.set(i,a),a}function Ur(i){return Vi(i)?Ur(i.__v_raw):!!(i&&i.__v_isReactive)}function Vi(i){return!!(i&&i.__v_isReadonly)}function En(i){return!!(i&&i.__v_isShallow)}function Bo(i){return i?!!i.__v_raw:!1}function et(i){const e=i&&i.__v_raw;return e?et(e):i}function Mg(i){return!pt(i,"__v_skip")&&Object.isExtensible(i)&&al(i,"__v_skip",!0),i}const gn=i=>wt(i)?ou(i):i,au=i=>wt(i)?Ag(i):i;function Ht(i){return i?i.__v_isRef===!0:!1}function mn(i){return Uw(i,!1)}function Uw(i,e){return Ht(i)?i:new Kw(i,e)}class Kw{constructor(e,t){this.dep=new cl,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=t?e:et(e),this._value=t?e:gn(e),this.__v_isShallow=t}get value(){return this.dep.track({target:this,type:"get",key:"value"}),this._value}set value(e){const t=this._rawValue,n=this.__v_isShallow||En(e)||Vi(e);e=n?e:et(e),dr(e,t)&&(this._rawValue=e,this._value=n?e:gn(e),this.dep.trigger({target:this,type:"set",key:"value",newValue:e,oldValue:t}))}}function On(i){return Ht(i)?i.value:i}const Jw={get:(i,e,t)=>e==="__v_raw"?i:On(Reflect.get(i,e,t)),set:(i,e,t,n)=>{const r=i[e];return Ht(r)&&!Ht(t)?(r.value=t,!0):Reflect.set(i,e,t,n)}};function Tg(i){return Ur(i)?i:new Proxy(i,Jw)}class Zw{constructor(e){this.__v_isRef=!0,this._value=void 0;const t=this.dep=new cl,{get:n,set:r}=e(t.track.bind(t),t.trigger.bind(t));this._get=n,this._set=r}get value(){return this._value=this._get()}set value(e){this._set(e)}}function Qw(i){return new Zw(i)}function e1(i){Bo(i)||di("toRefs() expects a reactive object but received a plain one.");const e=He(i)?new Array(i.length):{};for(const t in i)e[t]=n1(i,t);return e}class t1{constructor(e,t,n){this._object=e,this._key=t,this._defaultValue=n,this.__v_isRef=!0,this._value=void 0}get value(){const e=this._object[this._key];return this._value=e===void 0?this._defaultValue:e}set value(e){this._object[this._key]=e}get dep(){return Pw(et(this._object),this._key)}}function n1(i,e,t){const n=i[e];return Ht(n)?n:new t1(i,e,t)}class i1{constructor(e,t,n){this.fn=e,this.setter=t,this._value=void 0,this.dep=new cl(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=_o-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!t,this.isSSR=n}notify(){if(this.flags|=16,!(this.flags&8)&&yt!==this)return lg(this,!0),!0}get value(){const e=this.dep.track({target:this,type:"get",key:"value"});return ug(this),e&&(e.version=this.dep.version),this._value}set value(e){this.setter?this.setter(e):di("Write operation failed: computed value is readonly")}}function r1(i,e,t=!1){let n,r;return je(i)?n=i:(n=i.get,r=i.set),new i1(n,r,t)}const ml={},xl=new WeakMap;let Kr;function s1(i,e=!1,t=Kr){if(t){let n=xl.get(t);n||xl.set(t,n=[]),n.push(i)}else e||di("onWatcherCleanup() was called when there was no active watcher to associate with.")}function o1(i,e,t=bt){const{immediate:n,deep:r,once:s,scheduler:o,augmentJob:a,call:l}=t,c=S=>{(t.onWarn||di)("Invalid watch source: ",S,"A watch source can only be a getter/effect function, a ref, a reactive object, or an array of these types.")},h=S=>r?S:En(S)||r===!1||r===0?$i(S,1):$i(S);let u,d,f,g,m=!1,b=!1;if(Ht(i)?(d=()=>i.value,m=En(i)):Ur(i)?(d=()=>h(i),m=!0):He(i)?(b=!0,m=i.some(S=>Ur(S)||En(S)),d=()=>i.map(S=>{if(Ht(S))return S.value;if(Ur(S))return h(S);if(je(S))return l?l(S,2):S();c(S)})):je(i)?e?d=l?()=>l(i,2):i:d=()=>{if(f){Wi();try{f()}finally{Yi()}}const S=Kr;Kr=u;try{return l?l(i,3,[g]):i(g)}finally{Kr=S}}:(d=pn,c(i)),e&&r){const S=d,O=r===!0?1/0:r;d=()=>$i(S(),O)}const y=Ew(),w=()=>{u.stop(),y&&y.active&&jh(y.effects,u)};if(s&&e){const S=e;e=(...O)=>{S(...O),w()}}let C=b?new Array(i.length).fill(ml):ml;const M=S=>{if(!(!(u.flags&1)||!u.dirty&&!S))if(e){const O=u.run();if(r||m||(b?O.some((T,I)=>dr(T,C[I])):dr(O,C))){f&&f();const T=Kr;Kr=u;try{const I=[O,C===ml?void 0:b&&C[0]===ml?[]:C,g];l?l(e,3,I):e(...I),C=O}finally{Kr=T}}}else u.run()};return a&&a(M),u=new og(d),u.scheduler=o?()=>o(M,!1):M,g=S=>s1(S,!1,u),f=u.onStop=()=>{const S=xl.get(u);if(S){if(l)l(S,4);else for(const O of S)O();xl.delete(u)}},u.onTrack=t.onTrack,u.onTrigger=t.onTrigger,e?n?M(!0):C=u.run():o?o(M.bind(null,!0),!0):u.run(),w.pause=u.pause.bind(u),w.resume=u.resume.bind(u),w.stop=w,w}function $i(i,e=1/0,t){if(e<=0||!wt(i)||i.__v_skip||(t=t||new Set,t.has(i)))return i;if(t.add(i),e--,Ht(i))$i(i.value,e,t);else if(He(i))for(let n=0;n<i.length;n++)$i(i[n],e,t);else if(Qp(i)||$r(i))i.forEach(n=>{$i(n,e,t)});else if(tg(i)){for(const n in i)$i(i[n],e,t);for(const n of Object.getOwnPropertySymbols(i))Object.prototype.propertyIsEnumerable.call(i,n)&&$i(i[n],e,t)}return i}/**
    * @vue/runtime-core v3.5.13
    * (c) 2018-present Yuxi (Evan) You and Vue contributors
    * @license MIT
    **/const Jr=[];function bl(i){Jr.push(i)}function yl(){Jr.pop()}let lu=!1;function ve(i,...e){if(lu)return;lu=!0,Wi();const t=Jr.length?Jr[Jr.length-1].component:null,n=t&&t.appContext.config.warnHandler,r=a1();if(n)Bs(n,t,11,[i+e.map(s=>{var o,a;return(a=(o=s.toString)==null?void 0:o.call(s))!=null?a:JSON.stringify(s)}).join(""),t&&t.proxy,r.map(({vnode:s})=>`at <${Bl(t,s.type)}>`).join(`
    `),r]);else{const s=[`[Vue warn]: ${i}`,...e];r.length&&s.push(`
    `,...l1(r)),console.warn(...s)}Yi(),lu=!1}function a1(){let i=Jr[Jr.length-1];if(!i)return[];const e=[];for(;i;){const t=e[0];t&&t.vnode===i?t.recurseCount++:e.push({vnode:i,recurseCount:0});const n=i.component&&i.component.parent;i=n&&n.vnode}return e}function l1(i){const e=[];return i.forEach((t,n)=>{e.push(...n===0?[]:[`
    `],...c1(t))}),e}function c1({vnode:i,recurseCount:e}){const t=e>0?`... (${e} recursive calls)`:"",n=i.component?i.component.parent==null:!1,r=` at <${Bl(i.component,i.type,n)}`,s=">"+t;return i.props?[r,...h1(i.props),s]:[r+s]}function h1(i){const e=[],t=Object.keys(i);return t.slice(0,3).forEach(n=>{e.push(...Eg(n,i[n]))}),t.length>3&&e.push(" ..."),e}function Eg(i,e,t){return Dt(e)?(e=JSON.stringify(e),t?e:[`${i}=${e}`]):typeof e=="number"||typeof e=="boolean"||e==null?t?e:[`${i}=${e}`]:Ht(e)?(e=Eg(i,et(e.value),!0),t?e:[`${i}=Ref<`,e,">"]):je(e)?[`${i}=fn${e.name?`<${e.name}>`:""}`]:(e=et(e),t?e:[`${i}=`,e])}const cu={sp:"serverPrefetch hook",bc:"beforeCreate hook",c:"created hook",bm:"beforeMount hook",m:"mounted hook",bu:"beforeUpdate hook",u:"updated",bum:"beforeUnmount hook",um:"unmounted hook",a:"activated hook",da:"deactivated hook",ec:"errorCaptured hook",rtc:"renderTracked hook",rtg:"renderTriggered hook",0:"setup function",1:"render function",2:"watcher getter",3:"watcher callback",4:"watcher cleanup function",5:"native event handler",6:"component event handler",7:"vnode hook",8:"directive hook",9:"transition hook",10:"app errorHandler",11:"app warnHandler",12:"ref function",13:"async component loader",14:"scheduler flush",15:"component update",16:"app unmount cleanup function"};function Bs(i,e,t,n){try{return n?i(...n):i()}catch(r){Ho(r,e,t)}}function Mi(i,e,t,n){if(je(i)){const r=Bs(i,e,t,n);return r&&Vh(r)&&r.catch(s=>{Ho(s,e,t)}),r}if(He(i)){const r=[];for(let s=0;s<i.length;s++)r.push(Mi(i[s],e,t,n));return r}else ve(`Invalid value type passed to callWithAsyncErrorHandling(): ${typeof i}`)}function Ho(i,e,t,n=!0){const r=e?e.vnode:null,{errorHandler:s,throwUnhandledErrorInProduction:o}=e&&e.appContext.config||bt;if(e){let a=e.parent;const l=e.proxy,c=cu[t];for(;a;){const h=a.ec;if(h){for(let u=0;u<h.length;u++)if(h[u](i,l,c)===!1)return}a=a.parent}if(s){Wi(),Bs(s,null,10,[i,l,c]),Yi();return}}u1(i,t,r,n,o)}function u1(i,e,t,n=!0,r=!1){{const s=cu[e];if(t&&bl(t),ve(`Unhandled error${s?` during execution of ${s}`:""}`),t&&yl(),n)throw i;console.error(i)}}const In=[];let Ti=-1;const Hs=[];let fr=null,Xs=0;const Og=Promise.resolve();let vl=null;const d1=100;function wl(i){const e=vl||Og;return i?e.then(this?i.bind(this):i):e}function f1(i){let e=Ti+1,t=In.length;for(;e<t;){const n=e+t>>>1,r=In[n],s=Xo(r);s<i||s===i&&r.flags&2?e=n+1:t=n}return e}function kl(i){if(!(i.flags&1)){const e=Xo(i),t=In[In.length-1];!t||!(i.flags&2)&&e>=Xo(t)?In.push(i):In.splice(f1(e),0,i),i.flags|=1,Ig()}}function Ig(){vl||(vl=Og.then(Dg))}function Pg(i){He(i)?Hs.push(...i):fr&&i.id===-1?fr.splice(Xs+1,0,i):i.flags&1||(Hs.push(i),i.flags|=1),Ig()}function Lg(i,e,t=Ti+1){for(e=e||new Map;t<In.length;t++){const n=In[t];if(n&&n.flags&2){if(i&&n.id!==i.uid||hu(e,n))continue;In.splice(t,1),t--,n.flags&4&&(n.flags&=-2),n(),n.flags&4||(n.flags&=-2)}}}function Rg(i){if(Hs.length){const e=[...new Set(Hs)].sort((t,n)=>Xo(t)-Xo(n));if(Hs.length=0,fr){fr.push(...e);return}for(fr=e,i=i||new Map,Xs=0;Xs<fr.length;Xs++){const t=fr[Xs];hu(i,t)||(t.flags&4&&(t.flags&=-2),t.flags&8||t(),t.flags&=-2)}fr=null,Xs=0}}const Xo=i=>i.id==null?i.flags&2?-1:1/0:i.id;function Dg(i){i=i||new Map;const e=t=>hu(i,t);try{for(Ti=0;Ti<In.length;Ti++){const t=In[Ti];if(t&&!(t.flags&8)){if(e(t))continue;t.flags&4&&(t.flags&=-2),Bs(t,t.i,t.i?15:14),t.flags&4||(t.flags&=-2)}}}finally{for(;Ti<In.length;Ti++){const t=In[Ti];t&&(t.flags&=-2)}Ti=-1,In.length=0,Rg(i),vl=null,(In.length||Hs.length)&&Dg(i)}}function hu(i,e){const t=i.get(e)||0;if(t>d1){const n=e.i,r=n&&Im(n.type);return Ho(`Maximum recursive updates exceeded${r?` in component <${r}>`:""}. This means you have a reactive effect that is mutating its own dependencies and thus recursively triggering itself. Possible sources include component template, render function, updated hook or watcher source function.`,null,10),!0}return i.set(e,t+1),!1}let Ei=!1;const Sl=new Map;Ro().__VUE_HMR_RUNTIME__={createRecord:uu(Ng),rerender:uu(m1),reload:uu(x1)};const Zr=new Map;function p1(i){const e=i.type.__hmrId;let t=Zr.get(e);t||(Ng(e,i.type),t=Zr.get(e)),t.instances.add(i)}function g1(i){Zr.get(i.type.__hmrId).instances.delete(i)}function Ng(i,e){return Zr.has(i)?!1:(Zr.set(i,{initialDef:Cl(e),instances:new Set}),!0)}function Cl(i){return Pm(i)?i.__vccOpts:i}function m1(i,e){const t=Zr.get(i);t&&(t.initialDef.render=e,[...t.instances].forEach(n=>{e&&(n.render=e,Cl(n.type).render=e),n.renderCache=[],Ei=!0,n.update(),Ei=!1}))}function x1(i,e){const t=Zr.get(i);if(!t)return;e=Cl(e),_g(t.initialDef,e);const n=[...t.instances];for(let r=0;r<n.length;r++){const s=n[r],o=Cl(s.type);let a=Sl.get(o);a||(o!==t.initialDef&&_g(o,e),Sl.set(o,a=new Set)),a.add(s),s.appContext.propsCache.delete(s.type),s.appContext.emitsCache.delete(s.type),s.appContext.optionsCache.delete(s.type),s.ceReload?(a.add(s),s.ceReload(e.styles),a.delete(s)):s.parent?kl(()=>{Ei=!0,s.parent.update(),Ei=!1,a.delete(s)}):s.appContext.reload?s.appContext.reload():typeof window<"u"?window.location.reload():console.warn("[HMR] Root or manually mounted instance modified. Full reload required."),s.root.ce&&s!==s.root&&s.root.ce._removeChildStyle(o)}Pg(()=>{Sl.clear()})}function _g(i,e){jt(i,e);for(const t in i)t!=="__file"&&!(t in e)&&delete i[t]}function uu(i){return(e,t)=>{try{return i(e,t)}catch(n){console.error(n),console.warn("[HMR] Something went wrong during Vue component hot-reload. Full reload required.")}}}let Oi,Wo=[],du=!1;function Yo(i,...e){Oi?Oi.emit(i,...e):du||Wo.push({event:i,args:e})}function zg(i,e){var t,n;Oi=i,Oi?(Oi.enabled=!0,Wo.forEach(({event:r,args:s})=>Oi.emit(r,...s)),Wo=[]):typeof window<"u"&&window.HTMLElement&&!((n=(t=window.navigator)==null?void 0:t.userAgent)!=null&&n.includes("jsdom"))?((e.__VUE_DEVTOOLS_HOOK_REPLAY__=e.__VUE_DEVTOOLS_HOOK_REPLAY__||[]).push(s=>{zg(s,e)}),setTimeout(()=>{Oi||(e.__VUE_DEVTOOLS_HOOK_REPLAY__=null,du=!0,Wo=[])},3e3)):(du=!0,Wo=[])}function b1(i,e){Yo("app:init",i,e,{Fragment:pi,Text:Go,Comment:Vn,Static:Nl})}function y1(i){Yo("app:unmount",i)}const v1=fu("component:added"),Fg=fu("component:updated"),w1=fu("component:removed"),k1=i=>{Oi&&typeof Oi.cleanupBuffer=="function"&&!Oi.cleanupBuffer(i)&&w1(i)};/*! #__NO_SIDE_EFFECTS__ */function fu(i){return e=>{Yo(i,e.appContext.app,e.uid,e.parent?e.parent.uid:void 0,e)}}const S1=Bg("perf:start"),C1=Bg("perf:end");function Bg(i){return(e,t,n)=>{Yo(i,e.appContext.app,e.uid,e,t,n)}}function A1(i,e,t){Yo("component:emit",i.appContext.app,i,e,t)}let Pn=null,Hg=null;function Al(i){const e=Pn;return Pn=i,Hg=i&&i.type.__scopeId||null,e}function M1(i,e=Pn,t){if(!e||i._n)return i;const n=(...r)=>{n._d&&km(-1);const s=Al(e);let o;try{o=i(...r)}finally{Al(s),n._d&&km(1)}return Fg(e),o};return n._n=!0,n._c=!0,n._d=!0,n}function Xg(i){fw(i)&&ve("Do not use built-in directive ids as custom directive id: "+i)}function Wg(i,e){if(Pn===null)return ve("withDirectives can only be used inside render functions."),i;const t=Fl(Pn),n=i.dirs||(i.dirs=[]);for(let r=0;r<e.length;r++){let[s,o,a,l=bt]=e[r];s&&(je(s)&&(s={mounted:s,updated:s}),s.deep&&$i(o),n.push({dir:s,instance:t,value:o,oldValue:void 0,arg:a,modifiers:l}))}return i}function Qr(i,e,t,n){const r=i.dirs,s=e&&e.dirs;for(let o=0;o<r.length;o++){const a=r[o];s&&(a.oldValue=s[o].value);let l=a.dir[n];l&&(Wi(),Mi(l,t,8,[i.el,a,i,e]),Yi())}}const T1=Symbol("_vte"),E1=i=>i.__isTeleport;function pu(i,e){i.shapeFlag&6&&i.component?(i.transition=e,pu(i.component.subTree,e)):i.shapeFlag&128?(i.ssContent.transition=e.clone(i.ssContent),i.ssFallback.transition=e.clone(i.ssFallback)):i.transition=e}/*! #__NO_SIDE_EFFECTS__ */function Ml(i,e){return je(i)?jt({name:i.name},e,{setup:i}):i}function Yg(i){i.ids=[i.ids[0]+i.ids[2]+++"-",0,0]}const O1=new WeakSet;function Tl(i,e,t,n,r=!1){if(He(i)){i.forEach((g,m)=>Tl(g,e&&(He(e)?e[m]:e),t,n,r));return}if(jo(n)&&!r){n.shapeFlag&512&&n.type.__asyncResolved&&n.component.subTree.component&&Tl(i,e,t,n.component.subTree);return}const s=n.shapeFlag&4?Fl(n.component):n.el,o=r?null:s,{i:a,r:l}=i;if(!a){ve("Missing ref owner context. ref cannot be used on hoisted vnodes. A vnode with ref must be created inside the render function.");return}const c=e&&e.r,h=a.refs===bt?a.refs={}:a.refs,u=a.setupState,d=et(u),f=u===bt?()=>!1:g=>(pt(d,g)&&!Ht(d[g])&&ve(`Template ref "${g}" used on a non-ref value. It will not work in the production build.`),O1.has(d[g])?!1:pt(d,g));if(c!=null&&c!==l&&(Dt(c)?(h[c]=null,f(c)&&(u[c]=null)):Ht(c)&&(c.value=null)),je(l))Bs(l,a,12,[o,h]);else{const g=Dt(l),m=Ht(l);if(g||m){const b=()=>{if(i.f){const y=g?f(l)?u[l]:h[l]:l.value;r?He(y)&&jh(y,s):He(y)?y.includes(s)||y.push(s):g?(h[l]=[s],f(l)&&(u[l]=h[l])):(l.value=[s],i.k&&(h[i.k]=l.value))}else g?(h[l]=o,f(l)&&(u[l]=o)):m?(l.value=o,i.k&&(h[i.k]=o)):ve("Invalid template ref type:",l,`(${typeof l})`)};o?(b.id=-1,jn(b,t)):b()}else ve("Invalid template ref type:",l,`(${typeof l})`)}}Ro().requestIdleCallback,Ro().cancelIdleCallback;const jo=i=>!!i.type.__asyncLoader,gu=i=>i.type.__isKeepAlive;function I1(i,e){jg(i,"a",e)}function P1(i,e){jg(i,"da",e)}function jg(i,e,t=Kt){const n=i.__wdc||(i.__wdc=()=>{let r=t;for(;r;){if(r.isDeactivated)return;r=r.parent}return i()});if(El(e,n,t),t){let r=t.parent;for(;r&&r.parent;)gu(r.parent.vnode)&&L1(n,e,t,r),r=r.parent}}function L1(i,e,t,n){const r=El(e,i,n,!0);$g(()=>{jh(n[e],r)},t)}function El(i,e,t=Kt,n=!1){if(t){const r=t[i]||(t[i]=[]),s=e.__weh||(e.__weh=(...o)=>{Wi();const a=Qo(t),l=Mi(e,t,i,o);return a(),Yi(),l});return n?r.unshift(s):r.push(s),s}else{const r=Gr(cu[i].replace(/ hook$/,""));ve(`${r} is called when there is no active component instance to be associated with. Lifecycle injection APIs can only be used during execution of setup(). If you are using async setup(), make sure to register lifecycle hooks before the first await statement.`)}}const Gi=i=>(e,t=Kt)=>{(!ea||i==="sp")&&El(i,(...n)=>e(...n),t)},Vg=Gi("bm"),Ol=Gi("m"),R1=Gi("bu"),D1=Gi("u"),mu=Gi("bum"),$g=Gi("um"),N1=Gi("sp"),_1=Gi("rtg"),z1=Gi("rtc");function F1(i,e=Kt){El("ec",i,e)}const B1=Symbol.for("v-ndc");function H1(i,e,t,n){let r;const s=t,o=He(i);if(o||Dt(i)){const a=o&&Ur(i);let l=!1;a&&(l=!En(i),i=ul(i)),r=new Array(i.length);for(let c=0,h=i.length;c<h;c++)r[c]=e(l?gn(i[c]):i[c],c,void 0,s)}else if(typeof i=="number"){Number.isInteger(i)||ve(`The v-for range expect an integer value but got ${i}.`),r=new Array(i);for(let a=0;a<i;a++)r[a]=e(a+1,a,void 0,s)}else if(wt(i))if(i[Symbol.iterator])r=Array.from(i,(a,l)=>e(a,l,void 0,s));else{const a=Object.keys(i);r=new Array(a.length);for(let l=0,c=a.length;l<c;l++){const h=a[l];r[l]=e(i[h],h,l,s)}}else r=[];return r}const xu=i=>i?Tm(i)?Fl(i):xu(i.parent):null,es=jt(Object.create(null),{$:i=>i,$el:i=>i.vnode.el,$data:i=>i.data,$props:i=>Ai(i.props),$attrs:i=>Ai(i.attrs),$slots:i=>Ai(i.slots),$refs:i=>Ai(i.refs),$parent:i=>xu(i.parent),$root:i=>xu(i.root),$host:i=>i.ce,$emit:i=>i.emit,$options:i=>Jg(i),$forceUpdate:i=>i.f||(i.f=()=>{kl(i.update)}),$nextTick:i=>i.n||(i.n=wl.bind(i.proxy)),$watch:i=>vk.bind(i)}),bu=i=>i==="_"||i==="$",yu=(i,e)=>i!==bt&&!i.__isScriptSetup&&pt(i,e),Gg={get({_:i},e){if(e==="__v_skip")return!0;const{ctx:t,setupState:n,data:r,props:s,accessCache:o,type:a,appContext:l}=i;if(e==="__isVue")return!0;let c;if(e[0]!=="$"){const f=o[e];if(f!==void 0)switch(f){case 1:return n[e];case 2:return r[e];case 4:return t[e];case 3:return s[e]}else{if(yu(n,e))return o[e]=1,n[e];if(r!==bt&&pt(r,e))return o[e]=2,r[e];if((c=i.propsOptions[0])&&pt(c,e))return o[e]=3,s[e];if(t!==bt&&pt(t,e))return o[e]=4,t[e];vu&&(o[e]=0)}}const h=es[e];let u,d;if(h)return e==="$attrs"?(Ut(i.attrs,"get",""),Dl()):e==="$slots"&&Ut(i,"get",e),h(i);if((u=a.__cssModules)&&(u=u[e]))return u;if(t!==bt&&pt(t,e))return o[e]=4,t[e];if(d=l.config.globalProperties,pt(d,e))return d[e];Pn&&(!Dt(e)||e.indexOf("__v")!==0)&&(r!==bt&&bu(e[0])&&pt(r,e)?ve(`Property ${JSON.stringify(e)} must be accessed via $data because it starts with a reserved character ("$" or "_") and is not proxied on the render context.`):i===Pn&&ve(`Property ${JSON.stringify(e)} was accessed during render but is not defined on instance.`))},set({_:i},e,t){const{data:n,setupState:r,ctx:s}=i;return yu(r,e)?(r[e]=t,!0):r.__isScriptSetup&&pt(r,e)?(ve(`Cannot mutate <script setup> binding "${e}" from Options API.`),!1):n!==bt&&pt(n,e)?(n[e]=t,!0):pt(i.props,e)?(ve(`Attempting to mutate prop "${e}". Props are readonly.`),!1):e[0]==="$"&&e.slice(1)in i?(ve(`Attempting to mutate public property "${e}". Properties starting with $ are reserved and readonly.`),!1):(e in i.appContext.config.globalProperties?Object.defineProperty(s,e,{enumerable:!0,configurable:!0,value:t}):s[e]=t,!0)},has({_:{data:i,setupState:e,accessCache:t,ctx:n,appContext:r,propsOptions:s}},o){let a;return!!t[o]||i!==bt&&pt(i,o)||yu(e,o)||(a=s[0])&&pt(a,o)||pt(n,o)||pt(es,o)||pt(r.config.globalProperties,o)},defineProperty(i,e,t){return t.get!=null?i._.accessCache[e]=0:pt(t,"value")&&this.set(i,e,t.value,null),Reflect.defineProperty(i,e,t)}};Gg.ownKeys=i=>(ve("Avoid app logic that relies on enumerating keys on a component instance. The keys will be empty in production mode to avoid performance overhead."),Reflect.ownKeys(i));function X1(i){const e={};return Object.defineProperty(e,"_",{configurable:!0,enumerable:!1,get:()=>i}),Object.keys(es).forEach(t=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,get:()=>es[t](i),set:pn})}),e}function W1(i){const{ctx:e,propsOptions:[t]}=i;t&&Object.keys(t).forEach(n=>{Object.defineProperty(e,n,{enumerable:!0,configurable:!0,get:()=>i.props[n],set:pn})})}function Y1(i){const{ctx:e,setupState:t}=i;Object.keys(et(t)).forEach(n=>{if(!t.__isScriptSetup){if(bu(n[0])){ve(`setup() return property ${JSON.stringify(n)} should not start with "$" or "_" which are reserved prefixes for Vue internals.`);return}Object.defineProperty(e,n,{enumerable:!0,configurable:!0,get:()=>t[n],set:pn})}})}function qg(i){return He(i)?i.reduce((e,t)=>(e[t]=null,e),{}):i}function j1(){const i=Object.create(null);return(e,t)=>{i[t]?ve(`${e} property "${t}" is already defined in ${i[t]}.`):i[t]=e}}let vu=!0;function V1(i){const e=Jg(i),t=i.proxy,n=i.ctx;vu=!1,e.beforeCreate&&Ug(e.beforeCreate,i,"bc");const{data:r,computed:s,methods:o,watch:a,provide:l,inject:c,created:h,beforeMount:u,mounted:d,beforeUpdate:f,updated:g,activated:m,deactivated:b,beforeDestroy:y,beforeUnmount:w,destroyed:C,unmounted:M,render:S,renderTracked:O,renderTriggered:T,errorCaptured:I,serverPrefetch:R,expose:z,inheritAttrs:D,components:B,directives:K,filters:J}=e,se=j1();{const[ie]=i.propsOptions;if(ie)for(const ae in ie)se("Props",ae)}if(c&&$1(c,n,se),o)for(const ie in o){const ae=o[ie];je(ae)?(Object.defineProperty(n,ie,{value:ae.bind(t),configurable:!0,enumerable:!0,writable:!0}),se("Methods",ie)):ve(`Method "${ie}" has type "${typeof ae}" in the component definition. Did you reference the function correctly?`)}if(r){je(r)||ve("The data option must be a function. Plain object usage is no longer supported.");const ie=r.call(t,t);if(Vh(ie)&&ve("data() returned a Promise - note data() cannot be async; If you intend to perform data fetching before component renders, use async setup() + <Suspense>."),!wt(ie))ve("data() should return an object.");else{i.data=ou(ie);for(const ae in ie)se("Data",ae),bu(ae[0])||Object.defineProperty(n,ae,{configurable:!0,enumerable:!0,get:()=>ie[ae],set:pn})}}if(vu=!0,s)for(const ie in s){const ae=s[ie],Me=je(ae)?ae.bind(t,t):je(ae.get)?ae.get.bind(t,t):pn;Me===pn&&ve(`Computed property "${ie}" has no getter.`);const Re=!je(ae)&&je(ae.set)?ae.set.bind(t):()=>{ve(`Write operation failed: computed property "${ie}" is readonly.`)},_e=Du({get:Me,set:Re});Object.defineProperty(n,ie,{enumerable:!0,configurable:!0,get:()=>_e.value,set:Je=>_e.value=Je}),se("Computed",ie)}if(a)for(const ie in a)Kg(a[ie],n,t,ie);if(l){const ie=je(l)?l.call(t):l;Reflect.ownKeys(ie).forEach(ae=>{Z1(ae,ie[ae])})}h&&Ug(h,i,"c");function ne(ie,ae){He(ae)?ae.forEach(Me=>ie(Me.bind(t))):ae&&ie(ae.bind(t))}if(ne(Vg,u),ne(Ol,d),ne(R1,f),ne(D1,g),ne(I1,m),ne(P1,b),ne(F1,I),ne(z1,O),ne(_1,T),ne(mu,w),ne($g,M),ne(N1,R),He(z))if(z.length){const ie=i.exposed||(i.exposed={});z.forEach(ae=>{Object.defineProperty(ie,ae,{get:()=>t[ae],set:Me=>t[ae]=Me})})}else i.exposed||(i.exposed={});S&&i.render===pn&&(i.render=S),D!=null&&(i.inheritAttrs=D),B&&(i.components=B),K&&(i.directives=K),R&&Yg(i)}function $1(i,e,t=pn){He(i)&&(i=wu(i));for(const n in i){const r=i[n];let s;wt(r)?"default"in r?s=Pl(r.from||n,r.default,!0):s=Pl(r.from||n):s=Pl(r),Ht(s)?Object.defineProperty(e,n,{enumerable:!0,configurable:!0,get:()=>s.value,set:o=>s.value=o}):e[n]=s,t("Inject",n)}}function Ug(i,e,t){Mi(He(i)?i.map(n=>n.bind(e.proxy)):i.bind(e.proxy),e,t)}function Kg(i,e,t,n){let r=n.includes(".")?gm(t,n):()=>t[n];if(Dt(i)){const s=e[i];je(s)?qi(r,s):ve(`Invalid watch handler specified by key "${i}"`,s)}else if(je(i))qi(r,i.bind(t));else if(wt(i))if(He(i))i.forEach(s=>Kg(s,e,t,n));else{const s=je(i.handler)?i.handler.bind(t):e[i.handler];je(s)?qi(r,s,i):ve(`Invalid watch handler specified by key "${i.handler}"`,s)}else ve(`Invalid watch option: "${n}"`,i)}function Jg(i){const e=i.type,{mixins:t,extends:n}=e,{mixins:r,optionsCache:s,config:{optionMergeStrategies:o}}=i.appContext,a=s.get(e);let l;return a?l=a:!r.length&&!t&&!n?l=e:(l={},r.length&&r.forEach(c=>Il(l,c,o,!0)),Il(l,e,o)),wt(e)&&s.set(e,l),l}function Il(i,e,t,n=!1){const{mixins:r,extends:s}=e;s&&Il(i,s,t,!0),r&&r.forEach(o=>Il(i,o,t,!0));for(const o in e)if(n&&o==="expose")ve('"expose" option is ignored when declared in mixins or extends. It should only be declared in the base component itself.');else{const a=G1[o]||t&&t[o];i[o]=a?a(i[o],e[o]):e[o]}return i}const G1={data:Zg,props:Qg,emits:Qg,methods:Vo,computed:Vo,beforeCreate:Ln,created:Ln,beforeMount:Ln,mounted:Ln,beforeUpdate:Ln,updated:Ln,beforeDestroy:Ln,beforeUnmount:Ln,destroyed:Ln,unmounted:Ln,activated:Ln,deactivated:Ln,errorCaptured:Ln,serverPrefetch:Ln,components:Vo,directives:Vo,watch:U1,provide:Zg,inject:q1};function Zg(i,e){return e?i?function(){return jt(je(i)?i.call(this,this):i,je(e)?e.call(this,this):e)}:e:i}function q1(i,e){return Vo(wu(i),wu(e))}function wu(i){if(He(i)){const e={};for(let t=0;t<i.length;t++)e[i[t]]=i[t];return e}return i}function Ln(i,e){return i?[...new Set([].concat(i,e))]:e}function Vo(i,e){return i?jt(Object.create(null),i,e):e}function Qg(i,e){return i?He(i)&&He(e)?[...new Set([...i,...e])]:jt(Object.create(null),qg(i),qg(e??{})):e}function U1(i,e){if(!i)return e;if(!e)return i;const t=jt(Object.create(null),i);for(const n in e)t[n]=Ln(i[n],e[n]);return t}function em(){return{app:null,config:{isNativeTag:uw,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let K1=0;function J1(i,e){return function(n,r=null){je(n)||(n=jt({},n)),r!=null&&!wt(r)&&(ve("root props passed to app.mount() must be an object."),r=null);const s=em(),o=new WeakSet,a=[];let l=!1;const c=s.app={_uid:K1++,_component:n,_props:r,_container:null,_context:s,_instance:null,version:Lm,get config(){return s.config},set config(h){ve("app.config cannot be replaced. Modify individual options instead.")},use(h,...u){return o.has(h)?ve("Plugin has already been applied to target app."):h&&je(h.install)?(o.add(h),h.install(c,...u)):je(h)?(o.add(h),h(c,...u)):ve('A plugin must either be a function or an object with an "install" function.'),c},mixin(h){return s.mixins.includes(h)?ve("Mixin has already been applied to target app"+(h.name?`: ${h.name}`:"")):s.mixins.push(h),c},component(h,u){return Ru(h,s.config),u?(s.components[h]&&ve(`Component "${h}" has already been registered in target app.`),s.components[h]=u,c):s.components[h]},directive(h,u){return Xg(h),u?(s.directives[h]&&ve(`Directive "${h}" has already been registered in target app.`),s.directives[h]=u,c):s.directives[h]},mount(h,u,d){if(l)ve("App has already been mounted.\nIf you want to remount the same app, move your app creation logic into a factory function and create fresh app instances for each mount - e.g. `const createMyApp = () => createApp(App)`");else{h.__vue_app__&&ve("There is already an app instance mounted on the host container.\n If you want to mount another app on the same host container, you need to unmount the previous app by calling `app.unmount()` first.");const f=c._ceVNode||Nt(n,r);return f.appContext=s,d===!0?d="svg":d===!1&&(d=void 0),s.reload=()=>{i(gr(f),h,d)},i(f,h,d),l=!0,c._container=h,h.__vue_app__=c,c._instance=f.component,b1(c,Lm),Fl(f.component)}},onUnmount(h){typeof h!="function"&&ve(`Expected function as first argument to app.onUnmount(), but got ${typeof h}`),a.push(h)},unmount(){l?(Mi(a,c._instance,16),i(null,c._container),c._instance=null,y1(c),delete c._container.__vue_app__):ve("Cannot unmount an app that is not mounted.")},provide(h,u){return h in s.provides&&ve(`App already provides property with key "${String(h)}". It will be overwritten with the new value.`),s.provides[h]=u,c},runWithContext(h){const u=Ws;Ws=c;try{return h()}finally{Ws=u}}};return c}}let Ws=null;function Z1(i,e){if(!Kt)ve("provide() can only be used inside setup().");else{let t=Kt.provides;const n=Kt.parent&&Kt.parent.provides;n===t&&(t=Kt.provides=Object.create(n)),t[i]=e}}function Pl(i,e,t=!1){const n=Kt||Pn;if(n||Ws){const r=Ws?Ws._context.provides:n?n.parent==null?n.vnode.appContext&&n.vnode.appContext.provides:n.parent.provides:void 0;if(r&&i in r)return r[i];if(arguments.length>1)return t&&je(e)?e.call(n&&n.proxy):e;ve(`injection "${String(i)}" not found.`)}else ve("inject() can only be used inside setup() or functional components.")}const tm={},nm=()=>Object.create(tm),im=i=>Object.getPrototypeOf(i)===tm;function Q1(i,e,t,n=!1){const r={},s=nm();i.propsDefaults=Object.create(null),rm(i,e,r,s);for(const o in i.propsOptions[0])o in r||(r[o]=void 0);am(e||{},r,i),t?i.props=n?r:qw(r):i.type.props?i.props=r:i.props=s,i.attrs=s}function ek(i){for(;i;){if(i.type.__hmrId)return!0;i=i.parent}}function tk(i,e,t,n){const{props:r,attrs:s,vnode:{patchFlag:o}}=i,a=et(r),[l]=i.propsOptions;let c=!1;if(!ek(i)&&(n||o>0)&&!(o&16)){if(o&8){const h=i.vnode.dynamicProps;for(let u=0;u<h.length;u++){let d=h[u];if(Rl(i.emitsOptions,d))continue;const f=e[d];if(l)if(pt(s,d))f!==s[d]&&(s[d]=f,c=!0);else{const g=ui(d);r[g]=ku(l,a,g,f,i,!1)}else f!==s[d]&&(s[d]=f,c=!0)}}}else{rm(i,e,r,s)&&(c=!0);let h;for(const u in a)(!e||!pt(e,u)&&((h=ur(u))===u||!pt(e,h)))&&(l?t&&(t[u]!==void 0||t[h]!==void 0)&&(r[u]=ku(l,a,u,void 0,i,!0)):delete r[u]);if(s!==a)for(const u in s)(!e||!pt(e,u))&&(delete s[u],c=!0)}c&&Ci(i.attrs,"set",""),am(e||{},r,i)}function rm(i,e,t,n){const[r,s]=i.propsOptions;let o=!1,a;if(e)for(let l in e){if(Lo(l))continue;const c=e[l];let h;r&&pt(r,h=ui(l))?!s||!s.includes(h)?t[h]=c:(a||(a={}))[h]=c:Rl(i.emitsOptions,l)||(!(l in n)||c!==n[l])&&(n[l]=c,o=!0)}if(s){const l=et(t),c=a||bt;for(let h=0;h<s.length;h++){const u=s[h];t[u]=ku(r,l,u,c[u],i,!pt(c,u))}}return o}function ku(i,e,t,n,r,s){const o=i[t];if(o!=null){const a=pt(o,"default");if(a&&n===void 0){const l=o.default;if(o.type!==Function&&!o.skipFactory&&je(l)){const{propsDefaults:c}=r;if(t in c)n=c[t];else{const h=Qo(r);n=c[t]=l.call(null,e),h()}}else n=l;r.ce&&r.ce._setProp(t,n)}o[0]&&(s&&!a?n=!1:o[1]&&(n===""||n===ur(t))&&(n=!0))}return n}const nk=new WeakMap;function sm(i,e,t=!1){const n=t?nk:e.propsCache,r=n.get(i);if(r)return r;const s=i.props,o={},a=[];let l=!1;if(!je(i)){const h=u=>{l=!0;const[d,f]=sm(u,e,!0);jt(o,d),f&&a.push(...f)};!t&&e.mixins.length&&e.mixins.forEach(h),i.extends&&h(i.extends),i.mixins&&i.mixins.forEach(h)}if(!s&&!l)return wt(i)&&n.set(i,_s),_s;if(He(s))for(let h=0;h<s.length;h++){Dt(s[h])||ve("props must be strings when using array syntax.",s[h]);const u=ui(s[h]);om(u)&&(o[u]=bt)}else if(s){wt(s)||ve("invalid props options",s);for(const h in s){const u=ui(h);if(om(u)){const d=s[h],f=o[u]=He(d)||je(d)?{type:d}:jt({},d),g=f.type;let m=!1,b=!0;if(He(g))for(let y=0;y<g.length;++y){const w=g[y],C=je(w)&&w.name;if(C==="Boolean"){m=!0;break}else C==="String"&&(b=!1)}else m=je(g)&&g.name==="Boolean";f[0]=m,f[1]=b,(m||pt(f,"default"))&&a.push(u)}}}const c=[o,a];return wt(i)&&n.set(i,c),c}function om(i){return i[0]!=="$"&&!Lo(i)?!0:(ve(`Invalid prop name: "${i}" is a reserved property.`),!1)}function ik(i){return i===null?"null":typeof i=="function"?i.name||"":typeof i=="object"&&i.constructor&&i.constructor.name||""}function am(i,e,t){const n=et(e),r=t.propsOptions[0],s=Object.keys(i).map(o=>ui(o));for(const o in r){let a=r[o];a!=null&&rk(o,n[o],a,Ai(n),!s.includes(o))}}function rk(i,e,t,n,r){const{type:s,required:o,validator:a,skipCheck:l}=t;if(o&&r){ve('Missing required prop: "'+i+'"');return}if(!(e==null&&!o)){if(s!=null&&s!==!0&&!l){let c=!1;const h=He(s)?s:[s],u=[];for(let d=0;d<h.length&&!c;d++){const{valid:f,expectedType:g}=ok(e,h[d]);u.push(g||""),c=f}if(!c){ve(ak(i,e,u));return}}a&&!a(e,n)&&ve('Invalid prop: custom validator check failed for prop "'+i+'".')}}const sk=Xi("String,Number,Boolean,Function,Symbol,BigInt");function ok(i,e){let t;const n=ik(e);if(n==="null")t=i===null;else if(sk(n)){const r=typeof i;t=r===n.toLowerCase(),!t&&r==="object"&&(t=i instanceof e)}else n==="Object"?t=wt(i):n==="Array"?t=He(i):t=i instanceof e;return{valid:t,expectedType:n}}function ak(i,e,t){if(t.length===0)return`Prop type [] for prop "${i}" won't match anything. Did you mean to use type Array instead?`;let n=`Invalid prop: type check failed for prop "${i}". Expected ${t.map(ol).join(" | ")}`;const r=t[0],s=$h(e),o=lm(e,r),a=lm(e,s);return t.length===1&&cm(r)&&!lk(r,s)&&(n+=` with value ${o}`),n+=`, got ${s} `,cm(s)&&(n+=`with value ${a}.`),n}function lm(i,e){return e==="String"?`"${i}"`:e==="Number"?`${Number(i)}`:`${i}`}function cm(i){return["string","number","boolean"].some(t=>i.toLowerCase()===t)}function lk(...i){return i.some(e=>e.toLowerCase()==="boolean")}const hm=i=>i[0]==="_"||i==="$stable",Su=i=>He(i)?i.map(gi):[gi(i)],ck=(i,e,t)=>{if(e._n)return e;const n=M1((...r)=>(Kt&&(!t||t.root===Kt.root)&&ve(`Slot "${i}" invoked outside of the render function: this will not track dependencies used in the slot. Invoke the slot function inside the render function instead.`),Su(e(...r))),t);return n._c=!1,n},um=(i,e,t)=>{const n=i._ctx;for(const r in i){if(hm(r))continue;const s=i[r];if(je(s))e[r]=ck(r,s,n);else if(s!=null){ve(`Non-function value encountered for slot "${r}". Prefer function slots for better performance.`);const o=Su(s);e[r]=()=>o}}},dm=(i,e)=>{gu(i.vnode)||ve("Non-function value encountered for default slot. Prefer function slots for better performance.");const t=Su(e);i.slots.default=()=>t},Cu=(i,e,t)=>{for(const n in e)(t||n!=="_")&&(i[n]=e[n])},hk=(i,e,t)=>{const n=i.slots=nm();if(i.vnode.shapeFlag&32){const r=e._;r?(Cu(n,e,t),t&&al(n,"_",r,!0)):um(e,n)}else e&&dm(i,e)},uk=(i,e,t)=>{const{vnode:n,slots:r}=i;let s=!0,o=bt;if(n.shapeFlag&32){const a=e._;a?Ei?(Cu(r,e,t),Ci(i,"set","$slots")):t&&a===1?s=!1:Cu(r,e,t):(s=!e.$stable,um(e,r)),o=e}else e&&(dm(i,e),o={default:1});if(s)for(const a in r)!hm(a)&&o[a]==null&&delete r[a]};let $o,pr;function Ys(i,e){i.appContext.config.performance&&Ll()&&pr.mark(`vue-${e}-${i.uid}`),S1(i,e,Ll()?pr.now():Date.now())}function js(i,e){if(i.appContext.config.performance&&Ll()){const t=`vue-${e}-${i.uid}`,n=t+":end";pr.mark(n),pr.measure(`<${Bl(i,i.type)}> ${e}`,t,n),pr.clearMarks(t),pr.clearMarks(n)}C1(i,e,Ll()?pr.now():Date.now())}function Ll(){return $o!==void 0||(typeof window<"u"&&window.performance?($o=!0,pr=window.performance):$o=!1),$o}function dk(){const i=[];if(i.length){const e=i.length>1;console.warn(`Feature flag${e?"s":""} ${i.join(", ")} ${e?"are":"is"} not explicitly defined. You are running the esm-bundler build of Vue, which expects these compile-time feature flags to be globally injected via the bundler config in order to get better tree-shaking in the production bundle.
    
    For more details, see https://link.vuejs.org/feature-flags.`)}}const jn=Tk;function fk(i){return pk(i)}function pk(i,e){dk();const t=Ro();t.__VUE__=!0,zg(t.__VUE_DEVTOOLS_GLOBAL_HOOK__,t);const{insert:n,remove:r,patchProp:s,createElement:o,createText:a,createComment:l,setText:c,setElementText:h,parentNode:u,nextSibling:d,setScopeId:f=pn,insertStaticContent:g}=i,m=(L,F,te,de=null,le=null,ce=null,ke=void 0,be=null,fe=Ei?!1:!!F.dynamicChildren)=>{if(L===F)return;L&&!Jo(L,F)&&(de=ot(L),rt(L,le,ce,!0),L=null),F.patchFlag===-2&&(fe=!1,F.dynamicChildren=null);const{type:ue,ref:Be,shapeFlag:Ae}=F;switch(ue){case Go:b(L,F,te,de);break;case Vn:y(L,F,te,de);break;case Nl:L==null?w(F,te,de,ke):C(L,F,te,ke);break;case pi:K(L,F,te,de,le,ce,ke,be,fe);break;default:Ae&1?O(L,F,te,de,le,ce,ke,be,fe):Ae&6?J(L,F,te,de,le,ce,ke,be,fe):Ae&64||Ae&128?ue.process(L,F,te,de,le,ce,ke,be,fe,Et):ve("Invalid VNode type:",ue,`(${typeof ue})`)}Be!=null&&le&&Tl(Be,L&&L.ref,ce,F||L,!F)},b=(L,F,te,de)=>{if(L==null)n(F.el=a(F.children),te,de);else{const le=F.el=L.el;F.children!==L.children&&c(le,F.children)}},y=(L,F,te,de)=>{L==null?n(F.el=l(F.children||""),te,de):F.el=L.el},w=(L,F,te,de)=>{[L.el,L.anchor]=g(L.children,F,te,de,L.el,L.anchor)},C=(L,F,te,de)=>{if(F.children!==L.children){const le=d(L.anchor);S(L),[F.el,F.anchor]=g(F.children,te,le,de)}else F.el=L.el,F.anchor=L.anchor},M=({el:L,anchor:F},te,de)=>{let le;for(;L&&L!==F;)le=d(L),n(L,te,de),L=le;n(F,te,de)},S=({el:L,anchor:F})=>{let te;for(;L&&L!==F;)te=d(L),r(L),L=te;r(F)},O=(L,F,te,de,le,ce,ke,be,fe)=>{F.type==="svg"?ke="svg":F.type==="math"&&(ke="mathml"),L==null?T(F,te,de,le,ce,ke,be,fe):z(L,F,le,ce,ke,be,fe)},T=(L,F,te,de,le,ce,ke,be)=>{let fe,ue;const{props:Be,shapeFlag:Ae,transition:ze,dirs:We}=L;if(fe=L.el=o(L.type,ce,Be&&Be.is,Be),Ae&8?h(fe,L.children):Ae&16&&R(L.children,fe,null,de,le,Au(L,ce),ke,be),We&&Qr(L,null,de,"created"),I(fe,L,L.scopeId,ke,de),Be){for(const xt in Be)xt!=="value"&&!Lo(xt)&&s(fe,xt,null,Be[xt],ce,de);"value"in Be&&s(fe,"value",null,Be.value,ce),(ue=Be.onVnodeBeforeMount)&&Ii(ue,de,L)}al(fe,"__vnode",L,!0),al(fe,"__vueParentComponent",de,!0),We&&Qr(L,null,de,"beforeMount");const Ze=gk(le,ze);Ze&&ze.beforeEnter(fe),n(fe,F,te),((ue=Be&&Be.onVnodeMounted)||Ze||We)&&jn(()=>{ue&&Ii(ue,de,L),Ze&&ze.enter(fe),We&&Qr(L,null,de,"mounted")},le)},I=(L,F,te,de,le)=>{if(te&&f(L,te),de)for(let ce=0;ce<de.length;ce++)f(L,de[ce]);if(le){let ce=le.subTree;if(ce.patchFlag>0&&ce.patchFlag&2048&&(ce=Ou(ce.children)||ce),F===ce||wm(ce.type)&&(ce.ssContent===F||ce.ssFallback===F)){const ke=le.vnode;I(L,ke,ke.scopeId,ke.slotScopeIds,le.parent)}}},R=(L,F,te,de,le,ce,ke,be,fe=0)=>{for(let ue=fe;ue<L.length;ue++){const Be=L[ue]=be?mr(L[ue]):gi(L[ue]);m(null,Be,F,te,de,le,ce,ke,be)}},z=(L,F,te,de,le,ce,ke)=>{const be=F.el=L.el;be.__vnode=F;let{patchFlag:fe,dynamicChildren:ue,dirs:Be}=F;fe|=L.patchFlag&16;const Ae=L.props||bt,ze=F.props||bt;let We;if(te&&ts(te,!1),(We=ze.onVnodeBeforeUpdate)&&Ii(We,te,F,L),Be&&Qr(F,L,te,"beforeUpdate"),te&&ts(te,!0),Ei&&(fe=0,ke=!1,ue=null),(Ae.innerHTML&&ze.innerHTML==null||Ae.textContent&&ze.textContent==null)&&h(be,""),ue?(D(L.dynamicChildren,ue,be,te,de,Au(F,le),ce),Mu(L,F)):ke||Me(L,F,be,null,te,de,Au(F,le),ce,!1),fe>0){if(fe&16)B(be,Ae,ze,te,le);else if(fe&2&&Ae.class!==ze.class&&s(be,"class",null,ze.class,le),fe&4&&s(be,"style",Ae.style,ze.style,le),fe&8){const Ze=F.dynamicProps;for(let xt=0;xt<Ze.length;xt++){const ht=Ze[xt],fn=Ae[ht],qt=ze[ht];(qt!==fn||ht==="value")&&s(be,ht,fn,qt,le,te)}}fe&1&&L.children!==F.children&&h(be,F.children)}else!ke&&ue==null&&B(be,Ae,ze,te,le);((We=ze.onVnodeUpdated)||Be)&&jn(()=>{We&&Ii(We,te,F,L),Be&&Qr(F,L,te,"updated")},de)},D=(L,F,te,de,le,ce,ke)=>{for(let be=0;be<F.length;be++){const fe=L[be],ue=F[be],Be=fe.el&&(fe.type===pi||!Jo(fe,ue)||fe.shapeFlag&70)?u(fe.el):te;m(fe,ue,Be,null,de,le,ce,ke,!0)}},B=(L,F,te,de,le)=>{if(F!==te){if(F!==bt)for(const ce in F)!Lo(ce)&&!(ce in te)&&s(L,ce,F[ce],null,le,de);for(const ce in te){if(Lo(ce))continue;const ke=te[ce],be=F[ce];ke!==be&&ce!=="value"&&s(L,ce,be,ke,le,de)}"value"in te&&s(L,"value",F.value,te.value,le)}},K=(L,F,te,de,le,ce,ke,be,fe)=>{const ue=F.el=L?L.el:a(""),Be=F.anchor=L?L.anchor:a("");let{patchFlag:Ae,dynamicChildren:ze,slotScopeIds:We}=F;(Ei||Ae&2048)&&(Ae=0,fe=!1,ze=null),We&&(be=be?be.concat(We):We),L==null?(n(ue,te,de),n(Be,te,de),R(F.children||[],te,Be,le,ce,ke,be,fe)):Ae>0&&Ae&64&&ze&&L.dynamicChildren?(D(L.dynamicChildren,ze,te,le,ce,ke,be),Mu(L,F)):Me(L,F,te,Be,le,ce,ke,be,fe)},J=(L,F,te,de,le,ce,ke,be,fe)=>{F.slotScopeIds=be,L==null?F.shapeFlag&512?le.ctx.activate(F,te,de,ke,fe):se(F,te,de,le,ce,ke,fe):ne(L,F,fe)},se=(L,F,te,de,le,ce,ke)=>{const be=L.component=Nk(L,de,le);if(be.type.__hmrId&&p1(be),bl(L),Ys(be,"mount"),gu(L)&&(be.ctx.renderer=Et),Ys(be,"init"),zk(be,!1,ke),js(be,"init"),be.asyncDep){if(Ei&&(L.el=null),le&&le.registerDep(be,ie,ke),!L.el){const fe=be.subTree=Nt(Vn);y(null,fe,F,te)}}else ie(be,L,F,te,le,ce,ke);yl(),js(be,"mount")},ne=(L,F,te)=>{const de=F.component=L.component;if(Ak(L,F,te))if(de.asyncDep&&!de.asyncResolved){bl(F),ae(de,F,te),yl();return}else de.next=F,de.update();else F.el=L.el,de.vnode=F},ie=(L,F,te,de,le,ce,ke)=>{const be=()=>{if(L.isMounted){let{next:Ae,bu:ze,u:We,parent:Ze,vnode:xt}=L;{const Fn=fm(L);if(Fn){Ae&&(Ae.el=xt.el,ae(L,Ae,ke)),Fn.asyncDep.then(()=>{L.isUnmounted||be()});return}}let ht=Ae,fn;bl(Ae||L.vnode),ts(L,!1),Ae?(Ae.el=xt.el,ae(L,Ae,ke)):Ae=xt,ze&&zs(ze),(fn=Ae.props&&Ae.props.onVnodeBeforeUpdate)&&Ii(fn,Ze,Ae,xt),ts(L,!0),Ys(L,"render");const qt=xm(L);js(L,"render");const nn=L.subTree;L.subTree=qt,Ys(L,"patch"),m(nn,qt,u(nn.el),ot(nn),L,le,ce),js(L,"patch"),Ae.el=qt.el,ht===null&&Mk(L,qt.el),We&&jn(We,le),(fn=Ae.props&&Ae.props.onVnodeUpdated)&&jn(()=>Ii(fn,Ze,Ae,xt),le),Fg(L),yl()}else{let Ae;const{el:ze,props:We}=F,{bm:Ze,m:xt,parent:ht,root:fn,type:qt}=L,nn=jo(F);ts(L,!1),Ze&&zs(Ze),!nn&&(Ae=We&&We.onVnodeBeforeMount)&&Ii(Ae,ht,F),ts(L,!0);{fn.ce&&fn.ce._injectChildStyle(qt),Ys(L,"render");const Fn=L.subTree=xm(L);js(L,"render"),Ys(L,"patch"),m(null,Fn,te,de,L,le,ce),js(L,"patch"),F.el=Fn.el}if(xt&&jn(xt,le),!nn&&(Ae=We&&We.onVnodeMounted)){const Fn=F;jn(()=>Ii(Ae,ht,Fn),le)}(F.shapeFlag&256||ht&&jo(ht.vnode)&&ht.vnode.shapeFlag&256)&&L.a&&jn(L.a,le),L.isMounted=!0,v1(L),F=te=de=null}};L.scope.on();const fe=L.effect=new og(be);L.scope.off();const ue=L.update=fe.run.bind(fe),Be=L.job=fe.runIfDirty.bind(fe);Be.i=L,Be.id=L.uid,fe.scheduler=()=>kl(Be),ts(L,!0),fe.onTrack=L.rtc?Ae=>zs(L.rtc,Ae):void 0,fe.onTrigger=L.rtg?Ae=>zs(L.rtg,Ae):void 0,ue()},ae=(L,F,te)=>{F.component=L;const de=L.vnode.props;L.vnode=F,L.next=null,tk(L,F.props,de,te),uk(L,F.children,te),Wi(),Lg(L),Yi()},Me=(L,F,te,de,le,ce,ke,be,fe=!1)=>{const ue=L&&L.children,Be=L?L.shapeFlag:0,Ae=F.children,{patchFlag:ze,shapeFlag:We}=F;if(ze>0){if(ze&128){_e(ue,Ae,te,de,le,ce,ke,be,fe);return}else if(ze&256){Re(ue,Ae,te,de,le,ce,ke,be,fe);return}}We&8?(Be&16&&$e(ue,le,ce),Ae!==ue&&h(te,Ae)):Be&16?We&16?_e(ue,Ae,te,de,le,ce,ke,be,fe):$e(ue,le,ce,!0):(Be&8&&h(te,""),We&16&&R(Ae,te,de,le,ce,ke,be,fe))},Re=(L,F,te,de,le,ce,ke,be,fe)=>{L=L||_s,F=F||_s;const ue=L.length,Be=F.length,Ae=Math.min(ue,Be);let ze;for(ze=0;ze<Ae;ze++){const We=F[ze]=fe?mr(F[ze]):gi(F[ze]);m(L[ze],We,te,null,le,ce,ke,be,fe)}ue>Be?$e(L,le,ce,!0,!1,Ae):R(F,te,de,le,ce,ke,be,fe,Ae)},_e=(L,F,te,de,le,ce,ke,be,fe)=>{let ue=0;const Be=F.length;let Ae=L.length-1,ze=Be-1;for(;ue<=Ae&&ue<=ze;){const We=L[ue],Ze=F[ue]=fe?mr(F[ue]):gi(F[ue]);if(Jo(We,Ze))m(We,Ze,te,null,le,ce,ke,be,fe);else break;ue++}for(;ue<=Ae&&ue<=ze;){const We=L[Ae],Ze=F[ze]=fe?mr(F[ze]):gi(F[ze]);if(Jo(We,Ze))m(We,Ze,te,null,le,ce,ke,be,fe);else break;Ae--,ze--}if(ue>Ae){if(ue<=ze){const We=ze+1,Ze=We<Be?F[We].el:de;for(;ue<=ze;)m(null,F[ue]=fe?mr(F[ue]):gi(F[ue]),te,Ze,le,ce,ke,be,fe),ue++}}else if(ue>ze)for(;ue<=Ae;)rt(L[ue],le,ce,!0),ue++;else{const We=ue,Ze=ue,xt=new Map;for(ue=Ze;ue<=ze;ue++){const Ie=F[ue]=fe?mr(F[ue]):gi(F[ue]);Ie.key!=null&&(xt.has(Ie.key)&&ve("Duplicate keys found during update:",JSON.stringify(Ie.key),"Make sure keys are unique."),xt.set(Ie.key,ue))}let ht,fn=0;const qt=ze-Ze+1;let nn=!1,Fn=0;const ar=new Array(qt);for(ue=0;ue<qt;ue++)ar[ue]=0;for(ue=We;ue<=Ae;ue++){const Ie=L[ue];if(fn>=qt){rt(Ie,le,ce,!0);continue}let Sn;if(Ie.key!=null)Sn=xt.get(Ie.key);else for(ht=Ze;ht<=ze;ht++)if(ar[ht-Ze]===0&&Jo(Ie,F[ht])){Sn=ht;break}Sn===void 0?rt(Ie,le,ce,!0):(ar[Sn-Ze]=ue+1,Sn>=Fn?Fn=Sn:nn=!0,m(Ie,F[Sn],te,null,le,ce,ke,be,fe),fn++)}const Si=nn?mk(ar):_s;for(ht=Si.length-1,ue=qt-1;ue>=0;ue--){const Ie=Ze+ue,Sn=F[Ie],Fi=Ie+1<Be?F[Ie+1].el:de;ar[ue]===0?m(null,Sn,te,Fi,le,ce,ke,be,fe):nn&&(ht<0||ue!==Si[ht]?Je(Sn,te,Fi,2):ht--)}}},Je=(L,F,te,de,le=null)=>{const{el:ce,type:ke,transition:be,children:fe,shapeFlag:ue}=L;if(ue&6){Je(L.component.subTree,F,te,de);return}if(ue&128){L.suspense.move(F,te,de);return}if(ue&64){ke.move(L,F,te,Et);return}if(ke===pi){n(ce,F,te);for(let Ae=0;Ae<fe.length;Ae++)Je(fe[Ae],F,te,de);n(L.anchor,F,te);return}if(ke===Nl){M(L,F,te);return}if(de!==2&&ue&1&&be)if(de===0)be.beforeEnter(ce),n(ce,F,te),jn(()=>be.enter(ce),le);else{const{leave:Ae,delayLeave:ze,afterLeave:We}=be,Ze=()=>n(ce,F,te),xt=()=>{Ae(ce,()=>{Ze(),We&&We()})};ze?ze(ce,Ze,xt):xt()}else n(ce,F,te)},rt=(L,F,te,de=!1,le=!1)=>{const{type:ce,props:ke,ref:be,children:fe,dynamicChildren:ue,shapeFlag:Be,patchFlag:Ae,dirs:ze,cacheIndex:We}=L;if(Ae===-2&&(le=!1),be!=null&&Tl(be,null,te,L,!0),We!=null&&(F.renderCache[We]=void 0),Be&256){F.ctx.deactivate(L);return}const Ze=Be&1&&ze,xt=!jo(L);let ht;if(xt&&(ht=ke&&ke.onVnodeBeforeUnmount)&&Ii(ht,F,L),Be&6)Ue(L.component,te,de);else{if(Be&128){L.suspense.unmount(te,de);return}Ze&&Qr(L,null,F,"beforeUnmount"),Be&64?L.type.remove(L,F,te,Et,de):ue&&!ue.hasOnce&&(ce!==pi||Ae>0&&Ae&64)?$e(ue,F,te,!1,!0):(ce===pi&&Ae&384||!le&&Be&16)&&$e(fe,F,te),de&&Ge(L)}(xt&&(ht=ke&&ke.onVnodeUnmounted)||Ze)&&jn(()=>{ht&&Ii(ht,F,L),Ze&&Qr(L,null,F,"unmounted")},te)},Ge=L=>{const{type:F,el:te,anchor:de,transition:le}=L;if(F===pi){L.patchFlag>0&&L.patchFlag&2048&&le&&!le.persisted?L.children.forEach(ke=>{ke.type===Vn?r(ke.el):Ge(ke)}):Mt(te,de);return}if(F===Nl){S(L);return}const ce=()=>{r(te),le&&!le.persisted&&le.afterLeave&&le.afterLeave()};if(L.shapeFlag&1&&le&&!le.persisted){const{leave:ke,delayLeave:be}=le,fe=()=>ke(te,ce);be?be(L.el,ce,fe):fe()}else ce()},Mt=(L,F)=>{let te;for(;L!==F;)te=d(L),r(L),L=te;r(F)},Ue=(L,F,te)=>{L.type.__hmrId&&g1(L);const{bum:de,scope:le,job:ce,subTree:ke,um:be,m:fe,a:ue}=L;pm(fe),pm(ue),de&&zs(de),le.stop(),ce&&(ce.flags|=8,rt(ke,L,F,te)),be&&jn(be,F),jn(()=>{L.isUnmounted=!0},F),F&&F.pendingBranch&&!F.isUnmounted&&L.asyncDep&&!L.asyncResolved&&L.suspenseId===F.pendingId&&(F.deps--,F.deps===0&&F.resolve()),k1(L)},$e=(L,F,te,de=!1,le=!1,ce=0)=>{for(let ke=ce;ke<L.length;ke++)rt(L[ke],F,te,de,le)},ot=L=>{if(L.shapeFlag&6)return ot(L.component.subTree);if(L.shapeFlag&128)return L.suspense.next();const F=d(L.anchor||L.el),te=F&&F[T1];return te?d(te):F};let Ce=!1;const Tt=(L,F,te)=>{L==null?F._vnode&&rt(F._vnode,null,null,!0):m(F._vnode||null,L,F,null,null,null,te),F._vnode=L,Ce||(Ce=!0,Lg(),Rg(),Ce=!1)},Et={p:m,um:rt,m:Je,r:Ge,mt:se,mc:R,pc:Me,pbc:D,n:ot,o:i};return{render:Tt,hydrate:void 0,createApp:J1(Tt)}}function Au({type:i,props:e},t){return t==="svg"&&i==="foreignObject"||t==="mathml"&&i==="annotation-xml"&&e&&e.encoding&&e.encoding.includes("html")?void 0:t}function ts({effect:i,job:e},t){t?(i.flags|=32,e.flags|=4):(i.flags&=-33,e.flags&=-5)}function gk(i,e){return(!i||i&&!i.pendingBranch)&&e&&!e.persisted}function Mu(i,e,t=!1){const n=i.children,r=e.children;if(He(n)&&He(r))for(let s=0;s<n.length;s++){const o=n[s];let a=r[s];a.shapeFlag&1&&!a.dynamicChildren&&((a.patchFlag<=0||a.patchFlag===32)&&(a=r[s]=mr(r[s]),a.el=o.el),!t&&a.patchFlag!==-2&&Mu(o,a)),a.type===Go&&(a.el=o.el),a.type===Vn&&!a.el&&(a.el=o.el)}}function mk(i){const e=i.slice(),t=[0];let n,r,s,o,a;const l=i.length;for(n=0;n<l;n++){const c=i[n];if(c!==0){if(r=t[t.length-1],i[r]<c){e[n]=r,t.push(n);continue}for(s=0,o=t.length-1;s<o;)a=s+o>>1,i[t[a]]<c?s=a+1:o=a;c<i[t[s]]&&(s>0&&(e[n]=t[s-1]),t[s]=n)}}for(s=t.length,o=t[s-1];s-- >0;)t[s]=o,o=e[o];return t}function fm(i){const e=i.subTree.component;if(e)return e.asyncDep&&!e.asyncResolved?e:fm(e)}function pm(i){if(i)for(let e=0;e<i.length;e++)i[e].flags|=8}const xk=Symbol.for("v-scx"),bk=()=>{{const i=Pl(xk);return i||ve("Server rendering context not provided. Make sure to only call useSSRContext() conditionally in the server build."),i}};function yk(i,e){return Tu(i,null,e)}function qi(i,e,t){return je(e)||ve("`watch(fn, options?)` signature has been moved to a separate API. Use `watchEffect(fn, options?)` instead. `watch` now only supports `watch(source, cb, options?) signature."),Tu(i,e,t)}function Tu(i,e,t=bt){const{immediate:n,deep:r,flush:s,once:o}=t;e||(n!==void 0&&ve('watch() "immediate" option is only respected when using the watch(source, callback, options?) signature.'),r!==void 0&&ve('watch() "deep" option is only respected when using the watch(source, callback, options?) signature.'),o!==void 0&&ve('watch() "once" option is only respected when using the watch(source, callback, options?) signature.'));const a=jt({},t);a.onWarn=ve;const l=e&&n||!e&&s!=="post";let c;if(ea){if(s==="sync"){const f=bk();c=f.__watcherHandles||(f.__watcherHandles=[])}else if(!l){const f=()=>{};return f.stop=pn,f.resume=pn,f.pause=pn,f}}const h=Kt;a.call=(f,g,m)=>Mi(f,h,g,m);let u=!1;s==="post"?a.scheduler=f=>{jn(f,h&&h.suspense)}:s!=="sync"&&(u=!0,a.scheduler=(f,g)=>{g?f():kl(f)}),a.augmentJob=f=>{e&&(f.flags|=4),u&&(f.flags|=2,h&&(f.id=h.uid,f.i=h))};const d=o1(i,e,a);return ea&&(c?c.push(d):l&&d()),d}function vk(i,e,t){const n=this.proxy,r=Dt(i)?i.includes(".")?gm(n,i):()=>n[i]:i.bind(n,n);let s;je(e)?s=e:(s=e.handler,t=e);const o=Qo(this),a=Tu(r,s.bind(n),t);return o(),a}function gm(i,e){const t=e.split(".");return()=>{let n=i;for(let r=0;r<t.length&&n;r++)n=n[t[r]];return n}}const wk=(i,e)=>e==="modelValue"||e==="model-value"?i.modelModifiers:i[`${e}Modifiers`]||i[`${ui(e)}Modifiers`]||i[`${ur(e)}Modifiers`];function kk(i,e,...t){if(i.isUnmounted)return;const n=i.vnode.props||bt;{const{emitsOptions:h,propsOptions:[u]}=i;if(h)if(!(e in h))(!u||!(Gr(ui(e))in u))&&ve(`Component emitted event "${e}" but it is neither declared in the emits option nor as an "${Gr(ui(e))}" prop.`);else{const d=h[e];je(d)&&(d(...t)||ve(`Invalid event arguments: event validation failed for event "${e}".`))}}let r=t;const s=e.startsWith("update:"),o=s&&wk(n,e.slice(7));o&&(o.trim&&(r=t.map(h=>Dt(h)?h.trim():h)),o.number&&(r=t.map(qh))),A1(i,e,r);{const h=e.toLowerCase();h!==e&&n[Gr(h)]&&ve(`Event "${h}" is emitted in component ${Bl(i,i.type)} but the handler is registered for "${e}". Note that HTML attributes are case-insensitive and you cannot use v-on to listen to camelCase events when using in-DOM templates. You should probably use "${ur(e)}" instead of "${e}".`)}let a,l=n[a=Gr(e)]||n[a=Gr(ui(e))];!l&&s&&(l=n[a=Gr(ur(e))]),l&&Mi(l,i,6,r);const c=n[a+"Once"];if(c){if(!i.emitted)i.emitted={};else if(i.emitted[a])return;i.emitted[a]=!0,Mi(c,i,6,r)}}function mm(i,e,t=!1){const n=e.emitsCache,r=n.get(i);if(r!==void 0)return r;const s=i.emits;let o={},a=!1;if(!je(i)){const l=c=>{const h=mm(c,e,!0);h&&(a=!0,jt(o,h))};!t&&e.mixins.length&&e.mixins.forEach(l),i.extends&&l(i.extends),i.mixins&&i.mixins.forEach(l)}return!s&&!a?(wt(i)&&n.set(i,null),null):(He(s)?s.forEach(l=>o[l]=null):jt(o,s),wt(i)&&n.set(i,o),o)}function Rl(i,e){return!i||!Po(e)?!1:(e=e.slice(2).replace(/Once$/,""),pt(i,e[0].toLowerCase()+e.slice(1))||pt(i,ur(e))||pt(i,e))}let Eu=!1;function Dl(){Eu=!0}function xm(i){const{type:e,vnode:t,proxy:n,withProxy:r,propsOptions:[s],slots:o,attrs:a,emit:l,render:c,renderCache:h,props:u,data:d,setupState:f,ctx:g,inheritAttrs:m}=i,b=Al(i);let y,w;Eu=!1;try{if(t.shapeFlag&4){const S=r||n,O=f.__isScriptSetup?new Proxy(S,{get(T,I,R){return ve(`Property '${String(I)}' was accessed via 'this'. Avoid using 'this' in templates.`),Reflect.get(T,I,R)}}):S;y=gi(c.call(O,S,h,Ai(u),f,d,g)),w=a}else{const S=e;a===u&&Dl(),y=gi(S.length>1?S(Ai(u),{get attrs(){return Dl(),Ai(a)},slots:o,emit:l}):S(Ai(u),null)),w=e.props?a:Sk(a)}}catch(S){qo.length=0,Ho(S,i,1),y=Nt(Vn)}let C=y,M;if(y.patchFlag>0&&y.patchFlag&2048&&([C,M]=bm(y)),w&&m!==!1){const S=Object.keys(w),{shapeFlag:O}=C;if(S.length){if(O&7)s&&S.some(il)&&(w=Ck(w,s)),C=gr(C,w,!1,!0);else if(!Eu&&C.type!==Vn){const T=Object.keys(a),I=[],R=[];for(let z=0,D=T.length;z<D;z++){const B=T[z];Po(B)?il(B)||I.push(B[2].toLowerCase()+B.slice(3)):R.push(B)}R.length&&ve(`Extraneous non-props attributes (${R.join(", ")}) were passed to component but could not be automatically inherited because component renders fragment or text or teleport root nodes.`),I.length&&ve(`Extraneous non-emits event listeners (${I.join(", ")}) were passed to component but could not be automatically inherited because component renders fragment or text root nodes. If the listener is intended to be a component custom event listener only, declare it using the "emits" option.`)}}}return t.dirs&&(ym(C)||ve("Runtime directive used on component with non-element root node. The directives will not function as intended."),C=gr(C,null,!1,!0),C.dirs=C.dirs?C.dirs.concat(t.dirs):t.dirs),t.transition&&(ym(C)||ve("Component inside <Transition> renders non-element root node that cannot be animated."),pu(C,t.transition)),M?M(C):y=C,Al(b),y}const bm=i=>{const e=i.children,t=i.dynamicChildren,n=Ou(e,!1);if(n){if(n.patchFlag>0&&n.patchFlag&2048)return bm(n)}else return[i,void 0];const r=e.indexOf(n),s=t?t.indexOf(n):-1,o=a=>{e[r]=a,t&&(s>-1?t[s]=a:a.patchFlag>0&&(i.dynamicChildren=[...t,a]))};return[gi(n),o]};function Ou(i,e=!0){let t;for(let n=0;n<i.length;n++){const r=i[n];if(Vs(r)){if(r.type!==Vn||r.children==="v-if"){if(t)return;if(t=r,e&&t.patchFlag>0&&t.patchFlag&2048)return Ou(t.children)}}else return}return t}const Sk=i=>{let e;for(const t in i)(t==="class"||t==="style"||Po(t))&&((e||(e={}))[t]=i[t]);return e},Ck=(i,e)=>{const t={};for(const n in i)(!il(n)||!(n.slice(9)in e))&&(t[n]=i[n]);return t},ym=i=>i.shapeFlag&7||i.type===Vn;function Ak(i,e,t){const{props:n,children:r,component:s}=i,{props:o,children:a,patchFlag:l}=e,c=s.emitsOptions;if((r||a)&&Ei||e.dirs||e.transition)return!0;if(t&&l>=0){if(l&1024)return!0;if(l&16)return n?vm(n,o,c):!!o;if(l&8){const h=e.dynamicProps;for(let u=0;u<h.length;u++){const d=h[u];if(o[d]!==n[d]&&!Rl(c,d))return!0}}}else return(r||a)&&(!a||!a.$stable)?!0:n===o?!1:n?o?vm(n,o,c):!0:!!o;return!1}function vm(i,e,t){const n=Object.keys(e);if(n.length!==Object.keys(i).length)return!0;for(let r=0;r<n.length;r++){const s=n[r];if(e[s]!==i[s]&&!Rl(t,s))return!0}return!1}function Mk({vnode:i,parent:e},t){for(;e;){const n=e.subTree;if(n.suspense&&n.suspense.activeBranch===i&&(n.el=i.el),n===i)(i=e.vnode).el=t,e=e.parent;else break}}const wm=i=>i.__isSuspense;function Tk(i,e){e&&e.pendingBranch?He(i)?e.effects.push(...i):e.effects.push(i):Pg(i)}const pi=Symbol.for("v-fgt"),Go=Symbol.for("v-txt"),Vn=Symbol.for("v-cmt"),Nl=Symbol.for("v-stc"),qo=[];let $n=null;function Xt(i=!1){qo.push($n=i?null:[])}function Ek(){qo.pop(),$n=qo[qo.length-1]||null}let Uo=1;function km(i,e=!1){Uo+=i,i<0&&$n&&e&&($n.hasOnce=!0)}function Sm(i){return i.dynamicChildren=Uo>0?$n||_s:null,Ek(),Uo>0&&$n&&$n.push(i),i}function xn(i,e,t,n,r,s){return Sm(It(i,e,t,n,r,s,!0))}function Ko(i,e,t,n,r){return Sm(Nt(i,e,t,n,r,!0))}function Vs(i){return i?i.__v_isVNode===!0:!1}function Jo(i,e){if(e.shapeFlag&6&&i.component){const t=Sl.get(e.type);if(t&&t.has(i.component))return i.shapeFlag&=-257,e.shapeFlag&=-513,!1}return i.type===e.type&&i.key===e.key}const Ok=(...i)=>Ik(...i),Cm=({key:i})=>i??null,_l=({ref:i,ref_key:e,ref_for:t})=>(typeof i=="number"&&(i=""+i),i!=null?Dt(i)||Ht(i)||je(i)?{i:Pn,r:i,k:e,f:!!t}:i:null);function It(i,e=null,t=null,n=0,r=null,s=i===pi?0:1,o=!1,a=!1){const l={__v_isVNode:!0,__v_skip:!0,type:i,props:e,key:e&&Cm(e),ref:e&&_l(e),scopeId:Hg,slotScopeIds:null,children:t,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:s,patchFlag:n,dynamicProps:r,dynamicChildren:null,appContext:null,ctx:Pn};return a?(Iu(l,t),s&128&&i.normalize(l)):t&&(l.shapeFlag|=Dt(t)?8:16),l.key!==l.key&&ve("VNode created with invalid key (NaN). VNode type:",l.type),Uo>0&&!o&&$n&&(l.patchFlag>0||s&6)&&l.patchFlag!==32&&$n.push(l),l}const Nt=Ok;function Ik(i,e=null,t=null,n=0,r=null,s=!1){if((!i||i===B1)&&(i||ve(`Invalid vnode type when creating vnode: ${i}.`),i=Vn),Vs(i)){const a=gr(i,e,!0);return t&&Iu(a,t),Uo>0&&!s&&$n&&(a.shapeFlag&6?$n[$n.indexOf(i)]=a:$n.push(a)),a.patchFlag=-2,a}if(Pm(i)&&(i=i.__vccOpts),e){e=Pk(e);let{class:a,style:l}=e;a&&!Dt(a)&&(e.class=Tn(a)),wt(l)&&(Bo(l)&&!He(l)&&(l=jt({},l)),e.style=Uh(l))}const o=Dt(i)?1:wm(i)?128:E1(i)?64:wt(i)?4:je(i)?2:0;return o&4&&Bo(i)&&(i=et(i),ve("Vue received a Component that was made a reactive object. This can lead to unnecessary performance overhead and should be avoided by marking the component with `markRaw` or using `shallowRef` instead of `ref`.",`
    Component that was made reactive: `,i)),It(i,e,t,n,r,o,s,!0)}function Pk(i){return i?Bo(i)||im(i)?jt({},i):i:null}function gr(i,e,t=!1,n=!1){const{props:r,ref:s,patchFlag:o,children:a,transition:l}=i,c=e?Lk(r||{},e):r,h={__v_isVNode:!0,__v_skip:!0,type:i.type,props:c,key:c&&Cm(c),ref:e&&e.ref?t&&s?He(s)?s.concat(_l(e)):[s,_l(e)]:_l(e):s,scopeId:i.scopeId,slotScopeIds:i.slotScopeIds,children:o===-1&&He(a)?a.map(Am):a,target:i.target,targetStart:i.targetStart,targetAnchor:i.targetAnchor,staticCount:i.staticCount,shapeFlag:i.shapeFlag,patchFlag:e&&i.type!==pi?o===-1?16:o|16:o,dynamicProps:i.dynamicProps,dynamicChildren:i.dynamicChildren,appContext:i.appContext,dirs:i.dirs,transition:l,component:i.component,suspense:i.suspense,ssContent:i.ssContent&&gr(i.ssContent),ssFallback:i.ssFallback&&gr(i.ssFallback),el:i.el,anchor:i.anchor,ctx:i.ctx,ce:i.ce};return l&&n&&pu(h,l.clone(h)),h}function Am(i){const e=gr(i);return He(i.children)&&(e.children=i.children.map(Am)),e}function Zo(i=" ",e=0){return Nt(Go,null,i,e)}function bn(i="",e=!1){return e?(Xt(),Ko(Vn,null,i)):Nt(Vn,null,i)}function gi(i){return i==null||typeof i=="boolean"?Nt(Vn):He(i)?Nt(pi,null,i.slice()):Vs(i)?mr(i):Nt(Go,null,String(i))}function mr(i){return i.el===null&&i.patchFlag!==-1||i.memo?i:gr(i)}function Iu(i,e){let t=0;const{shapeFlag:n}=i;if(e==null)e=null;else if(He(e))t=16;else if(typeof e=="object")if(n&65){const r=e.default;r&&(r._c&&(r._d=!1),Iu(i,r()),r._c&&(r._d=!0));return}else{t=32;const r=e._;!r&&!im(e)?e._ctx=Pn:r===3&&Pn&&(Pn.slots._===1?e._=1:(e._=2,i.patchFlag|=1024))}else je(e)?(e={default:e,_ctx:Pn},t=32):(e=String(e),n&64?(t=16,e=[Zo(e)]):t=8);i.children=e,i.shapeFlag|=t}function Lk(...i){const e={};for(let t=0;t<i.length;t++){const n=i[t];for(const r in n)if(r==="class")e.class!==n.class&&(e.class=Tn([e.class,n.class]));else if(r==="style")e.style=Uh([e.style,n.style]);else if(Po(r)){const s=e[r],o=n[r];o&&s!==o&&!(He(s)&&s.includes(o))&&(e[r]=s?[].concat(s,o):o)}else r!==""&&(e[r]=n[r])}return e}function Ii(i,e,t,n=null){Mi(i,e,7,[t,n])}const Rk=em();let Dk=0;function Nk(i,e,t){const n=i.type,r=(e?e.appContext:i.appContext)||Rk,s={uid:Dk++,vnode:i,type:n,parent:e,appContext:r,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new Tw(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(r.provides),ids:e?e.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:sm(n,r),emitsOptions:mm(n,r),emit:null,emitted:null,propsDefaults:bt,inheritAttrs:n.inheritAttrs,ctx:bt,data:bt,props:bt,attrs:bt,slots:bt,refs:bt,setupState:bt,setupContext:null,suspense:t,suspenseId:t?t.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return s.ctx=X1(s),s.root=e?e.root:s,s.emit=kk.bind(null,s),i.ce&&i.ce(s),s}let Kt=null;const Pu=()=>Kt||Pn;let zl,Lu;{const i=Ro(),e=(t,n)=>{let r;return(r=i[t])||(r=i[t]=[]),r.push(n),s=>{r.length>1?r.forEach(o=>o(s)):r[0](s)}};zl=e("__VUE_INSTANCE_SETTERS__",t=>Kt=t),Lu=e("__VUE_SSR_SETTERS__",t=>ea=t)}const Qo=i=>{const e=Kt;return zl(i),i.scope.on(),()=>{i.scope.off(),zl(e)}},Mm=()=>{Kt&&Kt.scope.off(),zl(null)},_k=Xi("slot,component");function Ru(i,{isNativeTag:e}){(_k(i)||e(i))&&ve("Do not use built-in or reserved HTML elements as component id: "+i)}function Tm(i){return i.vnode.shapeFlag&4}let ea=!1;function zk(i,e=!1,t=!1){e&&Lu(e);const{props:n,children:r}=i.vnode,s=Tm(i);Q1(i,n,s,e),hk(i,r,t);const o=s?Fk(i,e):void 0;return e&&Lu(!1),o}function Fk(i,e){var t;const n=i.type;{if(n.name&&Ru(n.name,i.appContext.config),n.components){const s=Object.keys(n.components);for(let o=0;o<s.length;o++)Ru(s[o],i.appContext.config)}if(n.directives){const s=Object.keys(n.directives);for(let o=0;o<s.length;o++)Xg(s[o])}n.compilerOptions&&Bk()&&ve('"compilerOptions" is only supported when using a build of Vue that includes the runtime compiler. Since you are using a runtime-only build, the options should be passed via your build tool config instead.')}i.accessCache=Object.create(null),i.proxy=new Proxy(i.ctx,Gg),W1(i);const{setup:r}=n;if(r){Wi();const s=i.setupContext=r.length>1?Wk(i):null,o=Qo(i),a=Bs(r,i,0,[Ai(i.props),s]),l=Vh(a);if(Yi(),o(),(l||i.sp)&&!jo(i)&&Yg(i),l){if(a.then(Mm,Mm),e)return a.then(c=>{Em(i,c,e)}).catch(c=>{Ho(c,i,0)});if(i.asyncDep=a,!i.suspense){const c=(t=n.name)!=null?t:"Anonymous";ve(`Component <${c}>: setup function returned a promise, but no <Suspense> boundary was found in the parent component tree. A component with async setup() must be nested in a <Suspense> in order to be rendered.`)}}else Em(i,a,e)}else Om(i,e)}function Em(i,e,t){je(e)?i.type.__ssrInlineRender?i.ssrRender=e:i.render=e:wt(e)?(Vs(e)&&ve("setup() should not return VNodes directly - return a render function instead."),i.devtoolsRawSetupState=e,i.setupState=Tg(e),Y1(i)):e!==void 0&&ve(`setup() should return an object. Received: ${e===null?"null":typeof e}`),Om(i,t)}const Bk=()=>!0;function Om(i,e,t){const n=i.type;i.render||(i.render=n.render||pn);{const r=Qo(i);Wi();try{V1(i)}finally{Yi(),r()}}!n.render&&i.render===pn&&!e&&(n.template?ve('Component provided template option but runtime compilation is not supported in this build of Vue. Configure your bundler to alias "vue" to "vue/dist/vue.esm-bundler.js".'):ve("Component is missing template or render function: ",n))}const Hk={get(i,e){return Dl(),Ut(i,"get",""),i[e]},set(){return ve("setupContext.attrs is readonly."),!1},deleteProperty(){return ve("setupContext.attrs is readonly."),!1}};function Xk(i){return new Proxy(i.slots,{get(e,t){return Ut(i,"get","$slots"),e[t]}})}function Wk(i){const e=t=>{if(i.exposed&&ve("expose() should be called only once per setup()."),t!=null){let n=typeof t;n==="object"&&(He(t)?n="array":Ht(t)&&(n="ref")),n!=="object"&&ve(`expose() should be passed a plain object, received ${n}.`)}i.exposed=t||{}};{let t,n;return Object.freeze({get attrs(){return t||(t=new Proxy(i.attrs,Hk))},get slots(){return n||(n=Xk(i))},get emit(){return(r,...s)=>i.emit(r,...s)},expose:e})}}function Fl(i){return i.exposed?i.exposeProxy||(i.exposeProxy=new Proxy(Tg(Mg(i.exposed)),{get(e,t){if(t in e)return e[t];if(t in es)return es[t](i)},has(e,t){return t in e||t in es}})):i.proxy}const Yk=/(?:^|[-_])(\w)/g,jk=i=>i.replace(Yk,e=>e.toUpperCase()).replace(/[-_]/g,"");function Im(i,e=!0){return je(i)?i.displayName||i.name:i.name||e&&i.__name}function Bl(i,e,t=!1){let n=Im(e);if(!n&&e.__file){const r=e.__file.match(/([^/\\]+)\.\w+$/);r&&(n=r[1])}if(!n&&i&&i.parent){const r=s=>{for(const o in s)if(s[o]===e)return o};n=r(i.components||i.parent.type.components)||r(i.appContext.components)}return n?jk(n):t?"App":"Anonymous"}function Pm(i){return je(i)&&"__vccOpts"in i}const Du=(i,e)=>{const t=r1(i,e,ea);{const n=Pu();n&&n.appContext.config.warnRecursiveComputed&&(t._warnRecursive=!0)}return t};function ta(i,e,t){const n=arguments.length;return n===2?wt(e)&&!He(e)?Vs(e)?Nt(i,null,[e]):Nt(i,e):Nt(i,null,e):(n>3?t=Array.prototype.slice.call(arguments,2):n===3&&Vs(t)&&(t=[t]),Nt(i,e,t))}function Vk(){if(typeof window>"u")return;const i={style:"color:#3ba776"},e={style:"color:#1677ff"},t={style:"color:#f5222d"},n={style:"color:#eb2f96"},r={__vue_custom_formatter:!0,header(u){return wt(u)?u.__isVue?["div",i,"VueInstance"]:Ht(u)?["div",{},["span",i,h(u)],"<",a("_value"in u?u._value:u),">"]:Ur(u)?["div",{},["span",i,En(u)?"ShallowReactive":"Reactive"],"<",a(u),`>${Vi(u)?" (readonly)":""}`]:Vi(u)?["div",{},["span",i,En(u)?"ShallowReadonly":"Readonly"],"<",a(u),">"]:null:null},hasBody(u){return u&&u.__isVue},body(u){if(u&&u.__isVue)return["div",{},...s(u.$)]}};function s(u){const d=[];u.type.props&&u.props&&d.push(o("props",et(u.props))),u.setupState!==bt&&d.push(o("setup",u.setupState)),u.data!==bt&&d.push(o("data",et(u.data)));const f=l(u,"computed");f&&d.push(o("computed",f));const g=l(u,"inject");return g&&d.push(o("injected",g)),d.push(["div",{},["span",{style:n.style+";opacity:0.66"},"$ (internal): "],["object",{object:u}]]),d}function o(u,d){return d=jt({},d),Object.keys(d).length?["div",{style:"line-height:1.25em;margin-bottom:0.6em"},["div",{style:"color:#476582"},u],["div",{style:"padding-left:1.25em"},...Object.keys(d).map(f=>["div",{},["span",n,f+": "],a(d[f],!1)])]]:["span",{}]}function a(u,d=!0){return typeof u=="number"?["span",e,u]:typeof u=="string"?["span",t,JSON.stringify(u)]:typeof u=="boolean"?["span",n,u]:wt(u)?["object",{object:d?et(u):u}]:["span",t,String(u)]}function l(u,d){const f=u.type;if(je(f))return;const g={};for(const m in u.ctx)c(f,m,d)&&(g[m]=u.ctx[m]);return g}function c(u,d,f){const g=u[f];if(He(g)&&g.includes(d)||wt(g)&&d in g||u.extends&&c(u.extends,d,f)||u.mixins&&u.mixins.some(m=>c(m,d,f)))return!0}function h(u){return En(u)?"ShallowRef":u.effect?"ComputedRef":"Ref"}window.devtoolsFormatters?window.devtoolsFormatters.push(r):window.devtoolsFormatters=[r]}const Lm="3.5.13",Ui=ve;/**
    * @vue/runtime-dom v3.5.13
    * (c) 2018-present Yuxi (Evan) You and Vue contributors
    * @license MIT
    **/let Nu;const Rm=typeof window<"u"&&window.trustedTypes;if(Rm)try{Nu=Rm.createPolicy("vue",{createHTML:i=>i})}catch(i){Ui(`Error creating trusted types policy: ${i}`)}const Dm=Nu?i=>Nu.createHTML(i):i=>i,$k="http://www.w3.org/2000/svg",Gk="http://www.w3.org/1998/Math/MathML",Ki=typeof document<"u"?document:null,Nm=Ki&&Ki.createElement("template"),qk={insert:(i,e,t)=>{e.insertBefore(i,t||null)},remove:i=>{const e=i.parentNode;e&&e.removeChild(i)},createElement:(i,e,t,n)=>{const r=e==="svg"?Ki.createElementNS($k,i):e==="mathml"?Ki.createElementNS(Gk,i):t?Ki.createElement(i,{is:t}):Ki.createElement(i);return i==="select"&&n&&n.multiple!=null&&r.setAttribute("multiple",n.multiple),r},createText:i=>Ki.createTextNode(i),createComment:i=>Ki.createComment(i),setText:(i,e)=>{i.nodeValue=e},setElementText:(i,e)=>{i.textContent=e},parentNode:i=>i.parentNode,nextSibling:i=>i.nextSibling,querySelector:i=>Ki.querySelector(i),setScopeId(i,e){i.setAttribute(e,"")},insertStaticContent(i,e,t,n,r,s){const o=t?t.previousSibling:e.lastChild;if(r&&(r===s||r.nextSibling))for(;e.insertBefore(r.cloneNode(!0),t),!(r===s||!(r=r.nextSibling)););else{Nm.innerHTML=Dm(n==="svg"?`<svg>${i}</svg>`:n==="mathml"?`<math>${i}</math>`:i);const a=Nm.content;if(n==="svg"||n==="mathml"){const l=a.firstChild;for(;l.firstChild;)a.appendChild(l.firstChild);a.removeChild(l)}e.insertBefore(a,t)}return[o?o.nextSibling:e.firstChild,t?t.previousSibling:e.lastChild]}},Uk=Symbol("_vtc");function Kk(i,e,t){const n=i[Uk];n&&(e=(e?[e,...n]:[...n]).join(" ")),e==null?i.removeAttribute("class"):t?i.setAttribute("class",e):i.className=e}const _m=Symbol("_vod"),Jk=Symbol("_vsh"),Zk=Symbol("CSS_VAR_TEXT"),Qk=/(^|;)\s*display\s*:/;function eS(i,e,t){const n=i.style,r=Dt(t);let s=!1;if(t&&!r){if(e)if(Dt(e))for(const o of e.split(";")){const a=o.slice(0,o.indexOf(":")).trim();t[a]==null&&Hl(n,a,"")}else for(const o in e)t[o]==null&&Hl(n,o,"");for(const o in t)o==="display"&&(s=!0),Hl(n,o,t[o])}else if(r){if(e!==t){const o=n[Zk];o&&(t+=";"+o),n.cssText=t,s=Qk.test(t)}}else e&&i.removeAttribute("style");_m in i&&(i[_m]=s?n.display:"",i[Jk]&&(n.display="none"))}const tS=/[^\\];\s*$/,zm=/\s*!important$/;function Hl(i,e,t){if(He(t))t.forEach(n=>Hl(i,e,n));else if(t==null&&(t=""),tS.test(t)&&Ui(`Unexpected semicolon at the end of '${e}' style value: '${t}'`),e.startsWith("--"))i.setProperty(e,t);else{const n=nS(i,e);zm.test(t)?i.setProperty(ur(n),t.replace(zm,""),"important"):i[n]=t}}const Fm=["Webkit","Moz","ms"],_u={};function nS(i,e){const t=_u[e];if(t)return t;let n=ui(e);if(n!=="filter"&&n in i)return _u[e]=n;n=ol(n);for(let r=0;r<Fm.length;r++){const s=Fm[r]+n;if(s in i)return _u[e]=s}return e}const Bm="http://www.w3.org/1999/xlink";function Hm(i,e,t,n,r,s=Mw(e)){n&&e.startsWith("xlink:")?t==null?i.removeAttributeNS(Bm,e.slice(6,e.length)):i.setAttributeNS(Bm,e,t):t==null||s&&!ig(t)?i.removeAttribute(e):i.setAttribute(e,s?"":hr(t)?String(t):t)}function Xm(i,e,t,n,r){if(e==="innerHTML"||e==="textContent"){t!=null&&(i[e]=e==="innerHTML"?Dm(t):t);return}const s=i.tagName;if(e==="value"&&s!=="PROGRESS"&&!s.includes("-")){const a=s==="OPTION"?i.getAttribute("value")||"":i.value,l=t==null?i.type==="checkbox"?"on":"":String(t);(a!==l||!("_value"in i))&&(i.value=l),t==null&&i.removeAttribute(e),i._value=t;return}let o=!1;if(t===""||t==null){const a=typeof i[e];a==="boolean"?t=ig(t):t==null&&a==="string"?(t="",o=!0):a==="number"&&(t=0,o=!0)}try{i[e]=t}catch(a){o||Ui(`Failed setting prop "${e}" on <${s.toLowerCase()}>: value ${t} is invalid.`,a)}o&&i.removeAttribute(r||e)}function $s(i,e,t,n){i.addEventListener(e,t,n)}function iS(i,e,t,n){i.removeEventListener(e,t,n)}const Wm=Symbol("_vei");function rS(i,e,t,n,r=null){const s=i[Wm]||(i[Wm]={}),o=s[e];if(n&&o)o.value=jm(n,e);else{const[a,l]=sS(e);if(n){const c=s[e]=lS(jm(n,e),r);$s(i,a,c,l)}else o&&(iS(i,a,o,l),s[e]=void 0)}}const Ym=/(?:Once|Passive|Capture)$/;function sS(i){let e;if(Ym.test(i)){e={};let n;for(;n=i.match(Ym);)i=i.slice(0,i.length-n[0].length),e[n[0].toLowerCase()]=!0}return[i[2]===":"?i.slice(3):ur(i.slice(2)),e]}let zu=0;const oS=Promise.resolve(),aS=()=>zu||(oS.then(()=>zu=0),zu=Date.now());function lS(i,e){const t=n=>{if(!n._vts)n._vts=Date.now();else if(n._vts<=t.attached)return;Mi(cS(n,t.value),e,5,[n])};return t.value=i,t.attached=aS(),t}function jm(i,e){return je(i)||He(i)?i:(Ui(`Wrong type passed as event handler to ${e} - did you forget @ or : in front of your prop?
    Expected function or array of functions, received type ${typeof i}.`),pn)}function cS(i,e){if(He(e)){const t=i.stopImmediatePropagation;return i.stopImmediatePropagation=()=>{t.call(i),i._stopped=!0},e.map(n=>r=>!r._stopped&&n&&n(r))}else return e}const Vm=i=>i.charCodeAt(0)===111&&i.charCodeAt(1)===110&&i.charCodeAt(2)>96&&i.charCodeAt(2)<123,hS=(i,e,t,n,r,s)=>{const o=r==="svg";e==="class"?Kk(i,n,o):e==="style"?eS(i,t,n):Po(e)?il(e)||rS(i,e,t,n,s):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):uS(i,e,n,o))?(Xm(i,e,n),!i.tagName.includes("-")&&(e==="value"||e==="checked"||e==="selected")&&Hm(i,e,n,o,s,e!=="value")):i._isVueCE&&(/[A-Z]/.test(e)||!Dt(n))?Xm(i,ui(e),n,s,e):(e==="true-value"?i._trueValue=n:e==="false-value"&&(i._falseValue=n),Hm(i,e,n,o))};function uS(i,e,t,n){if(n)return!!(e==="innerHTML"||e==="textContent"||e in i&&Vm(e)&&je(t));if(e==="spellcheck"||e==="draggable"||e==="translate"||e==="form"||e==="list"&&i.tagName==="INPUT"||e==="type"&&i.tagName==="TEXTAREA")return!1;if(e==="width"||e==="height"){const r=i.tagName;if(r==="IMG"||r==="VIDEO"||r==="CANVAS"||r==="SOURCE")return!1}return Vm(e)&&Dt(t)?!1:e in i}const $m=i=>{const e=i.props["onUpdate:modelValue"]||!1;return He(e)?t=>zs(e,t):e};function dS(i){i.target.composing=!0}function Gm(i){const e=i.target;e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}const Fu=Symbol("_assign"),qm={created(i,{modifiers:{lazy:e,trim:t,number:n}},r){i[Fu]=$m(r);const s=n||r.props&&r.props.type==="number";$s(i,e?"change":"input",o=>{if(o.target.composing)return;let a=i.value;t&&(a=a.trim()),s&&(a=qh(a)),i[Fu](a)}),t&&$s(i,"change",()=>{i.value=i.value.trim()}),e||($s(i,"compositionstart",dS),$s(i,"compositionend",Gm),$s(i,"change",Gm))},mounted(i,{value:e}){i.value=e??""},beforeUpdate(i,{value:e,oldValue:t,modifiers:{lazy:n,trim:r,number:s}},o){if(i[Fu]=$m(o),i.composing)return;const a=(s||i.type==="number")&&!/^0\d/.test(i.value)?qh(i.value):i.value,l=e??"";a!==l&&(document.activeElement===i&&i.type!=="range"&&(n&&e===t||r&&i.value.trim()===l)||(i.value=l))}},fS=jt({patchProp:hS},qk);let Um;function pS(){return Um||(Um=fk(fS))}const Km=(...i)=>{const e=pS().createApp(...i);mS(e),xS(e);const{mount:t}=e;return e.mount=n=>{const r=bS(n);if(!r)return;const s=e._component;!je(s)&&!s.render&&!s.template&&(s.template=r.innerHTML),r.nodeType===1&&(r.textContent="");const o=t(r,!1,gS(r));return r instanceof Element&&(r.removeAttribute("v-cloak"),r.setAttribute("data-v-app","")),o},e};function gS(i){if(i instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&i instanceof MathMLElement)return"mathml"}function mS(i){Object.defineProperty(i.config,"isNativeTag",{value:e=>Sw(e)||Cw(e)||Aw(e),writable:!1})}function xS(i){{const e=i.config.isCustomElement;Object.defineProperty(i.config,"isCustomElement",{get(){return e},set(){Ui("The `isCustomElement` config option is deprecated. Use `compilerOptions.isCustomElement` instead.")}});const t=i.config.compilerOptions,n='The `compilerOptions` config option is only respected when using a build of Vue.js that includes the runtime compiler (aka "full build"). Since you are using the runtime-only build, `compilerOptions` must be passed to `@vue/compiler-dom` in the build setup instead.\n- For vue-loader: pass it via vue-loader\'s `compilerOptions` loader option.\n- For vue-cli: see https://cli.vuejs.org/guide/webpack.html#modifying-options-of-a-loader\n- For vite: pass it via @vitejs/plugin-vue options. See https://github.com/vitejs/vite-plugin-vue/tree/main/packages/plugin-vue#example-for-passing-options-to-vuecompiler-sfc';Object.defineProperty(i.config,"compilerOptions",{get(){return Ui(n),t},set(){Ui(n)}})}}function bS(i){if(Dt(i)){const e=document.querySelector(i);return e||Ui(`Failed to mount app: mount target selector "${i}" returned null.`),e}return window.ShadowRoot&&i instanceof window.ShadowRoot&&i.mode==="closed"&&Ui('mounting on a ShadowRoot with `{mode: "closed"}` may lead to unpredictable bugs'),i}/**
    * vue v3.5.13
    * (c) 2018-present Yuxi (Evan) You and Vue contributors
    * @license MIT
    **/function yS(){Vk()}yS();/**
     * @license @tabler/icons-vue v3.31.0 - MIT
     *
     * This source code is licensed under the MIT license.
     * See the LICENSE file in the root directory of this source tree.
     */var Jm={outline:{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":2,"stroke-linecap":"round","stroke-linejoin":"round"},filled:{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"currentColor",stroke:"none"}};/**
     * @license @tabler/icons-vue v3.31.0 - MIT
     *
     * This source code is licensed under the MIT license.
     * See the LICENSE file in the root directory of this source tree.
     */const mi=(i,e,t,n)=>({color:r="currentColor",size:s=24,stroke:o=2,title:a,class:l,...c},{attrs:h,slots:u})=>{let d=[...n.map(f=>ta(...f)),...u.default?[u.default()]:[]];return a&&(d=[ta("title",a),...d]),ta("svg",{...Jm[i],width:s,height:s,...h,class:["tabler-icon",`tabler-icon-${e}`],...i==="filled"?{fill:r}:{"stroke-width":o??Jm[i]["stroke-width"],stroke:r},...c},d)};/**
     * @license @tabler/icons-vue v3.31.0 - MIT
     *
     * This source code is licensed under the MIT license.
     * See the LICENSE file in the root directory of this source tree.
     */var vS=mi("outline","align-center","IconAlignCenter",[["path",{d:"M4 6l16 0",key:"svg-0"}],["path",{d:"M8 12l8 0",key:"svg-1"}],["path",{d:"M6 18l12 0",key:"svg-2"}]]);/**
     * @license @tabler/icons-vue v3.31.0 - MIT
     *
     * This source code is licensed under the MIT license.
     * See the LICENSE file in the root directory of this source tree.
     */var wS=mi("outline","align-left","IconAlignLeft",[["path",{d:"M4 6l16 0",key:"svg-0"}],["path",{d:"M4 12l10 0",key:"svg-1"}],["path",{d:"M4 18l14 0",key:"svg-2"}]]);/**
     * @license @tabler/icons-vue v3.31.0 - MIT
     *
     * This source code is licensed under the MIT license.
     * See the LICENSE file in the root directory of this source tree.
     */var kS=mi("outline","align-right","IconAlignRight",[["path",{d:"M4 6l16 0",key:"svg-0"}],["path",{d:"M10 12l10 0",key:"svg-1"}],["path",{d:"M6 18l14 0",key:"svg-2"}]]);/**
     * @license @tabler/icons-vue v3.31.0 - MIT
     *
     * This source code is licensed under the MIT license.
     * See the LICENSE file in the root directory of this source tree.
     */var SS=mi("outline","bold","IconBold",[["path",{d:"M7 5h6a3.5 3.5 0 0 1 0 7h-6z",key:"svg-0"}],["path",{d:"M13 12h1a3.5 3.5 0 0 1 0 7h-7v-7",key:"svg-1"}]]);/**
     * @license @tabler/icons-vue v3.31.0 - MIT
     *
     * This source code is licensed under the MIT license.
     * See the LICENSE file in the root directory of this source tree.
     */var CS=mi("outline","code","IconCode",[["path",{d:"M7 8l-4 4l4 4",key:"svg-0"}],["path",{d:"M17 8l4 4l-4 4",key:"svg-1"}],["path",{d:"M14 4l-4 16",key:"svg-2"}]]);/**
     * @license @tabler/icons-vue v3.31.0 - MIT
     *
     * This source code is licensed under the MIT license.
     * See the LICENSE file in the root directory of this source tree.
     */var AS=mi("outline","italic","IconItalic",[["path",{d:"M11 5l6 0",key:"svg-0"}],["path",{d:"M7 19l6 0",key:"svg-1"}],["path",{d:"M14 5l-4 14",key:"svg-2"}]]);/**
     * @license @tabler/icons-vue v3.31.0 - MIT
     *
     * This source code is licensed under the MIT license.
     * See the LICENSE file in the root directory of this source tree.
     */var MS=mi("outline","link-off","IconLinkOff",[["path",{d:"M9 15l3 -3m2 -2l1 -1",key:"svg-0"}],["path",{d:"M11 6l.463 -.536a5 5 0 0 1 7.071 7.072l-.534 .464",key:"svg-1"}],["path",{d:"M3 3l18 18",key:"svg-2"}],["path",{d:"M13 18l-.397 .534a5.068 5.068 0 0 1 -7.127 0a4.972 4.972 0 0 1 0 -7.071l.524 -.463",key:"svg-3"}]]);/**
     * @license @tabler/icons-vue v3.31.0 - MIT
     *
     * This source code is licensed under the MIT license.
     * See the LICENSE file in the root directory of this source tree.
     */var TS=mi("outline","link","IconLink",[["path",{d:"M9 15l6 -6",key:"svg-0"}],["path",{d:"M11 6l.463 -.536a5 5 0 0 1 7.071 7.072l-.534 .464",key:"svg-1"}],["path",{d:"M13 18l-.397 .534a5.068 5.068 0 0 1 -7.127 0a4.972 4.972 0 0 1 0 -7.071l.524 -.463",key:"svg-2"}]]);/**
     * @license @tabler/icons-vue v3.31.0 - MIT
     *
     * This source code is licensed under the MIT license.
     * See the LICENSE file in the root directory of this source tree.
     */var ES=mi("outline","pencil","IconPencil",[["path",{d:"M4 20h4l10.5 -10.5a2.828 2.828 0 1 0 -4 -4l-10.5 10.5v4",key:"svg-0"}],["path",{d:"M13.5 6.5l4 4",key:"svg-1"}]]);/**
     * @license @tabler/icons-vue v3.31.0 - MIT
     *
     * This source code is licensed under the MIT license.
     * See the LICENSE file in the root directory of this source tree.
     */var OS=mi("outline","strikethrough","IconStrikethrough",[["path",{d:"M5 12l14 0",key:"svg-0"}],["path",{d:"M16 6.5a4 2 0 0 0 -4 -1.5h-1a3.5 3.5 0 0 0 0 7h2a3.5 3.5 0 0 1 0 7h-1.5a4 2 0 0 1 -4 -1.5",key:"svg-1"}]]);/**
     * @license @tabler/icons-vue v3.31.0 - MIT
     *
     * This source code is licensed under the MIT license.
     * See the LICENSE file in the root directory of this source tree.
     */var IS=mi("outline","underline","IconUnderline",[["path",{d:"M7 5v5a5 5 0 0 0 10 0v-5",key:"svg-0"}],["path",{d:"M5 19h14",key:"svg-1"}]]);function on(i){this.content=i}on.prototype={constructor:on,find:function(i){for(var e=0;e<this.content.length;e+=2)if(this.content[e]===i)return e;return-1},get:function(i){var e=this.find(i);return e==-1?void 0:this.content[e+1]},update:function(i,e,t){var n=t&&t!=i?this.remove(t):this,r=n.find(i),s=n.content.slice();return r==-1?s.push(t||i,e):(s[r+1]=e,t&&(s[r]=t)),new on(s)},remove:function(i){var e=this.find(i);if(e==-1)return this;var t=this.content.slice();return t.splice(e,2),new on(t)},addToStart:function(i,e){return new on([i,e].concat(this.remove(i).content))},addToEnd:function(i,e){var t=this.remove(i).content.slice();return t.push(i,e),new on(t)},addBefore:function(i,e,t){var n=this.remove(e),r=n.content.slice(),s=n.find(i);return r.splice(s==-1?r.length:s,0,e,t),new on(r)},forEach:function(i){for(var e=0;e<this.content.length;e+=2)i(this.content[e],this.content[e+1])},prepend:function(i){return i=on.from(i),i.size?new on(i.content.concat(this.subtract(i).content)):this},append:function(i){return i=on.from(i),i.size?new on(this.subtract(i).content.concat(i.content)):this},subtract:function(i){var e=this;i=on.from(i);for(var t=0;t<i.content.length;t+=2)e=e.remove(i.content[t]);return e},toObject:function(){var i={};return this.forEach(function(e,t){i[e]=t}),i},get size(){return this.content.length>>1}},on.from=function(i){if(i instanceof on)return i;var e=[];if(i)for(var t in i)e.push(t,i[t]);return new on(e)};function Zm(i,e,t){for(let n=0;;n++){if(n==i.childCount||n==e.childCount)return i.childCount==e.childCount?null:t;let r=i.child(n),s=e.child(n);if(r==s){t+=r.nodeSize;continue}if(!r.sameMarkup(s))return t;if(r.isText&&r.text!=s.text){for(let o=0;r.text[o]==s.text[o];o++)t++;return t}if(r.content.size||s.content.size){let o=Zm(r.content,s.content,t+1);if(o!=null)return o}t+=r.nodeSize}}function Qm(i,e,t,n){for(let r=i.childCount,s=e.childCount;;){if(r==0||s==0)return r==s?null:{a:t,b:n};let o=i.child(--r),a=e.child(--s),l=o.nodeSize;if(o==a){t-=l,n-=l;continue}if(!o.sameMarkup(a))return{a:t,b:n};if(o.isText&&o.text!=a.text){let c=0,h=Math.min(o.text.length,a.text.length);for(;c<h&&o.text[o.text.length-c-1]==a.text[a.text.length-c-1];)c++,t--,n--;return{a:t,b:n}}if(o.content.size||a.content.size){let c=Qm(o.content,a.content,t-1,n-1);if(c)return c}t-=l,n-=l}}class he{constructor(e,t){if(this.content=e,this.size=t||0,t==null)for(let n=0;n<e.length;n++)this.size+=e[n].nodeSize}nodesBetween(e,t,n,r=0,s){for(let o=0,a=0;a<t;o++){let l=this.content[o],c=a+l.nodeSize;if(c>e&&n(l,r+a,s||null,o)!==!1&&l.content.size){let h=a+1;l.nodesBetween(Math.max(0,e-h),Math.min(l.content.size,t-h),n,r+h)}a=c}}descendants(e){this.nodesBetween(0,this.size,e)}textBetween(e,t,n,r){let s="",o=!0;return this.nodesBetween(e,t,(a,l)=>{let c=a.isText?a.text.slice(Math.max(e,l)-l,t-l):a.isLeaf?r?typeof r=="function"?r(a):r:a.type.spec.leafText?a.type.spec.leafText(a):"":"";a.isBlock&&(a.isLeaf&&c||a.isTextblock)&&n&&(o?o=!1:s+=n),s+=c},0),s}append(e){if(!e.size)return this;if(!this.size)return e;let t=this.lastChild,n=e.firstChild,r=this.content.slice(),s=0;for(t.isText&&t.sameMarkup(n)&&(r[r.length-1]=t.withText(t.text+n.text),s=1);s<e.content.length;s++)r.push(e.content[s]);return new he(r,this.size+e.size)}cut(e,t=this.size){if(e==0&&t==this.size)return this;let n=[],r=0;if(t>e)for(let s=0,o=0;o<t;s++){let a=this.content[s],l=o+a.nodeSize;l>e&&((o<e||l>t)&&(a.isText?a=a.cut(Math.max(0,e-o),Math.min(a.text.length,t-o)):a=a.cut(Math.max(0,e-o-1),Math.min(a.content.size,t-o-1))),n.push(a),r+=a.nodeSize),o=l}return new he(n,r)}cutByIndex(e,t){return e==t?he.empty:e==0&&t==this.content.length?this:new he(this.content.slice(e,t))}replaceChild(e,t){let n=this.content[e];if(n==t)return this;let r=this.content.slice(),s=this.size+t.nodeSize-n.nodeSize;return r[e]=t,new he(r,s)}addToStart(e){return new he([e].concat(this.content),this.size+e.nodeSize)}addToEnd(e){return new he(this.content.concat(e),this.size+e.nodeSize)}eq(e){if(this.content.length!=e.content.length)return!1;for(let t=0;t<this.content.length;t++)if(!this.content[t].eq(e.content[t]))return!1;return!0}get firstChild(){return this.content.length?this.content[0]:null}get lastChild(){return this.content.length?this.content[this.content.length-1]:null}get childCount(){return this.content.length}child(e){let t=this.content[e];if(!t)throw new RangeError("Index "+e+" out of range for "+this);return t}maybeChild(e){return this.content[e]||null}forEach(e){for(let t=0,n=0;t<this.content.length;t++){let r=this.content[t];e(r,n,t),n+=r.nodeSize}}findDiffStart(e,t=0){return Zm(this,e,t)}findDiffEnd(e,t=this.size,n=e.size){return Qm(this,e,t,n)}findIndex(e,t=-1){if(e==0)return Xl(0,e);if(e==this.size)return Xl(this.content.length,e);if(e>this.size||e<0)throw new RangeError(`Position ${e} outside of fragment (${this})`);for(let n=0,r=0;;n++){let s=this.child(n),o=r+s.nodeSize;if(o>=e)return o==e||t>0?Xl(n+1,o):Xl(n,r);r=o}}toString(){return"<"+this.toStringInner()+">"}toStringInner(){return this.content.join(", ")}toJSON(){return this.content.length?this.content.map(e=>e.toJSON()):null}static fromJSON(e,t){if(!t)return he.empty;if(!Array.isArray(t))throw new RangeError("Invalid input for Fragment.fromJSON");return new he(t.map(e.nodeFromJSON))}static fromArray(e){if(!e.length)return he.empty;let t,n=0;for(let r=0;r<e.length;r++){let s=e[r];n+=s.nodeSize,r&&s.isText&&e[r-1].sameMarkup(s)?(t||(t=e.slice(0,r)),t[t.length-1]=s.withText(t[t.length-1].text+s.text)):t&&t.push(s)}return new he(t||e,n)}static from(e){if(!e)return he.empty;if(e instanceof he)return e;if(Array.isArray(e))return this.fromArray(e);if(e.attrs)return new he([e],e.nodeSize);throw new RangeError("Can not convert "+e+" to a Fragment"+(e.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}}he.empty=new he([],0);const Bu={index:0,offset:0};function Xl(i,e){return Bu.index=i,Bu.offset=e,Bu}function Wl(i,e){if(i===e)return!0;if(!(i&&typeof i=="object")||!(e&&typeof e=="object"))return!1;let t=Array.isArray(i);if(Array.isArray(e)!=t)return!1;if(t){if(i.length!=e.length)return!1;for(let n=0;n<i.length;n++)if(!Wl(i[n],e[n]))return!1}else{for(let n in i)if(!(n in e)||!Wl(i[n],e[n]))return!1;for(let n in e)if(!(n in i))return!1}return!0}let At=class Up{constructor(e,t){this.type=e,this.attrs=t}addToSet(e){let t,n=!1;for(let r=0;r<e.length;r++){let s=e[r];if(this.eq(s))return e;if(this.type.excludes(s.type))t||(t=e.slice(0,r));else{if(s.type.excludes(this.type))return e;!n&&s.type.rank>this.type.rank&&(t||(t=e.slice(0,r)),t.push(this),n=!0),t&&t.push(s)}}return t||(t=e.slice()),n||t.push(this),t}removeFromSet(e){for(let t=0;t<e.length;t++)if(this.eq(e[t]))return e.slice(0,t).concat(e.slice(t+1));return e}isInSet(e){for(let t=0;t<e.length;t++)if(this.eq(e[t]))return!0;return!1}eq(e){return this==e||this.type==e.type&&Wl(this.attrs,e.attrs)}toJSON(){let e={type:this.type.name};for(let t in this.attrs){e.attrs=this.attrs;break}return e}static fromJSON(e,t){if(!t)throw new RangeError("Invalid input for Mark.fromJSON");let n=e.marks[t.type];if(!n)throw new RangeError(`There is no mark type ${t.type} in this schema`);let r=n.create(t.attrs);return n.checkAttrs(r.attrs),r}static sameSet(e,t){if(e==t)return!0;if(e.length!=t.length)return!1;for(let n=0;n<e.length;n++)if(!e[n].eq(t[n]))return!1;return!0}static setFrom(e){if(!e||Array.isArray(e)&&e.length==0)return Up.none;if(e instanceof Up)return[e];let t=e.slice();return t.sort((n,r)=>n.type.rank-r.type.rank),t}};At.none=[];class Yl extends Error{}class Le{constructor(e,t,n){this.content=e,this.openStart=t,this.openEnd=n}get size(){return this.content.size-this.openStart-this.openEnd}insertAt(e,t){let n=tx(this.content,e+this.openStart,t);return n&&new Le(n,this.openStart,this.openEnd)}removeBetween(e,t){return new Le(ex(this.content,e+this.openStart,t+this.openStart),this.openStart,this.openEnd)}eq(e){return this.content.eq(e.content)&&this.openStart==e.openStart&&this.openEnd==e.openEnd}toString(){return this.content+"("+this.openStart+","+this.openEnd+")"}toJSON(){if(!this.content.size)return null;let e={content:this.content.toJSON()};return this.openStart>0&&(e.openStart=this.openStart),this.openEnd>0&&(e.openEnd=this.openEnd),e}static fromJSON(e,t){if(!t)return Le.empty;let n=t.openStart||0,r=t.openEnd||0;if(typeof n!="number"||typeof r!="number")throw new RangeError("Invalid input for Slice.fromJSON");return new Le(he.fromJSON(e,t.content),n,r)}static maxOpen(e,t=!0){let n=0,r=0;for(let s=e.firstChild;s&&!s.isLeaf&&(t||!s.type.spec.isolating);s=s.firstChild)n++;for(let s=e.lastChild;s&&!s.isLeaf&&(t||!s.type.spec.isolating);s=s.lastChild)r++;return new Le(e,n,r)}}Le.empty=new Le(he.empty,0,0);function ex(i,e,t){let{index:n,offset:r}=i.findIndex(e),s=i.maybeChild(n),{index:o,offset:a}=i.findIndex(t);if(r==e||s.isText){if(a!=t&&!i.child(o).isText)throw new RangeError("Removing non-flat range");return i.cut(0,e).append(i.cut(t))}if(n!=o)throw new RangeError("Removing non-flat range");return i.replaceChild(n,s.copy(ex(s.content,e-r-1,t-r-1)))}function tx(i,e,t,n){let{index:r,offset:s}=i.findIndex(e),o=i.maybeChild(r);if(s==e||o.isText)return i.cut(0,e).append(t).append(i.cut(e));let a=tx(o.content,e-s-1,t);return a&&i.replaceChild(r,o.copy(a))}function PS(i,e,t){if(t.openStart>i.depth)throw new Yl("Inserted content deeper than insertion position");if(i.depth-t.openStart!=e.depth-t.openEnd)throw new Yl("Inconsistent open depths");return nx(i,e,t,0)}function nx(i,e,t,n){let r=i.index(n),s=i.node(n);if(r==e.index(n)&&n<i.depth-t.openStart){let o=nx(i,e,t,n+1);return s.copy(s.content.replaceChild(r,o))}else if(t.content.size)if(!t.openStart&&!t.openEnd&&i.depth==n&&e.depth==n){let o=i.parent,a=o.content;return is(o,a.cut(0,i.parentOffset).append(t.content).append(a.cut(e.parentOffset)))}else{let{start:o,end:a}=LS(t,i);return is(s,rx(i,o,a,e,n))}else return is(s,jl(i,e,n))}function ix(i,e){if(!e.type.compatibleContent(i.type))throw new Yl("Cannot join "+e.type.name+" onto "+i.type.name)}function Hu(i,e,t){let n=i.node(t);return ix(n,e.node(t)),n}function ns(i,e){let t=e.length-1;t>=0&&i.isText&&i.sameMarkup(e[t])?e[t]=i.withText(e[t].text+i.text):e.push(i)}function na(i,e,t,n){let r=(e||i).node(t),s=0,o=e?e.index(t):r.childCount;i&&(s=i.index(t),i.depth>t?s++:i.textOffset&&(ns(i.nodeAfter,n),s++));for(let a=s;a<o;a++)ns(r.child(a),n);e&&e.depth==t&&e.textOffset&&ns(e.nodeBefore,n)}function is(i,e){return i.type.checkContent(e),i.copy(e)}function rx(i,e,t,n,r){let s=i.depth>r&&Hu(i,e,r+1),o=n.depth>r&&Hu(t,n,r+1),a=[];return na(null,i,r,a),s&&o&&e.index(r)==t.index(r)?(ix(s,o),ns(is(s,rx(i,e,t,n,r+1)),a)):(s&&ns(is(s,jl(i,e,r+1)),a),na(e,t,r,a),o&&ns(is(o,jl(t,n,r+1)),a)),na(n,null,r,a),new he(a)}function jl(i,e,t){let n=[];if(na(null,i,t,n),i.depth>t){let r=Hu(i,e,t+1);ns(is(r,jl(i,e,t+1)),n)}return na(e,null,t,n),new he(n)}function LS(i,e){let t=e.depth-i.openStart,r=e.node(t).copy(i.content);for(let s=t-1;s>=0;s--)r=e.node(s).copy(he.from(r));return{start:r.resolveNoCache(i.openStart+t),end:r.resolveNoCache(r.content.size-i.openEnd-t)}}class ia{constructor(e,t,n){this.pos=e,this.path=t,this.parentOffset=n,this.depth=t.length/3-1}resolveDepth(e){return e==null?this.depth:e<0?this.depth+e:e}get parent(){return this.node(this.depth)}get doc(){return this.node(0)}node(e){return this.path[this.resolveDepth(e)*3]}index(e){return this.path[this.resolveDepth(e)*3+1]}indexAfter(e){return e=this.resolveDepth(e),this.index(e)+(e==this.depth&&!this.textOffset?0:1)}start(e){return e=this.resolveDepth(e),e==0?0:this.path[e*3-1]+1}end(e){return e=this.resolveDepth(e),this.start(e)+this.node(e).content.size}before(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position before the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]}after(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position after the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]+this.path[e*3].nodeSize}get textOffset(){return this.pos-this.path[this.path.length-1]}get nodeAfter(){let e=this.parent,t=this.index(this.depth);if(t==e.childCount)return null;let n=this.pos-this.path[this.path.length-1],r=e.child(t);return n?e.child(t).cut(n):r}get nodeBefore(){let e=this.index(this.depth),t=this.pos-this.path[this.path.length-1];return t?this.parent.child(e).cut(0,t):e==0?null:this.parent.child(e-1)}posAtIndex(e,t){t=this.resolveDepth(t);let n=this.path[t*3],r=t==0?0:this.path[t*3-1]+1;for(let s=0;s<e;s++)r+=n.child(s).nodeSize;return r}marks(){let e=this.parent,t=this.index();if(e.content.size==0)return At.none;if(this.textOffset)return e.child(t).marks;let n=e.maybeChild(t-1),r=e.maybeChild(t);if(!n){let a=n;n=r,r=a}let s=n.marks;for(var o=0;o<s.length;o++)s[o].type.spec.inclusive===!1&&(!r||!s[o].isInSet(r.marks))&&(s=s[o--].removeFromSet(s));return s}marksAcross(e){let t=this.parent.maybeChild(this.index());if(!t||!t.isInline)return null;let n=t.marks,r=e.parent.maybeChild(e.index());for(var s=0;s<n.length;s++)n[s].type.spec.inclusive===!1&&(!r||!n[s].isInSet(r.marks))&&(n=n[s--].removeFromSet(n));return n}sharedDepth(e){for(let t=this.depth;t>0;t--)if(this.start(t)<=e&&this.end(t)>=e)return t;return 0}blockRange(e=this,t){if(e.pos<this.pos)return e.blockRange(this);for(let n=this.depth-(this.parent.inlineContent||this.pos==e.pos?1:0);n>=0;n--)if(e.pos<=this.end(n)&&(!t||t(this.node(n))))return new Vl(this,e,n);return null}sameParent(e){return this.pos-this.parentOffset==e.pos-e.parentOffset}max(e){return e.pos>this.pos?e:this}min(e){return e.pos<this.pos?e:this}toString(){let e="";for(let t=1;t<=this.depth;t++)e+=(e?"/":"")+this.node(t).type.name+"_"+this.index(t-1);return e+":"+this.parentOffset}static resolve(e,t){if(!(t>=0&&t<=e.content.size))throw new RangeError("Position "+t+" out of range");let n=[],r=0,s=t;for(let o=e;;){let{index:a,offset:l}=o.content.findIndex(s),c=s-l;if(n.push(o,a,r+l),!c||(o=o.child(a),o.isText))break;s=c-1,r+=l+1}return new ia(t,n,s)}static resolveCached(e,t){let n=sx.get(e);if(n)for(let s=0;s<n.elts.length;s++){let o=n.elts[s];if(o.pos==t)return o}else sx.set(e,n=new RS);let r=n.elts[n.i]=ia.resolve(e,t);return n.i=(n.i+1)%DS,r}}class RS{constructor(){this.elts=[],this.i=0}}const DS=12,sx=new WeakMap;class Vl{constructor(e,t,n){this.$from=e,this.$to=t,this.depth=n}get start(){return this.$from.before(this.depth+1)}get end(){return this.$to.after(this.depth+1)}get parent(){return this.$from.node(this.depth)}get startIndex(){return this.$from.index(this.depth)}get endIndex(){return this.$to.indexAfter(this.depth)}}const NS=Object.create(null);let xr=class Kp{constructor(e,t,n,r=At.none){this.type=e,this.attrs=t,this.marks=r,this.content=n||he.empty}get children(){return this.content.content}get nodeSize(){return this.isLeaf?1:2+this.content.size}get childCount(){return this.content.childCount}child(e){return this.content.child(e)}maybeChild(e){return this.content.maybeChild(e)}forEach(e){this.content.forEach(e)}nodesBetween(e,t,n,r=0){this.content.nodesBetween(e,t,n,r,this)}descendants(e){this.nodesBetween(0,this.content.size,e)}get textContent(){return this.isLeaf&&this.type.spec.leafText?this.type.spec.leafText(this):this.textBetween(0,this.content.size,"")}textBetween(e,t,n,r){return this.content.textBetween(e,t,n,r)}get firstChild(){return this.content.firstChild}get lastChild(){return this.content.lastChild}eq(e){return this==e||this.sameMarkup(e)&&this.content.eq(e.content)}sameMarkup(e){return this.hasMarkup(e.type,e.attrs,e.marks)}hasMarkup(e,t,n){return this.type==e&&Wl(this.attrs,t||e.defaultAttrs||NS)&&At.sameSet(this.marks,n||At.none)}copy(e=null){return e==this.content?this:new Kp(this.type,this.attrs,e,this.marks)}mark(e){return e==this.marks?this:new Kp(this.type,this.attrs,this.content,e)}cut(e,t=this.content.size){return e==0&&t==this.content.size?this:this.copy(this.content.cut(e,t))}slice(e,t=this.content.size,n=!1){if(e==t)return Le.empty;let r=this.resolve(e),s=this.resolve(t),o=n?0:r.sharedDepth(t),a=r.start(o),c=r.node(o).content.cut(r.pos-a,s.pos-a);return new Le(c,r.depth-o,s.depth-o)}replace(e,t,n){return PS(this.resolve(e),this.resolve(t),n)}nodeAt(e){for(let t=this;;){let{index:n,offset:r}=t.content.findIndex(e);if(t=t.maybeChild(n),!t)return null;if(r==e||t.isText)return t;e-=r+1}}childAfter(e){let{index:t,offset:n}=this.content.findIndex(e);return{node:this.content.maybeChild(t),index:t,offset:n}}childBefore(e){if(e==0)return{node:null,index:0,offset:0};let{index:t,offset:n}=this.content.findIndex(e);if(n<e)return{node:this.content.child(t),index:t,offset:n};let r=this.content.child(t-1);return{node:r,index:t-1,offset:n-r.nodeSize}}resolve(e){return ia.resolveCached(this,e)}resolveNoCache(e){return ia.resolve(this,e)}rangeHasMark(e,t,n){let r=!1;return t>e&&this.nodesBetween(e,t,s=>(n.isInSet(s.marks)&&(r=!0),!r)),r}get isBlock(){return this.type.isBlock}get isTextblock(){return this.type.isTextblock}get inlineContent(){return this.type.inlineContent}get isInline(){return this.type.isInline}get isText(){return this.type.isText}get isLeaf(){return this.type.isLeaf}get isAtom(){return this.type.isAtom}toString(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);let e=this.type.name;return this.content.size&&(e+="("+this.content.toStringInner()+")"),ox(this.marks,e)}contentMatchAt(e){let t=this.type.contentMatch.matchFragment(this.content,0,e);if(!t)throw new Error("Called contentMatchAt on a node with invalid content");return t}canReplace(e,t,n=he.empty,r=0,s=n.childCount){let o=this.contentMatchAt(e).matchFragment(n,r,s),a=o&&o.matchFragment(this.content,t);if(!a||!a.validEnd)return!1;for(let l=r;l<s;l++)if(!this.type.allowsMarks(n.child(l).marks))return!1;return!0}canReplaceWith(e,t,n,r){if(r&&!this.type.allowsMarks(r))return!1;let s=this.contentMatchAt(e).matchType(n),o=s&&s.matchFragment(this.content,t);return o?o.validEnd:!1}canAppend(e){return e.content.size?this.canReplace(this.childCount,this.childCount,e.content):this.type.compatibleContent(e.type)}check(){this.type.checkContent(this.content),this.type.checkAttrs(this.attrs);let e=At.none;for(let t=0;t<this.marks.length;t++){let n=this.marks[t];n.type.checkAttrs(n.attrs),e=n.addToSet(e)}if(!At.sameSet(e,this.marks))throw new RangeError(`Invalid collection of marks for node ${this.type.name}: ${this.marks.map(t=>t.type.name)}`);this.content.forEach(t=>t.check())}toJSON(){let e={type:this.type.name};for(let t in this.attrs){e.attrs=this.attrs;break}return this.content.size&&(e.content=this.content.toJSON()),this.marks.length&&(e.marks=this.marks.map(t=>t.toJSON())),e}static fromJSON(e,t){if(!t)throw new RangeError("Invalid input for Node.fromJSON");let n;if(t.marks){if(!Array.isArray(t.marks))throw new RangeError("Invalid mark data for Node.fromJSON");n=t.marks.map(e.markFromJSON)}if(t.type=="text"){if(typeof t.text!="string")throw new RangeError("Invalid text node in JSON");return e.text(t.text,n)}let r=he.fromJSON(e,t.content),s=e.nodeType(t.type).create(t.attrs,r,n);return s.type.checkAttrs(s.attrs),s}};xr.prototype.text=void 0;class $l extends xr{constructor(e,t,n,r){if(super(e,t,null,r),!n)throw new RangeError("Empty text nodes are not allowed");this.text=n}toString(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):ox(this.marks,JSON.stringify(this.text))}get textContent(){return this.text}textBetween(e,t){return this.text.slice(e,t)}get nodeSize(){return this.text.length}mark(e){return e==this.marks?this:new $l(this.type,this.attrs,this.text,e)}withText(e){return e==this.text?this:new $l(this.type,this.attrs,e,this.marks)}cut(e=0,t=this.text.length){return e==0&&t==this.text.length?this:this.withText(this.text.slice(e,t))}eq(e){return this.sameMarkup(e)&&this.text==e.text}toJSON(){let e=super.toJSON();return e.text=this.text,e}}function ox(i,e){for(let t=i.length-1;t>=0;t--)e=i[t].type.name+"("+e+")";return e}class rs{constructor(e){this.validEnd=e,this.next=[],this.wrapCache=[]}static parse(e,t){let n=new _S(e,t);if(n.next==null)return rs.empty;let r=ax(n);n.next&&n.err("Unexpected trailing text");let s=YS(WS(r));return jS(s,n),s}matchType(e){for(let t=0;t<this.next.length;t++)if(this.next[t].type==e)return this.next[t].next;return null}matchFragment(e,t=0,n=e.childCount){let r=this;for(let s=t;r&&s<n;s++)r=r.matchType(e.child(s).type);return r}get inlineContent(){return this.next.length!=0&&this.next[0].type.isInline}get defaultType(){for(let e=0;e<this.next.length;e++){let{type:t}=this.next[e];if(!(t.isText||t.hasRequiredAttrs()))return t}return null}compatible(e){for(let t=0;t<this.next.length;t++)for(let n=0;n<e.next.length;n++)if(this.next[t].type==e.next[n].type)return!0;return!1}fillBefore(e,t=!1,n=0){let r=[this];function s(o,a){let l=o.matchFragment(e,n);if(l&&(!t||l.validEnd))return he.from(a.map(c=>c.createAndFill()));for(let c=0;c<o.next.length;c++){let{type:h,next:u}=o.next[c];if(!(h.isText||h.hasRequiredAttrs())&&r.indexOf(u)==-1){r.push(u);let d=s(u,a.concat(h));if(d)return d}}return null}return s(this,[])}findWrapping(e){for(let n=0;n<this.wrapCache.length;n+=2)if(this.wrapCache[n]==e)return this.wrapCache[n+1];let t=this.computeWrapping(e);return this.wrapCache.push(e,t),t}computeWrapping(e){let t=Object.create(null),n=[{match:this,type:null,via:null}];for(;n.length;){let r=n.shift(),s=r.match;if(s.matchType(e)){let o=[];for(let a=r;a.type;a=a.via)o.push(a.type);return o.reverse()}for(let o=0;o<s.next.length;o++){let{type:a,next:l}=s.next[o];!a.isLeaf&&!a.hasRequiredAttrs()&&!(a.name in t)&&(!r.type||l.validEnd)&&(n.push({match:a.contentMatch,type:a,via:r}),t[a.name]=!0)}}return null}get edgeCount(){return this.next.length}edge(e){if(e>=this.next.length)throw new RangeError(`There's no ${e}th edge in this content match`);return this.next[e]}toString(){let e=[];function t(n){e.push(n);for(let r=0;r<n.next.length;r++)e.indexOf(n.next[r].next)==-1&&t(n.next[r].next)}return t(this),e.map((n,r)=>{let s=r+(n.validEnd?"*":" ")+" ";for(let o=0;o<n.next.length;o++)s+=(o?", ":"")+n.next[o].type.name+"->"+e.indexOf(n.next[o].next);return s}).join(`
    `)}}rs.empty=new rs(!0);class _S{constructor(e,t){this.string=e,this.nodeTypes=t,this.inline=null,this.pos=0,this.tokens=e.split(/\s*(?=\b|\W|$)/),this.tokens[this.tokens.length-1]==""&&this.tokens.pop(),this.tokens[0]==""&&this.tokens.shift()}get next(){return this.tokens[this.pos]}eat(e){return this.next==e&&(this.pos++||!0)}err(e){throw new SyntaxError(e+" (in content expression '"+this.string+"')")}}function ax(i){let e=[];do e.push(zS(i));while(i.eat("|"));return e.length==1?e[0]:{type:"choice",exprs:e}}function zS(i){let e=[];do e.push(FS(i));while(i.next&&i.next!=")"&&i.next!="|");return e.length==1?e[0]:{type:"seq",exprs:e}}function FS(i){let e=XS(i);for(;;)if(i.eat("+"))e={type:"plus",expr:e};else if(i.eat("*"))e={type:"star",expr:e};else if(i.eat("?"))e={type:"opt",expr:e};else if(i.eat("{"))e=BS(i,e);else break;return e}function lx(i){/\D/.test(i.next)&&i.err("Expected number, got '"+i.next+"'");let e=Number(i.next);return i.pos++,e}function BS(i,e){let t=lx(i),n=t;return i.eat(",")&&(i.next!="}"?n=lx(i):n=-1),i.eat("}")||i.err("Unclosed braced range"),{type:"range",min:t,max:n,expr:e}}function HS(i,e){let t=i.nodeTypes,n=t[e];if(n)return[n];let r=[];for(let s in t){let o=t[s];o.isInGroup(e)&&r.push(o)}return r.length==0&&i.err("No node type or group '"+e+"' found"),r}function XS(i){if(i.eat("(")){let e=ax(i);return i.eat(")")||i.err("Missing closing paren"),e}else if(/\W/.test(i.next))i.err("Unexpected token '"+i.next+"'");else{let e=HS(i,i.next).map(t=>(i.inline==null?i.inline=t.isInline:i.inline!=t.isInline&&i.err("Mixing inline and block content"),{type:"name",value:t}));return i.pos++,e.length==1?e[0]:{type:"choice",exprs:e}}}function WS(i){let e=[[]];return r(s(i,0),t()),e;function t(){return e.push([])-1}function n(o,a,l){let c={term:l,to:a};return e[o].push(c),c}function r(o,a){o.forEach(l=>l.to=a)}function s(o,a){if(o.type=="choice")return o.exprs.reduce((l,c)=>l.concat(s(c,a)),[]);if(o.type=="seq")for(let l=0;;l++){let c=s(o.exprs[l],a);if(l==o.exprs.length-1)return c;r(c,a=t())}else if(o.type=="star"){let l=t();return n(a,l),r(s(o.expr,l),l),[n(l)]}else if(o.type=="plus"){let l=t();return r(s(o.expr,a),l),r(s(o.expr,l),l),[n(l)]}else{if(o.type=="opt")return[n(a)].concat(s(o.expr,a));if(o.type=="range"){let l=a;for(let c=0;c<o.min;c++){let h=t();r(s(o.expr,l),h),l=h}if(o.max==-1)r(s(o.expr,l),l);else for(let c=o.min;c<o.max;c++){let h=t();n(l,h),r(s(o.expr,l),h),l=h}return[n(l)]}else{if(o.type=="name")return[n(a,void 0,o.value)];throw new Error("Unknown expr type")}}}}function cx(i,e){return e-i}function hx(i,e){let t=[];return n(e),t.sort(cx);function n(r){let s=i[r];if(s.length==1&&!s[0].term)return n(s[0].to);t.push(r);for(let o=0;o<s.length;o++){let{term:a,to:l}=s[o];!a&&t.indexOf(l)==-1&&n(l)}}}function YS(i){let e=Object.create(null);return t(hx(i,0));function t(n){let r=[];n.forEach(o=>{i[o].forEach(({term:a,to:l})=>{if(!a)return;let c;for(let h=0;h<r.length;h++)r[h][0]==a&&(c=r[h][1]);hx(i,l).forEach(h=>{c||r.push([a,c=[]]),c.indexOf(h)==-1&&c.push(h)})})});let s=e[n.join(",")]=new rs(n.indexOf(i.length-1)>-1);for(let o=0;o<r.length;o++){let a=r[o][1].sort(cx);s.next.push({type:r[o][0],next:e[a.join(",")]||t(a)})}return s}}function jS(i,e){for(let t=0,n=[i];t<n.length;t++){let r=n[t],s=!r.validEnd,o=[];for(let a=0;a<r.next.length;a++){let{type:l,next:c}=r.next[a];o.push(l.name),s&&!(l.isText||l.hasRequiredAttrs())&&(s=!1),n.indexOf(c)==-1&&n.push(c)}s&&e.err("Only non-generatable nodes ("+o.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}function ux(i){let e=Object.create(null);for(let t in i){let n=i[t];if(!n.hasDefault)return null;e[t]=n.default}return e}function dx(i,e){let t=Object.create(null);for(let n in i){let r=e&&e[n];if(r===void 0){let s=i[n];if(s.hasDefault)r=s.default;else throw new RangeError("No value supplied for attribute "+n)}t[n]=r}return t}function fx(i,e,t,n){for(let r in e)if(!(r in i))throw new RangeError(`Unsupported attribute ${r} for ${t} of type ${r}`);for(let r in i){let s=i[r];s.validate&&s.validate(e[r])}}function px(i,e){let t=Object.create(null);if(e)for(let n in e)t[n]=new $S(i,n,e[n]);return t}let gx=class hw{constructor(e,t,n){this.name=e,this.schema=t,this.spec=n,this.markSet=null,this.groups=n.group?n.group.split(" "):[],this.attrs=px(e,n.attrs),this.defaultAttrs=ux(this.attrs),this.contentMatch=null,this.inlineContent=null,this.isBlock=!(n.inline||e=="text"),this.isText=e=="text"}get isInline(){return!this.isBlock}get isTextblock(){return this.isBlock&&this.inlineContent}get isLeaf(){return this.contentMatch==rs.empty}get isAtom(){return this.isLeaf||!!this.spec.atom}isInGroup(e){return this.groups.indexOf(e)>-1}get whitespace(){return this.spec.whitespace||(this.spec.code?"pre":"normal")}hasRequiredAttrs(){for(let e in this.attrs)if(this.attrs[e].isRequired)return!0;return!1}compatibleContent(e){return this==e||this.contentMatch.compatible(e.contentMatch)}computeAttrs(e){return!e&&this.defaultAttrs?this.defaultAttrs:dx(this.attrs,e)}create(e=null,t,n){if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new xr(this,this.computeAttrs(e),he.from(t),At.setFrom(n))}createChecked(e=null,t,n){return t=he.from(t),this.checkContent(t),new xr(this,this.computeAttrs(e),t,At.setFrom(n))}createAndFill(e=null,t,n){if(e=this.computeAttrs(e),t=he.from(t),t.size){let o=this.contentMatch.fillBefore(t);if(!o)return null;t=o.append(t)}let r=this.contentMatch.matchFragment(t),s=r&&r.fillBefore(he.empty,!0);return s?new xr(this,e,t.append(s),At.setFrom(n)):null}validContent(e){let t=this.contentMatch.matchFragment(e);if(!t||!t.validEnd)return!1;for(let n=0;n<e.childCount;n++)if(!this.allowsMarks(e.child(n).marks))return!1;return!0}checkContent(e){if(!this.validContent(e))throw new RangeError(`Invalid content for node ${this.name}: ${e.toString().slice(0,50)}`)}checkAttrs(e){fx(this.attrs,e,"node",this.name)}allowsMarkType(e){return this.markSet==null||this.markSet.indexOf(e)>-1}allowsMarks(e){if(this.markSet==null)return!0;for(let t=0;t<e.length;t++)if(!this.allowsMarkType(e[t].type))return!1;return!0}allowedMarks(e){if(this.markSet==null)return e;let t;for(let n=0;n<e.length;n++)this.allowsMarkType(e[n].type)?t&&t.push(e[n]):t||(t=e.slice(0,n));return t?t.length?t:At.none:e}static compile(e,t){let n=Object.create(null);e.forEach((s,o)=>n[s]=new hw(s,t,o));let r=t.spec.topNode||"doc";if(!n[r])throw new RangeError("Schema is missing its top node type ('"+r+"')");if(!n.text)throw new RangeError("Every schema needs a 'text' type");for(let s in n.text.attrs)throw new RangeError("The text node type should not have attributes");return n}};function VS(i,e,t){let n=t.split("|");return r=>{let s=r===null?"null":typeof r;if(n.indexOf(s)<0)throw new RangeError(`Expected value of type ${n} for attribute ${e} on type ${i}, got ${s}`)}}class $S{constructor(e,t,n){this.hasDefault=Object.prototype.hasOwnProperty.call(n,"default"),this.default=n.default,this.validate=typeof n.validate=="string"?VS(e,t,n.validate):n.validate}get isRequired(){return!this.hasDefault}}class Gl{constructor(e,t,n,r){this.name=e,this.rank=t,this.schema=n,this.spec=r,this.attrs=px(e,r.attrs),this.excluded=null;let s=ux(this.attrs);this.instance=s?new At(this,s):null}create(e=null){return!e&&this.instance?this.instance:new At(this,dx(this.attrs,e))}static compile(e,t){let n=Object.create(null),r=0;return e.forEach((s,o)=>n[s]=new Gl(s,r++,t,o)),n}removeFromSet(e){for(var t=0;t<e.length;t++)e[t].type==this&&(e=e.slice(0,t).concat(e.slice(t+1)),t--);return e}isInSet(e){for(let t=0;t<e.length;t++)if(e[t].type==this)return e[t]}checkAttrs(e){fx(this.attrs,e,"mark",this.name)}excludes(e){return this.excluded.indexOf(e)>-1}}class mx{constructor(e){this.linebreakReplacement=null,this.cached=Object.create(null);let t=this.spec={};for(let r in e)t[r]=e[r];t.nodes=on.from(e.nodes),t.marks=on.from(e.marks||{}),this.nodes=gx.compile(this.spec.nodes,this),this.marks=Gl.compile(this.spec.marks,this);let n=Object.create(null);for(let r in this.nodes){if(r in this.marks)throw new RangeError(r+" can not be both a node and a mark");let s=this.nodes[r],o=s.spec.content||"",a=s.spec.marks;if(s.contentMatch=n[o]||(n[o]=rs.parse(o,this.nodes)),s.inlineContent=s.contentMatch.inlineContent,s.spec.linebreakReplacement){if(this.linebreakReplacement)throw new RangeError("Multiple linebreak nodes defined");if(!s.isInline||!s.isLeaf)throw new RangeError("Linebreak replacement nodes must be inline leaf nodes");this.linebreakReplacement=s}s.markSet=a=="_"?null:a?xx(this,a.split(" ")):a==""||!s.inlineContent?[]:null}for(let r in this.marks){let s=this.marks[r],o=s.spec.excludes;s.excluded=o==null?[s]:o==""?[]:xx(this,o.split(" "))}this.nodeFromJSON=this.nodeFromJSON.bind(this),this.markFromJSON=this.markFromJSON.bind(this),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached.wrappings=Object.create(null)}node(e,t=null,n,r){if(typeof e=="string")e=this.nodeType(e);else if(e instanceof gx){if(e.schema!=this)throw new RangeError("Node type from different schema used ("+e.name+")")}else throw new RangeError("Invalid node type: "+e);return e.createChecked(t,n,r)}text(e,t){let n=this.nodes.text;return new $l(n,n.defaultAttrs,e,At.setFrom(t))}mark(e,t){return typeof e=="string"&&(e=this.marks[e]),e.create(t)}nodeFromJSON(e){return xr.fromJSON(this,e)}markFromJSON(e){return At.fromJSON(this,e)}nodeType(e){let t=this.nodes[e];if(!t)throw new RangeError("Unknown node type: "+e);return t}}function xx(i,e){let t=[];for(let n=0;n<e.length;n++){let r=e[n],s=i.marks[r],o=s;if(s)t.push(s);else for(let a in i.marks){let l=i.marks[a];(r=="_"||l.spec.group&&l.spec.group.split(" ").indexOf(r)>-1)&&t.push(o=l)}if(!o)throw new SyntaxError("Unknown mark type: '"+e[n]+"'")}return t}function GS(i){return i.tag!=null}function qS(i){return i.style!=null}let ra=class Jp{constructor(e,t){this.schema=e,this.rules=t,this.tags=[],this.styles=[];let n=this.matchedStyles=[];t.forEach(r=>{if(GS(r))this.tags.push(r);else if(qS(r)){let s=/[^=]*/.exec(r.style)[0];n.indexOf(s)<0&&n.push(s),this.styles.push(r)}}),this.normalizeLists=!this.tags.some(r=>{if(!/^(ul|ol)\b/.test(r.tag)||!r.node)return!1;let s=e.nodes[r.node];return s.contentMatch.matchType(s)})}parse(e,t={}){let n=new wx(this,t,!1);return n.addAll(e,At.none,t.from,t.to),n.finish()}parseSlice(e,t={}){let n=new wx(this,t,!0);return n.addAll(e,At.none,t.from,t.to),Le.maxOpen(n.finish())}matchTag(e,t,n){for(let r=n?this.tags.indexOf(n)+1:0;r<this.tags.length;r++){let s=this.tags[r];if(JS(e,s.tag)&&(s.namespace===void 0||e.namespaceURI==s.namespace)&&(!s.context||t.matchesContext(s.context))){if(s.getAttrs){let o=s.getAttrs(e);if(o===!1)continue;s.attrs=o||void 0}return s}}}matchStyle(e,t,n,r){for(let s=r?this.styles.indexOf(r)+1:0;s<this.styles.length;s++){let o=this.styles[s],a=o.style;if(!(a.indexOf(e)!=0||o.context&&!n.matchesContext(o.context)||a.length>e.length&&(a.charCodeAt(e.length)!=61||a.slice(e.length+1)!=t))){if(o.getAttrs){let l=o.getAttrs(t);if(l===!1)continue;o.attrs=l||void 0}return o}}}static schemaRules(e){let t=[];function n(r){let s=r.priority==null?50:r.priority,o=0;for(;o<t.length;o++){let a=t[o];if((a.priority==null?50:a.priority)<s)break}t.splice(o,0,r)}for(let r in e.marks){let s=e.marks[r].spec.parseDOM;s&&s.forEach(o=>{n(o=kx(o)),o.mark||o.ignore||o.clearMark||(o.mark=r)})}for(let r in e.nodes){let s=e.nodes[r].spec.parseDOM;s&&s.forEach(o=>{n(o=kx(o)),o.node||o.ignore||o.mark||(o.node=r)})}return t}static fromSchema(e){return e.cached.domParser||(e.cached.domParser=new Jp(e,Jp.schemaRules(e)))}};const bx={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},US={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},yx={ol:!0,ul:!0},sa=1,Xu=2,ql=4;function vx(i,e,t){return e!=null?(e?sa:0)|(e==="full"?Xu:0):i&&i.whitespace=="pre"?sa|Xu:t&-5}class Ul{constructor(e,t,n,r,s,o){this.type=e,this.attrs=t,this.marks=n,this.solid=r,this.options=o,this.content=[],this.activeMarks=At.none,this.match=s||(o&ql?null:e.contentMatch)}findWrapping(e){if(!this.match){if(!this.type)return[];let t=this.type.contentMatch.fillBefore(he.from(e));if(t)this.match=this.type.contentMatch.matchFragment(t);else{let n=this.type.contentMatch,r;return(r=n.findWrapping(e.type))?(this.match=n,r):null}}return this.match.findWrapping(e.type)}finish(e){if(!(this.options&sa)){let n=this.content[this.content.length-1],r;if(n&&n.isText&&(r=/[ \t\r\n\u000c]+$/.exec(n.text))){let s=n;n.text.length==r[0].length?this.content.pop():this.content[this.content.length-1]=s.withText(s.text.slice(0,s.text.length-r[0].length))}}let t=he.from(this.content);return!e&&this.match&&(t=t.append(this.match.fillBefore(he.empty,!0))),this.type?this.type.create(this.attrs,t,this.marks):t}inlineContext(e){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:e.parentNode&&!bx.hasOwnProperty(e.parentNode.nodeName.toLowerCase())}}class wx{constructor(e,t,n){this.parser=e,this.options=t,this.isOpen=n,this.open=0,this.localPreserveWS=!1;let r=t.topNode,s,o=vx(null,t.preserveWhitespace,0)|(n?ql:0);r?s=new Ul(r.type,r.attrs,At.none,!0,t.topMatch||r.type.contentMatch,o):n?s=new Ul(null,null,At.none,!0,null,o):s=new Ul(e.schema.topNodeType,null,At.none,!0,null,o),this.nodes=[s],this.find=t.findPositions,this.needsBlock=!1}get top(){return this.nodes[this.open]}addDOM(e,t){e.nodeType==3?this.addTextNode(e,t):e.nodeType==1&&this.addElement(e,t)}addTextNode(e,t){let n=e.nodeValue,r=this.top,s=r.options&Xu?"full":this.localPreserveWS||(r.options&sa)>0;if(s==="full"||r.inlineContext(e)||/[^ \t\r\n\u000c]/.test(n)){if(s)s!=="full"?n=n.replace(/\r?\n|\r/g," "):n=n.replace(/\r\n?/g,`
    `);else if(n=n.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(n)&&this.open==this.nodes.length-1){let o=r.content[r.content.length-1],a=e.previousSibling;(!o||a&&a.nodeName=="BR"||o.isText&&/[ \t\r\n\u000c]$/.test(o.text))&&(n=n.slice(1))}n&&this.insertNode(this.parser.schema.text(n),t),this.findInText(e)}else this.findInside(e)}addElement(e,t,n){let r=this.localPreserveWS,s=this.top;(e.tagName=="PRE"||/pre/.test(e.style&&e.style.whiteSpace))&&(this.localPreserveWS=!0);let o=e.nodeName.toLowerCase(),a;yx.hasOwnProperty(o)&&this.parser.normalizeLists&&KS(e);let l=this.options.ruleFromNode&&this.options.ruleFromNode(e)||(a=this.parser.matchTag(e,this,n));e:if(l?l.ignore:US.hasOwnProperty(o))this.findInside(e),this.ignoreFallback(e,t);else if(!l||l.skip||l.closeParent){l&&l.closeParent?this.open=Math.max(0,this.open-1):l&&l.skip.nodeType&&(e=l.skip);let c,h=this.needsBlock;if(bx.hasOwnProperty(o))s.content.length&&s.content[0].isInline&&this.open&&(this.open--,s=this.top),c=!0,s.type||(this.needsBlock=!0);else if(!e.firstChild){this.leafFallback(e,t);break e}let u=l&&l.skip?t:this.readStyles(e,t);u&&this.addAll(e,u),c&&this.sync(s),this.needsBlock=h}else{let c=this.readStyles(e,t);c&&this.addElementByRule(e,l,c,l.consuming===!1?a:void 0)}this.localPreserveWS=r}leafFallback(e,t){e.nodeName=="BR"&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(e.ownerDocument.createTextNode(`
    `),t)}ignoreFallback(e,t){e.nodeName=="BR"&&(!this.top.type||!this.top.type.inlineContent)&&this.findPlace(this.parser.schema.text("-"),t)}readStyles(e,t){let n=e.style;if(n&&n.length)for(let r=0;r<this.parser.matchedStyles.length;r++){let s=this.parser.matchedStyles[r],o=n.getPropertyValue(s);if(o)for(let a=void 0;;){let l=this.parser.matchStyle(s,o,this,a);if(!l)break;if(l.ignore)return null;if(l.clearMark?t=t.filter(c=>!l.clearMark(c)):t=t.concat(this.parser.schema.marks[l.mark].create(l.attrs)),l.consuming===!1)a=l;else break}}return t}addElementByRule(e,t,n,r){let s,o;if(t.node)if(o=this.parser.schema.nodes[t.node],o.isLeaf)this.insertNode(o.create(t.attrs),n)||this.leafFallback(e,n);else{let l=this.enter(o,t.attrs||null,n,t.preserveWhitespace);l&&(s=!0,n=l)}else{let l=this.parser.schema.marks[t.mark];n=n.concat(l.create(t.attrs))}let a=this.top;if(o&&o.isLeaf)this.findInside(e);else if(r)this.addElement(e,n,r);else if(t.getContent)this.findInside(e),t.getContent(e,this.parser.schema).forEach(l=>this.insertNode(l,n));else{let l=e;typeof t.contentElement=="string"?l=e.querySelector(t.contentElement):typeof t.contentElement=="function"?l=t.contentElement(e):t.contentElement&&(l=t.contentElement),this.findAround(e,l,!0),this.addAll(l,n),this.findAround(e,l,!1)}s&&this.sync(a)&&this.open--}addAll(e,t,n,r){let s=n||0;for(let o=n?e.childNodes[n]:e.firstChild,a=r==null?null:e.childNodes[r];o!=a;o=o.nextSibling,++s)this.findAtPoint(e,s),this.addDOM(o,t);this.findAtPoint(e,s)}findPlace(e,t){let n,r;for(let s=this.open;s>=0;s--){let o=this.nodes[s],a=o.findWrapping(e);if(a&&(!n||n.length>a.length)&&(n=a,r=o,!a.length)||o.solid)break}if(!n)return null;this.sync(r);for(let s=0;s<n.length;s++)t=this.enterInner(n[s],null,t,!1);return t}insertNode(e,t){if(e.isInline&&this.needsBlock&&!this.top.type){let r=this.textblockFromContext();r&&(t=this.enterInner(r,null,t))}let n=this.findPlace(e,t);if(n){this.closeExtra();let r=this.top;r.match&&(r.match=r.match.matchType(e.type));let s=At.none;for(let o of n.concat(e.marks))(r.type?r.type.allowsMarkType(o.type):Sx(o.type,e.type))&&(s=o.addToSet(s));return r.content.push(e.mark(s)),!0}return!1}enter(e,t,n,r){let s=this.findPlace(e.create(t),n);return s&&(s=this.enterInner(e,t,n,!0,r)),s}enterInner(e,t,n,r=!1,s){this.closeExtra();let o=this.top;o.match=o.match&&o.match.matchType(e);let a=vx(e,s,o.options);o.options&ql&&o.content.length==0&&(a|=ql);let l=At.none;return n=n.filter(c=>(o.type?o.type.allowsMarkType(c.type):Sx(c.type,e))?(l=c.addToSet(l),!1):!0),this.nodes.push(new Ul(e,t,l,r,null,a)),this.open++,n}closeExtra(e=!1){let t=this.nodes.length-1;if(t>this.open){for(;t>this.open;t--)this.nodes[t-1].content.push(this.nodes[t].finish(e));this.nodes.length=this.open+1}}finish(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(!!(this.isOpen||this.options.topOpen))}sync(e){for(let t=this.open;t>=0;t--){if(this.nodes[t]==e)return this.open=t,!0;this.localPreserveWS&&(this.nodes[t].options|=sa)}return!1}get currentPos(){this.closeExtra();let e=0;for(let t=this.open;t>=0;t--){let n=this.nodes[t].content;for(let r=n.length-1;r>=0;r--)e+=n[r].nodeSize;t&&e++}return e}findAtPoint(e,t){if(this.find)for(let n=0;n<this.find.length;n++)this.find[n].node==e&&this.find[n].offset==t&&(this.find[n].pos=this.currentPos)}findInside(e){if(this.find)for(let t=0;t<this.find.length;t++)this.find[t].pos==null&&e.nodeType==1&&e.contains(this.find[t].node)&&(this.find[t].pos=this.currentPos)}findAround(e,t,n){if(e!=t&&this.find)for(let r=0;r<this.find.length;r++)this.find[r].pos==null&&e.nodeType==1&&e.contains(this.find[r].node)&&t.compareDocumentPosition(this.find[r].node)&(n?2:4)&&(this.find[r].pos=this.currentPos)}findInText(e){if(this.find)for(let t=0;t<this.find.length;t++)this.find[t].node==e&&(this.find[t].pos=this.currentPos-(e.nodeValue.length-this.find[t].offset))}matchesContext(e){if(e.indexOf("|")>-1)return e.split(/\s*\|\s*/).some(this.matchesContext,this);let t=e.split("/"),n=this.options.context,r=!this.isOpen&&(!n||n.parent.type==this.nodes[0].type),s=-(n?n.depth+1:0)+(r?0:1),o=(a,l)=>{for(;a>=0;a--){let c=t[a];if(c==""){if(a==t.length-1||a==0)continue;for(;l>=s;l--)if(o(a-1,l))return!0;return!1}else{let h=l>0||l==0&&r?this.nodes[l].type:n&&l>=s?n.node(l-s).type:null;if(!h||h.name!=c&&!h.isInGroup(c))return!1;l--}}return!0};return o(t.length-1,this.open)}textblockFromContext(){let e=this.options.context;if(e)for(let t=e.depth;t>=0;t--){let n=e.node(t).contentMatchAt(e.indexAfter(t)).defaultType;if(n&&n.isTextblock&&n.defaultAttrs)return n}for(let t in this.parser.schema.nodes){let n=this.parser.schema.nodes[t];if(n.isTextblock&&n.defaultAttrs)return n}}}function KS(i){for(let e=i.firstChild,t=null;e;e=e.nextSibling){let n=e.nodeType==1?e.nodeName.toLowerCase():null;n&&yx.hasOwnProperty(n)&&t?(t.appendChild(e),e=t):n=="li"?t=e:n&&(t=null)}}function JS(i,e){return(i.matches||i.msMatchesSelector||i.webkitMatchesSelector||i.mozMatchesSelector).call(i,e)}function kx(i){let e={};for(let t in i)e[t]=i[t];return e}function Sx(i,e){let t=e.schema.nodes;for(let n in t){let r=t[n];if(!r.allowsMarkType(i))continue;let s=[],o=a=>{s.push(a);for(let l=0;l<a.edgeCount;l++){let{type:c,next:h}=a.edge(l);if(c==e||s.indexOf(h)<0&&o(h))return!0}};if(o(r.contentMatch))return!0}}class ss{constructor(e,t){this.nodes=e,this.marks=t}serializeFragment(e,t={},n){n||(n=Wu(t).createDocumentFragment());let r=n,s=[];return e.forEach(o=>{if(s.length||o.marks.length){let a=0,l=0;for(;a<s.length&&l<o.marks.length;){let c=o.marks[l];if(!this.marks[c.type.name]){l++;continue}if(!c.eq(s[a][0])||c.type.spec.spanning===!1)break;a++,l++}for(;a<s.length;)r=s.pop()[1];for(;l<o.marks.length;){let c=o.marks[l++],h=this.serializeMark(c,o.isInline,t);h&&(s.push([c,r]),r.appendChild(h.dom),r=h.contentDOM||h.dom)}}r.appendChild(this.serializeNodeInner(o,t))}),n}serializeNodeInner(e,t){let{dom:n,contentDOM:r}=Kl(Wu(t),this.nodes[e.type.name](e),null,e.attrs);if(r){if(e.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");this.serializeFragment(e.content,t,r)}return n}serializeNode(e,t={}){let n=this.serializeNodeInner(e,t);for(let r=e.marks.length-1;r>=0;r--){let s=this.serializeMark(e.marks[r],e.isInline,t);s&&((s.contentDOM||s.dom).appendChild(n),n=s.dom)}return n}serializeMark(e,t,n={}){let r=this.marks[e.type.name];return r&&Kl(Wu(n),r(e,t),null,e.attrs)}static renderSpec(e,t,n=null,r){return Kl(e,t,n,r)}static fromSchema(e){return e.cached.domSerializer||(e.cached.domSerializer=new ss(this.nodesFromSchema(e),this.marksFromSchema(e)))}static nodesFromSchema(e){let t=Cx(e.nodes);return t.text||(t.text=n=>n.text),t}static marksFromSchema(e){return Cx(e.marks)}}function Cx(i){let e={};for(let t in i){let n=i[t].spec.toDOM;n&&(e[t]=n)}return e}function Wu(i){return i.document||window.document}const Ax=new WeakMap;function ZS(i){let e=Ax.get(i);return e===void 0&&Ax.set(i,e=QS(i)),e}function QS(i){let e=null;function t(n){if(n&&typeof n=="object")if(Array.isArray(n))if(typeof n[0]=="string")e||(e=[]),e.push(n);else for(let r=0;r<n.length;r++)t(n[r]);else for(let r in n)t(n[r])}return t(i),e}function Kl(i,e,t,n){if(typeof e=="string")return{dom:i.createTextNode(e)};if(e.nodeType!=null)return{dom:e};if(e.dom&&e.dom.nodeType!=null)return e;let r=e[0],s;if(typeof r!="string")throw new RangeError("Invalid array passed to renderSpec");if(n&&(s=ZS(n))&&s.indexOf(e)>-1)throw new RangeError("Using an array from an attribute object as a DOM spec. This may be an attempted cross site scripting attack.");let o=r.indexOf(" ");o>0&&(t=r.slice(0,o),r=r.slice(o+1));let a,l=t?i.createElementNS(t,r):i.createElement(r),c=e[1],h=1;if(c&&typeof c=="object"&&c.nodeType==null&&!Array.isArray(c)){h=2;for(let u in c)if(c[u]!=null){let d=u.indexOf(" ");d>0?l.setAttributeNS(u.slice(0,d),u.slice(d+1),c[u]):l.setAttribute(u,c[u])}}for(let u=h;u<e.length;u++){let d=e[u];if(d===0){if(u<e.length-1||u>h)throw new RangeError("Content hole must be the only child of its parent node");return{dom:l,contentDOM:l}}else{let{dom:f,contentDOM:g}=Kl(i,d,t,n);if(l.appendChild(f),g){if(a)throw new RangeError("Multiple content holes");a=g}}}return{dom:l,contentDOM:a}}const Mx=65535,Tx=Math.pow(2,16);function eC(i,e){return i+e*Tx}function Ex(i){return i&Mx}function tC(i){return(i-(i&Mx))/Tx}const Ox=1,Ix=2,Jl=4,Px=8;class Yu{constructor(e,t,n){this.pos=e,this.delInfo=t,this.recover=n}get deleted(){return(this.delInfo&Px)>0}get deletedBefore(){return(this.delInfo&(Ox|Jl))>0}get deletedAfter(){return(this.delInfo&(Ix|Jl))>0}get deletedAcross(){return(this.delInfo&Jl)>0}}class Gn{constructor(e,t=!1){if(this.ranges=e,this.inverted=t,!e.length&&Gn.empty)return Gn.empty}recover(e){let t=0,n=Ex(e);if(!this.inverted)for(let r=0;r<n;r++)t+=this.ranges[r*3+2]-this.ranges[r*3+1];return this.ranges[n*3]+t+tC(e)}mapResult(e,t=1){return this._map(e,t,!1)}map(e,t=1){return this._map(e,t,!0)}_map(e,t,n){let r=0,s=this.inverted?2:1,o=this.inverted?1:2;for(let a=0;a<this.ranges.length;a+=3){let l=this.ranges[a]-(this.inverted?r:0);if(l>e)break;let c=this.ranges[a+s],h=this.ranges[a+o],u=l+c;if(e<=u){let d=c?e==l?-1:e==u?1:t:t,f=l+r+(d<0?0:h);if(n)return f;let g=e==(t<0?l:u)?null:eC(a/3,e-l),m=e==l?Ix:e==u?Ox:Jl;return(t<0?e!=l:e!=u)&&(m|=Px),new Yu(f,m,g)}r+=h-c}return n?e+r:new Yu(e+r,0,null)}touches(e,t){let n=0,r=Ex(t),s=this.inverted?2:1,o=this.inverted?1:2;for(let a=0;a<this.ranges.length;a+=3){let l=this.ranges[a]-(this.inverted?n:0);if(l>e)break;let c=this.ranges[a+s],h=l+c;if(e<=h&&a==r*3)return!0;n+=this.ranges[a+o]-c}return!1}forEach(e){let t=this.inverted?2:1,n=this.inverted?1:2;for(let r=0,s=0;r<this.ranges.length;r+=3){let o=this.ranges[r],a=o-(this.inverted?s:0),l=o+(this.inverted?0:s),c=this.ranges[r+t],h=this.ranges[r+n];e(a,a+c,l,l+h),s+=h-c}}invert(){return new Gn(this.ranges,!this.inverted)}toString(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)}static offset(e){return e==0?Gn.empty:new Gn(e<0?[0,-e,0]:[0,0,e])}}Gn.empty=new Gn([]);class oa{constructor(e,t,n=0,r=e?e.length:0){this.mirror=t,this.from=n,this.to=r,this._maps=e||[],this.ownData=!(e||t)}get maps(){return this._maps}slice(e=0,t=this.maps.length){return new oa(this._maps,this.mirror,e,t)}appendMap(e,t){this.ownData||(this._maps=this._maps.slice(),this.mirror=this.mirror&&this.mirror.slice(),this.ownData=!0),this.to=this._maps.push(e),t!=null&&this.setMirror(this._maps.length-1,t)}appendMapping(e){for(let t=0,n=this._maps.length;t<e._maps.length;t++){let r=e.getMirror(t);this.appendMap(e._maps[t],r!=null&&r<t?n+r:void 0)}}getMirror(e){if(this.mirror){for(let t=0;t<this.mirror.length;t++)if(this.mirror[t]==e)return this.mirror[t+(t%2?-1:1)]}}setMirror(e,t){this.mirror||(this.mirror=[]),this.mirror.push(e,t)}appendMappingInverted(e){for(let t=e.maps.length-1,n=this._maps.length+e._maps.length;t>=0;t--){let r=e.getMirror(t);this.appendMap(e._maps[t].invert(),r!=null&&r>t?n-r-1:void 0)}}invert(){let e=new oa;return e.appendMappingInverted(this),e}map(e,t=1){if(this.mirror)return this._map(e,t,!0);for(let n=this.from;n<this.to;n++)e=this._maps[n].map(e,t);return e}mapResult(e,t=1){return this._map(e,t,!1)}_map(e,t,n){let r=0;for(let s=this.from;s<this.to;s++){let o=this._maps[s],a=o.mapResult(e,t);if(a.recover!=null){let l=this.getMirror(s);if(l!=null&&l>s&&l<this.to){s=l,e=this._maps[l].recover(a.recover);continue}}r|=a.delInfo,e=a.pos}return n?e:new Yu(e,r,null)}}const ju=Object.create(null);class yn{getMap(){return Gn.empty}merge(e){return null}static fromJSON(e,t){if(!t||!t.stepType)throw new RangeError("Invalid input for Step.fromJSON");let n=ju[t.stepType];if(!n)throw new RangeError(`No step type ${t.stepType} defined`);return n.fromJSON(e,t)}static jsonID(e,t){if(e in ju)throw new RangeError("Duplicate use of step JSON ID "+e);return ju[e]=t,t.prototype.jsonID=e,t}}class Vt{constructor(e,t){this.doc=e,this.failed=t}static ok(e){return new Vt(e,null)}static fail(e){return new Vt(null,e)}static fromReplace(e,t,n,r){try{return Vt.ok(e.replace(t,n,r))}catch(s){if(s instanceof Yl)return Vt.fail(s.message);throw s}}}function Vu(i,e,t){let n=[];for(let r=0;r<i.childCount;r++){let s=i.child(r);s.content.size&&(s=s.copy(Vu(s.content,e,s))),s.isInline&&(s=e(s,t,r)),n.push(s)}return he.fromArray(n)}class br extends yn{constructor(e,t,n){super(),this.from=e,this.to=t,this.mark=n}apply(e){let t=e.slice(this.from,this.to),n=e.resolve(this.from),r=n.node(n.sharedDepth(this.to)),s=new Le(Vu(t.content,(o,a)=>!o.isAtom||!a.type.allowsMarkType(this.mark.type)?o:o.mark(this.mark.addToSet(o.marks)),r),t.openStart,t.openEnd);return Vt.fromReplace(e,this.from,this.to,s)}invert(){return new Pi(this.from,this.to,this.mark)}map(e){let t=e.mapResult(this.from,1),n=e.mapResult(this.to,-1);return t.deleted&&n.deleted||t.pos>=n.pos?null:new br(t.pos,n.pos,this.mark)}merge(e){return e instanceof br&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new br(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,t){if(typeof t.from!="number"||typeof t.to!="number")throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new br(t.from,t.to,e.markFromJSON(t.mark))}}yn.jsonID("addMark",br);class Pi extends yn{constructor(e,t,n){super(),this.from=e,this.to=t,this.mark=n}apply(e){let t=e.slice(this.from,this.to),n=new Le(Vu(t.content,r=>r.mark(this.mark.removeFromSet(r.marks)),e),t.openStart,t.openEnd);return Vt.fromReplace(e,this.from,this.to,n)}invert(){return new br(this.from,this.to,this.mark)}map(e){let t=e.mapResult(this.from,1),n=e.mapResult(this.to,-1);return t.deleted&&n.deleted||t.pos>=n.pos?null:new Pi(t.pos,n.pos,this.mark)}merge(e){return e instanceof Pi&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new Pi(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,t){if(typeof t.from!="number"||typeof t.to!="number")throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new Pi(t.from,t.to,e.markFromJSON(t.mark))}}yn.jsonID("removeMark",Pi);class yr extends yn{constructor(e,t){super(),this.pos=e,this.mark=t}apply(e){let t=e.nodeAt(this.pos);if(!t)return Vt.fail("No node at mark step's position");let n=t.type.create(t.attrs,null,this.mark.addToSet(t.marks));return Vt.fromReplace(e,this.pos,this.pos+1,new Le(he.from(n),0,t.isLeaf?0:1))}invert(e){let t=e.nodeAt(this.pos);if(t){let n=this.mark.addToSet(t.marks);if(n.length==t.marks.length){for(let r=0;r<t.marks.length;r++)if(!t.marks[r].isInSet(n))return new yr(this.pos,t.marks[r]);return new yr(this.pos,this.mark)}}return new Gs(this.pos,this.mark)}map(e){let t=e.mapResult(this.pos,1);return t.deletedAfter?null:new yr(t.pos,this.mark)}toJSON(){return{stepType:"addNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,t){if(typeof t.pos!="number")throw new RangeError("Invalid input for AddNodeMarkStep.fromJSON");return new yr(t.pos,e.markFromJSON(t.mark))}}yn.jsonID("addNodeMark",yr);class Gs extends yn{constructor(e,t){super(),this.pos=e,this.mark=t}apply(e){let t=e.nodeAt(this.pos);if(!t)return Vt.fail("No node at mark step's position");let n=t.type.create(t.attrs,null,this.mark.removeFromSet(t.marks));return Vt.fromReplace(e,this.pos,this.pos+1,new Le(he.from(n),0,t.isLeaf?0:1))}invert(e){let t=e.nodeAt(this.pos);return!t||!this.mark.isInSet(t.marks)?this:new yr(this.pos,this.mark)}map(e){let t=e.mapResult(this.pos,1);return t.deletedAfter?null:new Gs(t.pos,this.mark)}toJSON(){return{stepType:"removeNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,t){if(typeof t.pos!="number")throw new RangeError("Invalid input for RemoveNodeMarkStep.fromJSON");return new Gs(t.pos,e.markFromJSON(t.mark))}}yn.jsonID("removeNodeMark",Gs);class Jt extends yn{constructor(e,t,n,r=!1){super(),this.from=e,this.to=t,this.slice=n,this.structure=r}apply(e){return this.structure&&$u(e,this.from,this.to)?Vt.fail("Structure replace would overwrite content"):Vt.fromReplace(e,this.from,this.to,this.slice)}getMap(){return new Gn([this.from,this.to-this.from,this.slice.size])}invert(e){return new Jt(this.from,this.from+this.slice.size,e.slice(this.from,this.to))}map(e){let t=e.mapResult(this.from,1),n=e.mapResult(this.to,-1);return t.deletedAcross&&n.deletedAcross?null:new Jt(t.pos,Math.max(t.pos,n.pos),this.slice)}merge(e){if(!(e instanceof Jt)||e.structure||this.structure)return null;if(this.from+this.slice.size==e.from&&!this.slice.openEnd&&!e.slice.openStart){let t=this.slice.size+e.slice.size==0?Le.empty:new Le(this.slice.content.append(e.slice.content),this.slice.openStart,e.slice.openEnd);return new Jt(this.from,this.to+(e.to-e.from),t,this.structure)}else if(e.to==this.from&&!this.slice.openStart&&!e.slice.openEnd){let t=this.slice.size+e.slice.size==0?Le.empty:new Le(e.slice.content.append(this.slice.content),e.slice.openStart,this.slice.openEnd);return new Jt(e.from,this.to,t,this.structure)}else return null}toJSON(){let e={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,t){if(typeof t.from!="number"||typeof t.to!="number")throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new Jt(t.from,t.to,Le.fromJSON(e,t.slice),!!t.structure)}}yn.jsonID("replace",Jt);class Zt extends yn{constructor(e,t,n,r,s,o,a=!1){super(),this.from=e,this.to=t,this.gapFrom=n,this.gapTo=r,this.slice=s,this.insert=o,this.structure=a}apply(e){if(this.structure&&($u(e,this.from,this.gapFrom)||$u(e,this.gapTo,this.to)))return Vt.fail("Structure gap-replace would overwrite content");let t=e.slice(this.gapFrom,this.gapTo);if(t.openStart||t.openEnd)return Vt.fail("Gap is not a flat range");let n=this.slice.insertAt(this.insert,t.content);return n?Vt.fromReplace(e,this.from,this.to,n):Vt.fail("Content does not fit in gap")}getMap(){return new Gn([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])}invert(e){let t=this.gapTo-this.gapFrom;return new Zt(this.from,this.from+this.slice.size+t,this.from+this.insert,this.from+this.insert+t,e.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)}map(e){let t=e.mapResult(this.from,1),n=e.mapResult(this.to,-1),r=this.from==this.gapFrom?t.pos:e.map(this.gapFrom,-1),s=this.to==this.gapTo?n.pos:e.map(this.gapTo,1);return t.deletedAcross&&n.deletedAcross||r<t.pos||s>n.pos?null:new Zt(t.pos,n.pos,r,s,this.slice,this.insert,this.structure)}toJSON(){let e={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,t){if(typeof t.from!="number"||typeof t.to!="number"||typeof t.gapFrom!="number"||typeof t.gapTo!="number"||typeof t.insert!="number")throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new Zt(t.from,t.to,t.gapFrom,t.gapTo,Le.fromJSON(e,t.slice),t.insert,!!t.structure)}}yn.jsonID("replaceAround",Zt);function $u(i,e,t){let n=i.resolve(e),r=t-e,s=n.depth;for(;r>0&&s>0&&n.indexAfter(s)==n.node(s).childCount;)s--,r--;if(r>0){let o=n.node(s).maybeChild(n.indexAfter(s));for(;r>0;){if(!o||o.isLeaf)return!0;o=o.firstChild,r--}}return!1}function nC(i,e,t,n){let r=[],s=[],o,a;i.doc.nodesBetween(e,t,(l,c,h)=>{if(!l.isInline)return;let u=l.marks;if(!n.isInSet(u)&&h.type.allowsMarkType(n.type)){let d=Math.max(c,e),f=Math.min(c+l.nodeSize,t),g=n.addToSet(u);for(let m=0;m<u.length;m++)u[m].isInSet(g)||(o&&o.to==d&&o.mark.eq(u[m])?o.to=f:r.push(o=new Pi(d,f,u[m])));a&&a.to==d?a.to=f:s.push(a=new br(d,f,n))}}),r.forEach(l=>i.step(l)),s.forEach(l=>i.step(l))}function iC(i,e,t,n){let r=[],s=0;i.doc.nodesBetween(e,t,(o,a)=>{if(!o.isInline)return;s++;let l=null;if(n instanceof Gl){let c=o.marks,h;for(;h=n.isInSet(c);)(l||(l=[])).push(h),c=h.removeFromSet(c)}else n?n.isInSet(o.marks)&&(l=[n]):l=o.marks;if(l&&l.length){let c=Math.min(a+o.nodeSize,t);for(let h=0;h<l.length;h++){let u=l[h],d;for(let f=0;f<r.length;f++){let g=r[f];g.step==s-1&&u.eq(r[f].style)&&(d=g)}d?(d.to=c,d.step=s):r.push({style:u,from:Math.max(a,e),to:c,step:s})}}}),r.forEach(o=>i.step(new Pi(o.from,o.to,o.style)))}function Gu(i,e,t,n=t.contentMatch,r=!0){let s=i.doc.nodeAt(e),o=[],a=e+1;for(let l=0;l<s.childCount;l++){let c=s.child(l),h=a+c.nodeSize,u=n.matchType(c.type);if(!u)o.push(new Jt(a,h,Le.empty));else{n=u;for(let d=0;d<c.marks.length;d++)t.allowsMarkType(c.marks[d].type)||i.step(new Pi(a,h,c.marks[d]));if(r&&c.isText&&t.whitespace!="pre"){let d,f=/\r?\n|\r/g,g;for(;d=f.exec(c.text);)g||(g=new Le(he.from(t.schema.text(" ",t.allowedMarks(c.marks))),0,0)),o.push(new Jt(a+d.index,a+d.index+d[0].length,g))}}a=h}if(!n.validEnd){let l=n.fillBefore(he.empty,!0);i.replace(a,a,new Le(l,0,0))}for(let l=o.length-1;l>=0;l--)i.step(o[l])}function rC(i,e,t){return(e==0||i.canReplace(e,i.childCount))&&(t==i.childCount||i.canReplace(0,t))}function qs(i){let t=i.parent.content.cutByIndex(i.startIndex,i.endIndex);for(let n=i.depth;;--n){let r=i.$from.node(n),s=i.$from.index(n),o=i.$to.indexAfter(n);if(n<i.depth&&r.canReplace(s,o,t))return n;if(n==0||r.type.spec.isolating||!rC(r,s,o))break}return null}function sC(i,e,t){let{$from:n,$to:r,depth:s}=e,o=n.before(s+1),a=r.after(s+1),l=o,c=a,h=he.empty,u=0;for(let g=s,m=!1;g>t;g--)m||n.index(g)>0?(m=!0,h=he.from(n.node(g).copy(h)),u++):l--;let d=he.empty,f=0;for(let g=s,m=!1;g>t;g--)m||r.after(g+1)<r.end(g)?(m=!0,d=he.from(r.node(g).copy(d)),f++):c++;i.step(new Zt(l,c,o,a,new Le(h.append(d),u,f),h.size-u,!0))}function qu(i,e,t=null,n=i){let r=oC(i,e),s=r&&aC(n,e);return s?r.map(Lx).concat({type:e,attrs:t}).concat(s.map(Lx)):null}function Lx(i){return{type:i,attrs:null}}function oC(i,e){let{parent:t,startIndex:n,endIndex:r}=i,s=t.contentMatchAt(n).findWrapping(e);if(!s)return null;let o=s.length?s[0]:e;return t.canReplaceWith(n,r,o)?s:null}function aC(i,e){let{parent:t,startIndex:n,endIndex:r}=i,s=t.child(n),o=e.contentMatch.findWrapping(s.type);if(!o)return null;let l=(o.length?o[o.length-1]:e).contentMatch;for(let c=n;l&&c<r;c++)l=l.matchType(t.child(c).type);return!l||!l.validEnd?null:o}function lC(i,e,t){let n=he.empty;for(let o=t.length-1;o>=0;o--){if(n.size){let a=t[o].type.contentMatch.matchFragment(n);if(!a||!a.validEnd)throw new RangeError("Wrapper type given to Transform.wrap does not form valid content of its parent wrapper")}n=he.from(t[o].type.create(t[o].attrs,n))}let r=e.start,s=e.end;i.step(new Zt(r,s,r,s,new Le(n,0,0),t.length,!0))}function cC(i,e,t,n,r){if(!n.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");let s=i.steps.length;i.doc.nodesBetween(e,t,(o,a)=>{let l=typeof r=="function"?r(o):r;if(o.isTextblock&&!o.hasMarkup(n,l)&&hC(i.doc,i.mapping.slice(s).map(a),n)){let c=null;if(n.schema.linebreakReplacement){let f=n.whitespace=="pre",g=!!n.contentMatch.matchType(n.schema.linebreakReplacement);f&&!g?c=!1:!f&&g&&(c=!0)}c===!1&&Dx(i,o,a,s),Gu(i,i.mapping.slice(s).map(a,1),n,void 0,c===null);let h=i.mapping.slice(s),u=h.map(a,1),d=h.map(a+o.nodeSize,1);return i.step(new Zt(u,d,u+1,d-1,new Le(he.from(n.create(l,null,o.marks)),0,0),1,!0)),c===!0&&Rx(i,o,a,s),!1}})}function Rx(i,e,t,n){e.forEach((r,s)=>{if(r.isText){let o,a=/\r?\n|\r/g;for(;o=a.exec(r.text);){let l=i.mapping.slice(n).map(t+1+s+o.index);i.replaceWith(l,l+1,e.type.schema.linebreakReplacement.create())}}})}function Dx(i,e,t,n){e.forEach((r,s)=>{if(r.type==r.type.schema.linebreakReplacement){let o=i.mapping.slice(n).map(t+1+s);i.replaceWith(o,o+1,e.type.schema.text(`
    `))}})}function hC(i,e,t){let n=i.resolve(e),r=n.index();return n.parent.canReplaceWith(r,r+1,t)}function uC(i,e,t,n,r){let s=i.doc.nodeAt(e);if(!s)throw new RangeError("No node at given position");t||(t=s.type);let o=t.create(n,null,r||s.marks);if(s.isLeaf)return i.replaceWith(e,e+s.nodeSize,o);if(!t.validContent(s.content))throw new RangeError("Invalid content for node type "+t.name);i.step(new Zt(e,e+s.nodeSize,e+1,e+s.nodeSize-1,new Le(he.from(o),0,0),1,!0))}function Ji(i,e,t=1,n){let r=i.resolve(e),s=r.depth-t,o=n&&n[n.length-1]||r.parent;if(s<0||r.parent.type.spec.isolating||!r.parent.canReplace(r.index(),r.parent.childCount)||!o.type.validContent(r.parent.content.cutByIndex(r.index(),r.parent.childCount)))return!1;for(let c=r.depth-1,h=t-2;c>s;c--,h--){let u=r.node(c),d=r.index(c);if(u.type.spec.isolating)return!1;let f=u.content.cutByIndex(d,u.childCount),g=n&&n[h+1];g&&(f=f.replaceChild(0,g.type.create(g.attrs)));let m=n&&n[h]||u;if(!u.canReplace(d+1,u.childCount)||!m.type.validContent(f))return!1}let a=r.indexAfter(s),l=n&&n[0];return r.node(s).canReplaceWith(a,a,l?l.type:r.node(s+1).type)}function dC(i,e,t=1,n){let r=i.doc.resolve(e),s=he.empty,o=he.empty;for(let a=r.depth,l=r.depth-t,c=t-1;a>l;a--,c--){s=he.from(r.node(a).copy(s));let h=n&&n[c];o=he.from(h?h.type.create(h.attrs,o):r.node(a).copy(o))}i.step(new Jt(e,e,new Le(s.append(o),t,t),!0))}function vr(i,e){let t=i.resolve(e),n=t.index();return Nx(t.nodeBefore,t.nodeAfter)&&t.parent.canReplace(n,n+1)}function fC(i,e){e.content.size||i.type.compatibleContent(e.type);let t=i.contentMatchAt(i.childCount),{linebreakReplacement:n}=i.type.schema;for(let r=0;r<e.childCount;r++){let s=e.child(r),o=s.type==n?i.type.schema.nodes.text:s.type;if(t=t.matchType(o),!t||!i.type.allowsMarks(s.marks))return!1}return t.validEnd}function Nx(i,e){return!!(i&&e&&!i.isLeaf&&fC(i,e))}function Zl(i,e,t=-1){let n=i.resolve(e);for(let r=n.depth;;r--){let s,o,a=n.index(r);if(r==n.depth?(s=n.nodeBefore,o=n.nodeAfter):t>0?(s=n.node(r+1),a++,o=n.node(r).maybeChild(a)):(s=n.node(r).maybeChild(a-1),o=n.node(r+1)),s&&!s.isTextblock&&Nx(s,o)&&n.node(r).canReplace(a,a+1))return e;if(r==0)break;e=t<0?n.before(r):n.after(r)}}function pC(i,e,t){let n=null,{linebreakReplacement:r}=i.doc.type.schema,s=i.doc.resolve(e-t),o=s.node().type;if(r&&o.inlineContent){let h=o.whitespace=="pre",u=!!o.contentMatch.matchType(r);h&&!u?n=!1:!h&&u&&(n=!0)}let a=i.steps.length;if(n===!1){let h=i.doc.resolve(e+t);Dx(i,h.node(),h.before(),a)}o.inlineContent&&Gu(i,e+t-1,o,s.node().contentMatchAt(s.index()),n==null);let l=i.mapping.slice(a),c=l.map(e-t);if(i.step(new Jt(c,l.map(e+t,-1),Le.empty,!0)),n===!0){let h=i.doc.resolve(c);Rx(i,h.node(),h.before(),i.steps.length)}return i}function gC(i,e,t){let n=i.resolve(e);if(n.parent.canReplaceWith(n.index(),n.index(),t))return e;if(n.parentOffset==0)for(let r=n.depth-1;r>=0;r--){let s=n.index(r);if(n.node(r).canReplaceWith(s,s,t))return n.before(r+1);if(s>0)return null}if(n.parentOffset==n.parent.content.size)for(let r=n.depth-1;r>=0;r--){let s=n.indexAfter(r);if(n.node(r).canReplaceWith(s,s,t))return n.after(r+1);if(s<n.node(r).childCount)return null}return null}function _x(i,e,t){let n=i.resolve(e);if(!t.content.size)return e;let r=t.content;for(let s=0;s<t.openStart;s++)r=r.firstChild.content;for(let s=1;s<=(t.openStart==0&&t.size?2:1);s++)for(let o=n.depth;o>=0;o--){let a=o==n.depth?0:n.pos<=(n.start(o+1)+n.end(o+1))/2?-1:1,l=n.index(o)+(a>0?1:0),c=n.node(o),h=!1;if(s==1)h=c.canReplace(l,l,r);else{let u=c.contentMatchAt(l).findWrapping(r.firstChild.type);h=u&&c.canReplaceWith(l,l,u[0])}if(h)return a==0?n.pos:a<0?n.before(o+1):n.after(o+1)}return null}function Ql(i,e,t=e,n=Le.empty){if(e==t&&!n.size)return null;let r=i.resolve(e),s=i.resolve(t);return zx(r,s,n)?new Jt(e,t,n):new mC(r,s,n).fit()}function zx(i,e,t){return!t.openStart&&!t.openEnd&&i.start()==e.start()&&i.parent.canReplace(i.index(),e.index(),t.content)}class mC{constructor(e,t,n){this.$from=e,this.$to=t,this.unplaced=n,this.frontier=[],this.placed=he.empty;for(let r=0;r<=e.depth;r++){let s=e.node(r);this.frontier.push({type:s.type,match:s.contentMatchAt(e.indexAfter(r))})}for(let r=e.depth;r>0;r--)this.placed=he.from(e.node(r).copy(this.placed))}get depth(){return this.frontier.length-1}fit(){for(;this.unplaced.size;){let c=this.findFittable();c?this.placeNodes(c):this.openMore()||this.dropNode()}let e=this.mustMoveInline(),t=this.placed.size-this.depth-this.$from.depth,n=this.$from,r=this.close(e<0?this.$to:n.doc.resolve(e));if(!r)return null;let s=this.placed,o=n.depth,a=r.depth;for(;o&&a&&s.childCount==1;)s=s.firstChild.content,o--,a--;let l=new Le(s,o,a);return e>-1?new Zt(n.pos,e,this.$to.pos,this.$to.end(),l,t):l.size||n.pos!=this.$to.pos?new Jt(n.pos,r.pos,l):null}findFittable(){let e=this.unplaced.openStart;for(let t=this.unplaced.content,n=0,r=this.unplaced.openEnd;n<e;n++){let s=t.firstChild;if(t.childCount>1&&(r=0),s.type.spec.isolating&&r<=n){e=n;break}t=s.content}for(let t=1;t<=2;t++)for(let n=t==1?e:this.unplaced.openStart;n>=0;n--){let r,s=null;n?(s=Uu(this.unplaced.content,n-1).firstChild,r=s.content):r=this.unplaced.content;let o=r.firstChild;for(let a=this.depth;a>=0;a--){let{type:l,match:c}=this.frontier[a],h,u=null;if(t==1&&(o?c.matchType(o.type)||(u=c.fillBefore(he.from(o),!1)):s&&l.compatibleContent(s.type)))return{sliceDepth:n,frontierDepth:a,parent:s,inject:u};if(t==2&&o&&(h=c.findWrapping(o.type)))return{sliceDepth:n,frontierDepth:a,parent:s,wrap:h};if(s&&c.matchType(s.type))break}}}openMore(){let{content:e,openStart:t,openEnd:n}=this.unplaced,r=Uu(e,t);return!r.childCount||r.firstChild.isLeaf?!1:(this.unplaced=new Le(e,t+1,Math.max(n,r.size+t>=e.size-n?t+1:0)),!0)}dropNode(){let{content:e,openStart:t,openEnd:n}=this.unplaced,r=Uu(e,t);if(r.childCount<=1&&t>0){let s=e.size-t<=t+r.size;this.unplaced=new Le(aa(e,t-1,1),t-1,s?t-1:n)}else this.unplaced=new Le(aa(e,t,1),t,n)}placeNodes({sliceDepth:e,frontierDepth:t,parent:n,inject:r,wrap:s}){for(;this.depth>t;)this.closeFrontierNode();if(s)for(let m=0;m<s.length;m++)this.openFrontierNode(s[m]);let o=this.unplaced,a=n?n.content:o.content,l=o.openStart-e,c=0,h=[],{match:u,type:d}=this.frontier[t];if(r){for(let m=0;m<r.childCount;m++)h.push(r.child(m));u=u.matchFragment(r)}let f=a.size+e-(o.content.size-o.openEnd);for(;c<a.childCount;){let m=a.child(c),b=u.matchType(m.type);if(!b)break;c++,(c>1||l==0||m.content.size)&&(u=b,h.push(Fx(m.mark(d.allowedMarks(m.marks)),c==1?l:0,c==a.childCount?f:-1)))}let g=c==a.childCount;g||(f=-1),this.placed=la(this.placed,t,he.from(h)),this.frontier[t].match=u,g&&f<0&&n&&n.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(let m=0,b=a;m<f;m++){let y=b.lastChild;this.frontier.push({type:y.type,match:y.contentMatchAt(y.childCount)}),b=y.content}this.unplaced=g?e==0?Le.empty:new Le(aa(o.content,e-1,1),e-1,f<0?o.openEnd:e-1):new Le(aa(o.content,e,c),o.openStart,o.openEnd)}mustMoveInline(){if(!this.$to.parent.isTextblock)return-1;let e=this.frontier[this.depth],t;if(!e.type.isTextblock||!Ku(this.$to,this.$to.depth,e.type,e.match,!1)||this.$to.depth==this.depth&&(t=this.findCloseLevel(this.$to))&&t.depth==this.depth)return-1;let{depth:n}=this.$to,r=this.$to.after(n);for(;n>1&&r==this.$to.end(--n);)++r;return r}findCloseLevel(e){e:for(let t=Math.min(this.depth,e.depth);t>=0;t--){let{match:n,type:r}=this.frontier[t],s=t<e.depth&&e.end(t+1)==e.pos+(e.depth-(t+1)),o=Ku(e,t,r,n,s);if(o){for(let a=t-1;a>=0;a--){let{match:l,type:c}=this.frontier[a],h=Ku(e,a,c,l,!0);if(!h||h.childCount)continue e}return{depth:t,fit:o,move:s?e.doc.resolve(e.after(t+1)):e}}}}close(e){let t=this.findCloseLevel(e);if(!t)return null;for(;this.depth>t.depth;)this.closeFrontierNode();t.fit.childCount&&(this.placed=la(this.placed,t.depth,t.fit)),e=t.move;for(let n=t.depth+1;n<=e.depth;n++){let r=e.node(n),s=r.type.contentMatch.fillBefore(r.content,!0,e.index(n));this.openFrontierNode(r.type,r.attrs,s)}return e}openFrontierNode(e,t=null,n){let r=this.frontier[this.depth];r.match=r.match.matchType(e),this.placed=la(this.placed,this.depth,he.from(e.create(t,n))),this.frontier.push({type:e,match:e.contentMatch})}closeFrontierNode(){let t=this.frontier.pop().match.fillBefore(he.empty,!0);t.childCount&&(this.placed=la(this.placed,this.frontier.length,t))}}function aa(i,e,t){return e==0?i.cutByIndex(t,i.childCount):i.replaceChild(0,i.firstChild.copy(aa(i.firstChild.content,e-1,t)))}function la(i,e,t){return e==0?i.append(t):i.replaceChild(i.childCount-1,i.lastChild.copy(la(i.lastChild.content,e-1,t)))}function Uu(i,e){for(let t=0;t<e;t++)i=i.firstChild.content;return i}function Fx(i,e,t){if(e<=0)return i;let n=i.content;return e>1&&(n=n.replaceChild(0,Fx(n.firstChild,e-1,n.childCount==1?t-1:0))),e>0&&(n=i.type.contentMatch.fillBefore(n).append(n),t<=0&&(n=n.append(i.type.contentMatch.matchFragment(n).fillBefore(he.empty,!0)))),i.copy(n)}function Ku(i,e,t,n,r){let s=i.node(e),o=r?i.indexAfter(e):i.index(e);if(o==s.childCount&&!t.compatibleContent(s.type))return null;let a=n.fillBefore(s.content,!0,o);return a&&!xC(t,s.content,o)?a:null}function xC(i,e,t){for(let n=t;n<e.childCount;n++)if(!i.allowsMarks(e.child(n).marks))return!0;return!1}function bC(i){return i.spec.defining||i.spec.definingForContent}function yC(i,e,t,n){if(!n.size)return i.deleteRange(e,t);let r=i.doc.resolve(e),s=i.doc.resolve(t);if(zx(r,s,n))return i.step(new Jt(e,t,n));let o=Hx(r,i.doc.resolve(t));o[o.length-1]==0&&o.pop();let a=-(r.depth+1);o.unshift(a);for(let d=r.depth,f=r.pos-1;d>0;d--,f--){let g=r.node(d).type.spec;if(g.defining||g.definingAsContext||g.isolating)break;o.indexOf(d)>-1?a=d:r.before(d)==f&&o.splice(1,0,-d)}let l=o.indexOf(a),c=[],h=n.openStart;for(let d=n.content,f=0;;f++){let g=d.firstChild;if(c.push(g),f==n.openStart)break;d=g.content}for(let d=h-1;d>=0;d--){let f=c[d],g=bC(f.type);if(g&&!f.sameMarkup(r.node(Math.abs(a)-1)))h=d;else if(g||!f.type.isTextblock)break}for(let d=n.openStart;d>=0;d--){let f=(d+h+1)%(n.openStart+1),g=c[f];if(g)for(let m=0;m<o.length;m++){let b=o[(m+l)%o.length],y=!0;b<0&&(y=!1,b=-b);let w=r.node(b-1),C=r.index(b-1);if(w.canReplaceWith(C,C,g.type,g.marks))return i.replace(r.before(b),y?s.after(b):t,new Le(Bx(n.content,0,n.openStart,f),f,n.openEnd))}}let u=i.steps.length;for(let d=o.length-1;d>=0&&(i.replace(e,t,n),!(i.steps.length>u));d--){let f=o[d];f<0||(e=r.before(f),t=s.after(f))}}function Bx(i,e,t,n,r){if(e<t){let s=i.firstChild;i=i.replaceChild(0,s.copy(Bx(s.content,e+1,t,n,s)))}if(e>n){let s=r.contentMatchAt(0),o=s.fillBefore(i).append(i);i=o.append(s.matchFragment(o).fillBefore(he.empty,!0))}return i}function vC(i,e,t,n){if(!n.isInline&&e==t&&i.doc.resolve(e).parent.content.size){let r=gC(i.doc,e,n.type);r!=null&&(e=t=r)}i.replaceRange(e,t,new Le(he.from(n),0,0))}function wC(i,e,t){let n=i.doc.resolve(e),r=i.doc.resolve(t),s=Hx(n,r);for(let o=0;o<s.length;o++){let a=s[o],l=o==s.length-1;if(l&&a==0||n.node(a).type.contentMatch.validEnd)return i.delete(n.start(a),r.end(a));if(a>0&&(l||n.node(a-1).canReplace(n.index(a-1),r.indexAfter(a-1))))return i.delete(n.before(a),r.after(a))}for(let o=1;o<=n.depth&&o<=r.depth;o++)if(e-n.start(o)==n.depth-o&&t>n.end(o)&&r.end(o)-t!=r.depth-o&&n.start(o-1)==r.start(o-1)&&n.node(o-1).canReplace(n.index(o-1),r.index(o-1)))return i.delete(n.before(o),t);i.delete(e,t)}function Hx(i,e){let t=[],n=Math.min(i.depth,e.depth);for(let r=n;r>=0;r--){let s=i.start(r);if(s<i.pos-(i.depth-r)||e.end(r)>e.pos+(e.depth-r)||i.node(r).type.spec.isolating||e.node(r).type.spec.isolating)break;(s==e.start(r)||r==i.depth&&r==e.depth&&i.parent.inlineContent&&e.parent.inlineContent&&r&&e.start(r-1)==s-1)&&t.push(r)}return t}class Us extends yn{constructor(e,t,n){super(),this.pos=e,this.attr=t,this.value=n}apply(e){let t=e.nodeAt(this.pos);if(!t)return Vt.fail("No node at attribute step's position");let n=Object.create(null);for(let s in t.attrs)n[s]=t.attrs[s];n[this.attr]=this.value;let r=t.type.create(n,null,t.marks);return Vt.fromReplace(e,this.pos,this.pos+1,new Le(he.from(r),0,t.isLeaf?0:1))}getMap(){return Gn.empty}invert(e){return new Us(this.pos,this.attr,e.nodeAt(this.pos).attrs[this.attr])}map(e){let t=e.mapResult(this.pos,1);return t.deletedAfter?null:new Us(t.pos,this.attr,this.value)}toJSON(){return{stepType:"attr",pos:this.pos,attr:this.attr,value:this.value}}static fromJSON(e,t){if(typeof t.pos!="number"||typeof t.attr!="string")throw new RangeError("Invalid input for AttrStep.fromJSON");return new Us(t.pos,t.attr,t.value)}}yn.jsonID("attr",Us);class ca extends yn{constructor(e,t){super(),this.attr=e,this.value=t}apply(e){let t=Object.create(null);for(let r in e.attrs)t[r]=e.attrs[r];t[this.attr]=this.value;let n=e.type.create(t,e.content,e.marks);return Vt.ok(n)}getMap(){return Gn.empty}invert(e){return new ca(this.attr,e.attrs[this.attr])}map(e){return this}toJSON(){return{stepType:"docAttr",attr:this.attr,value:this.value}}static fromJSON(e,t){if(typeof t.attr!="string")throw new RangeError("Invalid input for DocAttrStep.fromJSON");return new ca(t.attr,t.value)}}yn.jsonID("docAttr",ca);let Ks=class extends Error{};Ks=function i(e){let t=Error.call(this,e);return t.__proto__=i.prototype,t},Ks.prototype=Object.create(Error.prototype),Ks.prototype.constructor=Ks,Ks.prototype.name="TransformError";class Xx{constructor(e){this.doc=e,this.steps=[],this.docs=[],this.mapping=new oa}get before(){return this.docs.length?this.docs[0]:this.doc}step(e){let t=this.maybeStep(e);if(t.failed)throw new Ks(t.failed);return this}maybeStep(e){let t=e.apply(this.doc);return t.failed||this.addStep(e,t.doc),t}get docChanged(){return this.steps.length>0}addStep(e,t){this.docs.push(this.doc),this.steps.push(e),this.mapping.appendMap(e.getMap()),this.doc=t}replace(e,t=e,n=Le.empty){let r=Ql(this.doc,e,t,n);return r&&this.step(r),this}replaceWith(e,t,n){return this.replace(e,t,new Le(he.from(n),0,0))}delete(e,t){return this.replace(e,t,Le.empty)}insert(e,t){return this.replaceWith(e,e,t)}replaceRange(e,t,n){return yC(this,e,t,n),this}replaceRangeWith(e,t,n){return vC(this,e,t,n),this}deleteRange(e,t){return wC(this,e,t),this}lift(e,t){return sC(this,e,t),this}join(e,t=1){return pC(this,e,t),this}wrap(e,t){return lC(this,e,t),this}setBlockType(e,t=e,n,r=null){return cC(this,e,t,n,r),this}setNodeMarkup(e,t,n=null,r){return uC(this,e,t,n,r),this}setNodeAttribute(e,t,n){return this.step(new Us(e,t,n)),this}setDocAttribute(e,t){return this.step(new ca(e,t)),this}addNodeMark(e,t){return this.step(new yr(e,t)),this}removeNodeMark(e,t){if(!(t instanceof At)){let n=this.doc.nodeAt(e);if(!n)throw new RangeError("No node at position "+e);if(t=t.isInSet(n.marks),!t)return this}return this.step(new Gs(e,t)),this}split(e,t=1,n){return dC(this,e,t,n),this}addMark(e,t,n){return nC(this,e,t,n),this}removeMark(e,t,n){return iC(this,e,t,n),this}clearIncompatible(e,t,n){return Gu(this,e,t,n),this}}const Ju=Object.create(null);class tt{constructor(e,t,n){this.$anchor=e,this.$head=t,this.ranges=n||[new kC(e.min(t),e.max(t))]}get anchor(){return this.$anchor.pos}get head(){return this.$head.pos}get from(){return this.$from.pos}get to(){return this.$to.pos}get $from(){return this.ranges[0].$from}get $to(){return this.ranges[0].$to}get empty(){let e=this.ranges;for(let t=0;t<e.length;t++)if(e[t].$from.pos!=e[t].$to.pos)return!1;return!0}content(){return this.$from.doc.slice(this.from,this.to,!0)}replace(e,t=Le.empty){let n=t.content.lastChild,r=null;for(let a=0;a<t.openEnd;a++)r=n,n=n.lastChild;let s=e.steps.length,o=this.ranges;for(let a=0;a<o.length;a++){let{$from:l,$to:c}=o[a],h=e.mapping.slice(s);e.replaceRange(h.map(l.pos),h.map(c.pos),a?Le.empty:t),a==0&&jx(e,s,(n?n.isInline:r&&r.isTextblock)?-1:1)}}replaceWith(e,t){let n=e.steps.length,r=this.ranges;for(let s=0;s<r.length;s++){let{$from:o,$to:a}=r[s],l=e.mapping.slice(n),c=l.map(o.pos),h=l.map(a.pos);s?e.deleteRange(c,h):(e.replaceRangeWith(c,h,t),jx(e,n,t.isInline?-1:1))}}static findFrom(e,t,n=!1){let r=e.parent.inlineContent?new Ve(e):Js(e.node(0),e.parent,e.pos,e.index(),t,n);if(r)return r;for(let s=e.depth-1;s>=0;s--){let o=t<0?Js(e.node(0),e.node(s),e.before(s+1),e.index(s),t,n):Js(e.node(0),e.node(s),e.after(s+1),e.index(s)+1,t,n);if(o)return o}return null}static near(e,t=1){return this.findFrom(e,t)||this.findFrom(e,-t)||new qn(e.node(0))}static atStart(e){return Js(e,e,0,0,1)||new qn(e)}static atEnd(e){return Js(e,e,e.content.size,e.childCount,-1)||new qn(e)}static fromJSON(e,t){if(!t||!t.type)throw new RangeError("Invalid input for Selection.fromJSON");let n=Ju[t.type];if(!n)throw new RangeError(`No selection type ${t.type} defined`);return n.fromJSON(e,t)}static jsonID(e,t){if(e in Ju)throw new RangeError("Duplicate use of selection JSON ID "+e);return Ju[e]=t,t.prototype.jsonID=e,t}getBookmark(){return Ve.between(this.$anchor,this.$head).getBookmark()}}tt.prototype.visible=!0;class kC{constructor(e,t){this.$from=e,this.$to=t}}let Wx=!1;function Yx(i){!Wx&&!i.parent.inlineContent&&(Wx=!0,console.warn("TextSelection endpoint not pointing into a node with inline content ("+i.parent.type.name+")"))}class Ve extends tt{constructor(e,t=e){Yx(e),Yx(t),super(e,t)}get $cursor(){return this.$anchor.pos==this.$head.pos?this.$head:null}map(e,t){let n=e.resolve(t.map(this.head));if(!n.parent.inlineContent)return tt.near(n);let r=e.resolve(t.map(this.anchor));return new Ve(r.parent.inlineContent?r:n,n)}replace(e,t=Le.empty){if(super.replace(e,t),t==Le.empty){let n=this.$from.marksAcross(this.$to);n&&e.ensureMarks(n)}}eq(e){return e instanceof Ve&&e.anchor==this.anchor&&e.head==this.head}getBookmark(){return new ec(this.anchor,this.head)}toJSON(){return{type:"text",anchor:this.anchor,head:this.head}}static fromJSON(e,t){if(typeof t.anchor!="number"||typeof t.head!="number")throw new RangeError("Invalid input for TextSelection.fromJSON");return new Ve(e.resolve(t.anchor),e.resolve(t.head))}static create(e,t,n=t){let r=e.resolve(t);return new this(r,n==t?r:e.resolve(n))}static between(e,t,n){let r=e.pos-t.pos;if((!n||r)&&(n=r>=0?1:-1),!t.parent.inlineContent){let s=tt.findFrom(t,n,!0)||tt.findFrom(t,-n,!0);if(s)t=s.$head;else return tt.near(t,n)}return e.parent.inlineContent||(r==0?e=t:(e=(tt.findFrom(e,-n,!0)||tt.findFrom(e,n,!0)).$anchor,e.pos<t.pos!=r<0&&(e=t))),new Ve(e,t)}}tt.jsonID("text",Ve);class ec{constructor(e,t){this.anchor=e,this.head=t}map(e){return new ec(e.map(this.anchor),e.map(this.head))}resolve(e){return Ve.between(e.resolve(this.anchor),e.resolve(this.head))}}class Xe extends tt{constructor(e){let t=e.nodeAfter,n=e.node(0).resolve(e.pos+t.nodeSize);super(e,n),this.node=t}map(e,t){let{deleted:n,pos:r}=t.mapResult(this.anchor),s=e.resolve(r);return n?tt.near(s):new Xe(s)}content(){return new Le(he.from(this.node),0,0)}eq(e){return e instanceof Xe&&e.anchor==this.anchor}toJSON(){return{type:"node",anchor:this.anchor}}getBookmark(){return new Zu(this.anchor)}static fromJSON(e,t){if(typeof t.anchor!="number")throw new RangeError("Invalid input for NodeSelection.fromJSON");return new Xe(e.resolve(t.anchor))}static create(e,t){return new Xe(e.resolve(t))}static isSelectable(e){return!e.isText&&e.type.spec.selectable!==!1}}Xe.prototype.visible=!1,tt.jsonID("node",Xe);class Zu{constructor(e){this.anchor=e}map(e){let{deleted:t,pos:n}=e.mapResult(this.anchor);return t?new ec(n,n):new Zu(n)}resolve(e){let t=e.resolve(this.anchor),n=t.nodeAfter;return n&&Xe.isSelectable(n)?new Xe(t):tt.near(t)}}class qn extends tt{constructor(e){super(e.resolve(0),e.resolve(e.content.size))}replace(e,t=Le.empty){if(t==Le.empty){e.delete(0,e.doc.content.size);let n=tt.atStart(e.doc);n.eq(e.selection)||e.setSelection(n)}else super.replace(e,t)}toJSON(){return{type:"all"}}static fromJSON(e){return new qn(e)}map(e){return new qn(e)}eq(e){return e instanceof qn}getBookmark(){return SC}}tt.jsonID("all",qn);const SC={map(){return this},resolve(i){return new qn(i)}};function Js(i,e,t,n,r,s=!1){if(e.inlineContent)return Ve.create(i,t);for(let o=n-(r>0?0:1);r>0?o<e.childCount:o>=0;o+=r){let a=e.child(o);if(a.isAtom){if(!s&&Xe.isSelectable(a))return Xe.create(i,t-(r<0?a.nodeSize:0))}else{let l=Js(i,a,t+r,r<0?a.childCount:0,r,s);if(l)return l}t+=a.nodeSize*r}return null}function jx(i,e,t){let n=i.steps.length-1;if(n<e)return;let r=i.steps[n];if(!(r instanceof Jt||r instanceof Zt))return;let s=i.mapping.maps[n],o;s.forEach((a,l,c,h)=>{o==null&&(o=h)}),i.setSelection(tt.near(i.doc.resolve(o),t))}const Vx=1,$x=2,Gx=4;class CC extends Xx{constructor(e){super(e.doc),this.curSelectionFor=0,this.updated=0,this.meta=Object.create(null),this.time=Date.now(),this.curSelection=e.selection,this.storedMarks=e.storedMarks}get selection(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection}setSelection(e){if(e.$from.doc!=this.doc)throw new RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=e,this.curSelectionFor=this.steps.length,this.updated=(this.updated|Vx)&-3,this.storedMarks=null,this}get selectionSet(){return(this.updated&Vx)>0}setStoredMarks(e){return this.storedMarks=e,this.updated|=$x,this}ensureMarks(e){return At.sameSet(this.storedMarks||this.selection.$from.marks(),e)||this.setStoredMarks(e),this}addStoredMark(e){return this.ensureMarks(e.addToSet(this.storedMarks||this.selection.$head.marks()))}removeStoredMark(e){return this.ensureMarks(e.removeFromSet(this.storedMarks||this.selection.$head.marks()))}get storedMarksSet(){return(this.updated&$x)>0}addStep(e,t){super.addStep(e,t),this.updated=this.updated&-3,this.storedMarks=null}setTime(e){return this.time=e,this}replaceSelection(e){return this.selection.replace(this,e),this}replaceSelectionWith(e,t=!0){let n=this.selection;return t&&(e=e.mark(this.storedMarks||(n.empty?n.$from.marks():n.$from.marksAcross(n.$to)||At.none))),n.replaceWith(this,e),this}deleteSelection(){return this.selection.replace(this),this}insertText(e,t,n){let r=this.doc.type.schema;if(t==null)return e?this.replaceSelectionWith(r.text(e),!0):this.deleteSelection();{if(n==null&&(n=t),n=n??t,!e)return this.deleteRange(t,n);let s=this.storedMarks;if(!s){let o=this.doc.resolve(t);s=n==t?o.marks():o.marksAcross(this.doc.resolve(n))}return this.replaceRangeWith(t,n,r.text(e,s)),this.selection.empty||this.setSelection(tt.near(this.selection.$to)),this}}setMeta(e,t){return this.meta[typeof e=="string"?e:e.key]=t,this}getMeta(e){return this.meta[typeof e=="string"?e:e.key]}get isGeneric(){for(let e in this.meta)return!1;return!0}scrollIntoView(){return this.updated|=Gx,this}get scrolledIntoView(){return(this.updated&Gx)>0}}function qx(i,e){return!e||!i?i:i.bind(e)}class ha{constructor(e,t,n){this.name=e,this.init=qx(t.init,n),this.apply=qx(t.apply,n)}}const AC=[new ha("doc",{init(i){return i.doc||i.schema.topNodeType.createAndFill()},apply(i){return i.doc}}),new ha("selection",{init(i,e){return i.selection||tt.atStart(e.doc)},apply(i){return i.selection}}),new ha("storedMarks",{init(i){return i.storedMarks||null},apply(i,e,t,n){return n.selection.$cursor?i.storedMarks:null}}),new ha("scrollToSelection",{init(){return 0},apply(i,e){return i.scrolledIntoView?e+1:e}})];class Qu{constructor(e,t){this.schema=e,this.plugins=[],this.pluginsByKey=Object.create(null),this.fields=AC.slice(),t&&t.forEach(n=>{if(this.pluginsByKey[n.key])throw new RangeError("Adding different instances of a keyed plugin ("+n.key+")");this.plugins.push(n),this.pluginsByKey[n.key]=n,n.spec.state&&this.fields.push(new ha(n.key,n.spec.state,n))})}}class Zs{constructor(e){this.config=e}get schema(){return this.config.schema}get plugins(){return this.config.plugins}apply(e){return this.applyTransaction(e).state}filterTransaction(e,t=-1){for(let n=0;n<this.config.plugins.length;n++)if(n!=t){let r=this.config.plugins[n];if(r.spec.filterTransaction&&!r.spec.filterTransaction.call(r,e,this))return!1}return!0}applyTransaction(e){if(!this.filterTransaction(e))return{state:this,transactions:[]};let t=[e],n=this.applyInner(e),r=null;for(;;){let s=!1;for(let o=0;o<this.config.plugins.length;o++){let a=this.config.plugins[o];if(a.spec.appendTransaction){let l=r?r[o].n:0,c=r?r[o].state:this,h=l<t.length&&a.spec.appendTransaction.call(a,l?t.slice(l):t,c,n);if(h&&n.filterTransaction(h,o)){if(h.setMeta("appendedTransaction",e),!r){r=[];for(let u=0;u<this.config.plugins.length;u++)r.push(u<o?{state:n,n:t.length}:{state:this,n:0})}t.push(h),n=n.applyInner(h),s=!0}r&&(r[o]={state:n,n:t.length})}}if(!s)return{state:n,transactions:t}}}applyInner(e){if(!e.before.eq(this.doc))throw new RangeError("Applying a mismatched transaction");let t=new Zs(this.config),n=this.config.fields;for(let r=0;r<n.length;r++){let s=n[r];t[s.name]=s.apply(e,this[s.name],this,t)}return t}get tr(){return new CC(this)}static create(e){let t=new Qu(e.doc?e.doc.type.schema:e.schema,e.plugins),n=new Zs(t);for(let r=0;r<t.fields.length;r++)n[t.fields[r].name]=t.fields[r].init(e,n);return n}reconfigure(e){let t=new Qu(this.schema,e.plugins),n=t.fields,r=new Zs(t);for(let s=0;s<n.length;s++){let o=n[s].name;r[o]=this.hasOwnProperty(o)?this[o]:n[s].init(e,r)}return r}toJSON(e){let t={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(t.storedMarks=this.storedMarks.map(n=>n.toJSON())),e&&typeof e=="object")for(let n in e){if(n=="doc"||n=="selection")throw new RangeError("The JSON fields `doc` and `selection` are reserved");let r=e[n],s=r.spec.state;s&&s.toJSON&&(t[n]=s.toJSON.call(r,this[r.key]))}return t}static fromJSON(e,t,n){if(!t)throw new RangeError("Invalid input for EditorState.fromJSON");if(!e.schema)throw new RangeError("Required config field 'schema' missing");let r=new Qu(e.schema,e.plugins),s=new Zs(r);return r.fields.forEach(o=>{if(o.name=="doc")s.doc=xr.fromJSON(e.schema,t.doc);else if(o.name=="selection")s.selection=tt.fromJSON(s.doc,t.selection);else if(o.name=="storedMarks")t.storedMarks&&(s.storedMarks=t.storedMarks.map(e.schema.markFromJSON));else{if(n)for(let a in n){let l=n[a],c=l.spec.state;if(l.key==o.name&&c&&c.fromJSON&&Object.prototype.hasOwnProperty.call(t,a)){s[o.name]=c.fromJSON.call(l,e,t[a],s);return}}s[o.name]=o.init(e,s)}}),s}}function Ux(i,e,t){for(let n in i){let r=i[n];r instanceof Function?r=r.bind(e):n=="handleDOMEvents"&&(r=Ux(r,e,{})),t[n]=r}return t}class an{constructor(e){this.spec=e,this.props={},e.props&&Ux(e.props,this,this.props),this.key=e.key?e.key.key:Kx("plugin")}getState(e){return e[this.key]}}const ed=Object.create(null);function Kx(i){return i in ed?i+"$"+ ++ed[i]:(ed[i]=0,i+"$")}class Un{constructor(e="key"){this.key=Kx(e)}get(e){return e.config.pluginsByKey[this.key]}getState(e){return e[this.key]}}const ln=function(i){for(var e=0;;e++)if(i=i.previousSibling,!i)return e},Qs=function(i){let e=i.assignedSlot||i.parentNode;return e&&e.nodeType==11?e.host:e};let td=null;const Zi=function(i,e,t){let n=td||(td=document.createRange());return n.setEnd(i,t??i.nodeValue.length),n.setStart(i,e||0),n},MC=function(){td=null},as=function(i,e,t,n){return t&&(Jx(i,e,t,n,-1)||Jx(i,e,t,n,1))},TC=/^(img|br|input|textarea|hr)$/i;function Jx(i,e,t,n,r){for(;;){if(i==t&&e==n)return!0;if(e==(r<0?0:ei(i))){let s=i.parentNode;if(!s||s.nodeType!=1||ua(i)||TC.test(i.nodeName)||i.contentEditable=="false")return!1;e=ln(i)+(r<0?0:1),i=s}else if(i.nodeType==1){if(i=i.childNodes[e+(r<0?-1:0)],i.contentEditable=="false")return!1;e=r<0?ei(i):0}else return!1}}function ei(i){return i.nodeType==3?i.nodeValue.length:i.childNodes.length}function EC(i,e){for(;;){if(i.nodeType==3&&e)return i;if(i.nodeType==1&&e>0){if(i.contentEditable=="false")return null;i=i.childNodes[e-1],e=ei(i)}else if(i.parentNode&&!ua(i))e=ln(i),i=i.parentNode;else return null}}function OC(i,e){for(;;){if(i.nodeType==3&&e<i.nodeValue.length)return i;if(i.nodeType==1&&e<i.childNodes.length){if(i.contentEditable=="false")return null;i=i.childNodes[e],e=0}else if(i.parentNode&&!ua(i))e=ln(i)+1,i=i.parentNode;else return null}}function IC(i,e,t){for(let n=e==0,r=e==ei(i);n||r;){if(i==t)return!0;let s=ln(i);if(i=i.parentNode,!i)return!1;n=n&&s==0,r=r&&s==ei(i)}}function ua(i){let e;for(let t=i;t&&!(e=t.pmViewDesc);t=t.parentNode);return e&&e.node&&e.node.isBlock&&(e.dom==i||e.contentDOM==i)}const tc=function(i){return i.focusNode&&as(i.focusNode,i.focusOffset,i.anchorNode,i.anchorOffset)};function ls(i,e){let t=document.createEvent("Event");return t.initEvent("keydown",!0,!0),t.keyCode=i,t.key=t.code=e,t}function PC(i){let e=i.activeElement;for(;e&&e.shadowRoot;)e=e.shadowRoot.activeElement;return e}function LC(i,e,t){if(i.caretPositionFromPoint)try{let n=i.caretPositionFromPoint(e,t);if(n)return{node:n.offsetNode,offset:Math.min(ei(n.offsetNode),n.offset)}}catch{}if(i.caretRangeFromPoint){let n=i.caretRangeFromPoint(e,t);if(n)return{node:n.startContainer,offset:Math.min(ei(n.startContainer),n.startOffset)}}}const Li=typeof navigator<"u"?navigator:null,Zx=typeof document<"u"?document:null,wr=Li&&Li.userAgent||"",nd=/Edge\/(\d+)/.exec(wr),Qx=/MSIE \d/.exec(wr),id=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(wr),Hn=!!(Qx||id||nd),kr=Qx?document.documentMode:id?+id[1]:nd?+nd[1]:0,xi=!Hn&&/gecko\/(\d+)/i.test(wr);xi&&+(/Firefox\/(\d+)/.exec(wr)||[0,0])[1];const rd=!Hn&&/Chrome\/(\d+)/.exec(wr),vn=!!rd,eb=rd?+rd[1]:0,Rn=!Hn&&!!Li&&/Apple Computer/.test(Li.vendor),eo=Rn&&(/Mobile\/\w+/.test(wr)||!!Li&&Li.maxTouchPoints>2),ti=eo||(Li?/Mac/.test(Li.platform):!1),RC=Li?/Win/.test(Li.platform):!1,Qi=/Android \d/.test(wr),da=!!Zx&&"webkitFontSmoothing"in Zx.documentElement.style,DC=da?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0;function NC(i){let e=i.defaultView&&i.defaultView.visualViewport;return e?{left:0,right:e.width,top:0,bottom:e.height}:{left:0,right:i.documentElement.clientWidth,top:0,bottom:i.documentElement.clientHeight}}function er(i,e){return typeof i=="number"?i:i[e]}function _C(i){let e=i.getBoundingClientRect(),t=e.width/i.offsetWidth||1,n=e.height/i.offsetHeight||1;return{left:e.left,right:e.left+i.clientWidth*t,top:e.top,bottom:e.top+i.clientHeight*n}}function tb(i,e,t){let n=i.someProp("scrollThreshold")||0,r=i.someProp("scrollMargin")||5,s=i.dom.ownerDocument;for(let o=t||i.dom;o;){if(o.nodeType!=1){o=Qs(o);continue}let a=o,l=a==s.body,c=l?NC(s):_C(a),h=0,u=0;if(e.top<c.top+er(n,"top")?u=-(c.top-e.top+er(r,"top")):e.bottom>c.bottom-er(n,"bottom")&&(u=e.bottom-e.top>c.bottom-c.top?e.top+er(r,"top")-c.top:e.bottom-c.bottom+er(r,"bottom")),e.left<c.left+er(n,"left")?h=-(c.left-e.left+er(r,"left")):e.right>c.right-er(n,"right")&&(h=e.right-c.right+er(r,"right")),h||u)if(l)s.defaultView.scrollBy(h,u);else{let f=a.scrollLeft,g=a.scrollTop;u&&(a.scrollTop+=u),h&&(a.scrollLeft+=h);let m=a.scrollLeft-f,b=a.scrollTop-g;e={left:e.left-m,top:e.top-b,right:e.right-m,bottom:e.bottom-b}}let d=l?"fixed":getComputedStyle(o).position;if(/^(fixed|sticky)$/.test(d))break;o=d=="absolute"?o.offsetParent:Qs(o)}}function zC(i){let e=i.dom.getBoundingClientRect(),t=Math.max(0,e.top),n,r;for(let s=(e.left+e.right)/2,o=t+1;o<Math.min(innerHeight,e.bottom);o+=5){let a=i.root.elementFromPoint(s,o);if(!a||a==i.dom||!i.dom.contains(a))continue;let l=a.getBoundingClientRect();if(l.top>=t-20){n=a,r=l.top;break}}return{refDOM:n,refTop:r,stack:nb(i.dom)}}function nb(i){let e=[],t=i.ownerDocument;for(let n=i;n&&(e.push({dom:n,top:n.scrollTop,left:n.scrollLeft}),i!=t);n=Qs(n));return e}function FC({refDOM:i,refTop:e,stack:t}){let n=i?i.getBoundingClientRect().top:0;ib(t,n==0?0:n-e)}function ib(i,e){for(let t=0;t<i.length;t++){let{dom:n,top:r,left:s}=i[t];n.scrollTop!=r+e&&(n.scrollTop=r+e),n.scrollLeft!=s&&(n.scrollLeft=s)}}let to=null;function BC(i){if(i.setActive)return i.setActive();if(to)return i.focus(to);let e=nb(i);i.focus(to==null?{get preventScroll(){return to={preventScroll:!0},!0}}:void 0),to||(to=!1,ib(e,0))}function rb(i,e){let t,n=2e8,r,s=0,o=e.top,a=e.top,l,c;for(let h=i.firstChild,u=0;h;h=h.nextSibling,u++){let d;if(h.nodeType==1)d=h.getClientRects();else if(h.nodeType==3)d=Zi(h).getClientRects();else continue;for(let f=0;f<d.length;f++){let g=d[f];if(g.top<=o&&g.bottom>=a){o=Math.max(g.bottom,o),a=Math.min(g.top,a);let m=g.left>e.left?g.left-e.left:g.right<e.left?e.left-g.right:0;if(m<n){t=h,n=m,r=m&&t.nodeType==3?{left:g.right<e.left?g.right:g.left,top:e.top}:e,h.nodeType==1&&m&&(s=u+(e.left>=(g.left+g.right)/2?1:0));continue}}else g.top>e.top&&!l&&g.left<=e.left&&g.right>=e.left&&(l=h,c={left:Math.max(g.left,Math.min(g.right,e.left)),top:g.top});!t&&(e.left>=g.right&&e.top>=g.top||e.left>=g.left&&e.top>=g.bottom)&&(s=u+1)}}return!t&&l&&(t=l,r=c,n=0),t&&t.nodeType==3?HC(t,r):!t||n&&t.nodeType==1?{node:i,offset:s}:rb(t,r)}function HC(i,e){let t=i.nodeValue.length,n=document.createRange();for(let r=0;r<t;r++){n.setEnd(i,r+1),n.setStart(i,r);let s=Sr(n,1);if(s.top!=s.bottom&&sd(e,s))return{node:i,offset:r+(e.left>=(s.left+s.right)/2?1:0)}}return{node:i,offset:0}}function sd(i,e){return i.left>=e.left-1&&i.left<=e.right+1&&i.top>=e.top-1&&i.top<=e.bottom+1}function XC(i,e){let t=i.parentNode;return t&&/^li$/i.test(t.nodeName)&&e.left<i.getBoundingClientRect().left?t:i}function WC(i,e,t){let{node:n,offset:r}=rb(e,t),s=-1;if(n.nodeType==1&&!n.firstChild){let o=n.getBoundingClientRect();s=o.left!=o.right&&t.left>(o.left+o.right)/2?1:-1}return i.docView.posFromDOM(n,r,s)}function YC(i,e,t,n){let r=-1;for(let s=e,o=!1;s!=i.dom;){let a=i.docView.nearestDesc(s,!0),l;if(!a)return null;if(a.dom.nodeType==1&&(a.node.isBlock&&a.parent||!a.contentDOM)&&((l=a.dom.getBoundingClientRect()).width||l.height)&&(a.node.isBlock&&a.parent&&(!o&&l.left>n.left||l.top>n.top?r=a.posBefore:(!o&&l.right<n.left||l.bottom<n.top)&&(r=a.posAfter),o=!0),!a.contentDOM&&r<0&&!a.node.isText))return(a.node.isBlock?n.top<(l.top+l.bottom)/2:n.left<(l.left+l.right)/2)?a.posBefore:a.posAfter;s=a.dom.parentNode}return r>-1?r:i.docView.posFromDOM(e,t,-1)}function sb(i,e,t){let n=i.childNodes.length;if(n&&t.top<t.bottom)for(let r=Math.max(0,Math.min(n-1,Math.floor(n*(e.top-t.top)/(t.bottom-t.top))-2)),s=r;;){let o=i.childNodes[s];if(o.nodeType==1){let a=o.getClientRects();for(let l=0;l<a.length;l++){let c=a[l];if(sd(e,c))return sb(o,e,c)}}if((s=(s+1)%n)==r)break}return i}function jC(i,e){let t=i.dom.ownerDocument,n,r=0,s=LC(t,e.left,e.top);s&&({node:n,offset:r}=s);let o=(i.root.elementFromPoint?i.root:t).elementFromPoint(e.left,e.top),a;if(!o||!i.dom.contains(o.nodeType!=1?o.parentNode:o)){let c=i.dom.getBoundingClientRect();if(!sd(e,c)||(o=sb(i.dom,e,c),!o))return null}if(Rn)for(let c=o;n&&c;c=Qs(c))c.draggable&&(n=void 0);if(o=XC(o,e),n){if(xi&&n.nodeType==1&&(r=Math.min(r,n.childNodes.length),r<n.childNodes.length)){let h=n.childNodes[r],u;h.nodeName=="IMG"&&(u=h.getBoundingClientRect()).right<=e.left&&u.bottom>e.top&&r++}let c;da&&r&&n.nodeType==1&&(c=n.childNodes[r-1]).nodeType==1&&c.contentEditable=="false"&&c.getBoundingClientRect().top>=e.top&&r--,n==i.dom&&r==n.childNodes.length-1&&n.lastChild.nodeType==1&&e.top>n.lastChild.getBoundingClientRect().bottom?a=i.state.doc.content.size:(r==0||n.nodeType!=1||n.childNodes[r-1].nodeName!="BR")&&(a=YC(i,n,r,e))}a==null&&(a=WC(i,o,e));let l=i.docView.nearestDesc(o,!0);return{pos:a,inside:l?l.posAtStart-l.border:-1}}function ob(i){return i.top<i.bottom||i.left<i.right}function Sr(i,e){let t=i.getClientRects();if(t.length){let n=t[e<0?0:t.length-1];if(ob(n))return n}return Array.prototype.find.call(t,ob)||i.getBoundingClientRect()}const VC=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;function ab(i,e,t){let{node:n,offset:r,atom:s}=i.docView.domFromPos(e,t<0?-1:1),o=da||xi;if(n.nodeType==3)if(o&&(VC.test(n.nodeValue)||(t<0?!r:r==n.nodeValue.length))){let l=Sr(Zi(n,r,r),t);if(xi&&r&&/\s/.test(n.nodeValue[r-1])&&r<n.nodeValue.length){let c=Sr(Zi(n,r-1,r-1),-1);if(c.top==l.top){let h=Sr(Zi(n,r,r+1),-1);if(h.top!=l.top)return fa(h,h.left<c.left)}}return l}else{let l=r,c=r,h=t<0?1:-1;return t<0&&!r?(c++,h=-1):t>=0&&r==n.nodeValue.length?(l--,h=1):t<0?l--:c++,fa(Sr(Zi(n,l,c),h),h<0)}if(!i.state.doc.resolve(e-(s||0)).parent.inlineContent){if(s==null&&r&&(t<0||r==ei(n))){let l=n.childNodes[r-1];if(l.nodeType==1)return od(l.getBoundingClientRect(),!1)}if(s==null&&r<ei(n)){let l=n.childNodes[r];if(l.nodeType==1)return od(l.getBoundingClientRect(),!0)}return od(n.getBoundingClientRect(),t>=0)}if(s==null&&r&&(t<0||r==ei(n))){let l=n.childNodes[r-1],c=l.nodeType==3?Zi(l,ei(l)-(o?0:1)):l.nodeType==1&&(l.nodeName!="BR"||!l.nextSibling)?l:null;if(c)return fa(Sr(c,1),!1)}if(s==null&&r<ei(n)){let l=n.childNodes[r];for(;l.pmViewDesc&&l.pmViewDesc.ignoreForCoords;)l=l.nextSibling;let c=l?l.nodeType==3?Zi(l,0,o?0:1):l.nodeType==1?l:null:null;if(c)return fa(Sr(c,-1),!0)}return fa(Sr(n.nodeType==3?Zi(n):n,-t),t>=0)}function fa(i,e){if(i.width==0)return i;let t=e?i.left:i.right;return{top:i.top,bottom:i.bottom,left:t,right:t}}function od(i,e){if(i.height==0)return i;let t=e?i.top:i.bottom;return{top:t,bottom:t,left:i.left,right:i.right}}function lb(i,e,t){let n=i.state,r=i.root.activeElement;n!=e&&i.updateState(e),r!=i.dom&&i.focus();try{return t()}finally{n!=e&&i.updateState(n),r!=i.dom&&r&&r.focus()}}function $C(i,e,t){let n=e.selection,r=t=="up"?n.$from:n.$to;return lb(i,e,()=>{let{node:s}=i.docView.domFromPos(r.pos,t=="up"?-1:1);for(;;){let a=i.docView.nearestDesc(s,!0);if(!a)break;if(a.node.isBlock){s=a.contentDOM||a.dom;break}s=a.dom.parentNode}let o=ab(i,r.pos,1);for(let a=s.firstChild;a;a=a.nextSibling){let l;if(a.nodeType==1)l=a.getClientRects();else if(a.nodeType==3)l=Zi(a,0,a.nodeValue.length).getClientRects();else continue;for(let c=0;c<l.length;c++){let h=l[c];if(h.bottom>h.top+1&&(t=="up"?o.top-h.top>(h.bottom-o.top)*2:h.bottom-o.bottom>(o.bottom-h.top)*2))return!1}}return!0})}const GC=/[\u0590-\u08ac]/;function qC(i,e,t){let{$head:n}=e.selection;if(!n.parent.isTextblock)return!1;let r=n.parentOffset,s=!r,o=r==n.parent.content.size,a=i.domSelection();return a?!GC.test(n.parent.textContent)||!a.modify?t=="left"||t=="backward"?s:o:lb(i,e,()=>{let{focusNode:l,focusOffset:c,anchorNode:h,anchorOffset:u}=i.domSelectionRange(),d=a.caretBidiLevel;a.modify("move",t,"character");let f=n.depth?i.docView.domAfterPos(n.before()):i.dom,{focusNode:g,focusOffset:m}=i.domSelectionRange(),b=g&&!f.contains(g.nodeType==1?g:g.parentNode)||l==g&&c==m;try{a.collapse(h,u),l&&(l!=h||c!=u)&&a.extend&&a.extend(l,c)}catch{}return d!=null&&(a.caretBidiLevel=d),b}):n.pos==n.start()||n.pos==n.end()}let cb=null,hb=null,ub=!1;function UC(i,e,t){return cb==e&&hb==t?ub:(cb=e,hb=t,ub=t=="up"||t=="down"?$C(i,e,t):qC(i,e,t))}const ni=0,db=1,cs=2,Ri=3;class pa{constructor(e,t,n,r){this.parent=e,this.children=t,this.dom=n,this.contentDOM=r,this.dirty=ni,n.pmViewDesc=this}matchesWidget(e){return!1}matchesMark(e){return!1}matchesNode(e,t,n){return!1}matchesHack(e){return!1}parseRule(){return null}stopEvent(e){return!1}get size(){let e=0;for(let t=0;t<this.children.length;t++)e+=this.children[t].size;return e}get border(){return 0}destroy(){this.parent=void 0,this.dom.pmViewDesc==this&&(this.dom.pmViewDesc=void 0);for(let e=0;e<this.children.length;e++)this.children[e].destroy()}posBeforeChild(e){for(let t=0,n=this.posAtStart;;t++){let r=this.children[t];if(r==e)return n;n+=r.size}}get posBefore(){return this.parent.posBeforeChild(this)}get posAtStart(){return this.parent?this.parent.posBeforeChild(this)+this.border:0}get posAfter(){return this.posBefore+this.size}get posAtEnd(){return this.posAtStart+this.size-2*this.border}localPosFromDOM(e,t,n){if(this.contentDOM&&this.contentDOM.contains(e.nodeType==1?e:e.parentNode))if(n<0){let s,o;if(e==this.contentDOM)s=e.childNodes[t-1];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;s=e.previousSibling}for(;s&&!((o=s.pmViewDesc)&&o.parent==this);)s=s.previousSibling;return s?this.posBeforeChild(o)+o.size:this.posAtStart}else{let s,o;if(e==this.contentDOM)s=e.childNodes[t];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;s=e.nextSibling}for(;s&&!((o=s.pmViewDesc)&&o.parent==this);)s=s.nextSibling;return s?this.posBeforeChild(o):this.posAtEnd}let r;if(e==this.dom&&this.contentDOM)r=t>ln(this.contentDOM);else if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))r=e.compareDocumentPosition(this.contentDOM)&2;else if(this.dom.firstChild){if(t==0)for(let s=e;;s=s.parentNode){if(s==this.dom){r=!1;break}if(s.previousSibling)break}if(r==null&&t==e.childNodes.length)for(let s=e;;s=s.parentNode){if(s==this.dom){r=!0;break}if(s.nextSibling)break}}return r??n>0?this.posAtEnd:this.posAtStart}nearestDesc(e,t=!1){for(let n=!0,r=e;r;r=r.parentNode){let s=this.getDesc(r),o;if(s&&(!t||s.node))if(n&&(o=s.nodeDOM)&&!(o.nodeType==1?o.contains(e.nodeType==1?e:e.parentNode):o==e))n=!1;else return s}}getDesc(e){let t=e.pmViewDesc;for(let n=t;n;n=n.parent)if(n==this)return t}posFromDOM(e,t,n){for(let r=e;r;r=r.parentNode){let s=this.getDesc(r);if(s)return s.localPosFromDOM(e,t,n)}return-1}descAt(e){for(let t=0,n=0;t<this.children.length;t++){let r=this.children[t],s=n+r.size;if(n==e&&s!=n){for(;!r.border&&r.children.length;)for(let o=0;o<r.children.length;o++){let a=r.children[o];if(a.size){r=a;break}}return r}if(e<s)return r.descAt(e-n-r.border);n=s}}domFromPos(e,t){if(!this.contentDOM)return{node:this.dom,offset:0,atom:e+1};let n=0,r=0;for(let s=0;n<this.children.length;n++){let o=this.children[n],a=s+o.size;if(a>e||o instanceof gb){r=e-s;break}s=a}if(r)return this.children[n].domFromPos(r-this.children[n].border,t);for(let s;n&&!(s=this.children[n-1]).size&&s instanceof fb&&s.side>=0;n--);if(t<=0){let s,o=!0;for(;s=n?this.children[n-1]:null,!(!s||s.dom.parentNode==this.contentDOM);n--,o=!1);return s&&t&&o&&!s.border&&!s.domAtom?s.domFromPos(s.size,t):{node:this.contentDOM,offset:s?ln(s.dom)+1:0}}else{let s,o=!0;for(;s=n<this.children.length?this.children[n]:null,!(!s||s.dom.parentNode==this.contentDOM);n++,o=!1);return s&&o&&!s.border&&!s.domAtom?s.domFromPos(0,t):{node:this.contentDOM,offset:s?ln(s.dom):this.contentDOM.childNodes.length}}}parseRange(e,t,n=0){if(this.children.length==0)return{node:this.contentDOM,from:e,to:t,fromOffset:0,toOffset:this.contentDOM.childNodes.length};let r=-1,s=-1;for(let o=n,a=0;;a++){let l=this.children[a],c=o+l.size;if(r==-1&&e<=c){let h=o+l.border;if(e>=h&&t<=c-l.border&&l.node&&l.contentDOM&&this.contentDOM.contains(l.contentDOM))return l.parseRange(e,t,h);e=o;for(let u=a;u>0;u--){let d=this.children[u-1];if(d.size&&d.dom.parentNode==this.contentDOM&&!d.emptyChildAt(1)){r=ln(d.dom)+1;break}e-=d.size}r==-1&&(r=0)}if(r>-1&&(c>t||a==this.children.length-1)){t=c;for(let h=a+1;h<this.children.length;h++){let u=this.children[h];if(u.size&&u.dom.parentNode==this.contentDOM&&!u.emptyChildAt(-1)){s=ln(u.dom);break}t+=u.size}s==-1&&(s=this.contentDOM.childNodes.length);break}o=c}return{node:this.contentDOM,from:e,to:t,fromOffset:r,toOffset:s}}emptyChildAt(e){if(this.border||!this.contentDOM||!this.children.length)return!1;let t=this.children[e<0?0:this.children.length-1];return t.size==0||t.emptyChildAt(e)}domAfterPos(e){let{node:t,offset:n}=this.domFromPos(e,0);if(t.nodeType!=1||n==t.childNodes.length)throw new RangeError("No node after pos "+e);return t.childNodes[n]}setSelection(e,t,n,r=!1){let s=Math.min(e,t),o=Math.max(e,t);for(let f=0,g=0;f<this.children.length;f++){let m=this.children[f],b=g+m.size;if(s>g&&o<b)return m.setSelection(e-g-m.border,t-g-m.border,n,r);g=b}let a=this.domFromPos(e,e?-1:1),l=t==e?a:this.domFromPos(t,t?-1:1),c=n.root.getSelection(),h=n.domSelectionRange(),u=!1;if((xi||Rn)&&e==t){let{node:f,offset:g}=a;if(f.nodeType==3){if(u=!!(g&&f.nodeValue[g-1]==`
    `),u&&g==f.nodeValue.length)for(let m=f,b;m;m=m.parentNode){if(b=m.nextSibling){b.nodeName=="BR"&&(a=l={node:b.parentNode,offset:ln(b)+1});break}let y=m.pmViewDesc;if(y&&y.node&&y.node.isBlock)break}}else{let m=f.childNodes[g-1];u=m&&(m.nodeName=="BR"||m.contentEditable=="false")}}if(xi&&h.focusNode&&h.focusNode!=l.node&&h.focusNode.nodeType==1){let f=h.focusNode.childNodes[h.focusOffset];f&&f.contentEditable=="false"&&(r=!0)}if(!(r||u&&Rn)&&as(a.node,a.offset,h.anchorNode,h.anchorOffset)&&as(l.node,l.offset,h.focusNode,h.focusOffset))return;let d=!1;if((c.extend||e==t)&&!u){c.collapse(a.node,a.offset);try{e!=t&&c.extend(l.node,l.offset),d=!0}catch{}}if(!d){if(e>t){let g=a;a=l,l=g}let f=document.createRange();f.setEnd(l.node,l.offset),f.setStart(a.node,a.offset),c.removeAllRanges(),c.addRange(f)}}ignoreMutation(e){return!this.contentDOM&&e.type!="selection"}get contentLost(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)}markDirty(e,t){for(let n=0,r=0;r<this.children.length;r++){let s=this.children[r],o=n+s.size;if(n==o?e<=o&&t>=n:e<o&&t>n){let a=n+s.border,l=o-s.border;if(e>=a&&t<=l){this.dirty=e==n||t==o?cs:db,e==a&&t==l&&(s.contentLost||s.dom.parentNode!=this.contentDOM)?s.dirty=Ri:s.markDirty(e-a,t-a);return}else s.dirty=s.dom==s.contentDOM&&s.dom.parentNode==this.contentDOM&&!s.children.length?cs:Ri}n=o}this.dirty=cs}markParentsDirty(){let e=1;for(let t=this.parent;t;t=t.parent,e++){let n=e==1?cs:db;t.dirty<n&&(t.dirty=n)}}get domAtom(){return!1}get ignoreForCoords(){return!1}isText(e){return!1}}class fb extends pa{constructor(e,t,n,r){let s,o=t.type.toDOM;if(typeof o=="function"&&(o=o(n,()=>{if(!s)return r;if(s.parent)return s.parent.posBeforeChild(s)})),!t.type.spec.raw){if(o.nodeType!=1){let a=document.createElement("span");a.appendChild(o),o=a}o.contentEditable="false",o.classList.add("ProseMirror-widget")}super(e,[],o,null),this.widget=t,this.widget=t,s=this}matchesWidget(e){return this.dirty==ni&&e.type.eq(this.widget.type)}parseRule(){return{ignore:!0}}stopEvent(e){let t=this.widget.spec.stopEvent;return t?t(e):!1}ignoreMutation(e){return e.type!="selection"||this.widget.spec.ignoreSelection}destroy(){this.widget.type.destroy(this.dom),super.destroy()}get domAtom(){return!0}get side(){return this.widget.type.side}}class KC extends pa{constructor(e,t,n,r){super(e,[],t,null),this.textDOM=n,this.text=r}get size(){return this.text.length}localPosFromDOM(e,t){return e!=this.textDOM?this.posAtStart+(t?this.size:0):this.posAtStart+t}domFromPos(e){return{node:this.textDOM,offset:e}}ignoreMutation(e){return e.type==="characterData"&&e.target.nodeValue==e.oldValue}}class hs extends pa{constructor(e,t,n,r,s){super(e,[],n,r),this.mark=t,this.spec=s}static create(e,t,n,r){let s=r.nodeViews[t.type.name],o=s&&s(t,r,n);return(!o||!o.dom)&&(o=ss.renderSpec(document,t.type.spec.toDOM(t,n),null,t.attrs)),new hs(e,t,o.dom,o.contentDOM||o.dom,o)}parseRule(){return this.dirty&Ri||this.mark.type.spec.reparseInView?null:{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM}}matchesMark(e){return this.dirty!=Ri&&this.mark.eq(e)}markDirty(e,t){if(super.markDirty(e,t),this.dirty!=ni){let n=this.parent;for(;!n.node;)n=n.parent;n.dirty<this.dirty&&(n.dirty=this.dirty),this.dirty=ni}}slice(e,t,n){let r=hs.create(this.parent,this.mark,!0,n),s=this.children,o=this.size;t<o&&(s=ld(s,t,o,n)),e>0&&(s=ld(s,0,e,n));for(let a=0;a<s.length;a++)s[a].parent=r;return r.children=s,r}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}}class Cr extends pa{constructor(e,t,n,r,s,o,a,l,c){super(e,[],s,o),this.node=t,this.outerDeco=n,this.innerDeco=r,this.nodeDOM=a}static create(e,t,n,r,s,o){let a=s.nodeViews[t.type.name],l,c=a&&a(t,s,()=>{if(!l)return o;if(l.parent)return l.parent.posBeforeChild(l)},n,r),h=c&&c.dom,u=c&&c.contentDOM;if(t.isText){if(!h)h=document.createTextNode(t.text);else if(h.nodeType!=3)throw new RangeError("Text must be rendered as a DOM text node")}else h||({dom:h,contentDOM:u}=ss.renderSpec(document,t.type.spec.toDOM(t),null,t.attrs));!u&&!t.isText&&h.nodeName!="BR"&&(h.hasAttribute("contenteditable")||(h.contentEditable="false"),t.type.spec.draggable&&(h.draggable=!0));let d=h;return h=bb(h,n,t),c?l=new JC(e,t,n,r,h,u||null,d,c,s,o+1):t.isText?new nc(e,t,n,r,h,d,s):new Cr(e,t,n,r,h,u||null,d,s,o+1)}parseRule(){if(this.node.type.spec.reparseInView)return null;let e={node:this.node.type.name,attrs:this.node.attrs};if(this.node.type.whitespace=="pre"&&(e.preserveWhitespace="full"),!this.contentDOM)e.getContent=()=>this.node.content;else if(!this.contentLost)e.contentElement=this.contentDOM;else{for(let t=this.children.length-1;t>=0;t--){let n=this.children[t];if(this.dom.contains(n.dom.parentNode)){e.contentElement=n.dom.parentNode;break}}e.contentElement||(e.getContent=()=>he.empty)}return e}matchesNode(e,t,n){return this.dirty==ni&&e.eq(this.node)&&ic(t,this.outerDeco)&&n.eq(this.innerDeco)}get size(){return this.node.nodeSize}get border(){return this.node.isLeaf?0:1}updateChildren(e,t){let n=this.node.inlineContent,r=t,s=e.composing?this.localCompositionInfo(e,t):null,o=s&&s.pos>-1?s:null,a=s&&s.pos<0,l=new QC(this,o&&o.node,e);nA(this.node,this.innerDeco,(c,h,u)=>{c.spec.marks?l.syncToMarks(c.spec.marks,n,e):c.type.side>=0&&!u&&l.syncToMarks(h==this.node.childCount?At.none:this.node.child(h).marks,n,e),l.placeWidget(c,e,r)},(c,h,u,d)=>{l.syncToMarks(c.marks,n,e);let f;l.findNodeMatch(c,h,u,d)||a&&e.state.selection.from>r&&e.state.selection.to<r+c.nodeSize&&(f=l.findIndexWithChild(s.node))>-1&&l.updateNodeAt(c,h,u,f,e)||l.updateNextNode(c,h,u,e,d,r)||l.addNode(c,h,u,e,r),r+=c.nodeSize}),l.syncToMarks([],n,e),this.node.isTextblock&&l.addTextblockHacks(),l.destroyRest(),(l.changed||this.dirty==cs)&&(o&&this.protectLocalComposition(e,o),mb(this.contentDOM,this.children,e),eo&&iA(this.dom))}localCompositionInfo(e,t){let{from:n,to:r}=e.state.selection;if(!(e.state.selection instanceof Ve)||n<t||r>t+this.node.content.size)return null;let s=e.input.compositionNode;if(!s||!this.dom.contains(s.parentNode))return null;if(this.node.inlineContent){let o=s.nodeValue,a=rA(this.node.content,o,n-t,r-t);return a<0?null:{node:s,pos:a,text:o}}else return{node:s,pos:-1,text:""}}protectLocalComposition(e,{node:t,pos:n,text:r}){if(this.getDesc(t))return;let s=t;for(;s.parentNode!=this.contentDOM;s=s.parentNode){for(;s.previousSibling;)s.parentNode.removeChild(s.previousSibling);for(;s.nextSibling;)s.parentNode.removeChild(s.nextSibling);s.pmViewDesc&&(s.pmViewDesc=void 0)}let o=new KC(this,s,t,r);e.input.compositionNodes.push(o),this.children=ld(this.children,n,n+r.length,e,o)}update(e,t,n,r){return this.dirty==Ri||!e.sameMarkup(this.node)?!1:(this.updateInner(e,t,n,r),!0)}updateInner(e,t,n,r){this.updateOuterDeco(t),this.node=e,this.innerDeco=n,this.contentDOM&&this.updateChildren(r,this.posAtStart),this.dirty=ni}updateOuterDeco(e){if(ic(e,this.outerDeco))return;let t=this.nodeDOM.nodeType!=1,n=this.dom;this.dom=xb(this.dom,this.nodeDOM,ad(this.outerDeco,this.node,t),ad(e,this.node,t)),this.dom!=n&&(n.pmViewDesc=void 0,this.dom.pmViewDesc=this),this.outerDeco=e}selectNode(){this.nodeDOM.nodeType==1&&this.nodeDOM.classList.add("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&(this.dom.draggable=!0)}deselectNode(){this.nodeDOM.nodeType==1&&(this.nodeDOM.classList.remove("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&this.dom.removeAttribute("draggable"))}get domAtom(){return this.node.isAtom}}function pb(i,e,t,n,r){bb(n,e,i);let s=new Cr(void 0,i,e,t,n,n,n,r,0);return s.contentDOM&&s.updateChildren(r,0),s}class nc extends Cr{constructor(e,t,n,r,s,o,a){super(e,t,n,r,s,null,o,a,0)}parseRule(){let e=this.nodeDOM.parentNode;for(;e&&e!=this.dom&&!e.pmIsDeco;)e=e.parentNode;return{skip:e||!0}}update(e,t,n,r){return this.dirty==Ri||this.dirty!=ni&&!this.inParent()||!e.sameMarkup(this.node)?!1:(this.updateOuterDeco(t),(this.dirty!=ni||e.text!=this.node.text)&&e.text!=this.nodeDOM.nodeValue&&(this.nodeDOM.nodeValue=e.text,r.trackWrites==this.nodeDOM&&(r.trackWrites=null)),this.node=e,this.dirty=ni,!0)}inParent(){let e=this.parent.contentDOM;for(let t=this.nodeDOM;t;t=t.parentNode)if(t==e)return!0;return!1}domFromPos(e){return{node:this.nodeDOM,offset:e}}localPosFromDOM(e,t,n){return e==this.nodeDOM?this.posAtStart+Math.min(t,this.node.text.length):super.localPosFromDOM(e,t,n)}ignoreMutation(e){return e.type!="characterData"&&e.type!="selection"}slice(e,t,n){let r=this.node.cut(e,t),s=document.createTextNode(r.text);return new nc(this.parent,r,this.outerDeco,this.innerDeco,s,s,n)}markDirty(e,t){super.markDirty(e,t),this.dom!=this.nodeDOM&&(e==0||t==this.nodeDOM.nodeValue.length)&&(this.dirty=Ri)}get domAtom(){return!1}isText(e){return this.node.text==e}}class gb extends pa{parseRule(){return{ignore:!0}}matchesHack(e){return this.dirty==ni&&this.dom.nodeName==e}get domAtom(){return!0}get ignoreForCoords(){return this.dom.nodeName=="IMG"}}class JC extends Cr{constructor(e,t,n,r,s,o,a,l,c,h){super(e,t,n,r,s,o,a,c,h),this.spec=l}update(e,t,n,r){if(this.dirty==Ri)return!1;if(this.spec.update&&(this.node.type==e.type||this.spec.multiType)){let s=this.spec.update(e,t,n);return s&&this.updateInner(e,t,n,r),s}else return!this.contentDOM&&!e.isLeaf?!1:super.update(e,t,n,r)}selectNode(){this.spec.selectNode?this.spec.selectNode():super.selectNode()}deselectNode(){this.spec.deselectNode?this.spec.deselectNode():super.deselectNode()}setSelection(e,t,n,r){this.spec.setSelection?this.spec.setSelection(e,t,n.root):super.setSelection(e,t,n,r)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}stopEvent(e){return this.spec.stopEvent?this.spec.stopEvent(e):!1}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}}function mb(i,e,t){let n=i.firstChild,r=!1;for(let s=0;s<e.length;s++){let o=e[s],a=o.dom;if(a.parentNode==i){for(;a!=n;)n=yb(n),r=!0;n=n.nextSibling}else r=!0,i.insertBefore(a,n);if(o instanceof hs){let l=n?n.previousSibling:i.lastChild;mb(o.contentDOM,o.children,t),n=l?l.nextSibling:i.firstChild}}for(;n;)n=yb(n),r=!0;r&&t.trackWrites==i&&(t.trackWrites=null)}const ga=function(i){i&&(this.nodeName=i)};ga.prototype=Object.create(null);const us=[new ga];function ad(i,e,t){if(i.length==0)return us;let n=t?us[0]:new ga,r=[n];for(let s=0;s<i.length;s++){let o=i[s].type.attrs;if(o){o.nodeName&&r.push(n=new ga(o.nodeName));for(let a in o){let l=o[a];l!=null&&(t&&r.length==1&&r.push(n=new ga(e.isInline?"span":"div")),a=="class"?n.class=(n.class?n.class+" ":"")+l:a=="style"?n.style=(n.style?n.style+";":"")+l:a!="nodeName"&&(n[a]=l))}}}return r}function xb(i,e,t,n){if(t==us&&n==us)return e;let r=e;for(let s=0;s<n.length;s++){let o=n[s],a=t[s];if(s){let l;a&&a.nodeName==o.nodeName&&r!=i&&(l=r.parentNode)&&l.nodeName.toLowerCase()==o.nodeName||(l=document.createElement(o.nodeName),l.pmIsDeco=!0,l.appendChild(r),a=us[0]),r=l}ZC(r,a||us[0],o)}return r}function ZC(i,e,t){for(let n in e)n!="class"&&n!="style"&&n!="nodeName"&&!(n in t)&&i.removeAttribute(n);for(let n in t)n!="class"&&n!="style"&&n!="nodeName"&&t[n]!=e[n]&&i.setAttribute(n,t[n]);if(e.class!=t.class){let n=e.class?e.class.split(" ").filter(Boolean):[],r=t.class?t.class.split(" ").filter(Boolean):[];for(let s=0;s<n.length;s++)r.indexOf(n[s])==-1&&i.classList.remove(n[s]);for(let s=0;s<r.length;s++)n.indexOf(r[s])==-1&&i.classList.add(r[s]);i.classList.length==0&&i.removeAttribute("class")}if(e.style!=t.style){if(e.style){let n=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g,r;for(;r=n.exec(e.style);)i.style.removeProperty(r[1])}t.style&&(i.style.cssText+=t.style)}}function bb(i,e,t){return xb(i,i,us,ad(e,t,i.nodeType!=1))}function ic(i,e){if(i.length!=e.length)return!1;for(let t=0;t<i.length;t++)if(!i[t].type.eq(e[t].type))return!1;return!0}function yb(i){let e=i.nextSibling;return i.parentNode.removeChild(i),e}class QC{constructor(e,t,n){this.lock=t,this.view=n,this.index=0,this.stack=[],this.changed=!1,this.top=e,this.preMatch=eA(e.node.content,e)}destroyBetween(e,t){if(e!=t){for(let n=e;n<t;n++)this.top.children[n].destroy();this.top.children.splice(e,t-e),this.changed=!0}}destroyRest(){this.destroyBetween(this.index,this.top.children.length)}syncToMarks(e,t,n){let r=0,s=this.stack.length>>1,o=Math.min(s,e.length);for(;r<o&&(r==s-1?this.top:this.stack[r+1<<1]).matchesMark(e[r])&&e[r].type.spec.spanning!==!1;)r++;for(;r<s;)this.destroyRest(),this.top.dirty=ni,this.index=this.stack.pop(),this.top=this.stack.pop(),s--;for(;s<e.length;){this.stack.push(this.top,this.index+1);let a=-1;for(let l=this.index;l<Math.min(this.index+3,this.top.children.length);l++){let c=this.top.children[l];if(c.matchesMark(e[s])&&!this.isLocked(c.dom)){a=l;break}}if(a>-1)a>this.index&&(this.changed=!0,this.destroyBetween(this.index,a)),this.top=this.top.children[this.index];else{let l=hs.create(this.top,e[s],t,n);this.top.children.splice(this.index,0,l),this.top=l,this.changed=!0}this.index=0,s++}}findNodeMatch(e,t,n,r){let s=-1,o;if(r>=this.preMatch.index&&(o=this.preMatch.matches[r-this.preMatch.index]).parent==this.top&&o.matchesNode(e,t,n))s=this.top.children.indexOf(o,this.index);else for(let a=this.index,l=Math.min(this.top.children.length,a+5);a<l;a++){let c=this.top.children[a];if(c.matchesNode(e,t,n)&&!this.preMatch.matched.has(c)){s=a;break}}return s<0?!1:(this.destroyBetween(this.index,s),this.index++,!0)}updateNodeAt(e,t,n,r,s){let o=this.top.children[r];return o.dirty==Ri&&o.dom==o.contentDOM&&(o.dirty=cs),o.update(e,t,n,s)?(this.destroyBetween(this.index,r),this.index++,!0):!1}findIndexWithChild(e){for(;;){let t=e.parentNode;if(!t)return-1;if(t==this.top.contentDOM){let n=e.pmViewDesc;if(n){for(let r=this.index;r<this.top.children.length;r++)if(this.top.children[r]==n)return r}return-1}e=t}}updateNextNode(e,t,n,r,s,o){for(let a=this.index;a<this.top.children.length;a++){let l=this.top.children[a];if(l instanceof Cr){let c=this.preMatch.matched.get(l);if(c!=null&&c!=s)return!1;let h=l.dom,u,d=this.isLocked(h)&&!(e.isText&&l.node&&l.node.isText&&l.nodeDOM.nodeValue==e.text&&l.dirty!=Ri&&ic(t,l.outerDeco));if(!d&&l.update(e,t,n,r))return this.destroyBetween(this.index,a),l.dom!=h&&(this.changed=!0),this.index++,!0;if(!d&&(u=this.recreateWrapper(l,e,t,n,r,o)))return this.destroyBetween(this.index,a),this.top.children[this.index]=u,u.contentDOM&&(u.dirty=cs,u.updateChildren(r,o+1),u.dirty=ni),this.changed=!0,this.index++,!0;break}}return!1}recreateWrapper(e,t,n,r,s,o){if(e.dirty||t.isAtom||!e.children.length||!e.node.content.eq(t.content)||!ic(n,e.outerDeco)||!r.eq(e.innerDeco))return null;let a=Cr.create(this.top,t,n,r,s,o);if(a.contentDOM){a.children=e.children,e.children=[];for(let l of a.children)l.parent=a}return e.destroy(),a}addNode(e,t,n,r,s){let o=Cr.create(this.top,e,t,n,r,s);o.contentDOM&&o.updateChildren(r,s+1),this.top.children.splice(this.index++,0,o),this.changed=!0}placeWidget(e,t,n){let r=this.index<this.top.children.length?this.top.children[this.index]:null;if(r&&r.matchesWidget(e)&&(e==r.widget||!r.widget.type.toDOM.parentNode))this.index++;else{let s=new fb(this.top,e,t,n);this.top.children.splice(this.index++,0,s),this.changed=!0}}addTextblockHacks(){let e=this.top.children[this.index-1],t=this.top;for(;e instanceof hs;)t=e,e=t.children[t.children.length-1];(!e||!(e instanceof nc)||/\n$/.test(e.node.text)||this.view.requiresGeckoHackNode&&/\s$/.test(e.node.text))&&((Rn||vn)&&e&&e.dom.contentEditable=="false"&&this.addHackNode("IMG",t),this.addHackNode("BR",this.top))}addHackNode(e,t){if(t==this.top&&this.index<t.children.length&&t.children[this.index].matchesHack(e))this.index++;else{let n=document.createElement(e);e=="IMG"&&(n.className="ProseMirror-separator",n.alt=""),e=="BR"&&(n.className="ProseMirror-trailingBreak");let r=new gb(this.top,[],n,null);t!=this.top?t.children.push(r):t.children.splice(this.index++,0,r),this.changed=!0}}isLocked(e){return this.lock&&(e==this.lock||e.nodeType==1&&e.contains(this.lock.parentNode))}}function eA(i,e){let t=e,n=t.children.length,r=i.childCount,s=new Map,o=[];e:for(;r>0;){let a;for(;;)if(n){let c=t.children[n-1];if(c instanceof hs)t=c,n=c.children.length;else{a=c,n--;break}}else{if(t==e)break e;n=t.parent.children.indexOf(t),t=t.parent}let l=a.node;if(l){if(l!=i.child(r-1))break;--r,s.set(a,r),o.push(a)}}return{index:r,matched:s,matches:o.reverse()}}function tA(i,e){return i.type.side-e.type.side}function nA(i,e,t,n){let r=e.locals(i),s=0;if(r.length==0){for(let c=0;c<i.childCount;c++){let h=i.child(c);n(h,r,e.forChild(s,h),c),s+=h.nodeSize}return}let o=0,a=[],l=null;for(let c=0;;){let h,u;for(;o<r.length&&r[o].to==s;){let b=r[o++];b.widget&&(h?(u||(u=[h])).push(b):h=b)}if(h)if(u){u.sort(tA);for(let b=0;b<u.length;b++)t(u[b],c,!!l)}else t(h,c,!!l);let d,f;if(l)f=-1,d=l,l=null;else if(c<i.childCount)f=c,d=i.child(c++);else break;for(let b=0;b<a.length;b++)a[b].to<=s&&a.splice(b--,1);for(;o<r.length&&r[o].from<=s&&r[o].to>s;)a.push(r[o++]);let g=s+d.nodeSize;if(d.isText){let b=g;o<r.length&&r[o].from<b&&(b=r[o].from);for(let y=0;y<a.length;y++)a[y].to<b&&(b=a[y].to);b<g&&(l=d.cut(b-s),d=d.cut(0,b-s),g=b,f=-1)}else for(;o<r.length&&r[o].to<g;)o++;let m=d.isInline&&!d.isLeaf?a.filter(b=>!b.inline):a.slice();n(d,m,e.forChild(s,d),f),s=g}}function iA(i){if(i.nodeName=="UL"||i.nodeName=="OL"){let e=i.style.cssText;i.style.cssText=e+"; list-style: square !important",window.getComputedStyle(i).listStyle,i.style.cssText=e}}function rA(i,e,t,n){for(let r=0,s=0;r<i.childCount&&s<=n;){let o=i.child(r++),a=s;if(s+=o.nodeSize,!o.isText)continue;let l=o.text;for(;r<i.childCount;){let c=i.child(r++);if(s+=c.nodeSize,!c.isText)break;l+=c.text}if(s>=t){if(s>=n&&l.slice(n-e.length-a,n-a)==e)return n-e.length;let c=a<n?l.lastIndexOf(e,n-a-1):-1;if(c>=0&&c+e.length+a>=t)return a+c;if(t==n&&l.length>=n+e.length-a&&l.slice(n-a,n-a+e.length)==e)return n}}return-1}function ld(i,e,t,n,r){let s=[];for(let o=0,a=0;o<i.length;o++){let l=i[o],c=a,h=a+=l.size;c>=t||h<=e?s.push(l):(c<e&&s.push(l.slice(0,e-c,n)),r&&(s.push(r),r=void 0),h>t&&s.push(l.slice(t-c,l.size,n)))}return s}function cd(i,e=null){let t=i.domSelectionRange(),n=i.state.doc;if(!t.focusNode)return null;let r=i.docView.nearestDesc(t.focusNode),s=r&&r.size==0,o=i.docView.posFromDOM(t.focusNode,t.focusOffset,1);if(o<0)return null;let a=n.resolve(o),l,c;if(tc(t)){for(l=o;r&&!r.node;)r=r.parent;let u=r.node;if(r&&u.isAtom&&Xe.isSelectable(u)&&r.parent&&!(u.isInline&&IC(t.focusNode,t.focusOffset,r.dom))){let d=r.posBefore;c=new Xe(o==d?a:n.resolve(d))}}else{if(t instanceof i.dom.ownerDocument.defaultView.Selection&&t.rangeCount>1){let u=o,d=o;for(let f=0;f<t.rangeCount;f++){let g=t.getRangeAt(f);u=Math.min(u,i.docView.posFromDOM(g.startContainer,g.startOffset,1)),d=Math.max(d,i.docView.posFromDOM(g.endContainer,g.endOffset,-1))}if(u<0)return null;[l,o]=d==i.state.selection.anchor?[d,u]:[u,d],a=n.resolve(o)}else l=i.docView.posFromDOM(t.anchorNode,t.anchorOffset,1);if(l<0)return null}let h=n.resolve(l);if(!c){let u=e=="pointer"||i.state.selection.head<a.pos&&!s?1:-1;c=ud(i,h,a,u)}return c}function vb(i){return i.editable?i.hasFocus():Tb(i)&&document.activeElement&&document.activeElement.contains(i.dom)}function tr(i,e=!1){let t=i.state.selection;if(Cb(i,t),!!vb(i)){if(!e&&i.input.mouseDown&&i.input.mouseDown.allowDefault&&vn){let n=i.domSelectionRange(),r=i.domObserver.currentSelection;if(n.anchorNode&&r.anchorNode&&as(n.anchorNode,n.anchorOffset,r.anchorNode,r.anchorOffset)){i.input.mouseDown.delayedSelectionSync=!0,i.domObserver.setCurSelection();return}}if(i.domObserver.disconnectSelection(),i.cursorWrapper)oA(i);else{let{anchor:n,head:r}=t,s,o;wb&&!(t instanceof Ve)&&(t.$from.parent.inlineContent||(s=kb(i,t.from)),!t.empty&&!t.$from.parent.inlineContent&&(o=kb(i,t.to))),i.docView.setSelection(n,r,i,e),wb&&(s&&Sb(s),o&&Sb(o)),t.visible?i.dom.classList.remove("ProseMirror-hideselection"):(i.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&sA(i))}i.domObserver.setCurSelection(),i.domObserver.connectSelection()}}const wb=Rn||vn&&eb<63;function kb(i,e){let{node:t,offset:n}=i.docView.domFromPos(e,0),r=n<t.childNodes.length?t.childNodes[n]:null,s=n?t.childNodes[n-1]:null;if(Rn&&r&&r.contentEditable=="false")return hd(r);if((!r||r.contentEditable=="false")&&(!s||s.contentEditable=="false")){if(r)return hd(r);if(s)return hd(s)}}function hd(i){return i.contentEditable="true",Rn&&i.draggable&&(i.draggable=!1,i.wasDraggable=!0),i}function Sb(i){i.contentEditable="false",i.wasDraggable&&(i.draggable=!0,i.wasDraggable=null)}function sA(i){let e=i.dom.ownerDocument;e.removeEventListener("selectionchange",i.input.hideSelectionGuard);let t=i.domSelectionRange(),n=t.anchorNode,r=t.anchorOffset;e.addEventListener("selectionchange",i.input.hideSelectionGuard=()=>{(t.anchorNode!=n||t.anchorOffset!=r)&&(e.removeEventListener("selectionchange",i.input.hideSelectionGuard),setTimeout(()=>{(!vb(i)||i.state.selection.visible)&&i.dom.classList.remove("ProseMirror-hideselection")},20))})}function oA(i){let e=i.domSelection(),t=document.createRange();if(!e)return;let n=i.cursorWrapper.dom,r=n.nodeName=="IMG";r?t.setStart(n.parentNode,ln(n)+1):t.setStart(n,0),t.collapse(!0),e.removeAllRanges(),e.addRange(t),!r&&!i.state.selection.visible&&Hn&&kr<=11&&(n.disabled=!0,n.disabled=!1)}function Cb(i,e){if(e instanceof Xe){let t=i.docView.descAt(e.from);t!=i.lastSelectedViewDesc&&(Ab(i),t&&t.selectNode(),i.lastSelectedViewDesc=t)}else Ab(i)}function Ab(i){i.lastSelectedViewDesc&&(i.lastSelectedViewDesc.parent&&i.lastSelectedViewDesc.deselectNode(),i.lastSelectedViewDesc=void 0)}function ud(i,e,t,n){return i.someProp("createSelectionBetween",r=>r(i,e,t))||Ve.between(e,t,n)}function Mb(i){return i.editable&&!i.hasFocus()?!1:Tb(i)}function Tb(i){let e=i.domSelectionRange();if(!e.anchorNode)return!1;try{return i.dom.contains(e.anchorNode.nodeType==3?e.anchorNode.parentNode:e.anchorNode)&&(i.editable||i.dom.contains(e.focusNode.nodeType==3?e.focusNode.parentNode:e.focusNode))}catch{return!1}}function aA(i){let e=i.docView.domFromPos(i.state.selection.anchor,0),t=i.domSelectionRange();return as(e.node,e.offset,t.anchorNode,t.anchorOffset)}function dd(i,e){let{$anchor:t,$head:n}=i.selection,r=e>0?t.max(n):t.min(n),s=r.parent.inlineContent?r.depth?i.doc.resolve(e>0?r.after():r.before()):null:r;return s&&tt.findFrom(s,e)}function Ar(i,e){return i.dispatch(i.state.tr.setSelection(e).scrollIntoView()),!0}function Eb(i,e,t){let n=i.state.selection;if(n instanceof Ve)if(t.indexOf("s")>-1){let{$head:r}=n,s=r.textOffset?null:e<0?r.nodeBefore:r.nodeAfter;if(!s||s.isText||!s.isLeaf)return!1;let o=i.state.doc.resolve(r.pos+s.nodeSize*(e<0?-1:1));return Ar(i,new Ve(n.$anchor,o))}else if(n.empty){if(i.endOfTextblock(e>0?"forward":"backward")){let r=dd(i.state,e);return r&&r instanceof Xe?Ar(i,r):!1}else if(!(ti&&t.indexOf("m")>-1)){let r=n.$head,s=r.textOffset?null:e<0?r.nodeBefore:r.nodeAfter,o;if(!s||s.isText)return!1;let a=e<0?r.pos-s.nodeSize:r.pos;return s.isAtom||(o=i.docView.descAt(a))&&!o.contentDOM?Xe.isSelectable(s)?Ar(i,new Xe(e<0?i.state.doc.resolve(r.pos-s.nodeSize):r)):da?Ar(i,new Ve(i.state.doc.resolve(e<0?a:a+s.nodeSize))):!1:!1}}else return!1;else{if(n instanceof Xe&&n.node.isInline)return Ar(i,new Ve(e>0?n.$to:n.$from));{let r=dd(i.state,e);return r?Ar(i,r):!1}}}function rc(i){return i.nodeType==3?i.nodeValue.length:i.childNodes.length}function ma(i,e){let t=i.pmViewDesc;return t&&t.size==0&&(e<0||i.nextSibling||i.nodeName!="BR")}function no(i,e){return e<0?lA(i):cA(i)}function lA(i){let e=i.domSelectionRange(),t=e.focusNode,n=e.focusOffset;if(!t)return;let r,s,o=!1;for(xi&&t.nodeType==1&&n<rc(t)&&ma(t.childNodes[n],-1)&&(o=!0);;)if(n>0){if(t.nodeType!=1)break;{let a=t.childNodes[n-1];if(ma(a,-1))r=t,s=--n;else if(a.nodeType==3)t=a,n=t.nodeValue.length;else break}}else{if(Ob(t))break;{let a=t.previousSibling;for(;a&&ma(a,-1);)r=t.parentNode,s=ln(a),a=a.previousSibling;if(a)t=a,n=rc(t);else{if(t=t.parentNode,t==i.dom)break;n=0}}}o?fd(i,t,n):r&&fd(i,r,s)}function cA(i){let e=i.domSelectionRange(),t=e.focusNode,n=e.focusOffset;if(!t)return;let r=rc(t),s,o;for(;;)if(n<r){if(t.nodeType!=1)break;let a=t.childNodes[n];if(ma(a,1))s=t,o=++n;else break}else{if(Ob(t))break;{let a=t.nextSibling;for(;a&&ma(a,1);)s=a.parentNode,o=ln(a)+1,a=a.nextSibling;if(a)t=a,n=0,r=rc(t);else{if(t=t.parentNode,t==i.dom)break;n=r=0}}}s&&fd(i,s,o)}function Ob(i){let e=i.pmViewDesc;return e&&e.node&&e.node.isBlock}function hA(i,e){for(;i&&e==i.childNodes.length&&!ua(i);)e=ln(i)+1,i=i.parentNode;for(;i&&e<i.childNodes.length;){let t=i.childNodes[e];if(t.nodeType==3)return t;if(t.nodeType==1&&t.contentEditable=="false")break;i=t,e=0}}function uA(i,e){for(;i&&!e&&!ua(i);)e=ln(i),i=i.parentNode;for(;i&&e;){let t=i.childNodes[e-1];if(t.nodeType==3)return t;if(t.nodeType==1&&t.contentEditable=="false")break;i=t,e=i.childNodes.length}}function fd(i,e,t){if(e.nodeType!=3){let s,o;(o=hA(e,t))?(e=o,t=0):(s=uA(e,t))&&(e=s,t=s.nodeValue.length)}let n=i.domSelection();if(!n)return;if(tc(n)){let s=document.createRange();s.setEnd(e,t),s.setStart(e,t),n.removeAllRanges(),n.addRange(s)}else n.extend&&n.extend(e,t);i.domObserver.setCurSelection();let{state:r}=i;setTimeout(()=>{i.state==r&&tr(i)},50)}function Ib(i,e){let t=i.state.doc.resolve(e);if(!(vn||RC)&&t.parent.inlineContent){let r=i.coordsAtPos(e);if(e>t.start()){let s=i.coordsAtPos(e-1),o=(s.top+s.bottom)/2;if(o>r.top&&o<r.bottom&&Math.abs(s.left-r.left)>1)return s.left<r.left?"ltr":"rtl"}if(e<t.end()){let s=i.coordsAtPos(e+1),o=(s.top+s.bottom)/2;if(o>r.top&&o<r.bottom&&Math.abs(s.left-r.left)>1)return s.left>r.left?"ltr":"rtl"}}return getComputedStyle(i.dom).direction=="rtl"?"rtl":"ltr"}function Pb(i,e,t){let n=i.state.selection;if(n instanceof Ve&&!n.empty||t.indexOf("s")>-1||ti&&t.indexOf("m")>-1)return!1;let{$from:r,$to:s}=n;if(!r.parent.inlineContent||i.endOfTextblock(e<0?"up":"down")){let o=dd(i.state,e);if(o&&o instanceof Xe)return Ar(i,o)}if(!r.parent.inlineContent){let o=e<0?r:s,a=n instanceof qn?tt.near(o,e):tt.findFrom(o,e);return a?Ar(i,a):!1}return!1}function Lb(i,e){if(!(i.state.selection instanceof Ve))return!0;let{$head:t,$anchor:n,empty:r}=i.state.selection;if(!t.sameParent(n))return!0;if(!r)return!1;if(i.endOfTextblock(e>0?"forward":"backward"))return!0;let s=!t.textOffset&&(e<0?t.nodeBefore:t.nodeAfter);if(s&&!s.isText){let o=i.state.tr;return e<0?o.delete(t.pos-s.nodeSize,t.pos):o.delete(t.pos,t.pos+s.nodeSize),i.dispatch(o),!0}return!1}function Rb(i,e,t){i.domObserver.stop(),e.contentEditable=t,i.domObserver.start()}function dA(i){if(!Rn||i.state.selection.$head.parentOffset>0)return!1;let{focusNode:e,focusOffset:t}=i.domSelectionRange();if(e&&e.nodeType==1&&t==0&&e.firstChild&&e.firstChild.contentEditable=="false"){let n=e.firstChild;Rb(i,n,"true"),setTimeout(()=>Rb(i,n,"false"),20)}return!1}function fA(i){let e="";return i.ctrlKey&&(e+="c"),i.metaKey&&(e+="m"),i.altKey&&(e+="a"),i.shiftKey&&(e+="s"),e}function pA(i,e){let t=e.keyCode,n=fA(e);if(t==8||ti&&t==72&&n=="c")return Lb(i,-1)||no(i,-1);if(t==46&&!e.shiftKey||ti&&t==68&&n=="c")return Lb(i,1)||no(i,1);if(t==13||t==27)return!0;if(t==37||ti&&t==66&&n=="c"){let r=t==37?Ib(i,i.state.selection.from)=="ltr"?-1:1:-1;return Eb(i,r,n)||no(i,r)}else if(t==39||ti&&t==70&&n=="c"){let r=t==39?Ib(i,i.state.selection.from)=="ltr"?1:-1:1;return Eb(i,r,n)||no(i,r)}else{if(t==38||ti&&t==80&&n=="c")return Pb(i,-1,n)||no(i,-1);if(t==40||ti&&t==78&&n=="c")return dA(i)||Pb(i,1,n)||no(i,1);if(n==(ti?"m":"c")&&(t==66||t==73||t==89||t==90))return!0}return!1}function pd(i,e){i.someProp("transformCopied",f=>{e=f(e,i)});let t=[],{content:n,openStart:r,openEnd:s}=e;for(;r>1&&s>1&&n.childCount==1&&n.firstChild.childCount==1;){r--,s--;let f=n.firstChild;t.push(f.type.name,f.attrs!=f.type.defaultAttrs?f.attrs:null),n=f.content}let o=i.someProp("clipboardSerializer")||ss.fromSchema(i.state.schema),a=Xb(),l=a.createElement("div");l.appendChild(o.serializeFragment(n,{document:a}));let c=l.firstChild,h,u=0;for(;c&&c.nodeType==1&&(h=Bb[c.nodeName.toLowerCase()]);){for(let f=h.length-1;f>=0;f--){let g=a.createElement(h[f]);for(;l.firstChild;)g.appendChild(l.firstChild);l.appendChild(g),u++}c=l.firstChild}c&&c.nodeType==1&&c.setAttribute("data-pm-slice",`${r} ${s}${u?` -${u}`:""} ${JSON.stringify(t)}`);let d=i.someProp("clipboardTextSerializer",f=>f(e,i))||e.content.textBetween(0,e.content.size,`
    
    `);return{dom:l,text:d,slice:e}}function Db(i,e,t,n,r){let s=r.parent.type.spec.code,o,a;if(!t&&!e)return null;let l=e&&(n||s||!t);if(l){if(i.someProp("transformPastedText",d=>{e=d(e,s||n,i)}),s)return e?new Le(he.from(i.state.schema.text(e.replace(/\r\n?/g,`
    `))),0,0):Le.empty;let u=i.someProp("clipboardTextParser",d=>d(e,r,n,i));if(u)a=u;else{let d=r.marks(),{schema:f}=i.state,g=ss.fromSchema(f);o=document.createElement("div"),e.split(/(?:\r\n?|\n)+/).forEach(m=>{let b=o.appendChild(document.createElement("p"));m&&b.appendChild(g.serializeNode(f.text(m,d)))})}}else i.someProp("transformPastedHTML",u=>{t=u(t,i)}),o=bA(t),da&&yA(o);let c=o&&o.querySelector("[data-pm-slice]"),h=c&&/^(\d+) (\d+)(?: -(\d+))? (.*)/.exec(c.getAttribute("data-pm-slice")||"");if(h&&h[3])for(let u=+h[3];u>0;u--){let d=o.firstChild;for(;d&&d.nodeType!=1;)d=d.nextSibling;if(!d)break;o=d}if(a||(a=(i.someProp("clipboardParser")||i.someProp("domParser")||ra.fromSchema(i.state.schema)).parseSlice(o,{preserveWhitespace:!!(l||h),context:r,ruleFromNode(d){return d.nodeName=="BR"&&!d.nextSibling&&d.parentNode&&!gA.test(d.parentNode.nodeName)?{ignore:!0}:null}})),h)a=vA(Fb(a,+h[1],+h[2]),h[4]);else if(a=Le.maxOpen(mA(a.content,r),!0),a.openStart||a.openEnd){let u=0,d=0;for(let f=a.content.firstChild;u<a.openStart&&!f.type.spec.isolating;u++,f=f.firstChild);for(let f=a.content.lastChild;d<a.openEnd&&!f.type.spec.isolating;d++,f=f.lastChild);a=Fb(a,u,d)}return i.someProp("transformPasted",u=>{a=u(a,i)}),a}const gA=/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var)$/i;function mA(i,e){if(i.childCount<2)return i;for(let t=e.depth;t>=0;t--){let r=e.node(t).contentMatchAt(e.index(t)),s,o=[];if(i.forEach(a=>{if(!o)return;let l=r.findWrapping(a.type),c;if(!l)return o=null;if(c=o.length&&s.length&&_b(l,s,a,o[o.length-1],0))o[o.length-1]=c;else{o.length&&(o[o.length-1]=zb(o[o.length-1],s.length));let h=Nb(a,l);o.push(h),r=r.matchType(h.type),s=l}}),o)return he.from(o)}return i}function Nb(i,e,t=0){for(let n=e.length-1;n>=t;n--)i=e[n].create(null,he.from(i));return i}function _b(i,e,t,n,r){if(r<i.length&&r<e.length&&i[r]==e[r]){let s=_b(i,e,t,n.lastChild,r+1);if(s)return n.copy(n.content.replaceChild(n.childCount-1,s));if(n.contentMatchAt(n.childCount).matchType(r==i.length-1?t.type:i[r+1]))return n.copy(n.content.append(he.from(Nb(t,i,r+1))))}}function zb(i,e){if(e==0)return i;let t=i.content.replaceChild(i.childCount-1,zb(i.lastChild,e-1)),n=i.contentMatchAt(i.childCount).fillBefore(he.empty,!0);return i.copy(t.append(n))}function gd(i,e,t,n,r,s){let o=e<0?i.firstChild:i.lastChild,a=o.content;return i.childCount>1&&(s=0),r<n-1&&(a=gd(a,e,t,n,r+1,s)),r>=t&&(a=e<0?o.contentMatchAt(0).fillBefore(a,s<=r).append(a):a.append(o.contentMatchAt(o.childCount).fillBefore(he.empty,!0))),i.replaceChild(e<0?0:i.childCount-1,o.copy(a))}function Fb(i,e,t){return e<i.openStart&&(i=new Le(gd(i.content,-1,e,i.openStart,0,i.openEnd),e,i.openEnd)),t<i.openEnd&&(i=new Le(gd(i.content,1,t,i.openEnd,0,0),i.openStart,t)),i}const Bb={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]};let Hb=null;function Xb(){return Hb||(Hb=document.implementation.createHTMLDocument("title"))}let md=null;function xA(i){let e=window.trustedTypes;return e?(md||(md=e.createPolicy("ProseMirrorClipboard",{createHTML:t=>t})),md.createHTML(i)):i}function bA(i){let e=/^(\s*<meta [^>]*>)*/.exec(i);e&&(i=i.slice(e[0].length));let t=Xb().createElement("div"),n=/<([a-z][^>\s]+)/i.exec(i),r;if((r=n&&Bb[n[1].toLowerCase()])&&(i=r.map(s=>"<"+s+">").join("")+i+r.map(s=>"</"+s+">").reverse().join("")),t.innerHTML=xA(i),r)for(let s=0;s<r.length;s++)t=t.querySelector(r[s])||t;return t}function yA(i){let e=i.querySelectorAll(vn?"span:not([class]):not([style])":"span.Apple-converted-space");for(let t=0;t<e.length;t++){let n=e[t];n.childNodes.length==1&&n.textContent==""&&n.parentNode&&n.parentNode.replaceChild(i.ownerDocument.createTextNode(" "),n)}}function vA(i,e){if(!i.size)return i;let t=i.content.firstChild.type.schema,n;try{n=JSON.parse(e)}catch{return i}let{content:r,openStart:s,openEnd:o}=i;for(let a=n.length-2;a>=0;a-=2){let l=t.nodes[n[a]];if(!l||l.hasRequiredAttrs())break;r=he.from(l.create(n[a+1],r)),s++,o++}return new Le(r,s,o)}const Dn={},Nn={},wA={touchstart:!0,touchmove:!0};class kA{constructor(){this.shiftKey=!1,this.mouseDown=null,this.lastKeyCode=null,this.lastKeyCodeTime=0,this.lastClick={time:0,x:0,y:0,type:""},this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastIOSEnter=0,this.lastIOSEnterFallbackTimeout=-1,this.lastFocus=0,this.lastTouch=0,this.lastChromeDelete=0,this.composing=!1,this.compositionNode=null,this.composingTimeout=-1,this.compositionNodes=[],this.compositionEndedAt=-2e8,this.compositionID=1,this.compositionPendingChanges=0,this.domChangeCount=0,this.eventHandlers=Object.create(null),this.hideSelectionGuard=null}}function SA(i){for(let e in Dn){let t=Dn[e];i.dom.addEventListener(e,i.input.eventHandlers[e]=n=>{AA(i,n)&&!bd(i,n)&&(i.editable||!(n.type in Nn))&&t(i,n)},wA[e]?{passive:!0}:void 0)}Rn&&i.dom.addEventListener("input",()=>null),xd(i)}function Mr(i,e){i.input.lastSelectionOrigin=e,i.input.lastSelectionTime=Date.now()}function CA(i){i.domObserver.stop();for(let e in i.input.eventHandlers)i.dom.removeEventListener(e,i.input.eventHandlers[e]);clearTimeout(i.input.composingTimeout),clearTimeout(i.input.lastIOSEnterFallbackTimeout)}function xd(i){i.someProp("handleDOMEvents",e=>{for(let t in e)i.input.eventHandlers[t]||i.dom.addEventListener(t,i.input.eventHandlers[t]=n=>bd(i,n))})}function bd(i,e){return i.someProp("handleDOMEvents",t=>{let n=t[e.type];return n?n(i,e)||e.defaultPrevented:!1})}function AA(i,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let t=e.target;t!=i.dom;t=t.parentNode)if(!t||t.nodeType==11||t.pmViewDesc&&t.pmViewDesc.stopEvent(e))return!1;return!0}function MA(i,e){!bd(i,e)&&Dn[e.type]&&(i.editable||!(e.type in Nn))&&Dn[e.type](i,e)}Nn.keydown=(i,e)=>{let t=e;if(i.input.shiftKey=t.keyCode==16||t.shiftKey,!Yb(i,t)&&(i.input.lastKeyCode=t.keyCode,i.input.lastKeyCodeTime=Date.now(),!(Qi&&vn&&t.keyCode==13)))if(t.keyCode!=229&&i.domObserver.forceFlush(),eo&&t.keyCode==13&&!t.ctrlKey&&!t.altKey&&!t.metaKey){let n=Date.now();i.input.lastIOSEnter=n,i.input.lastIOSEnterFallbackTimeout=setTimeout(()=>{i.input.lastIOSEnter==n&&(i.someProp("handleKeyDown",r=>r(i,ls(13,"Enter"))),i.input.lastIOSEnter=0)},200)}else i.someProp("handleKeyDown",n=>n(i,t))||pA(i,t)?t.preventDefault():Mr(i,"key")},Nn.keyup=(i,e)=>{e.keyCode==16&&(i.input.shiftKey=!1)},Nn.keypress=(i,e)=>{let t=e;if(Yb(i,t)||!t.charCode||t.ctrlKey&&!t.altKey||ti&&t.metaKey)return;if(i.someProp("handleKeyPress",r=>r(i,t))){t.preventDefault();return}let n=i.state.selection;if(!(n instanceof Ve)||!n.$from.sameParent(n.$to)){let r=String.fromCharCode(t.charCode);!/[\r\n]/.test(r)&&!i.someProp("handleTextInput",s=>s(i,n.$from.pos,n.$to.pos,r))&&i.dispatch(i.state.tr.insertText(r).scrollIntoView()),t.preventDefault()}};function sc(i){return{left:i.clientX,top:i.clientY}}function TA(i,e){let t=e.x-i.clientX,n=e.y-i.clientY;return t*t+n*n<100}function yd(i,e,t,n,r){if(n==-1)return!1;let s=i.state.doc.resolve(n);for(let o=s.depth+1;o>0;o--)if(i.someProp(e,a=>o>s.depth?a(i,t,s.nodeAfter,s.before(o),r,!0):a(i,t,s.node(o),s.before(o),r,!1)))return!0;return!1}function io(i,e,t){if(i.focused||i.focus(),i.state.selection.eq(e))return;let n=i.state.tr.setSelection(e);n.setMeta("pointer",!0),i.dispatch(n)}function EA(i,e){if(e==-1)return!1;let t=i.state.doc.resolve(e),n=t.nodeAfter;return n&&n.isAtom&&Xe.isSelectable(n)?(io(i,new Xe(t)),!0):!1}function OA(i,e){if(e==-1)return!1;let t=i.state.selection,n,r;t instanceof Xe&&(n=t.node);let s=i.state.doc.resolve(e);for(let o=s.depth+1;o>0;o--){let a=o>s.depth?s.nodeAfter:s.node(o);if(Xe.isSelectable(a)){n&&t.$from.depth>0&&o>=t.$from.depth&&s.before(t.$from.depth+1)==t.$from.pos?r=s.before(t.$from.depth):r=s.before(o);break}}return r!=null?(io(i,Xe.create(i.state.doc,r)),!0):!1}function IA(i,e,t,n,r){return yd(i,"handleClickOn",e,t,n)||i.someProp("handleClick",s=>s(i,e,n))||(r?OA(i,t):EA(i,t))}function PA(i,e,t,n){return yd(i,"handleDoubleClickOn",e,t,n)||i.someProp("handleDoubleClick",r=>r(i,e,n))}function LA(i,e,t,n){return yd(i,"handleTripleClickOn",e,t,n)||i.someProp("handleTripleClick",r=>r(i,e,n))||RA(i,t,n)}function RA(i,e,t){if(t.button!=0)return!1;let n=i.state.doc;if(e==-1)return n.inlineContent?(io(i,Ve.create(n,0,n.content.size)),!0):!1;let r=n.resolve(e);for(let s=r.depth+1;s>0;s--){let o=s>r.depth?r.nodeAfter:r.node(s),a=r.before(s);if(o.inlineContent)io(i,Ve.create(n,a+1,a+1+o.content.size));else if(Xe.isSelectable(o))io(i,Xe.create(n,a));else continue;return!0}}function vd(i){return oc(i)}const Wb=ti?"metaKey":"ctrlKey";Dn.mousedown=(i,e)=>{let t=e;i.input.shiftKey=t.shiftKey;let n=vd(i),r=Date.now(),s="singleClick";r-i.input.lastClick.time<500&&TA(t,i.input.lastClick)&&!t[Wb]&&(i.input.lastClick.type=="singleClick"?s="doubleClick":i.input.lastClick.type=="doubleClick"&&(s="tripleClick")),i.input.lastClick={time:r,x:t.clientX,y:t.clientY,type:s};let o=i.posAtCoords(sc(t));o&&(s=="singleClick"?(i.input.mouseDown&&i.input.mouseDown.done(),i.input.mouseDown=new DA(i,o,t,!!n)):(s=="doubleClick"?PA:LA)(i,o.pos,o.inside,t)?t.preventDefault():Mr(i,"pointer"))};class DA{constructor(e,t,n,r){this.view=e,this.pos=t,this.event=n,this.flushed=r,this.delayedSelectionSync=!1,this.mightDrag=null,this.startDoc=e.state.doc,this.selectNode=!!n[Wb],this.allowDefault=n.shiftKey;let s,o;if(t.inside>-1)s=e.state.doc.nodeAt(t.inside),o=t.inside;else{let h=e.state.doc.resolve(t.pos);s=h.parent,o=h.depth?h.before():0}const a=r?null:n.target,l=a?e.docView.nearestDesc(a,!0):null;this.target=l&&l.dom.nodeType==1?l.dom:null;let{selection:c}=e.state;(n.button==0&&s.type.spec.draggable&&s.type.spec.selectable!==!1||c instanceof Xe&&c.from<=o&&c.to>o)&&(this.mightDrag={node:s,pos:o,addAttr:!!(this.target&&!this.target.draggable),setUneditable:!!(this.target&&xi&&!this.target.hasAttribute("contentEditable"))}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout(()=>{this.view.input.mouseDown==this&&this.target.setAttribute("contentEditable","false")},20),this.view.domObserver.start()),e.root.addEventListener("mouseup",this.up=this.up.bind(this)),e.root.addEventListener("mousemove",this.move=this.move.bind(this)),Mr(e,"pointer")}done(){this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&this.target.removeAttribute("draggable"),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.delayedSelectionSync&&setTimeout(()=>tr(this.view)),this.view.input.mouseDown=null}up(e){if(this.done(),!this.view.dom.contains(e.target))return;let t=this.pos;this.view.state.doc!=this.startDoc&&(t=this.view.posAtCoords(sc(e))),this.updateAllowDefault(e),this.allowDefault||!t?Mr(this.view,"pointer"):IA(this.view,t.pos,t.inside,e,this.selectNode)?e.preventDefault():e.button==0&&(this.flushed||Rn&&this.mightDrag&&!this.mightDrag.node.isAtom||vn&&!this.view.state.selection.visible&&Math.min(Math.abs(t.pos-this.view.state.selection.from),Math.abs(t.pos-this.view.state.selection.to))<=2)?(io(this.view,tt.near(this.view.state.doc.resolve(t.pos))),e.preventDefault()):Mr(this.view,"pointer")}move(e){this.updateAllowDefault(e),Mr(this.view,"pointer"),e.buttons==0&&this.done()}updateAllowDefault(e){!this.allowDefault&&(Math.abs(this.event.x-e.clientX)>4||Math.abs(this.event.y-e.clientY)>4)&&(this.allowDefault=!0)}}Dn.touchstart=i=>{i.input.lastTouch=Date.now(),vd(i),Mr(i,"pointer")},Dn.touchmove=i=>{i.input.lastTouch=Date.now(),Mr(i,"pointer")},Dn.contextmenu=i=>vd(i);function Yb(i,e){return i.composing?!0:Rn&&Math.abs(e.timeStamp-i.input.compositionEndedAt)<500?(i.input.compositionEndedAt=-2e8,!0):!1}const NA=Qi?5e3:-1;Nn.compositionstart=Nn.compositionupdate=i=>{if(!i.composing){i.domObserver.flush();let{state:e}=i,t=e.selection.$to;if(e.selection instanceof Ve&&(e.storedMarks||!t.textOffset&&t.parentOffset&&t.nodeBefore.marks.some(n=>n.type.spec.inclusive===!1)))i.markCursor=i.state.storedMarks||t.marks(),oc(i,!0),i.markCursor=null;else if(oc(i,!e.selection.empty),xi&&e.selection.empty&&t.parentOffset&&!t.textOffset&&t.nodeBefore.marks.length){let n=i.domSelectionRange();for(let r=n.focusNode,s=n.focusOffset;r&&r.nodeType==1&&s!=0;){let o=s<0?r.lastChild:r.childNodes[s-1];if(!o)break;if(o.nodeType==3){let a=i.domSelection();a&&a.collapse(o,o.nodeValue.length);break}else r=o,s=-1}}i.input.composing=!0}jb(i,NA)},Nn.compositionend=(i,e)=>{i.composing&&(i.input.composing=!1,i.input.compositionEndedAt=e.timeStamp,i.input.compositionPendingChanges=i.domObserver.pendingRecords().length?i.input.compositionID:0,i.input.compositionNode=null,i.input.compositionPendingChanges&&Promise.resolve().then(()=>i.domObserver.flush()),i.input.compositionID++,jb(i,20))};function jb(i,e){clearTimeout(i.input.composingTimeout),e>-1&&(i.input.composingTimeout=setTimeout(()=>oc(i),e))}function Vb(i){for(i.composing&&(i.input.composing=!1,i.input.compositionEndedAt=zA());i.input.compositionNodes.length>0;)i.input.compositionNodes.pop().markParentsDirty()}function _A(i){let e=i.domSelectionRange();if(!e.focusNode)return null;let t=EC(e.focusNode,e.focusOffset),n=OC(e.focusNode,e.focusOffset);if(t&&n&&t!=n){let r=n.pmViewDesc,s=i.domObserver.lastChangedTextNode;if(t==s||n==s)return s;if(!r||!r.isText(n.nodeValue))return n;if(i.input.compositionNode==n){let o=t.pmViewDesc;if(!(!o||!o.isText(t.nodeValue)))return n}}return t||n}function zA(){let i=document.createEvent("Event");return i.initEvent("event",!0,!0),i.timeStamp}function oc(i,e=!1){if(!(Qi&&i.domObserver.flushingSoon>=0)){if(i.domObserver.forceFlush(),Vb(i),e||i.docView&&i.docView.dirty){let t=cd(i);return t&&!t.eq(i.state.selection)?i.dispatch(i.state.tr.setSelection(t)):(i.markCursor||e)&&!i.state.selection.empty?i.dispatch(i.state.tr.deleteSelection()):i.updateState(i.state),!0}return!1}}function FA(i,e){if(!i.dom.parentNode)return;let t=i.dom.parentNode.appendChild(document.createElement("div"));t.appendChild(e),t.style.cssText="position: fixed; left: -10000px; top: 10px";let n=getSelection(),r=document.createRange();r.selectNodeContents(e),i.dom.blur(),n.removeAllRanges(),n.addRange(r),setTimeout(()=>{t.parentNode&&t.parentNode.removeChild(t),i.focus()},50)}const xa=Hn&&kr<15||eo&&DC<604;Dn.copy=Nn.cut=(i,e)=>{let t=e,n=i.state.selection,r=t.type=="cut";if(n.empty)return;let s=xa?null:t.clipboardData,o=n.content(),{dom:a,text:l}=pd(i,o);s?(t.preventDefault(),s.clearData(),s.setData("text/html",a.innerHTML),s.setData("text/plain",l)):FA(i,a),r&&i.dispatch(i.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))};function BA(i){return i.openStart==0&&i.openEnd==0&&i.content.childCount==1?i.content.firstChild:null}function HA(i,e){if(!i.dom.parentNode)return;let t=i.input.shiftKey||i.state.selection.$from.parent.type.spec.code,n=i.dom.parentNode.appendChild(document.createElement(t?"textarea":"div"));t||(n.contentEditable="true"),n.style.cssText="position: fixed; left: -10000px; top: 10px",n.focus();let r=i.input.shiftKey&&i.input.lastKeyCode!=45;setTimeout(()=>{i.focus(),n.parentNode&&n.parentNode.removeChild(n),t?ba(i,n.value,null,r,e):ba(i,n.textContent,n.innerHTML,r,e)},50)}function ba(i,e,t,n,r){let s=Db(i,e,t,n,i.state.selection.$from);if(i.someProp("handlePaste",l=>l(i,r,s||Le.empty)))return!0;if(!s)return!1;let o=BA(s),a=o?i.state.tr.replaceSelectionWith(o,n):i.state.tr.replaceSelection(s);return i.dispatch(a.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste")),!0}function $b(i){let e=i.getData("text/plain")||i.getData("Text");if(e)return e;let t=i.getData("text/uri-list");return t?t.replace(/\r?\n/g," "):""}Nn.paste=(i,e)=>{let t=e;if(i.composing&&!Qi)return;let n=xa?null:t.clipboardData,r=i.input.shiftKey&&i.input.lastKeyCode!=45;n&&ba(i,$b(n),n.getData("text/html"),r,t)?t.preventDefault():HA(i,t)};class Gb{constructor(e,t,n){this.slice=e,this.move=t,this.node=n}}const XA=ti?"altKey":"ctrlKey";function qb(i,e){let t=i.someProp("dragCopies",n=>!n(e));return t??!e[XA]}Dn.dragstart=(i,e)=>{let t=e,n=i.input.mouseDown;if(n&&n.done(),!t.dataTransfer)return;let r=i.state.selection,s=r.empty?null:i.posAtCoords(sc(t)),o;if(!(s&&s.pos>=r.from&&s.pos<=(r instanceof Xe?r.to-1:r.to))){if(n&&n.mightDrag)o=Xe.create(i.state.doc,n.mightDrag.pos);else if(t.target&&t.target.nodeType==1){let u=i.docView.nearestDesc(t.target,!0);u&&u.node.type.spec.draggable&&u!=i.docView&&(o=Xe.create(i.state.doc,u.posBefore))}}let a=(o||i.state.selection).content(),{dom:l,text:c,slice:h}=pd(i,a);(!t.dataTransfer.files.length||!vn||eb>120)&&t.dataTransfer.clearData(),t.dataTransfer.setData(xa?"Text":"text/html",l.innerHTML),t.dataTransfer.effectAllowed="copyMove",xa||t.dataTransfer.setData("text/plain",c),i.dragging=new Gb(h,qb(i,t),o)},Dn.dragend=i=>{let e=i.dragging;window.setTimeout(()=>{i.dragging==e&&(i.dragging=null)},50)},Nn.dragover=Nn.dragenter=(i,e)=>e.preventDefault(),Nn.drop=(i,e)=>{let t=e,n=i.dragging;if(i.dragging=null,!t.dataTransfer)return;let r=i.posAtCoords(sc(t));if(!r)return;let s=i.state.doc.resolve(r.pos),o=n&&n.slice;o?i.someProp("transformPasted",g=>{o=g(o,i)}):o=Db(i,$b(t.dataTransfer),xa?null:t.dataTransfer.getData("text/html"),!1,s);let a=!!(n&&qb(i,t));if(i.someProp("handleDrop",g=>g(i,t,o||Le.empty,a))){t.preventDefault();return}if(!o)return;t.preventDefault();let l=o?_x(i.state.doc,s.pos,o):s.pos;l==null&&(l=s.pos);let c=i.state.tr;if(a){let{node:g}=n;g?g.replace(c):c.deleteSelection()}let h=c.mapping.map(l),u=o.openStart==0&&o.openEnd==0&&o.content.childCount==1,d=c.doc;if(u?c.replaceRangeWith(h,h,o.content.firstChild):c.replaceRange(h,h,o),c.doc.eq(d))return;let f=c.doc.resolve(h);if(u&&Xe.isSelectable(o.content.firstChild)&&f.nodeAfter&&f.nodeAfter.sameMarkup(o.content.firstChild))c.setSelection(new Xe(f));else{let g=c.mapping.map(l);c.mapping.maps[c.mapping.maps.length-1].forEach((m,b,y,w)=>g=w),c.setSelection(ud(i,f,c.doc.resolve(g)))}i.focus(),i.dispatch(c.setMeta("uiEvent","drop"))},Dn.focus=i=>{i.input.lastFocus=Date.now(),i.focused||(i.domObserver.stop(),i.dom.classList.add("ProseMirror-focused"),i.domObserver.start(),i.focused=!0,setTimeout(()=>{i.docView&&i.hasFocus()&&!i.domObserver.currentSelection.eq(i.domSelectionRange())&&tr(i)},20))},Dn.blur=(i,e)=>{let t=e;i.focused&&(i.domObserver.stop(),i.dom.classList.remove("ProseMirror-focused"),i.domObserver.start(),t.relatedTarget&&i.dom.contains(t.relatedTarget)&&i.domObserver.currentSelection.clear(),i.focused=!1)},Dn.beforeinput=(i,e)=>{if(vn&&Qi&&e.inputType=="deleteContentBackward"){i.domObserver.flushSoon();let{domChangeCount:n}=i.input;setTimeout(()=>{if(i.input.domChangeCount!=n||(i.dom.blur(),i.focus(),i.someProp("handleKeyDown",s=>s(i,ls(8,"Backspace")))))return;let{$cursor:r}=i.state.selection;r&&r.pos>0&&i.dispatch(i.state.tr.delete(r.pos-1,r.pos).scrollIntoView())},50)}};for(let i in Nn)Dn[i]=Nn[i];function ya(i,e){if(i==e)return!0;for(let t in i)if(i[t]!==e[t])return!1;for(let t in e)if(!(t in i))return!1;return!0}class ac{constructor(e,t){this.toDOM=e,this.spec=t||ds,this.side=this.spec.side||0}map(e,t,n,r){let{pos:s,deleted:o}=e.mapResult(t.from+r,this.side<0?-1:1);return o?null:new ii(s-n,s-n,this)}valid(){return!0}eq(e){return this==e||e instanceof ac&&(this.spec.key&&this.spec.key==e.spec.key||this.toDOM==e.toDOM&&ya(this.spec,e.spec))}destroy(e){this.spec.destroy&&this.spec.destroy(e)}}class Tr{constructor(e,t){this.attrs=e,this.spec=t||ds}map(e,t,n,r){let s=e.map(t.from+r,this.spec.inclusiveStart?-1:1)-n,o=e.map(t.to+r,this.spec.inclusiveEnd?1:-1)-n;return s>=o?null:new ii(s,o,this)}valid(e,t){return t.from<t.to}eq(e){return this==e||e instanceof Tr&&ya(this.attrs,e.attrs)&&ya(this.spec,e.spec)}static is(e){return e.type instanceof Tr}destroy(){}}class wd{constructor(e,t){this.attrs=e,this.spec=t||ds}map(e,t,n,r){let s=e.mapResult(t.from+r,1);if(s.deleted)return null;let o=e.mapResult(t.to+r,-1);return o.deleted||o.pos<=s.pos?null:new ii(s.pos-n,o.pos-n,this)}valid(e,t){let{index:n,offset:r}=e.content.findIndex(t.from),s;return r==t.from&&!(s=e.child(n)).isText&&r+s.nodeSize==t.to}eq(e){return this==e||e instanceof wd&&ya(this.attrs,e.attrs)&&ya(this.spec,e.spec)}destroy(){}}class ii{constructor(e,t,n){this.from=e,this.to=t,this.type=n}copy(e,t){return new ii(e,t,this.type)}eq(e,t=0){return this.type.eq(e.type)&&this.from+t==e.from&&this.to+t==e.to}map(e,t,n){return this.type.map(e,this,t,n)}static widget(e,t,n){return new ii(e,e,new ac(t,n))}static inline(e,t,n,r){return new ii(e,t,new Tr(n,r))}static node(e,t,n,r){return new ii(e,t,new wd(n,r))}get spec(){return this.type.spec}get inline(){return this.type instanceof Tr}get widget(){return this.type instanceof ac}}const ro=[],ds={};class $t{constructor(e,t){this.local=e.length?e:ro,this.children=t.length?t:ro}static create(e,t){return t.length?lc(t,e,0,ds):wn}find(e,t,n){let r=[];return this.findInner(e??0,t??1e9,r,0,n),r}findInner(e,t,n,r,s){for(let o=0;o<this.local.length;o++){let a=this.local[o];a.from<=t&&a.to>=e&&(!s||s(a.spec))&&n.push(a.copy(a.from+r,a.to+r))}for(let o=0;o<this.children.length;o+=3)if(this.children[o]<t&&this.children[o+1]>e){let a=this.children[o]+1;this.children[o+2].findInner(e-a,t-a,n,r+a,s)}}map(e,t,n){return this==wn||e.maps.length==0?this:this.mapInner(e,t,0,0,n||ds)}mapInner(e,t,n,r,s){let o;for(let a=0;a<this.local.length;a++){let l=this.local[a].map(e,n,r);l&&l.type.valid(t,l)?(o||(o=[])).push(l):s.onRemove&&s.onRemove(this.local[a].spec)}return this.children.length?WA(this.children,o||[],e,t,n,r,s):o?new $t(o.sort(fs),ro):wn}add(e,t){return t.length?this==wn?$t.create(e,t):this.addInner(e,t,0):this}addInner(e,t,n){let r,s=0;e.forEach((a,l)=>{let c=l+n,h;if(h=Kb(t,a,c)){for(r||(r=this.children.slice());s<r.length&&r[s]<l;)s+=3;r[s]==l?r[s+2]=r[s+2].addInner(a,h,c+1):r.splice(s,0,l,l+a.nodeSize,lc(h,a,c+1,ds)),s+=3}});let o=Ub(s?Jb(t):t,-n);for(let a=0;a<o.length;a++)o[a].type.valid(e,o[a])||o.splice(a--,1);return new $t(o.length?this.local.concat(o).sort(fs):this.local,r||this.children)}remove(e){return e.length==0||this==wn?this:this.removeInner(e,0)}removeInner(e,t){let n=this.children,r=this.local;for(let s=0;s<n.length;s+=3){let o,a=n[s]+t,l=n[s+1]+t;for(let h=0,u;h<e.length;h++)(u=e[h])&&u.from>a&&u.to<l&&(e[h]=null,(o||(o=[])).push(u));if(!o)continue;n==this.children&&(n=this.children.slice());let c=n[s+2].removeInner(o,a+1);c!=wn?n[s+2]=c:(n.splice(s,3),s-=3)}if(r.length){for(let s=0,o;s<e.length;s++)if(o=e[s])for(let a=0;a<r.length;a++)r[a].eq(o,t)&&(r==this.local&&(r=this.local.slice()),r.splice(a--,1))}return n==this.children&&r==this.local?this:r.length||n.length?new $t(r,n):wn}forChild(e,t){if(this==wn)return this;if(t.isLeaf)return $t.empty;let n,r;for(let a=0;a<this.children.length;a+=3)if(this.children[a]>=e){this.children[a]==e&&(n=this.children[a+2]);break}let s=e+1,o=s+t.content.size;for(let a=0;a<this.local.length;a++){let l=this.local[a];if(l.from<o&&l.to>s&&l.type instanceof Tr){let c=Math.max(s,l.from)-s,h=Math.min(o,l.to)-s;c<h&&(r||(r=[])).push(l.copy(c,h))}}if(r){let a=new $t(r.sort(fs),ro);return n?new Er([a,n]):a}return n||wn}eq(e){if(this==e)return!0;if(!(e instanceof $t)||this.local.length!=e.local.length||this.children.length!=e.children.length)return!1;for(let t=0;t<this.local.length;t++)if(!this.local[t].eq(e.local[t]))return!1;for(let t=0;t<this.children.length;t+=3)if(this.children[t]!=e.children[t]||this.children[t+1]!=e.children[t+1]||!this.children[t+2].eq(e.children[t+2]))return!1;return!0}locals(e){return kd(this.localsInner(e))}localsInner(e){if(this==wn)return ro;if(e.inlineContent||!this.local.some(Tr.is))return this.local;let t=[];for(let n=0;n<this.local.length;n++)this.local[n].type instanceof Tr||t.push(this.local[n]);return t}forEachSet(e){e(this)}}$t.empty=new $t([],[]),$t.removeOverlap=kd;const wn=$t.empty;class Er{constructor(e){this.members=e}map(e,t){const n=this.members.map(r=>r.map(e,t,ds));return Er.from(n)}forChild(e,t){if(t.isLeaf)return $t.empty;let n=[];for(let r=0;r<this.members.length;r++){let s=this.members[r].forChild(e,t);s!=wn&&(s instanceof Er?n=n.concat(s.members):n.push(s))}return Er.from(n)}eq(e){if(!(e instanceof Er)||e.members.length!=this.members.length)return!1;for(let t=0;t<this.members.length;t++)if(!this.members[t].eq(e.members[t]))return!1;return!0}locals(e){let t,n=!0;for(let r=0;r<this.members.length;r++){let s=this.members[r].localsInner(e);if(s.length)if(!t)t=s;else{n&&(t=t.slice(),n=!1);for(let o=0;o<s.length;o++)t.push(s[o])}}return t?kd(n?t:t.sort(fs)):ro}static from(e){switch(e.length){case 0:return wn;case 1:return e[0];default:return new Er(e.every(t=>t instanceof $t)?e:e.reduce((t,n)=>t.concat(n instanceof $t?n:n.members),[]))}}forEachSet(e){for(let t=0;t<this.members.length;t++)this.members[t].forEachSet(e)}}function WA(i,e,t,n,r,s,o){let a=i.slice();for(let c=0,h=s;c<t.maps.length;c++){let u=0;t.maps[c].forEach((d,f,g,m)=>{let b=m-g-(f-d);for(let y=0;y<a.length;y+=3){let w=a[y+1];if(w<0||d>w+h-u)continue;let C=a[y]+h-u;f>=C?a[y+1]=d<=C?-2:-1:d>=h&&b&&(a[y]+=b,a[y+1]+=b)}u+=b}),h=t.maps[c].map(h,-1)}let l=!1;for(let c=0;c<a.length;c+=3)if(a[c+1]<0){if(a[c+1]==-2){l=!0,a[c+1]=-1;continue}let h=t.map(i[c]+s),u=h-r;if(u<0||u>=n.content.size){l=!0;continue}let d=t.map(i[c+1]+s,-1),f=d-r,{index:g,offset:m}=n.content.findIndex(u),b=n.maybeChild(g);if(b&&m==u&&m+b.nodeSize==f){let y=a[c+2].mapInner(t,b,h+1,i[c]+s+1,o);y!=wn?(a[c]=u,a[c+1]=f,a[c+2]=y):(a[c+1]=-2,l=!0)}else l=!0}if(l){let c=YA(a,i,e,t,r,s,o),h=lc(c,n,0,o);e=h.local;for(let u=0;u<a.length;u+=3)a[u+1]<0&&(a.splice(u,3),u-=3);for(let u=0,d=0;u<h.children.length;u+=3){let f=h.children[u];for(;d<a.length&&a[d]<f;)d+=3;a.splice(d,0,h.children[u],h.children[u+1],h.children[u+2])}}return new $t(e.sort(fs),a)}function Ub(i,e){if(!e||!i.length)return i;let t=[];for(let n=0;n<i.length;n++){let r=i[n];t.push(new ii(r.from+e,r.to+e,r.type))}return t}function YA(i,e,t,n,r,s,o){function a(l,c){for(let h=0;h<l.local.length;h++){let u=l.local[h].map(n,r,c);u?t.push(u):o.onRemove&&o.onRemove(l.local[h].spec)}for(let h=0;h<l.children.length;h+=3)a(l.children[h+2],l.children[h]+c+1)}for(let l=0;l<i.length;l+=3)i[l+1]==-1&&a(i[l+2],e[l]+s+1);return t}function Kb(i,e,t){if(e.isLeaf)return null;let n=t+e.nodeSize,r=null;for(let s=0,o;s<i.length;s++)(o=i[s])&&o.from>t&&o.to<n&&((r||(r=[])).push(o),i[s]=null);return r}function Jb(i){let e=[];for(let t=0;t<i.length;t++)i[t]!=null&&e.push(i[t]);return e}function lc(i,e,t,n){let r=[],s=!1;e.forEach((a,l)=>{let c=Kb(i,a,l+t);if(c){s=!0;let h=lc(c,a,t+l+1,n);h!=wn&&r.push(l,l+a.nodeSize,h)}});let o=Ub(s?Jb(i):i,-t).sort(fs);for(let a=0;a<o.length;a++)o[a].type.valid(e,o[a])||(n.onRemove&&n.onRemove(o[a].spec),o.splice(a--,1));return o.length||r.length?new $t(o,r):wn}function fs(i,e){return i.from-e.from||i.to-e.to}function kd(i){let e=i;for(let t=0;t<e.length-1;t++){let n=e[t];if(n.from!=n.to)for(let r=t+1;r<e.length;r++){let s=e[r];if(s.from==n.from){s.to!=n.to&&(e==i&&(e=i.slice()),e[r]=s.copy(s.from,n.to),Zb(e,r+1,s.copy(n.to,s.to)));continue}else{s.from<n.to&&(e==i&&(e=i.slice()),e[t]=n.copy(n.from,s.from),Zb(e,r,n.copy(s.from,n.to)));break}}}return e}function Zb(i,e,t){for(;e<i.length&&fs(t,i[e])>0;)e++;i.splice(e,0,t)}function Sd(i){let e=[];return i.someProp("decorations",t=>{let n=t(i.state);n&&n!=wn&&e.push(n)}),i.cursorWrapper&&e.push($t.create(i.state.doc,[i.cursorWrapper.deco])),Er.from(e)}const jA={childList:!0,characterData:!0,characterDataOldValue:!0,attributes:!0,attributeOldValue:!0,subtree:!0},VA=Hn&&kr<=11;class $A{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}set(e){this.anchorNode=e.anchorNode,this.anchorOffset=e.anchorOffset,this.focusNode=e.focusNode,this.focusOffset=e.focusOffset}clear(){this.anchorNode=this.focusNode=null}eq(e){return e.anchorNode==this.anchorNode&&e.anchorOffset==this.anchorOffset&&e.focusNode==this.focusNode&&e.focusOffset==this.focusOffset}}class GA{constructor(e,t){this.view=e,this.handleDOMChange=t,this.queue=[],this.flushingSoon=-1,this.observer=null,this.currentSelection=new $A,this.onCharData=null,this.suppressingSelectionUpdates=!1,this.lastChangedTextNode=null,this.observer=window.MutationObserver&&new window.MutationObserver(n=>{for(let r=0;r<n.length;r++)this.queue.push(n[r]);Hn&&kr<=11&&n.some(r=>r.type=="childList"&&r.removedNodes.length||r.type=="characterData"&&r.oldValue.length>r.target.nodeValue.length)?this.flushSoon():this.flush()}),VA&&(this.onCharData=n=>{this.queue.push({target:n.target,type:"characterData",oldValue:n.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this)}flushSoon(){this.flushingSoon<0&&(this.flushingSoon=window.setTimeout(()=>{this.flushingSoon=-1,this.flush()},20))}forceFlush(){this.flushingSoon>-1&&(window.clearTimeout(this.flushingSoon),this.flushingSoon=-1,this.flush())}start(){this.observer&&(this.observer.takeRecords(),this.observer.observe(this.view.dom,jA)),this.onCharData&&this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.connectSelection()}stop(){if(this.observer){let e=this.observer.takeRecords();if(e.length){for(let t=0;t<e.length;t++)this.queue.push(e[t]);window.setTimeout(()=>this.flush(),20)}this.observer.disconnect()}this.onCharData&&this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData),this.disconnectSelection()}connectSelection(){this.view.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)}disconnectSelection(){this.view.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange)}suppressSelectionUpdates(){this.suppressingSelectionUpdates=!0,setTimeout(()=>this.suppressingSelectionUpdates=!1,50)}onSelectionChange(){if(Mb(this.view)){if(this.suppressingSelectionUpdates)return tr(this.view);if(Hn&&kr<=11&&!this.view.state.selection.empty){let e=this.view.domSelectionRange();if(e.focusNode&&as(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset))return this.flushSoon()}this.flush()}}setCurSelection(){this.currentSelection.set(this.view.domSelectionRange())}ignoreSelectionChange(e){if(!e.focusNode)return!0;let t=new Set,n;for(let s=e.focusNode;s;s=Qs(s))t.add(s);for(let s=e.anchorNode;s;s=Qs(s))if(t.has(s)){n=s;break}let r=n&&this.view.docView.nearestDesc(n);if(r&&r.ignoreMutation({type:"selection",target:n.nodeType==3?n.parentNode:n}))return this.setCurSelection(),!0}pendingRecords(){if(this.observer)for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}flush(){let{view:e}=this;if(!e.docView||this.flushingSoon>-1)return;let t=this.pendingRecords();t.length&&(this.queue=[]);let n=e.domSelectionRange(),r=!this.suppressingSelectionUpdates&&!this.currentSelection.eq(n)&&Mb(e)&&!this.ignoreSelectionChange(n),s=-1,o=-1,a=!1,l=[];if(e.editable)for(let h=0;h<t.length;h++){let u=this.registerMutation(t[h],l);u&&(s=s<0?u.from:Math.min(u.from,s),o=o<0?u.to:Math.max(u.to,o),u.typeOver&&(a=!0))}if(xi&&l.length){let h=l.filter(u=>u.nodeName=="BR");if(h.length==2){let[u,d]=h;u.parentNode&&u.parentNode.parentNode==d.parentNode?d.remove():u.remove()}else{let{focusNode:u}=this.currentSelection;for(let d of h){let f=d.parentNode;f&&f.nodeName=="LI"&&(!u||KA(e,u)!=f)&&d.remove()}}}let c=null;s<0&&r&&e.input.lastFocus>Date.now()-200&&Math.max(e.input.lastTouch,e.input.lastClick.time)<Date.now()-300&&tc(n)&&(c=cd(e))&&c.eq(tt.near(e.state.doc.resolve(0),1))?(e.input.lastFocus=0,tr(e),this.currentSelection.set(n),e.scrollToSelection()):(s>-1||r)&&(s>-1&&(e.docView.markDirty(s,o),qA(e)),this.handleDOMChange(s,o,a,l),e.docView&&e.docView.dirty?e.updateState(e.state):this.currentSelection.eq(n)||tr(e),this.currentSelection.set(n))}registerMutation(e,t){if(t.indexOf(e.target)>-1)return null;let n=this.view.docView.nearestDesc(e.target);if(e.type=="attributes"&&(n==this.view.docView||e.attributeName=="contenteditable"||e.attributeName=="style"&&!e.oldValue&&!e.target.getAttribute("style"))||!n||n.ignoreMutation(e))return null;if(e.type=="childList"){for(let h=0;h<e.addedNodes.length;h++){let u=e.addedNodes[h];t.push(u),u.nodeType==3&&(this.lastChangedTextNode=u)}if(n.contentDOM&&n.contentDOM!=n.dom&&!n.contentDOM.contains(e.target))return{from:n.posBefore,to:n.posAfter};let r=e.previousSibling,s=e.nextSibling;if(Hn&&kr<=11&&e.addedNodes.length)for(let h=0;h<e.addedNodes.length;h++){let{previousSibling:u,nextSibling:d}=e.addedNodes[h];(!u||Array.prototype.indexOf.call(e.addedNodes,u)<0)&&(r=u),(!d||Array.prototype.indexOf.call(e.addedNodes,d)<0)&&(s=d)}let o=r&&r.parentNode==e.target?ln(r)+1:0,a=n.localPosFromDOM(e.target,o,-1),l=s&&s.parentNode==e.target?ln(s):e.target.childNodes.length,c=n.localPosFromDOM(e.target,l,1);return{from:a,to:c}}else return e.type=="attributes"?{from:n.posAtStart-n.border,to:n.posAtEnd+n.border}:(this.lastChangedTextNode=e.target,{from:n.posAtStart,to:n.posAtEnd,typeOver:e.target.nodeValue==e.oldValue})}}let Qb=new WeakMap,ey=!1;function qA(i){if(!Qb.has(i)&&(Qb.set(i,null),["normal","nowrap","pre-line"].indexOf(getComputedStyle(i.dom).whiteSpace)!==-1)){if(i.requiresGeckoHackNode=xi,ey)return;console.warn("ProseMirror expects the CSS white-space property to be set, preferably to 'pre-wrap'. It is recommended to load style/prosemirror.css from the prosemirror-view package."),ey=!0}}function ty(i,e){let t=e.startContainer,n=e.startOffset,r=e.endContainer,s=e.endOffset,o=i.domAtPos(i.state.selection.anchor);return as(o.node,o.offset,r,s)&&([t,n,r,s]=[r,s,t,n]),{anchorNode:t,anchorOffset:n,focusNode:r,focusOffset:s}}function UA(i,e){if(e.getComposedRanges){let r=e.getComposedRanges(i.root)[0];if(r)return ty(i,r)}let t;function n(r){r.preventDefault(),r.stopImmediatePropagation(),t=r.getTargetRanges()[0]}return i.dom.addEventListener("beforeinput",n,!0),document.execCommand("indent"),i.dom.removeEventListener("beforeinput",n,!0),t?ty(i,t):null}function KA(i,e){for(let t=e.parentNode;t&&t!=i.dom;t=t.parentNode){let n=i.docView.nearestDesc(t,!0);if(n&&n.node.isBlock)return t}return null}function JA(i,e,t){let{node:n,fromOffset:r,toOffset:s,from:o,to:a}=i.docView.parseRange(e,t),l=i.domSelectionRange(),c,h=l.anchorNode;if(h&&i.dom.contains(h.nodeType==1?h:h.parentNode)&&(c=[{node:h,offset:l.anchorOffset}],tc(l)||c.push({node:l.focusNode,offset:l.focusOffset})),vn&&i.input.lastKeyCode===8)for(let b=s;b>r;b--){let y=n.childNodes[b-1],w=y.pmViewDesc;if(y.nodeName=="BR"&&!w){s=b;break}if(!w||w.size)break}let u=i.state.doc,d=i.someProp("domParser")||ra.fromSchema(i.state.schema),f=u.resolve(o),g=null,m=d.parse(n,{topNode:f.parent,topMatch:f.parent.contentMatchAt(f.index()),topOpen:!0,from:r,to:s,preserveWhitespace:f.parent.type.whitespace=="pre"?"full":!0,findPositions:c,ruleFromNode:ZA,context:f});if(c&&c[0].pos!=null){let b=c[0].pos,y=c[1]&&c[1].pos;y==null&&(y=b),g={anchor:b+o,head:y+o}}return{doc:m,sel:g,from:o,to:a}}function ZA(i){let e=i.pmViewDesc;if(e)return e.parseRule();if(i.nodeName=="BR"&&i.parentNode){if(Rn&&/^(ul|ol)$/i.test(i.parentNode.nodeName)){let t=document.createElement("div");return t.appendChild(document.createElement("li")),{skip:t}}else if(i.parentNode.lastChild==i||Rn&&/^(tr|table)$/i.test(i.parentNode.nodeName))return{ignore:!0}}else if(i.nodeName=="IMG"&&i.getAttribute("mark-placeholder"))return{ignore:!0};return null}const QA=/^(a|abbr|acronym|b|bd[io]|big|br|button|cite|code|data(list)?|del|dfn|em|i|ins|kbd|label|map|mark|meter|output|q|ruby|s|samp|small|span|strong|su[bp]|time|u|tt|var)$/i;function eM(i,e,t,n,r){let s=i.input.compositionPendingChanges||(i.composing?i.input.compositionID:0);if(i.input.compositionPendingChanges=0,e<0){let R=i.input.lastSelectionTime>Date.now()-50?i.input.lastSelectionOrigin:null,z=cd(i,R);if(z&&!i.state.selection.eq(z)){if(vn&&Qi&&i.input.lastKeyCode===13&&Date.now()-100<i.input.lastKeyCodeTime&&i.someProp("handleKeyDown",B=>B(i,ls(13,"Enter"))))return;let D=i.state.tr.setSelection(z);R=="pointer"?D.setMeta("pointer",!0):R=="key"&&D.scrollIntoView(),s&&D.setMeta("composition",s),i.dispatch(D)}return}let o=i.state.doc.resolve(e),a=o.sharedDepth(t);e=o.before(a+1),t=i.state.doc.resolve(t).after(a+1);let l=i.state.selection,c=JA(i,e,t),h=i.state.doc,u=h.slice(c.from,c.to),d,f;i.input.lastKeyCode===8&&Date.now()-100<i.input.lastKeyCodeTime?(d=i.state.selection.to,f="end"):(d=i.state.selection.from,f="start"),i.input.lastKeyCode=null;let g=iM(u.content,c.doc.content,c.from,d,f);if(g&&i.input.domChangeCount++,(eo&&i.input.lastIOSEnter>Date.now()-225||Qi)&&r.some(R=>R.nodeType==1&&!QA.test(R.nodeName))&&(!g||g.endA>=g.endB)&&i.someProp("handleKeyDown",R=>R(i,ls(13,"Enter")))){i.input.lastIOSEnter=0;return}if(!g)if(n&&l instanceof Ve&&!l.empty&&l.$head.sameParent(l.$anchor)&&!i.composing&&!(c.sel&&c.sel.anchor!=c.sel.head))g={start:l.from,endA:l.to,endB:l.to};else{if(c.sel){let R=ny(i,i.state.doc,c.sel);if(R&&!R.eq(i.state.selection)){let z=i.state.tr.setSelection(R);s&&z.setMeta("composition",s),i.dispatch(z)}}return}i.state.selection.from<i.state.selection.to&&g.start==g.endB&&i.state.selection instanceof Ve&&(g.start>i.state.selection.from&&g.start<=i.state.selection.from+2&&i.state.selection.from>=c.from?g.start=i.state.selection.from:g.endA<i.state.selection.to&&g.endA>=i.state.selection.to-2&&i.state.selection.to<=c.to&&(g.endB+=i.state.selection.to-g.endA,g.endA=i.state.selection.to)),Hn&&kr<=11&&g.endB==g.start+1&&g.endA==g.start&&g.start>c.from&&c.doc.textBetween(g.start-c.from-1,g.start-c.from+1)==" "&&(g.start--,g.endA--,g.endB--);let m=c.doc.resolveNoCache(g.start-c.from),b=c.doc.resolveNoCache(g.endB-c.from),y=h.resolve(g.start),w=m.sameParent(b)&&m.parent.inlineContent&&y.end()>=g.endA,C;if((eo&&i.input.lastIOSEnter>Date.now()-225&&(!w||r.some(R=>R.nodeName=="DIV"||R.nodeName=="P"))||!w&&m.pos<c.doc.content.size&&(!m.sameParent(b)||!m.parent.inlineContent)&&(C=tt.findFrom(c.doc.resolve(m.pos+1),1,!0))&&C.head>m.pos)&&i.someProp("handleKeyDown",R=>R(i,ls(13,"Enter")))){i.input.lastIOSEnter=0;return}if(i.state.selection.anchor>g.start&&nM(h,g.start,g.endA,m,b)&&i.someProp("handleKeyDown",R=>R(i,ls(8,"Backspace")))){Qi&&vn&&i.domObserver.suppressSelectionUpdates();return}vn&&g.endB==g.start&&(i.input.lastChromeDelete=Date.now()),Qi&&!w&&m.start()!=b.start()&&b.parentOffset==0&&m.depth==b.depth&&c.sel&&c.sel.anchor==c.sel.head&&c.sel.head==g.endA&&(g.endB-=2,b=c.doc.resolveNoCache(g.endB-c.from),setTimeout(()=>{i.someProp("handleKeyDown",function(R){return R(i,ls(13,"Enter"))})},20));let M=g.start,S=g.endA,O,T,I;if(w){if(m.pos==b.pos)Hn&&kr<=11&&m.parentOffset==0&&(i.domObserver.suppressSelectionUpdates(),setTimeout(()=>tr(i),20)),O=i.state.tr.delete(M,S),T=h.resolve(g.start).marksAcross(h.resolve(g.endA));else if(g.endA==g.endB&&(I=tM(m.parent.content.cut(m.parentOffset,b.parentOffset),y.parent.content.cut(y.parentOffset,g.endA-y.start()))))O=i.state.tr,I.type=="add"?O.addMark(M,S,I.mark):O.removeMark(M,S,I.mark);else if(m.parent.child(m.index()).isText&&m.index()==b.index()-(b.textOffset?0:1)){let R=m.parent.textBetween(m.parentOffset,b.parentOffset);if(i.someProp("handleTextInput",z=>z(i,M,S,R)))return;O=i.state.tr.insertText(R,M,S)}}if(O||(O=i.state.tr.replace(M,S,c.doc.slice(g.start-c.from,g.endB-c.from))),c.sel){let R=ny(i,O.doc,c.sel);R&&!(vn&&i.composing&&R.empty&&(g.start!=g.endB||i.input.lastChromeDelete<Date.now()-100)&&(R.head==M||R.head==O.mapping.map(S)-1)||Hn&&R.empty&&R.head==M)&&O.setSelection(R)}T&&O.ensureMarks(T),s&&O.setMeta("composition",s),i.dispatch(O.scrollIntoView())}function ny(i,e,t){return Math.max(t.anchor,t.head)>e.content.size?null:ud(i,e.resolve(t.anchor),e.resolve(t.head))}function tM(i,e){let t=i.firstChild.marks,n=e.firstChild.marks,r=t,s=n,o,a,l;for(let h=0;h<n.length;h++)r=n[h].removeFromSet(r);for(let h=0;h<t.length;h++)s=t[h].removeFromSet(s);if(r.length==1&&s.length==0)a=r[0],o="add",l=h=>h.mark(a.addToSet(h.marks));else if(r.length==0&&s.length==1)a=s[0],o="remove",l=h=>h.mark(a.removeFromSet(h.marks));else return null;let c=[];for(let h=0;h<e.childCount;h++)c.push(l(e.child(h)));if(he.from(c).eq(i))return{mark:a,type:o}}function nM(i,e,t,n,r){if(t-e<=r.pos-n.pos||Cd(n,!0,!1)<r.pos)return!1;let s=i.resolve(e);if(!n.parent.isTextblock){let a=s.nodeAfter;return a!=null&&t==e+a.nodeSize}if(s.parentOffset<s.parent.content.size||!s.parent.isTextblock)return!1;let o=i.resolve(Cd(s,!0,!0));return!o.parent.isTextblock||o.pos>t||Cd(o,!0,!1)<t?!1:n.parent.content.cut(n.parentOffset).eq(o.parent.content)}function Cd(i,e,t){let n=i.depth,r=e?i.end():i.pos;for(;n>0&&(e||i.indexAfter(n)==i.node(n).childCount);)n--,r++,e=!1;if(t){let s=i.node(n).maybeChild(i.indexAfter(n));for(;s&&!s.isLeaf;)s=s.firstChild,r++}return r}function iM(i,e,t,n,r){let s=i.findDiffStart(e,t);if(s==null)return null;let{a:o,b:a}=i.findDiffEnd(e,t+i.size,t+e.size);if(r=="end"){let l=Math.max(0,s-Math.min(o,a));n-=o+l-s}if(o<s&&i.size<e.size){let l=n<=s&&n>=o?s-n:0;s-=l,s&&s<e.size&&iy(e.textBetween(s-1,s+1))&&(s+=l?1:-1),a=s+(a-o),o=s}else if(a<s){let l=n<=s&&n>=a?s-n:0;s-=l,s&&s<i.size&&iy(i.textBetween(s-1,s+1))&&(s+=l?1:-1),o=s+(o-a),a=s}return{start:s,endA:o,endB:a}}function iy(i){if(i.length!=2)return!1;let e=i.charCodeAt(0),t=i.charCodeAt(1);return e>=56320&&e<=57343&&t>=55296&&t<=56319}class rM{constructor(e,t){this._root=null,this.focused=!1,this.trackWrites=null,this.mounted=!1,this.markCursor=null,this.cursorWrapper=null,this.lastSelectedViewDesc=void 0,this.input=new kA,this.prevDirectPlugins=[],this.pluginViews=[],this.requiresGeckoHackNode=!1,this.dragging=null,this._props=t,this.state=t.state,this.directPlugins=t.plugins||[],this.directPlugins.forEach(ly),this.dispatch=this.dispatch.bind(this),this.dom=e&&e.mount||document.createElement("div"),e&&(e.appendChild?e.appendChild(this.dom):typeof e=="function"?e(this.dom):e.mount&&(this.mounted=!0)),this.editable=oy(this),sy(this),this.nodeViews=ay(this),this.docView=pb(this.state.doc,ry(this),Sd(this),this.dom,this),this.domObserver=new GA(this,(n,r,s,o)=>eM(this,n,r,s,o)),this.domObserver.start(),SA(this),this.updatePluginViews()}get composing(){return this.input.composing}get props(){if(this._props.state!=this.state){let e=this._props;this._props={};for(let t in e)this._props[t]=e[t];this._props.state=this.state}return this._props}update(e){e.handleDOMEvents!=this._props.handleDOMEvents&&xd(this);let t=this._props;this._props=e,e.plugins&&(e.plugins.forEach(ly),this.directPlugins=e.plugins),this.updateStateInner(e.state,t)}setProps(e){let t={};for(let n in this._props)t[n]=this._props[n];t.state=this.state;for(let n in e)t[n]=e[n];this.update(t)}updateState(e){this.updateStateInner(e,this._props)}updateStateInner(e,t){var n;let r=this.state,s=!1,o=!1;e.storedMarks&&this.composing&&(Vb(this),o=!0),this.state=e;let a=r.plugins!=e.plugins||this._props.plugins!=t.plugins;if(a||this._props.plugins!=t.plugins||this._props.nodeViews!=t.nodeViews){let f=ay(this);oM(f,this.nodeViews)&&(this.nodeViews=f,s=!0)}(a||t.handleDOMEvents!=this._props.handleDOMEvents)&&xd(this),this.editable=oy(this),sy(this);let l=Sd(this),c=ry(this),h=r.plugins!=e.plugins&&!r.doc.eq(e.doc)?"reset":e.scrollToSelection>r.scrollToSelection?"to selection":"preserve",u=s||!this.docView.matchesNode(e.doc,c,l);(u||!e.selection.eq(r.selection))&&(o=!0);let d=h=="preserve"&&o&&this.dom.style.overflowAnchor==null&&zC(this);if(o){this.domObserver.stop();let f=u&&(Hn||vn)&&!this.composing&&!r.selection.empty&&!e.selection.empty&&sM(r.selection,e.selection);if(u){let g=vn?this.trackWrites=this.domSelectionRange().focusNode:null;this.composing&&(this.input.compositionNode=_A(this)),(s||!this.docView.update(e.doc,c,l,this))&&(this.docView.updateOuterDeco(c),this.docView.destroy(),this.docView=pb(e.doc,c,l,this.dom,this)),g&&!this.trackWrites&&(f=!0)}f||!(this.input.mouseDown&&this.domObserver.currentSelection.eq(this.domSelectionRange())&&aA(this))?tr(this,f):(Cb(this,e.selection),this.domObserver.setCurSelection()),this.domObserver.start()}this.updatePluginViews(r),!((n=this.dragging)===null||n===void 0)&&n.node&&!r.doc.eq(e.doc)&&this.updateDraggedNode(this.dragging,r),h=="reset"?this.dom.scrollTop=0:h=="to selection"?this.scrollToSelection():d&&FC(d)}scrollToSelection(){let e=this.domSelectionRange().focusNode;if(!(!e||!this.dom.contains(e.nodeType==1?e:e.parentNode))){if(!this.someProp("handleScrollToSelection",t=>t(this)))if(this.state.selection instanceof Xe){let t=this.docView.domAfterPos(this.state.selection.from);t.nodeType==1&&tb(this,t.getBoundingClientRect(),e)}else tb(this,this.coordsAtPos(this.state.selection.head,1),e)}}destroyPluginViews(){let e;for(;e=this.pluginViews.pop();)e.destroy&&e.destroy()}updatePluginViews(e){if(!e||e.plugins!=this.state.plugins||this.directPlugins!=this.prevDirectPlugins){this.prevDirectPlugins=this.directPlugins,this.destroyPluginViews();for(let t=0;t<this.directPlugins.length;t++){let n=this.directPlugins[t];n.spec.view&&this.pluginViews.push(n.spec.view(this))}for(let t=0;t<this.state.plugins.length;t++){let n=this.state.plugins[t];n.spec.view&&this.pluginViews.push(n.spec.view(this))}}else for(let t=0;t<this.pluginViews.length;t++){let n=this.pluginViews[t];n.update&&n.update(this,e)}}updateDraggedNode(e,t){let n=e.node,r=-1;if(this.state.doc.nodeAt(n.from)==n.node)r=n.from;else{let s=n.from+(this.state.doc.content.size-t.doc.content.size);(s>0&&this.state.doc.nodeAt(s))==n.node&&(r=s)}this.dragging=new Gb(e.slice,e.move,r<0?void 0:Xe.create(this.state.doc,r))}someProp(e,t){let n=this._props&&this._props[e],r;if(n!=null&&(r=t?t(n):n))return r;for(let o=0;o<this.directPlugins.length;o++){let a=this.directPlugins[o].props[e];if(a!=null&&(r=t?t(a):a))return r}let s=this.state.plugins;if(s)for(let o=0;o<s.length;o++){let a=s[o].props[e];if(a!=null&&(r=t?t(a):a))return r}}hasFocus(){if(Hn){let e=this.root.activeElement;if(e==this.dom)return!0;if(!e||!this.dom.contains(e))return!1;for(;e&&this.dom!=e&&this.dom.contains(e);){if(e.contentEditable=="false")return!1;e=e.parentElement}return!0}return this.root.activeElement==this.dom}focus(){this.domObserver.stop(),this.editable&&BC(this.dom),tr(this),this.domObserver.start()}get root(){let e=this._root;if(e==null){for(let t=this.dom.parentNode;t;t=t.parentNode)if(t.nodeType==9||t.nodeType==11&&t.host)return t.getSelection||(Object.getPrototypeOf(t).getSelection=()=>t.ownerDocument.getSelection()),this._root=t}return e||document}updateRoot(){this._root=null}posAtCoords(e){return jC(this,e)}coordsAtPos(e,t=1){return ab(this,e,t)}domAtPos(e,t=0){return this.docView.domFromPos(e,t)}nodeDOM(e){let t=this.docView.descAt(e);return t?t.nodeDOM:null}posAtDOM(e,t,n=-1){let r=this.docView.posFromDOM(e,t,n);if(r==null)throw new RangeError("DOM position not inside the editor");return r}endOfTextblock(e,t){return UC(this,t||this.state,e)}pasteHTML(e,t){return ba(this,"",e,!1,t||new ClipboardEvent("paste"))}pasteText(e,t){return ba(this,e,null,!0,t||new ClipboardEvent("paste"))}serializeForClipboard(e){return pd(this,e)}destroy(){this.docView&&(CA(this),this.destroyPluginViews(),this.mounted?(this.docView.update(this.state.doc,[],Sd(this),this),this.dom.textContent=""):this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom),this.docView.destroy(),this.docView=null,MC())}get isDestroyed(){return this.docView==null}dispatchEvent(e){return MA(this,e)}dispatch(e){let t=this._props.dispatchTransaction;t?t.call(this,e):this.updateState(this.state.apply(e))}domSelectionRange(){let e=this.domSelection();return e?Rn&&this.root.nodeType===11&&PC(this.dom.ownerDocument)==this.dom&&UA(this,e)||e:{focusNode:null,focusOffset:0,anchorNode:null,anchorOffset:0}}domSelection(){return this.root.getSelection()}}function ry(i){let e=Object.create(null);return e.class="ProseMirror",e.contenteditable=String(i.editable),i.someProp("attributes",t=>{if(typeof t=="function"&&(t=t(i.state)),t)for(let n in t)n=="class"?e.class+=" "+t[n]:n=="style"?e.style=(e.style?e.style+";":"")+t[n]:!e[n]&&n!="contenteditable"&&n!="nodeName"&&(e[n]=String(t[n]))}),e.translate||(e.translate="no"),[ii.node(0,i.state.doc.content.size,e)]}function sy(i){if(i.markCursor){let e=document.createElement("img");e.className="ProseMirror-separator",e.setAttribute("mark-placeholder","true"),e.setAttribute("alt",""),i.cursorWrapper={dom:e,deco:ii.widget(i.state.selection.from,e,{raw:!0,marks:i.markCursor})}}else i.cursorWrapper=null}function oy(i){return!i.someProp("editable",e=>e(i.state)===!1)}function sM(i,e){let t=Math.min(i.$anchor.sharedDepth(i.head),e.$anchor.sharedDepth(e.head));return i.$anchor.start(t)!=e.$anchor.start(t)}function ay(i){let e=Object.create(null);function t(n){for(let r in n)Object.prototype.hasOwnProperty.call(e,r)||(e[r]=n[r])}return i.someProp("nodeViews",t),i.someProp("markViews",t),e}function oM(i,e){let t=0,n=0;for(let r in i){if(i[r]!=e[r])return!0;t++}for(let r in e)n++;return t!=n}function ly(i){if(i.spec.state||i.spec.filterTransaction||i.spec.appendTransaction)throw new RangeError("Plugins passed directly to the view must not have a state component")}for(var Or={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},cc={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},aM=typeof navigator<"u"&&/Mac/.test(navigator.platform),lM=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent),cn=0;cn<10;cn++)Or[48+cn]=Or[96+cn]=String(cn);for(var cn=1;cn<=24;cn++)Or[cn+111]="F"+cn;for(var cn=65;cn<=90;cn++)Or[cn]=String.fromCharCode(cn+32),cc[cn]=String.fromCharCode(cn);for(var Ad in Or)cc.hasOwnProperty(Ad)||(cc[Ad]=Or[Ad]);function cM(i){var e=aM&&i.metaKey&&i.shiftKey&&!i.ctrlKey&&!i.altKey||lM&&i.shiftKey&&i.key&&i.key.length==1||i.key=="Unidentified",t=!e&&i.key||(i.shiftKey?cc:Or)[i.keyCode]||i.key||"Unidentified";return t=="Esc"&&(t="Escape"),t=="Del"&&(t="Delete"),t=="Left"&&(t="ArrowLeft"),t=="Up"&&(t="ArrowUp"),t=="Right"&&(t="ArrowRight"),t=="Down"&&(t="ArrowDown"),t}const hM=typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):!1;function uM(i){let e=i.split(/-(?!$)/),t=e[e.length-1];t=="Space"&&(t=" ");let n,r,s,o;for(let a=0;a<e.length-1;a++){let l=e[a];if(/^(cmd|meta|m)$/i.test(l))o=!0;else if(/^a(lt)?$/i.test(l))n=!0;else if(/^(c|ctrl|control)$/i.test(l))r=!0;else if(/^s(hift)?$/i.test(l))s=!0;else if(/^mod$/i.test(l))hM?o=!0:r=!0;else throw new Error("Unrecognized modifier name: "+l)}return n&&(t="Alt-"+t),r&&(t="Ctrl-"+t),o&&(t="Meta-"+t),s&&(t="Shift-"+t),t}function dM(i){let e=Object.create(null);for(let t in i)e[uM(t)]=i[t];return e}function Md(i,e,t=!0){return e.altKey&&(i="Alt-"+i),e.ctrlKey&&(i="Ctrl-"+i),e.metaKey&&(i="Meta-"+i),t&&e.shiftKey&&(i="Shift-"+i),i}function fM(i){return new an({props:{handleKeyDown:cy(i)}})}function cy(i){let e=dM(i);return function(t,n){let r=cM(n),s,o=e[Md(r,n)];if(o&&o(t.state,t.dispatch,t))return!0;if(r.length==1&&r!=" "){if(n.shiftKey){let a=e[Md(r,n,!1)];if(a&&a(t.state,t.dispatch,t))return!0}if((n.shiftKey||n.altKey||n.metaKey||r.charCodeAt(0)>127)&&(s=Or[n.keyCode])&&s!=r){let a=e[Md(s,n)];if(a&&a(t.state,t.dispatch,t))return!0}}return!1}}const Td=(i,e)=>i.selection.empty?!1:(e&&e(i.tr.deleteSelection().scrollIntoView()),!0);function hy(i,e){let{$cursor:t}=i.selection;return!t||(e?!e.endOfTextblock("backward",i):t.parentOffset>0)?null:t}const uy=(i,e,t)=>{let n=hy(i,t);if(!n)return!1;let r=Ed(n);if(!r){let o=n.blockRange(),a=o&&qs(o);return a==null?!1:(e&&e(i.tr.lift(o,a).scrollIntoView()),!0)}let s=r.nodeBefore;if(vy(i,r,e,-1))return!0;if(n.parent.content.size==0&&(so(s,"end")||Xe.isSelectable(s)))for(let o=n.depth;;o--){let a=Ql(i.doc,n.before(o),n.after(o),Le.empty);if(a&&a.slice.size<a.to-a.from){if(e){let l=i.tr.step(a);l.setSelection(so(s,"end")?tt.findFrom(l.doc.resolve(l.mapping.map(r.pos,-1)),-1):Xe.create(l.doc,r.pos-s.nodeSize)),e(l.scrollIntoView())}return!0}if(o==1||n.node(o-1).childCount>1)break}return s.isAtom&&r.depth==n.depth-1?(e&&e(i.tr.delete(r.pos-s.nodeSize,r.pos).scrollIntoView()),!0):!1},pM=(i,e,t)=>{let n=hy(i,t);if(!n)return!1;let r=Ed(n);return r?dy(i,r,e):!1},gM=(i,e,t)=>{let n=py(i,t);if(!n)return!1;let r=Od(n);return r?dy(i,r,e):!1};function dy(i,e,t){let n=e.nodeBefore,r=n,s=e.pos-1;for(;!r.isTextblock;s--){if(r.type.spec.isolating)return!1;let h=r.lastChild;if(!h)return!1;r=h}let o=e.nodeAfter,a=o,l=e.pos+1;for(;!a.isTextblock;l++){if(a.type.spec.isolating)return!1;let h=a.firstChild;if(!h)return!1;a=h}let c=Ql(i.doc,s,l,Le.empty);if(!c||c.from!=s||c instanceof Jt&&c.slice.size>=l-s)return!1;if(t){let h=i.tr.step(c);h.setSelection(Ve.create(h.doc,s)),t(h.scrollIntoView())}return!0}function so(i,e,t=!1){for(let n=i;n;n=e=="start"?n.firstChild:n.lastChild){if(n.isTextblock)return!0;if(t&&n.childCount!=1)return!1}return!1}const fy=(i,e,t)=>{let{$head:n,empty:r}=i.selection,s=n;if(!r)return!1;if(n.parent.isTextblock){if(t?!t.endOfTextblock("backward",i):n.parentOffset>0)return!1;s=Ed(n)}let o=s&&s.nodeBefore;return!o||!Xe.isSelectable(o)?!1:(e&&e(i.tr.setSelection(Xe.create(i.doc,s.pos-o.nodeSize)).scrollIntoView()),!0)};function Ed(i){if(!i.parent.type.spec.isolating)for(let e=i.depth-1;e>=0;e--){if(i.index(e)>0)return i.doc.resolve(i.before(e+1));if(i.node(e).type.spec.isolating)break}return null}function py(i,e){let{$cursor:t}=i.selection;return!t||(e?!e.endOfTextblock("forward",i):t.parentOffset<t.parent.content.size)?null:t}const gy=(i,e,t)=>{let n=py(i,t);if(!n)return!1;let r=Od(n);if(!r)return!1;let s=r.nodeAfter;if(vy(i,r,e,1))return!0;if(n.parent.content.size==0&&(so(s,"start")||Xe.isSelectable(s))){let o=Ql(i.doc,n.before(),n.after(),Le.empty);if(o&&o.slice.size<o.to-o.from){if(e){let a=i.tr.step(o);a.setSelection(so(s,"start")?tt.findFrom(a.doc.resolve(a.mapping.map(r.pos)),1):Xe.create(a.doc,a.mapping.map(r.pos))),e(a.scrollIntoView())}return!0}}return s.isAtom&&r.depth==n.depth-1?(e&&e(i.tr.delete(r.pos,r.pos+s.nodeSize).scrollIntoView()),!0):!1},my=(i,e,t)=>{let{$head:n,empty:r}=i.selection,s=n;if(!r)return!1;if(n.parent.isTextblock){if(t?!t.endOfTextblock("forward",i):n.parentOffset<n.parent.content.size)return!1;s=Od(n)}let o=s&&s.nodeAfter;return!o||!Xe.isSelectable(o)?!1:(e&&e(i.tr.setSelection(Xe.create(i.doc,s.pos)).scrollIntoView()),!0)};function Od(i){if(!i.parent.type.spec.isolating)for(let e=i.depth-1;e>=0;e--){let t=i.node(e);if(i.index(e)+1<t.childCount)return i.doc.resolve(i.after(e+1));if(t.type.spec.isolating)break}return null}const mM=(i,e)=>{let t=i.selection,n=t instanceof Xe,r;if(n){if(t.node.isTextblock||!vr(i.doc,t.from))return!1;r=t.from}else if(r=Zl(i.doc,t.from,-1),r==null)return!1;if(e){let s=i.tr.join(r);n&&s.setSelection(Xe.create(s.doc,r-i.doc.resolve(r).nodeBefore.nodeSize)),e(s.scrollIntoView())}return!0},xM=(i,e)=>{let t=i.selection,n;if(t instanceof Xe){if(t.node.isTextblock||!vr(i.doc,t.to))return!1;n=t.to}else if(n=Zl(i.doc,t.to,1),n==null)return!1;return e&&e(i.tr.join(n).scrollIntoView()),!0},bM=(i,e)=>{let{$from:t,$to:n}=i.selection,r=t.blockRange(n),s=r&&qs(r);return s==null?!1:(e&&e(i.tr.lift(r,s).scrollIntoView()),!0)},xy=(i,e)=>{let{$head:t,$anchor:n}=i.selection;return!t.parent.type.spec.code||!t.sameParent(n)?!1:(e&&e(i.tr.insertText(`
    `).scrollIntoView()),!0)};function Id(i){for(let e=0;e<i.edgeCount;e++){let{type:t}=i.edge(e);if(t.isTextblock&&!t.hasRequiredAttrs())return t}return null}const yM=(i,e)=>{let{$head:t,$anchor:n}=i.selection;if(!t.parent.type.spec.code||!t.sameParent(n))return!1;let r=t.node(-1),s=t.indexAfter(-1),o=Id(r.contentMatchAt(s));if(!o||!r.canReplaceWith(s,s,o))return!1;if(e){let a=t.after(),l=i.tr.replaceWith(a,a,o.createAndFill());l.setSelection(tt.near(l.doc.resolve(a),1)),e(l.scrollIntoView())}return!0},by=(i,e)=>{let t=i.selection,{$from:n,$to:r}=t;if(t instanceof qn||n.parent.inlineContent||r.parent.inlineContent)return!1;let s=Id(r.parent.contentMatchAt(r.indexAfter()));if(!s||!s.isTextblock)return!1;if(e){let o=(!n.parentOffset&&r.index()<r.parent.childCount?n:r).pos,a=i.tr.insert(o,s.createAndFill());a.setSelection(Ve.create(a.doc,o+1)),e(a.scrollIntoView())}return!0},yy=(i,e)=>{let{$cursor:t}=i.selection;if(!t||t.parent.content.size)return!1;if(t.depth>1&&t.after()!=t.end(-1)){let s=t.before();if(Ji(i.doc,s))return e&&e(i.tr.split(s).scrollIntoView()),!0}let n=t.blockRange(),r=n&&qs(n);return r==null?!1:(e&&e(i.tr.lift(n,r).scrollIntoView()),!0)};function vM(i){return(e,t)=>{let{$from:n,$to:r}=e.selection;if(e.selection instanceof Xe&&e.selection.node.isBlock)return!n.parentOffset||!Ji(e.doc,n.pos)?!1:(t&&t(e.tr.split(n.pos).scrollIntoView()),!0);if(!n.depth)return!1;let s=[],o,a,l=!1,c=!1;for(let f=n.depth;;f--)if(n.node(f).isBlock){l=n.end(f)==n.pos+(n.depth-f),c=n.start(f)==n.pos-(n.depth-f),a=Id(n.node(f-1).contentMatchAt(n.indexAfter(f-1))),s.unshift(l&&a?{type:a}:null),o=f;break}else{if(f==1)return!1;s.unshift(null)}let h=e.tr;(e.selection instanceof Ve||e.selection instanceof qn)&&h.deleteSelection();let u=h.mapping.map(n.pos),d=Ji(h.doc,u,s.length,s);if(d||(s[0]=a?{type:a}:null,d=Ji(h.doc,u,s.length,s)),h.split(u,s.length,s),!l&&c&&n.node(o).type!=a){let f=h.mapping.map(n.before(o)),g=h.doc.resolve(f);a&&n.node(o-1).canReplaceWith(g.index(),g.index()+1,a)&&h.setNodeMarkup(h.mapping.map(n.before(o)),a)}return t&&t(h.scrollIntoView()),!0}}const wM=vM(),kM=(i,e)=>{let{$from:t,to:n}=i.selection,r,s=t.sharedDepth(n);return s==0?!1:(r=t.before(s),e&&e(i.tr.setSelection(Xe.create(i.doc,r))),!0)};function SM(i,e,t){let n=e.nodeBefore,r=e.nodeAfter,s=e.index();return!n||!r||!n.type.compatibleContent(r.type)?!1:!n.content.size&&e.parent.canReplace(s-1,s)?(t&&t(i.tr.delete(e.pos-n.nodeSize,e.pos).scrollIntoView()),!0):!e.parent.canReplace(s,s+1)||!(r.isTextblock||vr(i.doc,e.pos))?!1:(t&&t(i.tr.join(e.pos).scrollIntoView()),!0)}function vy(i,e,t,n){let r=e.nodeBefore,s=e.nodeAfter,o,a,l=r.type.spec.isolating||s.type.spec.isolating;if(!l&&SM(i,e,t))return!0;let c=!l&&e.parent.canReplace(e.index(),e.index()+1);if(c&&(o=(a=r.contentMatchAt(r.childCount)).findWrapping(s.type))&&a.matchType(o[0]||s.type).validEnd){if(t){let f=e.pos+s.nodeSize,g=he.empty;for(let y=o.length-1;y>=0;y--)g=he.from(o[y].create(null,g));g=he.from(r.copy(g));let m=i.tr.step(new Zt(e.pos-1,f,e.pos,f,new Le(g,1,0),o.length,!0)),b=m.doc.resolve(f+2*o.length);b.nodeAfter&&b.nodeAfter.type==r.type&&vr(m.doc,b.pos)&&m.join(b.pos),t(m.scrollIntoView())}return!0}let h=s.type.spec.isolating||n>0&&l?null:tt.findFrom(e,1),u=h&&h.$from.blockRange(h.$to),d=u&&qs(u);if(d!=null&&d>=e.depth)return t&&t(i.tr.lift(u,d).scrollIntoView()),!0;if(c&&so(s,"start",!0)&&so(r,"end")){let f=r,g=[];for(;g.push(f),!f.isTextblock;)f=f.lastChild;let m=s,b=1;for(;!m.isTextblock;m=m.firstChild)b++;if(f.canReplace(f.childCount,f.childCount,m.content)){if(t){let y=he.empty;for(let C=g.length-1;C>=0;C--)y=he.from(g[C].copy(y));let w=i.tr.step(new Zt(e.pos-g.length,e.pos+s.nodeSize,e.pos+b,e.pos+s.nodeSize-b,new Le(y,g.length,0),0,!0));t(w.scrollIntoView())}return!0}}return!1}function wy(i){return function(e,t){let n=e.selection,r=i<0?n.$from:n.$to,s=r.depth;for(;r.node(s).isInline;){if(!s)return!1;s--}return r.node(s).isTextblock?(t&&t(e.tr.setSelection(Ve.create(e.doc,i<0?r.start(s):r.end(s)))),!0):!1}}const CM=wy(-1),AM=wy(1);function MM(i,e=null){return function(t,n){let{$from:r,$to:s}=t.selection,o=r.blockRange(s),a=o&&qu(o,i,e);return a?(n&&n(t.tr.wrap(o,a).scrollIntoView()),!0):!1}}function ky(i,e=null){return function(t,n){let r=!1;for(let s=0;s<t.selection.ranges.length&&!r;s++){let{$from:{pos:o},$to:{pos:a}}=t.selection.ranges[s];t.doc.nodesBetween(o,a,(l,c)=>{if(r)return!1;if(!(!l.isTextblock||l.hasMarkup(i,e)))if(l.type==i)r=!0;else{let h=t.doc.resolve(c),u=h.index();r=h.parent.canReplaceWith(u,u+1,i)}})}if(!r)return!1;if(n){let s=t.tr;for(let o=0;o<t.selection.ranges.length;o++){let{$from:{pos:a},$to:{pos:l}}=t.selection.ranges[o];s.setBlockType(a,l,i,e)}n(s.scrollIntoView())}return!0}}function Pd(...i){return function(e,t,n){for(let r=0;r<i.length;r++)if(i[r](e,t,n))return!0;return!1}}Pd(Td,uy,fy),Pd(Td,gy,my),Pd(xy,by,yy,wM),typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):typeof os<"u"&&os.platform&&os.platform()=="darwin";function TM(i,e=null){return function(t,n){let{$from:r,$to:s}=t.selection,o=r.blockRange(s);if(!o)return!1;let a=n?t.tr:null;return EM(a,o,i,e)?(n&&n(a.scrollIntoView()),!0):!1}}function EM(i,e,t,n=null){let r=!1,s=e,o=e.$from.doc;if(e.depth>=2&&e.$from.node(e.depth-1).type.compatibleContent(t)&&e.startIndex==0){if(e.$from.index(e.depth-1)==0)return!1;let l=o.resolve(e.start-2);s=new Vl(l,l,e.depth),e.endIndex<e.parent.childCount&&(e=new Vl(e.$from,o.resolve(e.$to.end(e.depth)),e.depth)),r=!0}let a=qu(s,t,n,e);return a?(i&&OM(i,e,a,r,t),!0):!1}function OM(i,e,t,n,r){let s=he.empty;for(let h=t.length-1;h>=0;h--)s=he.from(t[h].type.create(t[h].attrs,s));i.step(new Zt(e.start-(n?2:0),e.end,e.start,e.end,new Le(s,0,0),t.length,!0));let o=0;for(let h=0;h<t.length;h++)t[h].type==r&&(o=h+1);let a=t.length-o,l=e.start+t.length-(n?2:0),c=e.parent;for(let h=e.startIndex,u=e.endIndex,d=!0;h<u;h++,d=!1)!d&&Ji(i.doc,l,a)&&(i.split(l,a),l+=2*a),l+=c.child(h).nodeSize;return i}function IM(i){return function(e,t){let{$from:n,$to:r}=e.selection,s=n.blockRange(r,o=>o.childCount>0&&o.firstChild.type==i);return s?t?n.node(s.depth-1).type==i?PM(e,t,i,s):LM(e,t,s):!0:!1}}function PM(i,e,t,n){let r=i.tr,s=n.end,o=n.$to.end(n.depth);s<o&&(r.step(new Zt(s-1,o,s,o,new Le(he.from(t.create(null,n.parent.copy())),1,0),1,!0)),n=new Vl(r.doc.resolve(n.$from.pos),r.doc.resolve(o),n.depth));const a=qs(n);if(a==null)return!1;r.lift(n,a);let l=r.doc.resolve(r.mapping.map(s,-1)-1);return vr(r.doc,l.pos)&&l.nodeBefore.type==l.nodeAfter.type&&r.join(l.pos),e(r.scrollIntoView()),!0}function LM(i,e,t){let n=i.tr,r=t.parent;for(let f=t.end,g=t.endIndex-1,m=t.startIndex;g>m;g--)f-=r.child(g).nodeSize,n.delete(f-1,f+1);let s=n.doc.resolve(t.start),o=s.nodeAfter;if(n.mapping.map(t.end)!=t.start+s.nodeAfter.nodeSize)return!1;let a=t.startIndex==0,l=t.endIndex==r.childCount,c=s.node(-1),h=s.index(-1);if(!c.canReplace(h+(a?0:1),h+1,o.content.append(l?he.empty:he.from(r))))return!1;let u=s.pos,d=u+o.nodeSize;return n.step(new Zt(u-(a?1:0),d+(l?1:0),u+1,d-1,new Le((a?he.empty:he.from(r.copy(he.empty))).append(l?he.empty:he.from(r.copy(he.empty))),a?0:1,l?0:1),a?0:1)),e(n.scrollIntoView()),!0}function RM(i){return function(e,t){let{$from:n,$to:r}=e.selection,s=n.blockRange(r,c=>c.childCount>0&&c.firstChild.type==i);if(!s)return!1;let o=s.startIndex;if(o==0)return!1;let a=s.parent,l=a.child(o-1);if(l.type!=i)return!1;if(t){let c=l.lastChild&&l.lastChild.type==a.type,h=he.from(c?i.create():null),u=new Le(he.from(i.create(null,he.from(a.type.create(null,h)))),c?3:1,0),d=s.start,f=s.end;t(e.tr.step(new Zt(d-(c?3:1),f,d,f,u,1,!0)).scrollIntoView())}return!0}}function hc(i){const{state:e,transaction:t}=i;let{selection:n}=t,{doc:r}=t,{storedMarks:s}=t;return{...e,apply:e.apply.bind(e),applyTransaction:e.applyTransaction.bind(e),plugins:e.plugins,schema:e.schema,reconfigure:e.reconfigure.bind(e),toJSON:e.toJSON.bind(e),get storedMarks(){return s},get selection(){return n},get doc(){return r},get tr(){return n=t.selection,r=t.doc,s=t.storedMarks,t}}}class uc{constructor(e){this.editor=e.editor,this.rawCommands=this.editor.extensionManager.commands,this.customState=e.state}get hasCustomState(){return!!this.customState}get state(){return this.customState||this.editor.state}get commands(){const{rawCommands:e,editor:t,state:n}=this,{view:r}=t,{tr:s}=n,o=this.buildProps(s);return Object.fromEntries(Object.entries(e).map(([a,l])=>[a,(...h)=>{const u=l(...h)(o);return!s.getMeta("preventDispatch")&&!this.hasCustomState&&r.dispatch(s),u}]))}get chain(){return()=>this.createChain()}get can(){return()=>this.createCan()}createChain(e,t=!0){const{rawCommands:n,editor:r,state:s}=this,{view:o}=r,a=[],l=!!e,c=e||s.tr,h=()=>(!l&&t&&!c.getMeta("preventDispatch")&&!this.hasCustomState&&o.dispatch(c),a.every(d=>d===!0)),u={...Object.fromEntries(Object.entries(n).map(([d,f])=>[d,(...m)=>{const b=this.buildProps(c,t),y=f(...m)(b);return a.push(y),u}])),run:h};return u}createCan(e){const{rawCommands:t,state:n}=this,r=!1,s=e||n.tr,o=this.buildProps(s,r);return{...Object.fromEntries(Object.entries(t).map(([l,c])=>[l,(...h)=>c(...h)({...o,dispatch:void 0})])),chain:()=>this.createChain(s,r)}}buildProps(e,t=!0){const{rawCommands:n,editor:r,state:s}=this,{view:o}=r,a={tr:e,editor:r,view:o,state:hc({state:s,transaction:e}),dispatch:t?()=>{}:void 0,chain:()=>this.createChain(e,t),can:()=>this.createCan(e),get commands(){return Object.fromEntries(Object.entries(n).map(([l,c])=>[l,(...h)=>c(...h)(a)]))}};return a}}class DM{constructor(){this.callbacks={}}on(e,t){return this.callbacks[e]||(this.callbacks[e]=[]),this.callbacks[e].push(t),this}emit(e,...t){const n=this.callbacks[e];return n&&n.forEach(r=>r.apply(this,t)),this}off(e,t){const n=this.callbacks[e];return n&&(t?this.callbacks[e]=n.filter(r=>r!==t):delete this.callbacks[e]),this}once(e,t){const n=(...r)=>{this.off(e,n),t.apply(this,r)};return this.on(e,n)}removeAllListeners(){this.callbacks={}}}function Ne(i,e,t){return i.config[e]===void 0&&i.parent?Ne(i.parent,e,t):typeof i.config[e]=="function"?i.config[e].bind({...t,parent:i.parent?Ne(i.parent,e,t):null}):i.config[e]}function dc(i){const e=i.filter(r=>r.type==="extension"),t=i.filter(r=>r.type==="node"),n=i.filter(r=>r.type==="mark");return{baseExtensions:e,nodeExtensions:t,markExtensions:n}}function Sy(i){const e=[],{nodeExtensions:t,markExtensions:n}=dc(i),r=[...t,...n],s={default:null,rendered:!0,renderHTML:null,parseHTML:null,keepOnSplit:!0,isRequired:!1};return i.forEach(o=>{const a={name:o.name,options:o.options,storage:o.storage,extensions:r},l=Ne(o,"addGlobalAttributes",a);if(!l)return;l().forEach(h=>{h.types.forEach(u=>{Object.entries(h.attributes).forEach(([d,f])=>{e.push({type:u,name:d,attribute:{...s,...f}})})})})}),r.forEach(o=>{const a={name:o.name,options:o.options,storage:o.storage},l=Ne(o,"addAttributes",a);if(!l)return;const c=l();Object.entries(c).forEach(([h,u])=>{const d={...s,...u};typeof(d==null?void 0:d.default)=="function"&&(d.default=d.default()),d!=null&&d.isRequired&&(d==null?void 0:d.default)===void 0&&delete d.default,e.push({type:o.name,name:h,attribute:d})})}),e}function Qt(i,e){if(typeof i=="string"){if(!e.nodes[i])throw Error(`There is no node type named '${i}'. Maybe you forgot to add the extension?`);return e.nodes[i]}return i}function en(...i){return i.filter(e=>!!e).reduce((e,t)=>{const n={...e};return Object.entries(t).forEach(([r,s])=>{if(!n[r]){n[r]=s;return}if(r==="class"){const a=s?String(s).split(" "):[],l=n[r]?n[r].split(" "):[],c=a.filter(h=>!l.includes(h));n[r]=[...l,...c].join(" ")}else if(r==="style"){const a=s?s.split(";").map(h=>h.trim()).filter(Boolean):[],l=n[r]?n[r].split(";").map(h=>h.trim()).filter(Boolean):[],c=new Map;l.forEach(h=>{const[u,d]=h.split(":").map(f=>f.trim());c.set(u,d)}),a.forEach(h=>{const[u,d]=h.split(":").map(f=>f.trim());c.set(u,d)}),n[r]=Array.from(c.entries()).map(([h,u])=>`${h}: ${u}`).join("; ")}else n[r]=s}),n},{})}function Ld(i,e){return e.filter(t=>t.type===i.type.name).filter(t=>t.attribute.rendered).map(t=>t.attribute.renderHTML?t.attribute.renderHTML(i.attrs)||{}:{[t.name]:i.attrs[t.name]}).reduce((t,n)=>en(t,n),{})}function Cy(i){return typeof i=="function"}function st(i,e=void 0,...t){return Cy(i)?e?i.bind(e)(...t):i(...t):i}function NM(i={}){return Object.keys(i).length===0&&i.constructor===Object}function _M(i){return typeof i!="string"?i:i.match(/^[+-]?(?:\d*\.)?\d+$/)?Number(i):i==="true"?!0:i==="false"?!1:i}function Ay(i,e){return"style"in i?i:{...i,getAttrs:t=>{const n=i.getAttrs?i.getAttrs(t):i.attrs;if(n===!1)return!1;const r=e.reduce((s,o)=>{const a=o.attribute.parseHTML?o.attribute.parseHTML(t):_M(t.getAttribute(o.name));return a==null?s:{...s,[o.name]:a}},{});return{...n,...r}}}}function My(i){return Object.fromEntries(Object.entries(i).filter(([e,t])=>e==="attrs"&&NM(t)?!1:t!=null))}function zM(i,e){var t;const n=Sy(i),{nodeExtensions:r,markExtensions:s}=dc(i),o=(t=r.find(c=>Ne(c,"topNode")))===null||t===void 0?void 0:t.name,a=Object.fromEntries(r.map(c=>{const h=n.filter(y=>y.type===c.name),u={name:c.name,options:c.options,storage:c.storage,editor:e},d=i.reduce((y,w)=>{const C=Ne(w,"extendNodeSchema",u);return{...y,...C?C(c):{}}},{}),f=My({...d,content:st(Ne(c,"content",u)),marks:st(Ne(c,"marks",u)),group:st(Ne(c,"group",u)),inline:st(Ne(c,"inline",u)),atom:st(Ne(c,"atom",u)),selectable:st(Ne(c,"selectable",u)),draggable:st(Ne(c,"draggable",u)),code:st(Ne(c,"code",u)),whitespace:st(Ne(c,"whitespace",u)),linebreakReplacement:st(Ne(c,"linebreakReplacement",u)),defining:st(Ne(c,"defining",u)),isolating:st(Ne(c,"isolating",u)),attrs:Object.fromEntries(h.map(y=>{var w;return[y.name,{default:(w=y==null?void 0:y.attribute)===null||w===void 0?void 0:w.default}]}))}),g=st(Ne(c,"parseHTML",u));g&&(f.parseDOM=g.map(y=>Ay(y,h)));const m=Ne(c,"renderHTML",u);m&&(f.toDOM=y=>m({node:y,HTMLAttributes:Ld(y,h)}));const b=Ne(c,"renderText",u);return b&&(f.toText=b),[c.name,f]})),l=Object.fromEntries(s.map(c=>{const h=n.filter(b=>b.type===c.name),u={name:c.name,options:c.options,storage:c.storage,editor:e},d=i.reduce((b,y)=>{const w=Ne(y,"extendMarkSchema",u);return{...b,...w?w(c):{}}},{}),f=My({...d,inclusive:st(Ne(c,"inclusive",u)),excludes:st(Ne(c,"excludes",u)),group:st(Ne(c,"group",u)),spanning:st(Ne(c,"spanning",u)),code:st(Ne(c,"code",u)),attrs:Object.fromEntries(h.map(b=>{var y;return[b.name,{default:(y=b==null?void 0:b.attribute)===null||y===void 0?void 0:y.default}]}))}),g=st(Ne(c,"parseHTML",u));g&&(f.parseDOM=g.map(b=>Ay(b,h)));const m=Ne(c,"renderHTML",u);return m&&(f.toDOM=b=>m({mark:b,HTMLAttributes:Ld(b,h)})),[c.name,f]}));return new mx({topNode:o,nodes:a,marks:l})}function Rd(i,e){return e.nodes[i]||e.marks[i]||null}function Ty(i,e){return Array.isArray(e)?e.some(t=>(typeof t=="string"?t:t.name)===i.name):e}function Dd(i,e){const t=ss.fromSchema(e).serializeFragment(i),r=document.implementation.createHTMLDocument().createElement("div");return r.appendChild(t),r.innerHTML}const FM=(i,e=500)=>{let t="";const n=i.parentOffset;return i.parent.nodesBetween(Math.max(0,n-e),n,(r,s,o,a)=>{var l,c;const h=((c=(l=r.type.spec).toText)===null||c===void 0?void 0:c.call(l,{node:r,pos:s,parent:o,index:a}))||r.textContent||"%leaf%";t+=r.isAtom&&!r.isText?h:h.slice(0,Math.max(0,n-s))}),t};function Nd(i){return Object.prototype.toString.call(i)==="[object RegExp]"}class fc{constructor(e){this.find=e.find,this.handler=e.handler}}const BM=(i,e)=>{if(Nd(e))return e.exec(i);const t=e(i);if(!t)return null;const n=[t.text];return n.index=t.index,n.input=i,n.data=t.data,t.replaceWith&&(t.text.includes(t.replaceWith)||console.warn('[tiptap warn]: "inputRuleMatch.replaceWith" must be part of "inputRuleMatch.text".'),n.push(t.replaceWith)),n};function pc(i){var e;const{editor:t,from:n,to:r,text:s,rules:o,plugin:a}=i,{view:l}=t;if(l.composing)return!1;const c=l.state.doc.resolve(n);if(c.parent.type.spec.code||!((e=c.nodeBefore||c.nodeAfter)===null||e===void 0)&&e.marks.find(d=>d.type.spec.code))return!1;let h=!1;const u=FM(c)+s;return o.forEach(d=>{if(h)return;const f=BM(u,d.find);if(!f)return;const g=l.state.tr,m=hc({state:l.state,transaction:g}),b={from:n-(f[0].length-s.length),to:r},{commands:y,chain:w,can:C}=new uc({editor:t,state:m});d.handler({state:m,range:b,match:f,commands:y,chain:w,can:C})===null||!g.steps.length||(g.setMeta(a,{transform:g,from:n,to:r,text:s}),l.dispatch(g),h=!0)}),h}function HM(i){const{editor:e,rules:t}=i,n=new an({state:{init(){return null},apply(r,s,o){const a=r.getMeta(n);if(a)return a;const l=r.getMeta("applyInputRules");return!!l&&setTimeout(()=>{let{text:h}=l;typeof h=="string"?h=h:h=Dd(he.from(h),o.schema);const{from:u}=l,d=u+h.length;pc({editor:e,from:u,to:d,text:h,rules:t,plugin:n})}),r.selectionSet||r.docChanged?null:s}},props:{handleTextInput(r,s,o,a){return pc({editor:e,from:s,to:o,text:a,rules:t,plugin:n})},handleDOMEvents:{compositionend:r=>(setTimeout(()=>{const{$cursor:s}=r.state.selection;s&&pc({editor:e,from:s.pos,to:s.pos,text:"",rules:t,plugin:n})}),!1)},handleKeyDown(r,s){if(s.key!=="Enter")return!1;const{$cursor:o}=r.state.selection;return o?pc({editor:e,from:o.pos,to:o.pos,text:`
    `,rules:t,plugin:n}):!1}},isInputRules:!0});return n}function XM(i){return Object.prototype.toString.call(i).slice(8,-1)}function gc(i){return XM(i)!=="Object"?!1:i.constructor===Object&&Object.getPrototypeOf(i)===Object.prototype}function mc(i,e){const t={...i};return gc(i)&&gc(e)&&Object.keys(e).forEach(n=>{gc(e[n])&&gc(i[n])?t[n]=mc(i[n],e[n]):t[n]=e[n]}),t}class Di{constructor(e={}){this.type="mark",this.name="mark",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=st(Ne(this,"addOptions",{name:this.name}))),this.storage=st(Ne(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new Di(e)}configure(e={}){const t=this.extend({...this.config,addOptions:()=>mc(this.options,e)});return t.name=this.name,t.parent=this.parent,t}extend(e={}){const t=new Di(e);return t.parent=this,this.child=t,t.name=e.name?e.name:t.parent.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${t.name}".`),t.options=st(Ne(t,"addOptions",{name:t.name})),t.storage=st(Ne(t,"addStorage",{name:t.name,options:t.options})),t}static handleExit({editor:e,mark:t}){const{tr:n}=e.state,r=e.state.selection.$from;if(r.pos===r.end()){const o=r.marks();if(!!!o.find(c=>(c==null?void 0:c.type.name)===t.name))return!1;const l=o.find(c=>(c==null?void 0:c.type.name)===t.name);return l&&n.removeStoredMark(l),n.insertText(" ",r.pos),e.view.dispatch(n),!0}return!1}}function WM(i){return typeof i=="number"}class YM{constructor(e){this.find=e.find,this.handler=e.handler}}const jM=(i,e,t)=>{if(Nd(e))return[...i.matchAll(e)];const n=e(i,t);return n?n.map(r=>{const s=[r.text];return s.index=r.index,s.input=i,s.data=r.data,r.replaceWith&&(r.text.includes(r.replaceWith)||console.warn('[tiptap warn]: "pasteRuleMatch.replaceWith" must be part of "pasteRuleMatch.text".'),s.push(r.replaceWith)),s}):[]};function VM(i){const{editor:e,state:t,from:n,to:r,rule:s,pasteEvent:o,dropEvent:a}=i,{commands:l,chain:c,can:h}=new uc({editor:e,state:t}),u=[];return t.doc.nodesBetween(n,r,(f,g)=>{if(!f.isTextblock||f.type.spec.code)return;const m=Math.max(n,g),b=Math.min(r,g+f.content.size),y=f.textBetween(m-g,b-g,void 0,"");jM(y,s.find,o).forEach(C=>{if(C.index===void 0)return;const M=m+C.index+1,S=M+C[0].length,O={from:t.tr.mapping.map(M),to:t.tr.mapping.map(S)},T=s.handler({state:t,range:O,match:C,commands:l,chain:c,can:h,pasteEvent:o,dropEvent:a});u.push(T)})}),u.every(f=>f!==null)}let xc=null;const $M=i=>{var e;const t=new ClipboardEvent("paste",{clipboardData:new DataTransfer});return(e=t.clipboardData)===null||e===void 0||e.setData("text/html",i),t};function GM(i){const{editor:e,rules:t}=i;let n=null,r=!1,s=!1,o=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,a;try{a=typeof DragEvent<"u"?new DragEvent("drop"):null}catch{a=null}const l=({state:h,from:u,to:d,rule:f,pasteEvt:g})=>{const m=h.tr,b=hc({state:h,transaction:m});if(!(!VM({editor:e,state:b,from:Math.max(u-1,0),to:d.b-1,rule:f,pasteEvent:g,dropEvent:a})||!m.steps.length)){try{a=typeof DragEvent<"u"?new DragEvent("drop"):null}catch{a=null}return o=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,m}};return t.map(h=>new an({view(u){const d=g=>{var m;n=!((m=u.dom.parentElement)===null||m===void 0)&&m.contains(g.target)?u.dom.parentElement:null,n&&(xc=e)},f=()=>{xc&&(xc=null)};return window.addEventListener("dragstart",d),window.addEventListener("dragend",f),{destroy(){window.removeEventListener("dragstart",d),window.removeEventListener("dragend",f)}}},props:{handleDOMEvents:{drop:(u,d)=>{if(s=n===u.dom.parentElement,a=d,!s){const f=xc;f&&setTimeout(()=>{const g=f.state.selection;g&&f.commands.deleteRange({from:g.from,to:g.to})},10)}return!1},paste:(u,d)=>{var f;const g=(f=d.clipboardData)===null||f===void 0?void 0:f.getData("text/html");return o=d,r=!!(g!=null&&g.includes("data-pm-slice")),!1}}},appendTransaction:(u,d,f)=>{const g=u[0],m=g.getMeta("uiEvent")==="paste"&&!r,b=g.getMeta("uiEvent")==="drop"&&!s,y=g.getMeta("applyPasteRules"),w=!!y;if(!m&&!b&&!w)return;if(w){let{text:S}=y;typeof S=="string"?S=S:S=Dd(he.from(S),f.schema);const{from:O}=y,T=O+S.length,I=$M(S);return l({rule:h,state:f,from:O,to:{b:T},pasteEvt:I})}const C=d.doc.content.findDiffStart(f.doc.content),M=d.doc.content.findDiffEnd(f.doc.content);if(!(!WM(C)||!M||C===M.b))return l({rule:h,state:f,from:C,to:M,pasteEvt:o})}}))}function qM(i){const e=i.filter((t,n)=>i.indexOf(t)!==n);return Array.from(new Set(e))}class oo{constructor(e,t){this.splittableMarks=[],this.editor=t,this.extensions=oo.resolve(e),this.schema=zM(this.extensions,t),this.setupExtensions()}static resolve(e){const t=oo.sort(oo.flatten(e)),n=qM(t.map(r=>r.name));return n.length&&console.warn(`[tiptap warn]: Duplicate extension names found: [${n.map(r=>`'${r}'`).join(", ")}]. This can lead to issues.`),t}static flatten(e){return e.map(t=>{const n={name:t.name,options:t.options,storage:t.storage},r=Ne(t,"addExtensions",n);return r?[t,...this.flatten(r())]:t}).flat(10)}static sort(e){return e.sort((n,r)=>{const s=Ne(n,"priority")||100,o=Ne(r,"priority")||100;return s>o?-1:s<o?1:0})}get commands(){return this.extensions.reduce((e,t)=>{const n={name:t.name,options:t.options,storage:t.storage,editor:this.editor,type:Rd(t.name,this.schema)},r=Ne(t,"addCommands",n);return r?{...e,...r()}:e},{})}get plugins(){const{editor:e}=this,t=oo.sort([...this.extensions].reverse()),n=[],r=[],s=t.map(o=>{const a={name:o.name,options:o.options,storage:o.storage,editor:e,type:Rd(o.name,this.schema)},l=[],c=Ne(o,"addKeyboardShortcuts",a);let h={};if(o.type==="mark"&&Ne(o,"exitable",a)&&(h.ArrowRight=()=>Di.handleExit({editor:e,mark:o})),c){const m=Object.fromEntries(Object.entries(c()).map(([b,y])=>[b,()=>y({editor:e})]));h={...h,...m}}const u=fM(h);l.push(u);const d=Ne(o,"addInputRules",a);Ty(o,e.options.enableInputRules)&&d&&n.push(...d());const f=Ne(o,"addPasteRules",a);Ty(o,e.options.enablePasteRules)&&f&&r.push(...f());const g=Ne(o,"addProseMirrorPlugins",a);if(g){const m=g();l.push(...m)}return l}).flat();return[HM({editor:e,rules:n}),...GM({editor:e,rules:r}),...s]}get attributes(){return Sy(this.extensions)}get nodeViews(){const{editor:e}=this,{nodeExtensions:t}=dc(this.extensions);return Object.fromEntries(t.filter(n=>!!Ne(n,"addNodeView")).map(n=>{const r=this.attributes.filter(l=>l.type===n.name),s={name:n.name,options:n.options,storage:n.storage,editor:e,type:Qt(n.name,this.schema)},o=Ne(n,"addNodeView",s);if(!o)return[];const a=(l,c,h,u,d)=>{const f=Ld(l,r);return o()({node:l,view:c,getPos:h,decorations:u,innerDecorations:d,editor:e,extension:n,HTMLAttributes:f})};return[n.name,a]}))}setupExtensions(){this.extensions.forEach(e=>{var t;this.editor.extensionStorage[e.name]=e.storage;const n={name:e.name,options:e.options,storage:e.storage,editor:this.editor,type:Rd(e.name,this.schema)};e.type==="mark"&&(!((t=st(Ne(e,"keepOnSplit",n)))!==null&&t!==void 0)||t)&&this.splittableMarks.push(e.name);const r=Ne(e,"onBeforeCreate",n),s=Ne(e,"onCreate",n),o=Ne(e,"onUpdate",n),a=Ne(e,"onSelectionUpdate",n),l=Ne(e,"onTransaction",n),c=Ne(e,"onFocus",n),h=Ne(e,"onBlur",n),u=Ne(e,"onDestroy",n);r&&this.editor.on("beforeCreate",r),s&&this.editor.on("create",s),o&&this.editor.on("update",o),a&&this.editor.on("selectionUpdate",a),l&&this.editor.on("transaction",l),c&&this.editor.on("focus",c),h&&this.editor.on("blur",h),u&&this.editor.on("destroy",u)})}}class kn{constructor(e={}){this.type="extension",this.name="extension",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=st(Ne(this,"addOptions",{name:this.name}))),this.storage=st(Ne(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new kn(e)}configure(e={}){const t=this.extend({...this.config,addOptions:()=>mc(this.options,e)});return t.name=this.name,t.parent=this.parent,t}extend(e={}){const t=new kn({...this.config,...e});return t.parent=this,this.child=t,t.name=e.name?e.name:t.parent.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${t.name}".`),t.options=st(Ne(t,"addOptions",{name:t.name})),t.storage=st(Ne(t,"addStorage",{name:t.name,options:t.options})),t}}function Ey(i,e,t){const{from:n,to:r}=e,{blockSeparator:s=`
    
    `,textSerializers:o={}}=t||{};let a="";return i.nodesBetween(n,r,(l,c,h,u)=>{var d;l.isBlock&&c>n&&(a+=s);const f=o==null?void 0:o[l.type.name];if(f)return h&&(a+=f({node:l,pos:c,parent:h,index:u,range:e})),!1;l.isText&&(a+=(d=l==null?void 0:l.text)===null||d===void 0?void 0:d.slice(Math.max(n,c)-c,r-c))}),a}function Oy(i){return Object.fromEntries(Object.entries(i.nodes).filter(([,e])=>e.spec.toText).map(([e,t])=>[e,t.spec.toText]))}const UM=kn.create({name:"clipboardTextSerializer",addOptions(){return{blockSeparator:void 0}},addProseMirrorPlugins(){return[new an({key:new Un("clipboardTextSerializer"),props:{clipboardTextSerializer:()=>{const{editor:i}=this,{state:e,schema:t}=i,{doc:n,selection:r}=e,{ranges:s}=r,o=Math.min(...s.map(h=>h.$from.pos)),a=Math.max(...s.map(h=>h.$to.pos)),l=Oy(t);return Ey(n,{from:o,to:a},{...this.options.blockSeparator!==void 0?{blockSeparator:this.options.blockSeparator}:{},textSerializers:l})}}})]}}),KM=()=>({editor:i,view:e})=>(requestAnimationFrame(()=>{var t;i.isDestroyed||(e.dom.blur(),(t=window==null?void 0:window.getSelection())===null||t===void 0||t.removeAllRanges())}),!0),JM=(i=!1)=>({commands:e})=>e.setContent("",i),ZM=()=>({state:i,tr:e,dispatch:t})=>{const{selection:n}=e,{ranges:r}=n;return t&&r.forEach(({$from:s,$to:o})=>{i.doc.nodesBetween(s.pos,o.pos,(a,l)=>{if(a.type.isText)return;const{doc:c,mapping:h}=e,u=c.resolve(h.map(l)),d=c.resolve(h.map(l+a.nodeSize)),f=u.blockRange(d);if(!f)return;const g=qs(f);if(a.type.isTextblock){const{defaultType:m}=u.parent.contentMatchAt(u.index());e.setNodeMarkup(f.start,m)}(g||g===0)&&e.lift(f,g)})}),!0},QM=i=>e=>i(e),eT=()=>({state:i,dispatch:e})=>by(i,e),tT=(i,e)=>({editor:t,tr:n})=>{const{state:r}=t,s=r.doc.slice(i.from,i.to);n.deleteRange(i.from,i.to);const o=n.mapping.map(e);return n.insert(o,s.content),n.setSelection(new Ve(n.doc.resolve(o-1))),!0},nT=()=>({tr:i,dispatch:e})=>{const{selection:t}=i,n=t.$anchor.node();if(n.content.size>0)return!1;const r=i.selection.$anchor;for(let s=r.depth;s>0;s-=1)if(r.node(s).type===n.type){if(e){const a=r.before(s),l=r.after(s);i.delete(a,l).scrollIntoView()}return!0}return!1},iT=i=>({tr:e,state:t,dispatch:n})=>{const r=Qt(i,t.schema),s=e.selection.$anchor;for(let o=s.depth;o>0;o-=1)if(s.node(o).type===r){if(n){const l=s.before(o),c=s.after(o);e.delete(l,c).scrollIntoView()}return!0}return!1},rT=i=>({tr:e,dispatch:t})=>{const{from:n,to:r}=i;return t&&e.delete(n,r),!0},sT=()=>({state:i,dispatch:e})=>Td(i,e),oT=()=>({commands:i})=>i.keyboardShortcut("Enter"),aT=()=>({state:i,dispatch:e})=>yM(i,e);function bc(i,e,t={strict:!0}){const n=Object.keys(e);return n.length?n.every(r=>t.strict?e[r]===i[r]:Nd(e[r])?e[r].test(i[r]):e[r]===i[r]):!0}function Iy(i,e,t={}){return i.find(n=>n.type===e&&bc(Object.fromEntries(Object.keys(t).map(r=>[r,n.attrs[r]])),t))}function Py(i,e,t={}){return!!Iy(i,e,t)}function _d(i,e,t){var n;if(!i||!e)return;let r=i.parent.childAfter(i.parentOffset);if((!r.node||!r.node.marks.some(h=>h.type===e))&&(r=i.parent.childBefore(i.parentOffset)),!r.node||!r.node.marks.some(h=>h.type===e)||(t=t||((n=r.node.marks[0])===null||n===void 0?void 0:n.attrs),!Iy([...r.node.marks],e,t)))return;let o=r.index,a=i.start()+r.offset,l=o+1,c=a+r.node.nodeSize;for(;o>0&&Py([...i.parent.child(o-1).marks],e,t);)o-=1,a-=i.parent.child(o).nodeSize;for(;l<i.parent.childCount&&Py([...i.parent.child(l).marks],e,t);)c+=i.parent.child(l).nodeSize,l+=1;return{from:a,to:c}}function Ir(i,e){if(typeof i=="string"){if(!e.marks[i])throw Error(`There is no mark type named '${i}'. Maybe you forgot to add the extension?`);return e.marks[i]}return i}const lT=(i,e={})=>({tr:t,state:n,dispatch:r})=>{const s=Ir(i,n.schema),{doc:o,selection:a}=t,{$from:l,from:c,to:h}=a;if(r){const u=_d(l,s,e);if(u&&u.from<=c&&u.to>=h){const d=Ve.create(o,u.from,u.to);t.setSelection(d)}}return!0},cT=i=>e=>{const t=typeof i=="function"?i(e):i;for(let n=0;n<t.length;n+=1)if(t[n](e))return!0;return!1};function Ly(i){return i instanceof Ve}function ps(i=0,e=0,t=0){return Math.min(Math.max(i,e),t)}function Ry(i,e=null){if(!e)return null;const t=tt.atStart(i),n=tt.atEnd(i);if(e==="start"||e===!0)return t;if(e==="end")return n;const r=t.from,s=n.to;return e==="all"?Ve.create(i,ps(0,r,s),ps(i.content.size,r,s)):Ve.create(i,ps(e,r,s),ps(e,r,s))}function hT(){return navigator.platform==="Android"||/android/i.test(navigator.userAgent)}function zd(){return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document}const uT=(i=null,e={})=>({editor:t,view:n,tr:r,dispatch:s})=>{e={scrollIntoView:!0,...e};const o=()=>{(zd()||hT())&&n.dom.focus(),requestAnimationFrame(()=>{t.isDestroyed||(n.focus(),e!=null&&e.scrollIntoView&&t.commands.scrollIntoView())})};if(n.hasFocus()&&i===null||i===!1)return!0;if(s&&i===null&&!Ly(t.state.selection))return o(),!0;const a=Ry(r.doc,i)||t.state.selection,l=t.state.selection.eq(a);return s&&(l||r.setSelection(a),l&&r.storedMarks&&r.setStoredMarks(r.storedMarks),o()),!0},dT=(i,e)=>t=>i.every((n,r)=>e(n,{...t,index:r})),fT=(i,e)=>({tr:t,commands:n})=>n.insertContentAt({from:t.selection.from,to:t.selection.to},i,e),Dy=i=>{const e=i.childNodes;for(let t=e.length-1;t>=0;t-=1){const n=e[t];n.nodeType===3&&n.nodeValue&&/^(\n\s\s|\n)$/.test(n.nodeValue)?i.removeChild(n):n.nodeType===1&&Dy(n)}return i};function yc(i){const e=`<body>${i}</body>`,t=new window.DOMParser().parseFromString(e,"text/html").body;return Dy(t)}function vc(i,e,t){if(i instanceof xr||i instanceof he)return i;t={slice:!0,parseOptions:{},...t};const n=typeof i=="object"&&i!==null,r=typeof i=="string";if(n)try{if(Array.isArray(i)&&i.length>0)return he.fromArray(i.map(a=>e.nodeFromJSON(a)));const o=e.nodeFromJSON(i);return t.errorOnInvalidContent&&o.check(),o}catch(s){if(t.errorOnInvalidContent)throw new Error("[tiptap error]: Invalid JSON content",{cause:s});return console.warn("[tiptap warn]: Invalid content.","Passed value:",i,"Error:",s),vc("",e,t)}if(r){if(t.errorOnInvalidContent){let o=!1,a="";const l=new mx({topNode:e.spec.topNode,marks:e.spec.marks,nodes:e.spec.nodes.append({__tiptap__private__unknown__catch__all__node:{content:"inline*",group:"block",parseDOM:[{tag:"*",getAttrs:c=>(o=!0,a=typeof c=="string"?c:c.outerHTML,null)}]}})});if(t.slice?ra.fromSchema(l).parseSlice(yc(i),t.parseOptions):ra.fromSchema(l).parse(yc(i),t.parseOptions),t.errorOnInvalidContent&&o)throw new Error("[tiptap error]: Invalid HTML content",{cause:new Error(`Invalid element found: ${a}`)})}const s=ra.fromSchema(e);return t.slice?s.parseSlice(yc(i),t.parseOptions).content:s.parse(yc(i),t.parseOptions)}return vc("",e,t)}function pT(i,e,t){const n=i.steps.length-1;if(n<e)return;const r=i.steps[n];if(!(r instanceof Jt||r instanceof Zt))return;const s=i.mapping.maps[n];let o=0;s.forEach((a,l,c,h)=>{o===0&&(o=h)}),i.setSelection(tt.near(i.doc.resolve(o),t))}const gT=i=>!("type"in i),mT=(i,e,t)=>({tr:n,dispatch:r,editor:s})=>{var o;if(r){t={parseOptions:s.options.parseOptions,updateSelection:!0,applyInputRules:!1,applyPasteRules:!1,...t};let a;try{a=vc(e,s.schema,{parseOptions:{preserveWhitespace:"full",...t.parseOptions},errorOnInvalidContent:(o=t.errorOnInvalidContent)!==null&&o!==void 0?o:s.options.enableContentCheck})}catch(g){return s.emit("contentError",{editor:s,error:g,disableCollaboration:()=>{s.storage.collaboration&&(s.storage.collaboration.isDisabled=!0)}}),!1}let{from:l,to:c}=typeof i=="number"?{from:i,to:i}:{from:i.from,to:i.to},h=!0,u=!0;if((gT(a)?a:[a]).forEach(g=>{g.check(),h=h?g.isText&&g.marks.length===0:!1,u=u?g.isBlock:!1}),l===c&&u){const{parent:g}=n.doc.resolve(l);g.isTextblock&&!g.type.spec.code&&!g.childCount&&(l-=1,c+=1)}let f;if(h){if(Array.isArray(e))f=e.map(g=>g.text||"").join("");else if(e instanceof he){let g="";e.forEach(m=>{m.text&&(g+=m.text)}),f=g}else typeof e=="object"&&e&&e.text?f=e.text:f=e;n.insertText(f,l,c)}else f=a,n.replaceWith(l,c,f);t.updateSelection&&pT(n,n.steps.length-1,-1),t.applyInputRules&&n.setMeta("applyInputRules",{from:l,text:f}),t.applyPasteRules&&n.setMeta("applyPasteRules",{from:l,text:f})}return!0},xT=()=>({state:i,dispatch:e})=>mM(i,e),bT=()=>({state:i,dispatch:e})=>xM(i,e),yT=()=>({state:i,dispatch:e})=>uy(i,e),vT=()=>({state:i,dispatch:e})=>gy(i,e),wT=()=>({state:i,dispatch:e,tr:t})=>{try{const n=Zl(i.doc,i.selection.$from.pos,-1);return n==null?!1:(t.join(n,2),e&&e(t),!0)}catch{return!1}},kT=()=>({state:i,dispatch:e,tr:t})=>{try{const n=Zl(i.doc,i.selection.$from.pos,1);return n==null?!1:(t.join(n,2),e&&e(t),!0)}catch{return!1}},ST=()=>({state:i,dispatch:e})=>pM(i,e),CT=()=>({state:i,dispatch:e})=>gM(i,e);function Ny(){return typeof navigator<"u"?/Mac/.test(navigator.platform):!1}function AT(i){const e=i.split(/-(?!$)/);let t=e[e.length-1];t==="Space"&&(t=" ");let n,r,s,o;for(let a=0;a<e.length-1;a+=1){const l=e[a];if(/^(cmd|meta|m)$/i.test(l))o=!0;else if(/^a(lt)?$/i.test(l))n=!0;else if(/^(c|ctrl|control)$/i.test(l))r=!0;else if(/^s(hift)?$/i.test(l))s=!0;else if(/^mod$/i.test(l))zd()||Ny()?o=!0:r=!0;else throw new Error(`Unrecognized modifier name: ${l}`)}return n&&(t=`Alt-${t}`),r&&(t=`Ctrl-${t}`),o&&(t=`Meta-${t}`),s&&(t=`Shift-${t}`),t}const MT=i=>({editor:e,view:t,tr:n,dispatch:r})=>{const s=AT(i).split(/-(?!$)/),o=s.find(c=>!["Alt","Ctrl","Meta","Shift"].includes(c)),a=new KeyboardEvent("keydown",{key:o==="Space"?" ":o,altKey:s.includes("Alt"),ctrlKey:s.includes("Ctrl"),metaKey:s.includes("Meta"),shiftKey:s.includes("Shift"),bubbles:!0,cancelable:!0}),l=e.captureTransaction(()=>{t.someProp("handleKeyDown",c=>c(t,a))});return l==null||l.steps.forEach(c=>{const h=c.map(n.mapping);h&&r&&n.maybeStep(h)}),!0};function va(i,e,t={}){const{from:n,to:r,empty:s}=i.selection,o=e?Qt(e,i.schema):null,a=[];i.doc.nodesBetween(n,r,(u,d)=>{if(u.isText)return;const f=Math.max(n,d),g=Math.min(r,d+u.nodeSize);a.push({node:u,from:f,to:g})});const l=r-n,c=a.filter(u=>o?o.name===u.node.type.name:!0).filter(u=>bc(u.node.attrs,t,{strict:!1}));return s?!!c.length:c.reduce((u,d)=>u+d.to-d.from,0)>=l}const TT=(i,e={})=>({state:t,dispatch:n})=>{const r=Qt(i,t.schema);return va(t,r,e)?bM(t,n):!1},ET=()=>({state:i,dispatch:e})=>yy(i,e),OT=i=>({state:e,dispatch:t})=>{const n=Qt(i,e.schema);return IM(n)(e,t)},IT=()=>({state:i,dispatch:e})=>xy(i,e);function wc(i,e){return e.nodes[i]?"node":e.marks[i]?"mark":null}function _y(i,e){const t=typeof e=="string"?[e]:e;return Object.keys(i).reduce((n,r)=>(t.includes(r)||(n[r]=i[r]),n),{})}const PT=(i,e)=>({tr:t,state:n,dispatch:r})=>{let s=null,o=null;const a=wc(typeof i=="string"?i:i.name,n.schema);return a?(a==="node"&&(s=Qt(i,n.schema)),a==="mark"&&(o=Ir(i,n.schema)),r&&t.selection.ranges.forEach(l=>{n.doc.nodesBetween(l.$from.pos,l.$to.pos,(c,h)=>{s&&s===c.type&&t.setNodeMarkup(h,void 0,_y(c.attrs,e)),o&&c.marks.length&&c.marks.forEach(u=>{o===u.type&&t.addMark(h,h+c.nodeSize,o.create(_y(u.attrs,e)))})})}),!0):!1},LT=()=>({tr:i,dispatch:e})=>(e&&i.scrollIntoView(),!0),RT=()=>({tr:i,dispatch:e})=>{if(e){const t=new qn(i.doc);i.setSelection(t)}return!0},DT=()=>({state:i,dispatch:e})=>fy(i,e),NT=()=>({state:i,dispatch:e})=>my(i,e),_T=()=>({state:i,dispatch:e})=>kM(i,e),zT=()=>({state:i,dispatch:e})=>AM(i,e),FT=()=>({state:i,dispatch:e})=>CM(i,e);function Fd(i,e,t={},n={}){return vc(i,e,{slice:!1,parseOptions:t,errorOnInvalidContent:n.errorOnInvalidContent})}const BT=(i,e=!1,t={},n={})=>({editor:r,tr:s,dispatch:o,commands:a})=>{var l,c;const{doc:h}=s;if(t.preserveWhitespace!=="full"){const u=Fd(i,r.schema,t,{errorOnInvalidContent:(l=n.errorOnInvalidContent)!==null&&l!==void 0?l:r.options.enableContentCheck});return o&&s.replaceWith(0,h.content.size,u).setMeta("preventUpdate",!e),!0}return o&&s.setMeta("preventUpdate",!e),a.insertContentAt({from:0,to:h.content.size},i,{parseOptions:t,errorOnInvalidContent:(c=n.errorOnInvalidContent)!==null&&c!==void 0?c:r.options.enableContentCheck})};function zy(i,e){const t=Ir(e,i.schema),{from:n,to:r,empty:s}=i.selection,o=[];s?(i.storedMarks&&o.push(...i.storedMarks),o.push(...i.selection.$head.marks())):i.doc.nodesBetween(n,r,l=>{o.push(...l.marks)});const a=o.find(l=>l.type.name===t.name);return a?{...a.attrs}:{}}function HT(i,e){const t=new Xx(i);return e.forEach(n=>{n.steps.forEach(r=>{t.step(r)})}),t}function XT(i){for(let e=0;e<i.edgeCount;e+=1){const{type:t}=i.edge(e);if(t.isTextblock&&!t.hasRequiredAttrs())return t}return null}function WT(i,e,t){const n=[];return i.nodesBetween(e.from,e.to,(r,s)=>{t(r)&&n.push({node:r,pos:s})}),n}function YT(i,e){for(let t=i.depth;t>0;t-=1){const n=i.node(t);if(e(n))return{pos:t>0?i.before(t):0,start:i.start(t),depth:t,node:n}}}function Bd(i){return e=>YT(e.$from,i)}function jT(i,e){const t={from:0,to:i.content.size};return Ey(i,t,e)}function VT(i,e){const t=Qt(e,i.schema),{from:n,to:r}=i.selection,s=[];i.doc.nodesBetween(n,r,a=>{s.push(a)});const o=s.reverse().find(a=>a.type.name===t.name);return o?{...o.attrs}:{}}function Fy(i,e){const t=wc(typeof e=="string"?e:e.name,i.schema);return t==="node"?VT(i,e):t==="mark"?zy(i,e):{}}function $T(i,e=JSON.stringify){const t={};return i.filter(n=>{const r=e(n);return Object.prototype.hasOwnProperty.call(t,r)?!1:t[r]=!0})}function GT(i){const e=$T(i);return e.length===1?e:e.filter((t,n)=>!e.filter((s,o)=>o!==n).some(s=>t.oldRange.from>=s.oldRange.from&&t.oldRange.to<=s.oldRange.to&&t.newRange.from>=s.newRange.from&&t.newRange.to<=s.newRange.to))}function qT(i){const{mapping:e,steps:t}=i,n=[];return e.maps.forEach((r,s)=>{const o=[];if(r.ranges.length)r.forEach((a,l)=>{o.push({from:a,to:l})});else{const{from:a,to:l}=t[s];if(a===void 0||l===void 0)return;o.push({from:a,to:l})}o.forEach(({from:a,to:l})=>{const c=e.slice(s).map(a,-1),h=e.slice(s).map(l),u=e.invert().map(c,-1),d=e.invert().map(h);n.push({oldRange:{from:u,to:d},newRange:{from:c,to:h}})})}),GT(n)}function Hd(i,e,t){const n=[];return i===e?t.resolve(i).marks().forEach(r=>{const s=t.resolve(i),o=_d(s,r.type);o&&n.push({mark:r,...o})}):t.nodesBetween(i,e,(r,s)=>{!r||(r==null?void 0:r.nodeSize)===void 0||n.push(...r.marks.map(o=>({from:s,to:s+r.nodeSize,mark:o})))}),n}function kc(i,e,t){return Object.fromEntries(Object.entries(t).filter(([n])=>{const r=i.find(s=>s.type===e&&s.name===n);return r?r.attribute.keepOnSplit:!1}))}function Xd(i,e,t={}){const{empty:n,ranges:r}=i.selection,s=e?Ir(e,i.schema):null;if(n)return!!(i.storedMarks||i.selection.$from.marks()).filter(u=>s?s.name===u.type.name:!0).find(u=>bc(u.attrs,t,{strict:!1}));let o=0;const a=[];if(r.forEach(({$from:u,$to:d})=>{const f=u.pos,g=d.pos;i.doc.nodesBetween(f,g,(m,b)=>{if(!m.isText&&!m.marks.length)return;const y=Math.max(f,b),w=Math.min(g,b+m.nodeSize),C=w-y;o+=C,a.push(...m.marks.map(M=>({mark:M,from:y,to:w})))})}),o===0)return!1;const l=a.filter(u=>s?s.name===u.mark.type.name:!0).filter(u=>bc(u.mark.attrs,t,{strict:!1})).reduce((u,d)=>u+d.to-d.from,0),c=a.filter(u=>s?u.mark.type!==s&&u.mark.type.excludes(s):!0).reduce((u,d)=>u+d.to-d.from,0);return(l>0?l+c:l)>=o}function UT(i,e,t={}){if(!e)return va(i,null,t)||Xd(i,null,t);const n=wc(e,i.schema);return n==="node"?va(i,e,t):n==="mark"?Xd(i,e,t):!1}function By(i,e){const{nodeExtensions:t}=dc(e),n=t.find(o=>o.name===i);if(!n)return!1;const r={name:n.name,options:n.options,storage:n.storage},s=st(Ne(n,"group",r));return typeof s!="string"?!1:s.split(" ").includes("list")}function Wd(i,{checkChildren:e=!0,ignoreWhitespace:t=!1}={}){var n;if(t){if(i.type.name==="hardBreak")return!0;if(i.isText)return/^\s*$/m.test((n=i.text)!==null&&n!==void 0?n:"")}if(i.isText)return!i.text;if(i.isAtom||i.isLeaf)return!1;if(i.content.childCount===0)return!0;if(e){let r=!0;return i.content.forEach(s=>{r!==!1&&(Wd(s,{ignoreWhitespace:t,checkChildren:e})||(r=!1))}),r}return!1}function KT(i){return i instanceof Xe}function JT(i,e,t){var n;const{selection:r}=e;let s=null;if(Ly(r)&&(s=r.$cursor),s){const a=(n=i.storedMarks)!==null&&n!==void 0?n:s.marks();return!!t.isInSet(a)||!a.some(l=>l.type.excludes(t))}const{ranges:o}=r;return o.some(({$from:a,$to:l})=>{let c=a.depth===0?i.doc.inlineContent&&i.doc.type.allowsMarkType(t):!1;return i.doc.nodesBetween(a.pos,l.pos,(h,u,d)=>{if(c)return!1;if(h.isInline){const f=!d||d.type.allowsMarkType(t),g=!!t.isInSet(h.marks)||!h.marks.some(m=>m.type.excludes(t));c=f&&g}return!c}),c})}const ZT=(i,e={})=>({tr:t,state:n,dispatch:r})=>{const{selection:s}=t,{empty:o,ranges:a}=s,l=Ir(i,n.schema);if(r)if(o){const c=zy(n,l);t.addStoredMark(l.create({...c,...e}))}else a.forEach(c=>{const h=c.$from.pos,u=c.$to.pos;n.doc.nodesBetween(h,u,(d,f)=>{const g=Math.max(f,h),m=Math.min(f+d.nodeSize,u);d.marks.find(y=>y.type===l)?d.marks.forEach(y=>{l===y.type&&t.addMark(g,m,l.create({...y.attrs,...e}))}):t.addMark(g,m,l.create(e))})});return JT(n,t,l)},QT=(i,e)=>({tr:t})=>(t.setMeta(i,e),!0),eE=(i,e={})=>({state:t,dispatch:n,chain:r})=>{const s=Qt(i,t.schema);let o;return t.selection.$anchor.sameParent(t.selection.$head)&&(o=t.selection.$anchor.parent.attrs),s.isTextblock?r().command(({commands:a})=>ky(s,{...o,...e})(t)?!0:a.clearNodes()).command(({state:a})=>ky(s,{...o,...e})(a,n)).run():(console.warn('[tiptap warn]: Currently "setNode()" only supports text block nodes.'),!1)},tE=i=>({tr:e,dispatch:t})=>{if(t){const{doc:n}=e,r=ps(i,0,n.content.size),s=Xe.create(n,r);e.setSelection(s)}return!0},nE=i=>({tr:e,dispatch:t})=>{if(t){const{doc:n}=e,{from:r,to:s}=typeof i=="number"?{from:i,to:i}:i,o=Ve.atStart(n).from,a=Ve.atEnd(n).to,l=ps(r,o,a),c=ps(s,o,a),h=Ve.create(n,l,c);e.setSelection(h)}return!0},iE=i=>({state:e,dispatch:t})=>{const n=Qt(i,e.schema);return RM(n)(e,t)};function Hy(i,e){const t=i.storedMarks||i.selection.$to.parentOffset&&i.selection.$from.marks();if(t){const n=t.filter(r=>e==null?void 0:e.includes(r.type.name));i.tr.ensureMarks(n)}}const rE=({keepMarks:i=!0}={})=>({tr:e,state:t,dispatch:n,editor:r})=>{const{selection:s,doc:o}=e,{$from:a,$to:l}=s,c=r.extensionManager.attributes,h=kc(c,a.node().type.name,a.node().attrs);if(s instanceof Xe&&s.node.isBlock)return!a.parentOffset||!Ji(o,a.pos)?!1:(n&&(i&&Hy(t,r.extensionManager.splittableMarks),e.split(a.pos).scrollIntoView()),!0);if(!a.parent.isBlock)return!1;const u=l.parentOffset===l.parent.content.size,d=a.depth===0?void 0:XT(a.node(-1).contentMatchAt(a.indexAfter(-1)));let f=u&&d?[{type:d,attrs:h}]:void 0,g=Ji(e.doc,e.mapping.map(a.pos),1,f);if(!f&&!g&&Ji(e.doc,e.mapping.map(a.pos),1,d?[{type:d}]:void 0)&&(g=!0,f=d?[{type:d,attrs:h}]:void 0),n){if(g&&(s instanceof Ve&&e.deleteSelection(),e.split(e.mapping.map(a.pos),1,f),d&&!u&&!a.parentOffset&&a.parent.type!==d)){const m=e.mapping.map(a.before()),b=e.doc.resolve(m);a.node(-1).canReplaceWith(b.index(),b.index()+1,d)&&e.setNodeMarkup(e.mapping.map(a.before()),d)}i&&Hy(t,r.extensionManager.splittableMarks),e.scrollIntoView()}return g},sE=(i,e={})=>({tr:t,state:n,dispatch:r,editor:s})=>{var o;const a=Qt(i,n.schema),{$from:l,$to:c}=n.selection,h=n.selection.node;if(h&&h.isBlock||l.depth<2||!l.sameParent(c))return!1;const u=l.node(-1);if(u.type!==a)return!1;const d=s.extensionManager.attributes;if(l.parent.content.size===0&&l.node(-1).childCount===l.indexAfter(-1)){if(l.depth===2||l.node(-3).type!==a||l.index(-2)!==l.node(-2).childCount-1)return!1;if(r){let y=he.empty;const w=l.index(-1)?1:l.index(-2)?2:3;for(let I=l.depth-w;I>=l.depth-3;I-=1)y=he.from(l.node(I).copy(y));const C=l.indexAfter(-1)<l.node(-2).childCount?1:l.indexAfter(-2)<l.node(-3).childCount?2:3,M={...kc(d,l.node().type.name,l.node().attrs),...e},S=((o=a.contentMatch.defaultType)===null||o===void 0?void 0:o.createAndFill(M))||void 0;y=y.append(he.from(a.createAndFill(null,S)||void 0));const O=l.before(l.depth-(w-1));t.replace(O,l.after(-C),new Le(y,4-w,0));let T=-1;t.doc.nodesBetween(O,t.doc.content.size,(I,R)=>{if(T>-1)return!1;I.isTextblock&&I.content.size===0&&(T=R+1)}),T>-1&&t.setSelection(Ve.near(t.doc.resolve(T))),t.scrollIntoView()}return!0}const f=c.pos===l.end()?u.contentMatchAt(0).defaultType:null,g={...kc(d,u.type.name,u.attrs),...e},m={...kc(d,l.node().type.name,l.node().attrs),...e};t.delete(l.pos,c.pos);const b=f?[{type:a,attrs:g},{type:f,attrs:m}]:[{type:a,attrs:g}];if(!Ji(t.doc,l.pos,2))return!1;if(r){const{selection:y,storedMarks:w}=n,{splittableMarks:C}=s.extensionManager,M=w||y.$to.parentOffset&&y.$from.marks();if(t.split(l.pos,2,b).scrollIntoView(),!M||!r)return!0;const S=M.filter(O=>C.includes(O.type.name));t.ensureMarks(S)}return!0},Yd=(i,e)=>{const t=Bd(o=>o.type===e)(i.selection);if(!t)return!0;const n=i.doc.resolve(Math.max(0,t.pos-1)).before(t.depth);if(n===void 0)return!0;const r=i.doc.nodeAt(n);return t.node.type===(r==null?void 0:r.type)&&vr(i.doc,t.pos)&&i.join(t.pos),!0},jd=(i,e)=>{const t=Bd(o=>o.type===e)(i.selection);if(!t)return!0;const n=i.doc.resolve(t.start).after(t.depth);if(n===void 0)return!0;const r=i.doc.nodeAt(n);return t.node.type===(r==null?void 0:r.type)&&vr(i.doc,n)&&i.join(n),!0};var oE=Object.freeze({__proto__:null,blur:KM,clearContent:JM,clearNodes:ZM,command:QM,createParagraphNear:eT,cut:tT,deleteCurrentNode:nT,deleteNode:iT,deleteRange:rT,deleteSelection:sT,enter:oT,exitCode:aT,extendMarkRange:lT,first:cT,focus:uT,forEach:dT,insertContent:fT,insertContentAt:mT,joinBackward:yT,joinDown:bT,joinForward:vT,joinItemBackward:wT,joinItemForward:kT,joinTextblockBackward:ST,joinTextblockForward:CT,joinUp:xT,keyboardShortcut:MT,lift:TT,liftEmptyBlock:ET,liftListItem:OT,newlineInCode:IT,resetAttributes:PT,scrollIntoView:LT,selectAll:RT,selectNodeBackward:DT,selectNodeForward:NT,selectParentNode:_T,selectTextblockEnd:zT,selectTextblockStart:FT,setContent:BT,setMark:ZT,setMeta:QT,setNode:eE,setNodeSelection:tE,setTextSelection:nE,sinkListItem:iE,splitBlock:rE,splitListItem:sE,toggleList:(i,e,t,n={})=>({editor:r,tr:s,state:o,dispatch:a,chain:l,commands:c,can:h})=>{const{extensions:u,splittableMarks:d}=r.extensionManager,f=Qt(i,o.schema),g=Qt(e,o.schema),{selection:m,storedMarks:b}=o,{$from:y,$to:w}=m,C=y.blockRange(w),M=b||m.$to.parentOffset&&m.$from.marks();if(!C)return!1;const S=Bd(O=>By(O.type.name,u))(m);if(C.depth>=1&&S&&C.depth-S.depth<=1){if(S.node.type===f)return c.liftListItem(g);if(By(S.node.type.name,u)&&f.validContent(S.node.content)&&a)return l().command(()=>(s.setNodeMarkup(S.pos,f),!0)).command(()=>Yd(s,f)).command(()=>jd(s,f)).run()}return!t||!M||!a?l().command(()=>h().wrapInList(f,n)?!0:c.clearNodes()).wrapInList(f,n).command(()=>Yd(s,f)).command(()=>jd(s,f)).run():l().command(()=>{const O=h().wrapInList(f,n),T=M.filter(I=>d.includes(I.type.name));return s.ensureMarks(T),O?!0:c.clearNodes()}).wrapInList(f,n).command(()=>Yd(s,f)).command(()=>jd(s,f)).run()},toggleMark:(i,e={},t={})=>({state:n,commands:r})=>{const{extendEmptyMarkRange:s=!1}=t,o=Ir(i,n.schema);return Xd(n,o,e)?r.unsetMark(o,{extendEmptyMarkRange:s}):r.setMark(o,e)},toggleNode:(i,e,t={})=>({state:n,commands:r})=>{const s=Qt(i,n.schema),o=Qt(e,n.schema),a=va(n,s,t);let l;return n.selection.$anchor.sameParent(n.selection.$head)&&(l=n.selection.$anchor.parent.attrs),a?r.setNode(o,l):r.setNode(s,{...l,...t})},toggleWrap:(i,e={})=>({state:t,commands:n})=>{const r=Qt(i,t.schema);return va(t,r,e)?n.lift(r):n.wrapIn(r,e)},undoInputRule:()=>({state:i,dispatch:e})=>{const t=i.plugins;for(let n=0;n<t.length;n+=1){const r=t[n];let s;if(r.spec.isInputRules&&(s=r.getState(i))){if(e){const o=i.tr,a=s.transform;for(let l=a.steps.length-1;l>=0;l-=1)o.step(a.steps[l].invert(a.docs[l]));if(s.text){const l=o.doc.resolve(s.from).marks();o.replaceWith(s.from,s.to,i.schema.text(s.text,l))}else o.delete(s.from,s.to)}return!0}}return!1},unsetAllMarks:()=>({tr:i,dispatch:e})=>{const{selection:t}=i,{empty:n,ranges:r}=t;return n||e&&r.forEach(s=>{i.removeMark(s.$from.pos,s.$to.pos)}),!0},unsetMark:(i,e={})=>({tr:t,state:n,dispatch:r})=>{var s;const{extendEmptyMarkRange:o=!1}=e,{selection:a}=t,l=Ir(i,n.schema),{$from:c,empty:h,ranges:u}=a;if(!r)return!0;if(h&&o){let{from:d,to:f}=a;const g=(s=c.marks().find(b=>b.type===l))===null||s===void 0?void 0:s.attrs,m=_d(c,l,g);m&&(d=m.from,f=m.to),t.removeMark(d,f,l)}else u.forEach(d=>{t.removeMark(d.$from.pos,d.$to.pos,l)});return t.removeStoredMark(l),!0},updateAttributes:(i,e={})=>({tr:t,state:n,dispatch:r})=>{let s=null,o=null;const a=wc(typeof i=="string"?i:i.name,n.schema);return a?(a==="node"&&(s=Qt(i,n.schema)),a==="mark"&&(o=Ir(i,n.schema)),r&&t.selection.ranges.forEach(l=>{const c=l.$from.pos,h=l.$to.pos;let u,d,f,g;t.selection.empty?n.doc.nodesBetween(c,h,(m,b)=>{s&&s===m.type&&(f=Math.max(b,c),g=Math.min(b+m.nodeSize,h),u=b,d=m)}):n.doc.nodesBetween(c,h,(m,b)=>{b<c&&s&&s===m.type&&(f=Math.max(b,c),g=Math.min(b+m.nodeSize,h),u=b,d=m),b>=c&&b<=h&&(s&&s===m.type&&t.setNodeMarkup(b,void 0,{...m.attrs,...e}),o&&m.marks.length&&m.marks.forEach(y=>{if(o===y.type){const w=Math.max(b,c),C=Math.min(b+m.nodeSize,h);t.addMark(w,C,o.create({...y.attrs,...e}))}}))}),d&&(u!==void 0&&t.setNodeMarkup(u,void 0,{...d.attrs,...e}),o&&d.marks.length&&d.marks.forEach(m=>{o===m.type&&t.addMark(f,g,o.create({...m.attrs,...e}))}))}),!0):!1},wrapIn:(i,e={})=>({state:t,dispatch:n})=>{const r=Qt(i,t.schema);return MM(r,e)(t,n)},wrapInList:(i,e={})=>({state:t,dispatch:n})=>{const r=Qt(i,t.schema);return TM(r,e)(t,n)}});const aE=kn.create({name:"commands",addCommands(){return{...oE}}}),lE=kn.create({name:"drop",addProseMirrorPlugins(){return[new an({key:new Un("tiptapDrop"),props:{handleDrop:(i,e,t,n)=>{this.editor.emit("drop",{editor:this.editor,event:e,slice:t,moved:n})}}})]}}),cE=kn.create({name:"editable",addProseMirrorPlugins(){return[new an({key:new Un("editable"),props:{editable:()=>this.editor.options.editable}})]}}),hE=new Un("focusEvents"),uE=kn.create({name:"focusEvents",addProseMirrorPlugins(){const{editor:i}=this;return[new an({key:hE,props:{handleDOMEvents:{focus:(e,t)=>{i.isFocused=!0;const n=i.state.tr.setMeta("focus",{event:t}).setMeta("addToHistory",!1);return e.dispatch(n),!1},blur:(e,t)=>{i.isFocused=!1;const n=i.state.tr.setMeta("blur",{event:t}).setMeta("addToHistory",!1);return e.dispatch(n),!1}}}})]}}),dE=kn.create({name:"keymap",addKeyboardShortcuts(){const i=()=>this.editor.commands.first(({commands:o})=>[()=>o.undoInputRule(),()=>o.command(({tr:a})=>{const{selection:l,doc:c}=a,{empty:h,$anchor:u}=l,{pos:d,parent:f}=u,g=u.parent.isTextblock&&d>0?a.doc.resolve(d-1):u,m=g.parent.type.spec.isolating,b=u.pos-u.parentOffset,y=m&&g.parent.childCount===1?b===u.pos:tt.atStart(c).from===d;return!h||!f.type.isTextblock||f.textContent.length||!y||y&&u.parent.type.name==="paragraph"?!1:o.clearNodes()}),()=>o.deleteSelection(),()=>o.joinBackward(),()=>o.selectNodeBackward()]),e=()=>this.editor.commands.first(({commands:o})=>[()=>o.deleteSelection(),()=>o.deleteCurrentNode(),()=>o.joinForward(),()=>o.selectNodeForward()]),n={Enter:()=>this.editor.commands.first(({commands:o})=>[()=>o.newlineInCode(),()=>o.createParagraphNear(),()=>o.liftEmptyBlock(),()=>o.splitBlock()]),"Mod-Enter":()=>this.editor.commands.exitCode(),Backspace:i,"Mod-Backspace":i,"Shift-Backspace":i,Delete:e,"Mod-Delete":e,"Mod-a":()=>this.editor.commands.selectAll()},r={...n},s={...n,"Ctrl-h":i,"Alt-Backspace":i,"Ctrl-d":e,"Ctrl-Alt-Backspace":e,"Alt-Delete":e,"Alt-d":e,"Ctrl-a":()=>this.editor.commands.selectTextblockStart(),"Ctrl-e":()=>this.editor.commands.selectTextblockEnd()};return zd()||Ny()?s:r},addProseMirrorPlugins(){return[new an({key:new Un("clearDocument"),appendTransaction:(i,e,t)=>{if(i.some(m=>m.getMeta("composition")))return;const n=i.some(m=>m.docChanged)&&!e.doc.eq(t.doc),r=i.some(m=>m.getMeta("preventClearDocument"));if(!n||r)return;const{empty:s,from:o,to:a}=e.selection,l=tt.atStart(e.doc).from,c=tt.atEnd(e.doc).to;if(s||!(o===l&&a===c)||!Wd(t.doc))return;const d=t.tr,f=hc({state:t,transaction:d}),{commands:g}=new uc({editor:this.editor,state:f});if(g.clearNodes(),!!d.steps.length)return d}})]}}),fE=kn.create({name:"paste",addProseMirrorPlugins(){return[new an({key:new Un("tiptapPaste"),props:{handlePaste:(i,e,t)=>{this.editor.emit("paste",{editor:this.editor,event:e,slice:t})}}})]}}),pE=kn.create({name:"tabindex",addProseMirrorPlugins(){return[new an({key:new Un("tabindex"),props:{attributes:()=>this.editor.isEditable?{tabindex:"0"}:{}}})]}});class gs{get name(){return this.node.type.name}constructor(e,t,n=!1,r=null){this.currentNode=null,this.actualDepth=null,this.isBlock=n,this.resolvedPos=e,this.editor=t,this.currentNode=r}get node(){return this.currentNode||this.resolvedPos.node()}get element(){return this.editor.view.domAtPos(this.pos).node}get depth(){var e;return(e=this.actualDepth)!==null&&e!==void 0?e:this.resolvedPos.depth}get pos(){return this.resolvedPos.pos}get content(){return this.node.content}set content(e){let t=this.from,n=this.to;if(this.isBlock){if(this.content.size===0){console.error(`You cant set content on a block node. Tried to set content on ${this.name} at ${this.pos}`);return}t=this.from+1,n=this.to-1}this.editor.commands.insertContentAt({from:t,to:n},e)}get attributes(){return this.node.attrs}get textContent(){return this.node.textContent}get size(){return this.node.nodeSize}get from(){return this.isBlock?this.pos:this.resolvedPos.start(this.resolvedPos.depth)}get range(){return{from:this.from,to:this.to}}get to(){return this.isBlock?this.pos+this.size:this.resolvedPos.end(this.resolvedPos.depth)+(this.node.isText?0:1)}get parent(){if(this.depth===0)return null;const e=this.resolvedPos.start(this.resolvedPos.depth-1),t=this.resolvedPos.doc.resolve(e);return new gs(t,this.editor)}get before(){let e=this.resolvedPos.doc.resolve(this.from-(this.isBlock?1:2));return e.depth!==this.depth&&(e=this.resolvedPos.doc.resolve(this.from-3)),new gs(e,this.editor)}get after(){let e=this.resolvedPos.doc.resolve(this.to+(this.isBlock?2:1));return e.depth!==this.depth&&(e=this.resolvedPos.doc.resolve(this.to+3)),new gs(e,this.editor)}get children(){const e=[];return this.node.content.forEach((t,n)=>{const r=t.isBlock&&!t.isTextblock,s=t.isAtom&&!t.isText,o=this.pos+n+(s?0:1),a=this.resolvedPos.doc.resolve(o);if(!r&&a.depth<=this.depth)return;const l=new gs(a,this.editor,r,r?t:null);r&&(l.actualDepth=this.depth+1),e.push(new gs(a,this.editor,r,r?t:null))}),e}get firstChild(){return this.children[0]||null}get lastChild(){const e=this.children;return e[e.length-1]||null}closest(e,t={}){let n=null,r=this.parent;for(;r&&!n;){if(r.node.type.name===e)if(Object.keys(t).length>0){const s=r.node.attrs,o=Object.keys(t);for(let a=0;a<o.length;a+=1){const l=o[a];if(s[l]!==t[l])break}}else n=r;r=r.parent}return n}querySelector(e,t={}){return this.querySelectorAll(e,t,!0)[0]||null}querySelectorAll(e,t={},n=!1){let r=[];if(!this.children||this.children.length===0)return r;const s=Object.keys(t);return this.children.forEach(o=>{n&&r.length>0||(o.node.type.name===e&&s.every(l=>t[l]===o.node.attrs[l])&&r.push(o),!(n&&r.length>0)&&(r=r.concat(o.querySelectorAll(e,t,n))))}),r}setAttribute(e){const{tr:t}=this.editor.state;t.setNodeMarkup(this.from,void 0,{...this.node.attrs,...e}),this.editor.view.dispatch(t)}}const gE=`.ProseMirror {
      position: relative;
    }
    
    .ProseMirror {
      word-wrap: break-word;
      white-space: pre-wrap;
      white-space: break-spaces;
      -webkit-font-variant-ligatures: none;
      font-variant-ligatures: none;
      font-feature-settings: "liga" 0; /* the above doesn't seem to work in Edge */
    }
    
    .ProseMirror [contenteditable="false"] {
      white-space: normal;
    }
    
    .ProseMirror [contenteditable="false"] [contenteditable="true"] {
      white-space: pre-wrap;
    }
    
    .ProseMirror pre {
      white-space: pre-wrap;
    }
    
    img.ProseMirror-separator {
      display: inline !important;
      border: none !important;
      margin: 0 !important;
      width: 0 !important;
      height: 0 !important;
    }
    
    .ProseMirror-gapcursor {
      display: none;
      pointer-events: none;
      position: absolute;
      margin: 0;
    }
    
    .ProseMirror-gapcursor:after {
      content: "";
      display: block;
      position: absolute;
      top: -2px;
      width: 20px;
      border-top: 1px solid black;
      animation: ProseMirror-cursor-blink 1.1s steps(2, start) infinite;
    }
    
    @keyframes ProseMirror-cursor-blink {
      to {
        visibility: hidden;
      }
    }
    
    .ProseMirror-hideselection *::selection {
      background: transparent;
    }
    
    .ProseMirror-hideselection *::-moz-selection {
      background: transparent;
    }
    
    .ProseMirror-hideselection * {
      caret-color: transparent;
    }
    
    .ProseMirror-focused .ProseMirror-gapcursor {
      display: block;
    }
    
    .tippy-box[data-animation=fade][data-state=hidden] {
      opacity: 0
    }`;function mE(i,e,t){const n=document.querySelector("style[data-tiptap-style]");if(n!==null)return n;const r=document.createElement("style");return e&&r.setAttribute("nonce",e),r.setAttribute("data-tiptap-style",""),r.innerHTML=i,document.getElementsByTagName("head")[0].appendChild(r),r}let xE=class extends DM{constructor(e={}){super(),this.isFocused=!1,this.isInitialized=!1,this.extensionStorage={},this.options={element:document.createElement("div"),content:"",injectCSS:!0,injectNonce:void 0,extensions:[],autofocus:!1,editable:!0,editorProps:{},parseOptions:{},coreExtensionOptions:{},enableInputRules:!0,enablePasteRules:!0,enableCoreExtensions:!0,enableContentCheck:!1,onBeforeCreate:()=>null,onCreate:()=>null,onUpdate:()=>null,onSelectionUpdate:()=>null,onTransaction:()=>null,onFocus:()=>null,onBlur:()=>null,onDestroy:()=>null,onContentError:({error:t})=>{throw t},onPaste:()=>null,onDrop:()=>null},this.isCapturingTransaction=!1,this.capturedTransaction=null,this.setOptions(e),this.createExtensionManager(),this.createCommandManager(),this.createSchema(),this.on("beforeCreate",this.options.onBeforeCreate),this.emit("beforeCreate",{editor:this}),this.on("contentError",this.options.onContentError),this.createView(),this.injectCSS(),this.on("create",this.options.onCreate),this.on("update",this.options.onUpdate),this.on("selectionUpdate",this.options.onSelectionUpdate),this.on("transaction",this.options.onTransaction),this.on("focus",this.options.onFocus),this.on("blur",this.options.onBlur),this.on("destroy",this.options.onDestroy),this.on("drop",({event:t,slice:n,moved:r})=>this.options.onDrop(t,n,r)),this.on("paste",({event:t,slice:n})=>this.options.onPaste(t,n)),window.setTimeout(()=>{this.isDestroyed||(this.commands.focus(this.options.autofocus),this.emit("create",{editor:this}),this.isInitialized=!0)},0)}get storage(){return this.extensionStorage}get commands(){return this.commandManager.commands}chain(){return this.commandManager.chain()}can(){return this.commandManager.can()}injectCSS(){this.options.injectCSS&&document&&(this.css=mE(gE,this.options.injectNonce))}setOptions(e={}){this.options={...this.options,...e},!(!this.view||!this.state||this.isDestroyed)&&(this.options.editorProps&&this.view.setProps(this.options.editorProps),this.view.updateState(this.state))}setEditable(e,t=!0){this.setOptions({editable:e}),t&&this.emit("update",{editor:this,transaction:this.state.tr})}get isEditable(){return this.options.editable&&this.view&&this.view.editable}get state(){return this.view.state}registerPlugin(e,t){const n=Cy(t)?t(e,[...this.state.plugins]):[...this.state.plugins,e],r=this.state.reconfigure({plugins:n});return this.view.updateState(r),r}unregisterPlugin(e){if(this.isDestroyed)return;const t=this.state.plugins;let n=t;if([].concat(e).forEach(s=>{const o=typeof s=="string"?`${s}$`:s.key;n=t.filter(a=>!a.key.startsWith(o))}),t.length===n.length)return;const r=this.state.reconfigure({plugins:n});return this.view.updateState(r),r}createExtensionManager(){var e,t;const r=[...this.options.enableCoreExtensions?[cE,UM.configure({blockSeparator:(t=(e=this.options.coreExtensionOptions)===null||e===void 0?void 0:e.clipboardTextSerializer)===null||t===void 0?void 0:t.blockSeparator}),aE,uE,dE,pE,lE,fE].filter(s=>typeof this.options.enableCoreExtensions=="object"?this.options.enableCoreExtensions[s.name]!==!1:!0):[],...this.options.extensions].filter(s=>["extension","node","mark"].includes(s==null?void 0:s.type));this.extensionManager=new oo(r,this)}createCommandManager(){this.commandManager=new uc({editor:this})}createSchema(){this.schema=this.extensionManager.schema}createView(){var e;let t;try{t=Fd(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:this.options.enableContentCheck})}catch(o){if(!(o instanceof Error)||!["[tiptap error]: Invalid JSON content","[tiptap error]: Invalid HTML content"].includes(o.message))throw o;this.emit("contentError",{editor:this,error:o,disableCollaboration:()=>{this.storage.collaboration&&(this.storage.collaboration.isDisabled=!0),this.options.extensions=this.options.extensions.filter(a=>a.name!=="collaboration"),this.createExtensionManager()}}),t=Fd(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:!1})}const n=Ry(t,this.options.autofocus);this.view=new rM(this.options.element,{...this.options.editorProps,attributes:{role:"textbox",...(e=this.options.editorProps)===null||e===void 0?void 0:e.attributes},dispatchTransaction:this.dispatchTransaction.bind(this),state:Zs.create({doc:t,selection:n||void 0})});const r=this.state.reconfigure({plugins:this.extensionManager.plugins});this.view.updateState(r),this.createNodeViews(),this.prependClass();const s=this.view.dom;s.editor=this}createNodeViews(){this.view.isDestroyed||this.view.setProps({nodeViews:this.extensionManager.nodeViews})}prependClass(){this.view.dom.className=`tiptap ${this.view.dom.className}`}captureTransaction(e){this.isCapturingTransaction=!0,e(),this.isCapturingTransaction=!1;const t=this.capturedTransaction;return this.capturedTransaction=null,t}dispatchTransaction(e){if(this.view.isDestroyed)return;if(this.isCapturingTransaction){if(!this.capturedTransaction){this.capturedTransaction=e;return}e.steps.forEach(o=>{var a;return(a=this.capturedTransaction)===null||a===void 0?void 0:a.step(o)});return}const t=this.state.apply(e),n=!this.state.selection.eq(t.selection);this.emit("beforeTransaction",{editor:this,transaction:e,nextState:t}),this.view.updateState(t),this.emit("transaction",{editor:this,transaction:e}),n&&this.emit("selectionUpdate",{editor:this,transaction:e});const r=e.getMeta("focus"),s=e.getMeta("blur");r&&this.emit("focus",{editor:this,event:r.event,transaction:e}),s&&this.emit("blur",{editor:this,event:s.event,transaction:e}),!(!e.docChanged||e.getMeta("preventUpdate"))&&this.emit("update",{editor:this,transaction:e})}getAttributes(e){return Fy(this.state,e)}isActive(e,t){const n=typeof e=="string"?e:null,r=typeof e=="string"?t:e;return UT(this.state,n,r)}getJSON(){return this.state.doc.toJSON()}getHTML(){return Dd(this.state.doc.content,this.schema)}getText(e){const{blockSeparator:t=`
    
    `,textSerializers:n={}}=e||{};return jT(this.state.doc,{blockSeparator:t,textSerializers:{...Oy(this.schema),...n}})}get isEmpty(){return Wd(this.state.doc)}getCharacterCount(){return console.warn('[tiptap warn]: "editor.getCharacterCount()" is deprecated. Please use "editor.storage.characterCount.characters()" instead.'),this.state.doc.content.size-2}destroy(){if(this.emit("destroy"),this.view){const e=this.view.dom;e&&e.editor&&delete e.editor,this.view.destroy()}this.removeAllListeners()}get isDestroyed(){var e;return!(!((e=this.view)===null||e===void 0)&&e.docView)}$node(e,t){var n;return((n=this.$doc)===null||n===void 0?void 0:n.querySelector(e,t))||null}$nodes(e,t){var n;return((n=this.$doc)===null||n===void 0?void 0:n.querySelectorAll(e,t))||null}$pos(e){const t=this.state.doc.resolve(e);return new gs(t,this)}get $doc(){return this.$pos(0)}};function ao(i){return new fc({find:i.find,handler:({state:e,range:t,match:n})=>{const r=st(i.getAttributes,void 0,n);if(r===!1||r===null)return null;const{tr:s}=e,o=n[n.length-1],a=n[0];if(o){const l=a.search(/\S/),c=t.from+a.indexOf(o),h=c+o.length;if(Hd(t.from,t.to,e.doc).filter(f=>f.mark.type.excluded.find(m=>m===i.type&&m!==f.mark.type)).filter(f=>f.to>c).length)return null;h<t.to&&s.delete(h,t.to),c>t.from&&s.delete(t.from+l,c);const d=t.from+l+o.length;s.addMark(t.from+l,d,i.type.create(r||{})),s.removeStoredMark(i.type)}}})}function bE(i){return new fc({find:i.find,handler:({state:e,range:t,match:n})=>{const r=st(i.getAttributes,void 0,n)||{},{tr:s}=e,o=t.from;let a=t.to;const l=i.type.create(r);if(n[1]){const c=n[0].lastIndexOf(n[1]);let h=o+c;h>a?h=a:a=h+n[1].length;const u=n[0][n[0].length-1];s.insertText(u,o+n[0].length-1),s.replaceWith(h,a,l)}else if(n[0]){const c=i.type.isInline?o:o-1;s.insert(c,i.type.create(r)).delete(s.mapping.map(o),s.mapping.map(a))}s.scrollIntoView()}})}function Vd(i){return new fc({find:i.find,handler:({state:e,range:t,match:n})=>{const r=e.doc.resolve(t.from),s=st(i.getAttributes,void 0,n)||{};if(!r.node(-1).canReplaceWith(r.index(-1),r.indexAfter(-1),i.type))return null;e.tr.delete(t.from,t.to).setBlockType(t.from,t.from,i.type,s)}})}function wa(i){return new fc({find:i.find,handler:({state:e,range:t,match:n,chain:r})=>{const s=st(i.getAttributes,void 0,n)||{},o=e.tr.delete(t.from,t.to),l=o.doc.resolve(t.from).blockRange(),c=l&&qu(l,i.type,s);if(!c)return null;if(o.wrap(l,c),i.keepMarks&&i.editor){const{selection:u,storedMarks:d}=e,{splittableMarks:f}=i.editor.extensionManager,g=d||u.$to.parentOffset&&u.$from.marks();if(g){const m=g.filter(b=>f.includes(b.type.name));o.ensureMarks(m)}}if(i.keepAttributes){const u=i.type.name==="bulletList"||i.type.name==="orderedList"?"listItem":"taskList";r().updateAttributes(u,s).run()}const h=o.doc.resolve(t.from-1).nodeBefore;h&&h.type===i.type&&vr(o.doc,t.from-1)&&(!i.joinPredicate||i.joinPredicate(n,h))&&o.join(t.from-1)}})}let bi=class Zp{constructor(e={}){this.type="node",this.name="node",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=st(Ne(this,"addOptions",{name:this.name}))),this.storage=st(Ne(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new Zp(e)}configure(e={}){const t=this.extend({...this.config,addOptions:()=>mc(this.options,e)});return t.name=this.name,t.parent=this.parent,t}extend(e={}){const t=new Zp(e);return t.parent=this,this.child=t,t.name=e.name?e.name:t.parent.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${t.name}".`),t.options=st(Ne(t,"addOptions",{name:t.name})),t.storage=st(Ne(t,"addStorage",{name:t.name,options:t.options})),t}};function ms(i){return new YM({find:i.find,handler:({state:e,range:t,match:n,pasteEvent:r})=>{const s=st(i.getAttributes,void 0,n,r);if(s===!1||s===null)return null;const{tr:o}=e,a=n[n.length-1],l=n[0];let c=t.to;if(a){const h=l.search(/\S/),u=t.from+l.indexOf(a),d=u+a.length;if(Hd(t.from,t.to,e.doc).filter(g=>g.mark.type.excluded.find(b=>b===i.type&&b!==g.mark.type)).filter(g=>g.to>u).length)return null;d<t.to&&o.delete(d,t.to),u>t.from&&o.delete(t.from+h,u),c=t.from+h+a.length,o.addMark(t.from+h,c,i.type.create(s||{})),o.removeStoredMark(i.type)}}})}function Xy(i){return Qw((e,t)=>({get(){return e(),i},set(n){i=n,requestAnimationFrame(()=>{requestAnimationFrame(()=>{t()})})}}))}let yE=class extends xE{constructor(e={}){return super(e),this.contentComponent=null,this.appContext=null,this.reactiveState=Xy(this.view.state),this.reactiveExtensionStorage=Xy(this.extensionStorage),this.on("beforeTransaction",({nextState:t})=>{this.reactiveState.value=t,this.reactiveExtensionStorage.value=this.extensionStorage}),Mg(this)}get state(){return this.reactiveState?this.reactiveState.value:this.view.state}get storage(){return this.reactiveExtensionStorage?this.reactiveExtensionStorage.value:super.storage}registerPlugin(e,t){const n=super.registerPlugin(e,t);return this.reactiveState&&(this.reactiveState.value=n),n}unregisterPlugin(e){const t=super.unregisterPlugin(e);return this.reactiveState&&t&&(this.reactiveState.value=t),t}};const vE=Ml({name:"EditorContent",props:{editor:{default:null,type:Object}},setup(i){const e=mn(),t=Pu();return yk(()=>{const n=i.editor;n&&n.options.element&&e.value&&wl(()=>{if(!e.value||!n.options.element.firstChild)return;const r=On(e.value);e.value.append(...n.options.element.childNodes),n.contentComponent=t.ctx._,t&&(n.appContext={...t.appContext,provides:t.provides}),n.setOptions({element:r}),n.createNodeViews()})}),mu(()=>{const n=i.editor;n&&(n.contentComponent=null,n.appContext=null)}),{rootEl:e}},render(){return ta("div",{ref:i=>{this.rootEl=i}})}}),wE=/^\s*>\s$/,kE=bi.create({name:"blockquote",addOptions(){return{HTMLAttributes:{}}},content:"block+",group:"block",defining:!0,parseHTML(){return[{tag:"blockquote"}]},renderHTML({HTMLAttributes:i}){return["blockquote",en(this.options.HTMLAttributes,i),0]},addCommands(){return{setBlockquote:()=>({commands:i})=>i.wrapIn(this.name),toggleBlockquote:()=>({commands:i})=>i.toggleWrap(this.name),unsetBlockquote:()=>({commands:i})=>i.lift(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-b":()=>this.editor.commands.toggleBlockquote()}},addInputRules(){return[wa({find:wE,type:this.type})]}}),SE=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))$/,CE=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))/g,AE=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))$/,ME=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))/g,TE=Di.create({name:"bold",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"strong"},{tag:"b",getAttrs:i=>i.style.fontWeight!=="normal"&&null},{style:"font-weight=400",clearMark:i=>i.type.name===this.name},{style:"font-weight",getAttrs:i=>/^(bold(er)?|[5-9]\d{2,})$/.test(i)&&null}]},renderHTML({HTMLAttributes:i}){return["strong",en(this.options.HTMLAttributes,i),0]},addCommands(){return{setBold:()=>({commands:i})=>i.setMark(this.name),toggleBold:()=>({commands:i})=>i.toggleMark(this.name),unsetBold:()=>({commands:i})=>i.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-b":()=>this.editor.commands.toggleBold(),"Mod-B":()=>this.editor.commands.toggleBold()}},addInputRules(){return[ao({find:SE,type:this.type}),ao({find:AE,type:this.type})]},addPasteRules(){return[ms({find:CE,type:this.type}),ms({find:ME,type:this.type})]}}),EE="listItem",Wy="textStyle",Yy=/^\s*([-+*])\s$/,OE=bi.create({name:"bulletList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML(){return[{tag:"ul"}]},renderHTML({HTMLAttributes:i}){return["ul",en(this.options.HTMLAttributes,i),0]},addCommands(){return{toggleBulletList:()=>({commands:i,chain:e})=>this.options.keepAttributes?e().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(EE,this.editor.getAttributes(Wy)).run():i.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-8":()=>this.editor.commands.toggleBulletList()}},addInputRules(){let i=wa({find:Yy,type:this.type});return(this.options.keepMarks||this.options.keepAttributes)&&(i=wa({find:Yy,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:()=>this.editor.getAttributes(Wy),editor:this.editor})),[i]}}),IE=/(^|[^`])`([^`]+)`(?!`)/,PE=/(^|[^`])`([^`]+)`(?!`)/g,LE=Di.create({name:"code",addOptions(){return{HTMLAttributes:{}}},excludes:"_",code:!0,exitable:!0,parseHTML(){return[{tag:"code"}]},renderHTML({HTMLAttributes:i}){return["code",en(this.options.HTMLAttributes,i),0]},addCommands(){return{setCode:()=>({commands:i})=>i.setMark(this.name),toggleCode:()=>({commands:i})=>i.toggleMark(this.name),unsetCode:()=>({commands:i})=>i.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-e":()=>this.editor.commands.toggleCode()}},addInputRules(){return[ao({find:IE,type:this.type})]},addPasteRules(){return[ms({find:PE,type:this.type})]}}),RE=/^```([a-z]+)?[\s\n]$/,DE=/^~~~([a-z]+)?[\s\n]$/,NE=bi.create({name:"codeBlock",addOptions(){return{languageClassPrefix:"language-",exitOnTripleEnter:!0,exitOnArrowDown:!0,defaultLanguage:null,HTMLAttributes:{}}},content:"text*",marks:"",group:"block",code:!0,defining:!0,addAttributes(){return{language:{default:this.options.defaultLanguage,parseHTML:i=>{var e;const{languageClassPrefix:t}=this.options,s=[...((e=i.firstElementChild)===null||e===void 0?void 0:e.classList)||[]].filter(o=>o.startsWith(t)).map(o=>o.replace(t,""))[0];return s||null},rendered:!1}}},parseHTML(){return[{tag:"pre",preserveWhitespace:"full"}]},renderHTML({node:i,HTMLAttributes:e}){return["pre",en(this.options.HTMLAttributes,e),["code",{class:i.attrs.language?this.options.languageClassPrefix+i.attrs.language:null},0]]},addCommands(){return{setCodeBlock:i=>({commands:e})=>e.setNode(this.name,i),toggleCodeBlock:i=>({commands:e})=>e.toggleNode(this.name,"paragraph",i)}},addKeyboardShortcuts(){return{"Mod-Alt-c":()=>this.editor.commands.toggleCodeBlock(),Backspace:()=>{const{empty:i,$anchor:e}=this.editor.state.selection,t=e.pos===1;return!i||e.parent.type.name!==this.name?!1:t||!e.parent.textContent.length?this.editor.commands.clearNodes():!1},Enter:({editor:i})=>{if(!this.options.exitOnTripleEnter)return!1;const{state:e}=i,{selection:t}=e,{$from:n,empty:r}=t;if(!r||n.parent.type!==this.type)return!1;const s=n.parentOffset===n.parent.nodeSize-2,o=n.parent.textContent.endsWith(`
    
    `);return!s||!o?!1:i.chain().command(({tr:a})=>(a.delete(n.pos-2,n.pos),!0)).exitCode().run()},ArrowDown:({editor:i})=>{if(!this.options.exitOnArrowDown)return!1;const{state:e}=i,{selection:t,doc:n}=e,{$from:r,empty:s}=t;if(!s||r.parent.type!==this.type||!(r.parentOffset===r.parent.nodeSize-2))return!1;const a=r.after();return a===void 0?!1:n.nodeAt(a)?i.commands.command(({tr:c})=>(c.setSelection(tt.near(n.resolve(a))),!0)):i.commands.exitCode()}}},addInputRules(){return[Vd({find:RE,type:this.type,getAttributes:i=>({language:i[1]})}),Vd({find:DE,type:this.type,getAttributes:i=>({language:i[1]})})]},addProseMirrorPlugins(){return[new an({key:new Un("codeBlockVSCodeHandler"),props:{handlePaste:(i,e)=>{if(!e.clipboardData||this.editor.isActive(this.type.name))return!1;const t=e.clipboardData.getData("text/plain"),n=e.clipboardData.getData("vscode-editor-data"),r=n?JSON.parse(n):void 0,s=r==null?void 0:r.mode;if(!t||!s)return!1;const{tr:o,schema:a}=i.state,l=a.text(t.replace(/\r\n?/g,`
    `));return o.replaceSelectionWith(this.type.create({language:s},l)),o.selection.$from.parent.type!==this.type&&o.setSelection(Ve.near(o.doc.resolve(Math.max(0,o.selection.from-2)))),o.setMeta("paste",!0),i.dispatch(o),!0}}})]}}),_E=bi.create({name:"doc",topNode:!0,content:"block+"});function zE(i={}){return new an({view(e){return new FE(e,i)}})}class FE{constructor(e,t){var n;this.editorView=e,this.cursorPos=null,this.element=null,this.timeout=-1,this.width=(n=t.width)!==null&&n!==void 0?n:1,this.color=t.color===!1?void 0:t.color||"black",this.class=t.class,this.handlers=["dragover","dragend","drop","dragleave"].map(r=>{let s=o=>{this[r](o)};return e.dom.addEventListener(r,s),{name:r,handler:s}})}destroy(){this.handlers.forEach(({name:e,handler:t})=>this.editorView.dom.removeEventListener(e,t))}update(e,t){this.cursorPos!=null&&t.doc!=e.state.doc&&(this.cursorPos>e.state.doc.content.size?this.setCursor(null):this.updateOverlay())}setCursor(e){e!=this.cursorPos&&(this.cursorPos=e,e==null?(this.element.parentNode.removeChild(this.element),this.element=null):this.updateOverlay())}updateOverlay(){let e=this.editorView.state.doc.resolve(this.cursorPos),t=!e.parent.inlineContent,n;if(t){let a=e.nodeBefore,l=e.nodeAfter;if(a||l){let c=this.editorView.nodeDOM(this.cursorPos-(a?a.nodeSize:0));if(c){let h=c.getBoundingClientRect(),u=a?h.bottom:h.top;a&&l&&(u=(u+this.editorView.nodeDOM(this.cursorPos).getBoundingClientRect().top)/2),n={left:h.left,right:h.right,top:u-this.width/2,bottom:u+this.width/2}}}}if(!n){let a=this.editorView.coordsAtPos(this.cursorPos);n={left:a.left-this.width/2,right:a.left+this.width/2,top:a.top,bottom:a.bottom}}let r=this.editorView.dom.offsetParent;this.element||(this.element=r.appendChild(document.createElement("div")),this.class&&(this.element.className=this.class),this.element.style.cssText="position: absolute; z-index: 50; pointer-events: none;",this.color&&(this.element.style.backgroundColor=this.color)),this.element.classList.toggle("prosemirror-dropcursor-block",t),this.element.classList.toggle("prosemirror-dropcursor-inline",!t);let s,o;if(!r||r==document.body&&getComputedStyle(r).position=="static")s=-pageXOffset,o=-pageYOffset;else{let a=r.getBoundingClientRect();s=a.left-r.scrollLeft,o=a.top-r.scrollTop}this.element.style.left=n.left-s+"px",this.element.style.top=n.top-o+"px",this.element.style.width=n.right-n.left+"px",this.element.style.height=n.bottom-n.top+"px"}scheduleRemoval(e){clearTimeout(this.timeout),this.timeout=setTimeout(()=>this.setCursor(null),e)}dragover(e){if(!this.editorView.editable)return;let t=this.editorView.posAtCoords({left:e.clientX,top:e.clientY}),n=t&&t.inside>=0&&this.editorView.state.doc.nodeAt(t.inside),r=n&&n.type.spec.disableDropCursor,s=typeof r=="function"?r(this.editorView,t,e):r;if(t&&!s){let o=t.pos;if(this.editorView.dragging&&this.editorView.dragging.slice){let a=_x(this.editorView.state.doc,o,this.editorView.dragging.slice);a!=null&&(o=a)}this.setCursor(o),this.scheduleRemoval(5e3)}}dragend(){this.scheduleRemoval(20)}drop(){this.scheduleRemoval(20)}dragleave(e){(e.target==this.editorView.dom||!this.editorView.dom.contains(e.relatedTarget))&&this.setCursor(null)}}const BE=kn.create({name:"dropCursor",addOptions(){return{color:"currentColor",width:1,class:void 0}},addProseMirrorPlugins(){return[zE(this.options)]}});class _t extends tt{constructor(e){super(e,e)}map(e,t){let n=e.resolve(t.map(this.head));return _t.valid(n)?new _t(n):tt.near(n)}content(){return Le.empty}eq(e){return e instanceof _t&&e.head==this.head}toJSON(){return{type:"gapcursor",pos:this.head}}static fromJSON(e,t){if(typeof t.pos!="number")throw new RangeError("Invalid input for GapCursor.fromJSON");return new _t(e.resolve(t.pos))}getBookmark(){return new $d(this.anchor)}static valid(e){let t=e.parent;if(t.isTextblock||!HE(e)||!XE(e))return!1;let n=t.type.spec.allowGapCursor;if(n!=null)return n;let r=t.contentMatchAt(e.index()).defaultType;return r&&r.isTextblock}static findGapCursorFrom(e,t,n=!1){e:for(;;){if(!n&&_t.valid(e))return e;let r=e.pos,s=null;for(let o=e.depth;;o--){let a=e.node(o);if(t>0?e.indexAfter(o)<a.childCount:e.index(o)>0){s=a.child(t>0?e.indexAfter(o):e.index(o)-1);break}else if(o==0)return null;r+=t;let l=e.doc.resolve(r);if(_t.valid(l))return l}for(;;){let o=t>0?s.firstChild:s.lastChild;if(!o){if(s.isAtom&&!s.isText&&!Xe.isSelectable(s)){e=e.doc.resolve(r+s.nodeSize*t),n=!1;continue e}break}s=o,r+=t;let a=e.doc.resolve(r);if(_t.valid(a))return a}return null}}}_t.prototype.visible=!1,_t.findFrom=_t.findGapCursorFrom,tt.jsonID("gapcursor",_t);class $d{constructor(e){this.pos=e}map(e){return new $d(e.map(this.pos))}resolve(e){let t=e.resolve(this.pos);return _t.valid(t)?new _t(t):tt.near(t)}}function HE(i){for(let e=i.depth;e>=0;e--){let t=i.index(e),n=i.node(e);if(t==0){if(n.type.spec.isolating)return!0;continue}for(let r=n.child(t-1);;r=r.lastChild){if(r.childCount==0&&!r.inlineContent||r.isAtom||r.type.spec.isolating)return!0;if(r.inlineContent)return!1}}return!0}function XE(i){for(let e=i.depth;e>=0;e--){let t=i.indexAfter(e),n=i.node(e);if(t==n.childCount){if(n.type.spec.isolating)return!0;continue}for(let r=n.child(t);;r=r.firstChild){if(r.childCount==0&&!r.inlineContent||r.isAtom||r.type.spec.isolating)return!0;if(r.inlineContent)return!1}}return!0}function WE(){return new an({props:{decorations:$E,createSelectionBetween(i,e,t){return e.pos==t.pos&&_t.valid(t)?new _t(t):null},handleClick:jE,handleKeyDown:YE,handleDOMEvents:{beforeinput:VE}}})}const YE=cy({ArrowLeft:Sc("horiz",-1),ArrowRight:Sc("horiz",1),ArrowUp:Sc("vert",-1),ArrowDown:Sc("vert",1)});function Sc(i,e){const t=i=="vert"?e>0?"down":"up":e>0?"right":"left";return function(n,r,s){let o=n.selection,a=e>0?o.$to:o.$from,l=o.empty;if(o instanceof Ve){if(!s.endOfTextblock(t)||a.depth==0)return!1;l=!1,a=n.doc.resolve(e>0?a.after():a.before())}let c=_t.findGapCursorFrom(a,e,l);return c?(r&&r(n.tr.setSelection(new _t(c))),!0):!1}}function jE(i,e,t){if(!i||!i.editable)return!1;let n=i.state.doc.resolve(e);if(!_t.valid(n))return!1;let r=i.posAtCoords({left:t.clientX,top:t.clientY});return r&&r.inside>-1&&Xe.isSelectable(i.state.doc.nodeAt(r.inside))?!1:(i.dispatch(i.state.tr.setSelection(new _t(n))),!0)}function VE(i,e){if(e.inputType!="insertCompositionText"||!(i.state.selection instanceof _t))return!1;let{$from:t}=i.state.selection,n=t.parent.contentMatchAt(t.index()).findWrapping(i.state.schema.nodes.text);if(!n)return!1;let r=he.empty;for(let o=n.length-1;o>=0;o--)r=he.from(n[o].createAndFill(null,r));let s=i.state.tr.replace(t.pos,t.pos,new Le(r,0,0));return s.setSelection(Ve.near(s.doc.resolve(t.pos+1))),i.dispatch(s),!1}function $E(i){if(!(i.selection instanceof _t))return null;let e=document.createElement("div");return e.className="ProseMirror-gapcursor",$t.create(i.doc,[ii.widget(i.selection.head,e,{key:"gapcursor"})])}const GE=kn.create({name:"gapCursor",addProseMirrorPlugins(){return[WE()]},extendNodeSchema(i){var e;const t={name:i.name,options:i.options,storage:i.storage};return{allowGapCursor:(e=st(Ne(i,"allowGapCursor",t)))!==null&&e!==void 0?e:null}}}),qE=bi.create({name:"hardBreak",addOptions(){return{keepMarks:!0,HTMLAttributes:{}}},inline:!0,group:"inline",selectable:!1,linebreakReplacement:!0,parseHTML(){return[{tag:"br"}]},renderHTML({HTMLAttributes:i}){return["br",en(this.options.HTMLAttributes,i)]},renderText(){return`
    `},addCommands(){return{setHardBreak:()=>({commands:i,chain:e,state:t,editor:n})=>i.first([()=>i.exitCode(),()=>i.command(()=>{const{selection:r,storedMarks:s}=t;if(r.$from.parent.type.spec.isolating)return!1;const{keepMarks:o}=this.options,{splittableMarks:a}=n.extensionManager,l=s||r.$to.parentOffset&&r.$from.marks();return e().insertContent({type:this.name}).command(({tr:c,dispatch:h})=>{if(h&&l&&o){const u=l.filter(d=>a.includes(d.type.name));c.ensureMarks(u)}return!0}).run()})])}},addKeyboardShortcuts(){return{"Mod-Enter":()=>this.editor.commands.setHardBreak(),"Shift-Enter":()=>this.editor.commands.setHardBreak()}}}),UE=bi.create({name:"heading",addOptions(){return{levels:[1,2,3,4,5,6],HTMLAttributes:{}}},content:"inline*",group:"block",defining:!0,addAttributes(){return{level:{default:1,rendered:!1}}},parseHTML(){return this.options.levels.map(i=>({tag:`h${i}`,attrs:{level:i}}))},renderHTML({node:i,HTMLAttributes:e}){return[`h${this.options.levels.includes(i.attrs.level)?i.attrs.level:this.options.levels[0]}`,en(this.options.HTMLAttributes,e),0]},addCommands(){return{setHeading:i=>({commands:e})=>this.options.levels.includes(i.level)?e.setNode(this.name,i):!1,toggleHeading:i=>({commands:e})=>this.options.levels.includes(i.level)?e.toggleNode(this.name,"paragraph",i):!1}},addKeyboardShortcuts(){return this.options.levels.reduce((i,e)=>({...i,[`Mod-Alt-${e}`]:()=>this.editor.commands.toggleHeading({level:e})}),{})},addInputRules(){return this.options.levels.map(i=>Vd({find:new RegExp(`^(#{${Math.min(...this.options.levels)},${i}})\\s$`),type:this.type,getAttributes:{level:i}}))}});var Cc=200,tn=function(){};tn.prototype.append=function(e){return e.length?(e=tn.from(e),!this.length&&e||e.length<Cc&&this.leafAppend(e)||this.length<Cc&&e.leafPrepend(this)||this.appendInner(e)):this},tn.prototype.prepend=function(e){return e.length?tn.from(e).append(this):this},tn.prototype.appendInner=function(e){return new KE(this,e)},tn.prototype.slice=function(e,t){return e===void 0&&(e=0),t===void 0&&(t=this.length),e>=t?tn.empty:this.sliceInner(Math.max(0,e),Math.min(this.length,t))},tn.prototype.get=function(e){if(!(e<0||e>=this.length))return this.getInner(e)},tn.prototype.forEach=function(e,t,n){t===void 0&&(t=0),n===void 0&&(n=this.length),t<=n?this.forEachInner(e,t,n,0):this.forEachInvertedInner(e,t,n,0)},tn.prototype.map=function(e,t,n){t===void 0&&(t=0),n===void 0&&(n=this.length);var r=[];return this.forEach(function(s,o){return r.push(e(s,o))},t,n),r},tn.from=function(e){return e instanceof tn?e:e&&e.length?new jy(e):tn.empty};var jy=function(i){function e(n){i.call(this),this.values=n}i&&(e.__proto__=i),e.prototype=Object.create(i&&i.prototype),e.prototype.constructor=e;var t={length:{configurable:!0},depth:{configurable:!0}};return e.prototype.flatten=function(){return this.values},e.prototype.sliceInner=function(r,s){return r==0&&s==this.length?this:new e(this.values.slice(r,s))},e.prototype.getInner=function(r){return this.values[r]},e.prototype.forEachInner=function(r,s,o,a){for(var l=s;l<o;l++)if(r(this.values[l],a+l)===!1)return!1},e.prototype.forEachInvertedInner=function(r,s,o,a){for(var l=s-1;l>=o;l--)if(r(this.values[l],a+l)===!1)return!1},e.prototype.leafAppend=function(r){if(this.length+r.length<=Cc)return new e(this.values.concat(r.flatten()))},e.prototype.leafPrepend=function(r){if(this.length+r.length<=Cc)return new e(r.flatten().concat(this.values))},t.length.get=function(){return this.values.length},t.depth.get=function(){return 0},Object.defineProperties(e.prototype,t),e}(tn);tn.empty=new jy([]);var KE=function(i){function e(t,n){i.call(this),this.left=t,this.right=n,this.length=t.length+n.length,this.depth=Math.max(t.depth,n.depth)+1}return i&&(e.__proto__=i),e.prototype=Object.create(i&&i.prototype),e.prototype.constructor=e,e.prototype.flatten=function(){return this.left.flatten().concat(this.right.flatten())},e.prototype.getInner=function(n){return n<this.left.length?this.left.get(n):this.right.get(n-this.left.length)},e.prototype.forEachInner=function(n,r,s,o){var a=this.left.length;if(r<a&&this.left.forEachInner(n,r,Math.min(s,a),o)===!1||s>a&&this.right.forEachInner(n,Math.max(r-a,0),Math.min(this.length,s)-a,o+a)===!1)return!1},e.prototype.forEachInvertedInner=function(n,r,s,o){var a=this.left.length;if(r>a&&this.right.forEachInvertedInner(n,r-a,Math.max(s,a)-a,o+a)===!1||s<a&&this.left.forEachInvertedInner(n,Math.min(r,a),s,o)===!1)return!1},e.prototype.sliceInner=function(n,r){if(n==0&&r==this.length)return this;var s=this.left.length;return r<=s?this.left.slice(n,r):n>=s?this.right.slice(n-s,r-s):this.left.slice(n,s).append(this.right.slice(0,r-s))},e.prototype.leafAppend=function(n){var r=this.right.leafAppend(n);if(r)return new e(this.left,r)},e.prototype.leafPrepend=function(n){var r=this.left.leafPrepend(n);if(r)return new e(r,this.right)},e.prototype.appendInner=function(n){return this.left.depth>=Math.max(this.right.depth,n.depth)+1?new e(this.left,new e(this.right,n)):new e(this,n)},e}(tn);const JE=500;class yi{constructor(e,t){this.items=e,this.eventCount=t}popEvent(e,t){if(this.eventCount==0)return null;let n=this.items.length;for(;;n--)if(this.items.get(n-1).selection){--n;break}let r,s;t&&(r=this.remapping(n,this.items.length),s=r.maps.length);let o=e.tr,a,l,c=[],h=[];return this.items.forEach((u,d)=>{if(!u.step){r||(r=this.remapping(n,d+1),s=r.maps.length),s--,h.push(u);return}if(r){h.push(new Ni(u.map));let f=u.step.map(r.slice(s)),g;f&&o.maybeStep(f).doc&&(g=o.mapping.maps[o.mapping.maps.length-1],c.push(new Ni(g,void 0,void 0,c.length+h.length))),s--,g&&r.appendMap(g,s)}else o.maybeStep(u.step);if(u.selection)return a=r?u.selection.map(r.slice(s)):u.selection,l=new yi(this.items.slice(0,n).append(h.reverse().concat(c)),this.eventCount-1),!1},this.items.length,0),{remaining:l,transform:o,selection:a}}addTransform(e,t,n,r){let s=[],o=this.eventCount,a=this.items,l=!r&&a.length?a.get(a.length-1):null;for(let h=0;h<e.steps.length;h++){let u=e.steps[h].invert(e.docs[h]),d=new Ni(e.mapping.maps[h],u,t),f;(f=l&&l.merge(d))&&(d=f,h?s.pop():a=a.slice(0,a.length-1)),s.push(d),t&&(o++,t=void 0),r||(l=d)}let c=o-n.depth;return c>QE&&(a=ZE(a,c),o-=c),new yi(a.append(s),o)}remapping(e,t){let n=new oa;return this.items.forEach((r,s)=>{let o=r.mirrorOffset!=null&&s-r.mirrorOffset>=e?n.maps.length-r.mirrorOffset:void 0;n.appendMap(r.map,o)},e,t),n}addMaps(e){return this.eventCount==0?this:new yi(this.items.append(e.map(t=>new Ni(t))),this.eventCount)}rebased(e,t){if(!this.eventCount)return this;let n=[],r=Math.max(0,this.items.length-t),s=e.mapping,o=e.steps.length,a=this.eventCount;this.items.forEach(d=>{d.selection&&a--},r);let l=t;this.items.forEach(d=>{let f=s.getMirror(--l);if(f==null)return;o=Math.min(o,f);let g=s.maps[f];if(d.step){let m=e.steps[f].invert(e.docs[f]),b=d.selection&&d.selection.map(s.slice(l+1,f));b&&a++,n.push(new Ni(g,m,b))}else n.push(new Ni(g))},r);let c=[];for(let d=t;d<o;d++)c.push(new Ni(s.maps[d]));let h=this.items.slice(0,r).append(c).append(n),u=new yi(h,a);return u.emptyItemCount()>JE&&(u=u.compress(this.items.length-n.length)),u}emptyItemCount(){let e=0;return this.items.forEach(t=>{t.step||e++}),e}compress(e=this.items.length){let t=this.remapping(0,e),n=t.maps.length,r=[],s=0;return this.items.forEach((o,a)=>{if(a>=e)r.push(o),o.selection&&s++;else if(o.step){let l=o.step.map(t.slice(n)),c=l&&l.getMap();if(n--,c&&t.appendMap(c,n),l){let h=o.selection&&o.selection.map(t.slice(n));h&&s++;let u=new Ni(c.invert(),l,h),d,f=r.length-1;(d=r.length&&r[f].merge(u))?r[f]=d:r.push(u)}}else o.map&&n--},this.items.length,0),new yi(tn.from(r.reverse()),s)}}yi.empty=new yi(tn.empty,0);function ZE(i,e){let t;return i.forEach((n,r)=>{if(n.selection&&e--==0)return t=r,!1}),i.slice(t)}class Ni{constructor(e,t,n,r){this.map=e,this.step=t,this.selection=n,this.mirrorOffset=r}merge(e){if(this.step&&e.step&&!e.selection){let t=e.step.merge(this.step);if(t)return new Ni(t.getMap().invert(),t,this.selection)}}}class Pr{constructor(e,t,n,r,s){this.done=e,this.undone=t,this.prevRanges=n,this.prevTime=r,this.prevComposition=s}}const QE=20;function eO(i,e,t,n){let r=t.getMeta(xs),s;if(r)return r.historyState;t.getMeta(iO)&&(i=new Pr(i.done,i.undone,null,0,-1));let o=t.getMeta("appendedTransaction");if(t.steps.length==0)return i;if(o&&o.getMeta(xs))return o.getMeta(xs).redo?new Pr(i.done.addTransform(t,void 0,n,Ac(e)),i.undone,Vy(t.mapping.maps),i.prevTime,i.prevComposition):new Pr(i.done,i.undone.addTransform(t,void 0,n,Ac(e)),null,i.prevTime,i.prevComposition);if(t.getMeta("addToHistory")!==!1&&!(o&&o.getMeta("addToHistory")===!1)){let a=t.getMeta("composition"),l=i.prevTime==0||!o&&i.prevComposition!=a&&(i.prevTime<(t.time||0)-n.newGroupDelay||!tO(t,i.prevRanges)),c=o?Gd(i.prevRanges,t.mapping):Vy(t.mapping.maps);return new Pr(i.done.addTransform(t,l?e.selection.getBookmark():void 0,n,Ac(e)),yi.empty,c,t.time,a??i.prevComposition)}else return(s=t.getMeta("rebased"))?new Pr(i.done.rebased(t,s),i.undone.rebased(t,s),Gd(i.prevRanges,t.mapping),i.prevTime,i.prevComposition):new Pr(i.done.addMaps(t.mapping.maps),i.undone.addMaps(t.mapping.maps),Gd(i.prevRanges,t.mapping),i.prevTime,i.prevComposition)}function tO(i,e){if(!e)return!1;if(!i.docChanged)return!0;let t=!1;return i.mapping.maps[0].forEach((n,r)=>{for(let s=0;s<e.length;s+=2)n<=e[s+1]&&r>=e[s]&&(t=!0)}),t}function Vy(i){let e=[];for(let t=i.length-1;t>=0&&e.length==0;t--)i[t].forEach((n,r,s,o)=>e.push(s,o));return e}function Gd(i,e){if(!i)return null;let t=[];for(let n=0;n<i.length;n+=2){let r=e.map(i[n],1),s=e.map(i[n+1],-1);r<=s&&t.push(r,s)}return t}function nO(i,e,t){let n=Ac(e),r=xs.get(e).spec.config,s=(t?i.undone:i.done).popEvent(e,n);if(!s)return null;let o=s.selection.resolve(s.transform.doc),a=(t?i.done:i.undone).addTransform(s.transform,e.selection.getBookmark(),r,n),l=new Pr(t?a:s.remaining,t?s.remaining:a,null,0,-1);return s.transform.setSelection(o).setMeta(xs,{redo:t,historyState:l})}let qd=!1,$y=null;function Ac(i){let e=i.plugins;if($y!=e){qd=!1,$y=e;for(let t=0;t<e.length;t++)if(e[t].spec.historyPreserveItems){qd=!0;break}}return qd}const xs=new Un("history"),iO=new Un("closeHistory");function rO(i={}){return i={depth:i.depth||100,newGroupDelay:i.newGroupDelay||500},new an({key:xs,state:{init(){return new Pr(yi.empty,yi.empty,null,0,-1)},apply(e,t,n){return eO(t,n,e,i)}},config:i,props:{handleDOMEvents:{beforeinput(e,t){let n=t.inputType,r=n=="historyUndo"?qy:n=="historyRedo"?Uy:null;return r?(t.preventDefault(),r(e.state,e.dispatch)):!1}}}})}function Gy(i,e){return(t,n)=>{let r=xs.getState(t);if(!r||(i?r.undone:r.done).eventCount==0)return!1;if(n){let s=nO(r,t,i);s&&n(e?s.scrollIntoView():s)}return!0}}const qy=Gy(!1,!0),Uy=Gy(!0,!0),sO=kn.create({name:"history",addOptions(){return{depth:100,newGroupDelay:500}},addCommands(){return{undo:()=>({state:i,dispatch:e})=>qy(i,e),redo:()=>({state:i,dispatch:e})=>Uy(i,e)}},addProseMirrorPlugins(){return[rO(this.options)]},addKeyboardShortcuts(){return{"Mod-z":()=>this.editor.commands.undo(),"Shift-Mod-z":()=>this.editor.commands.redo(),"Mod-y":()=>this.editor.commands.redo(),"Mod-":()=>this.editor.commands.undo(),"Shift-Mod-":()=>this.editor.commands.redo()}}}),oO=bi.create({name:"horizontalRule",addOptions(){return{HTMLAttributes:{}}},group:"block",parseHTML(){return[{tag:"hr"}]},renderHTML({HTMLAttributes:i}){return["hr",en(this.options.HTMLAttributes,i)]},addCommands(){return{setHorizontalRule:()=>({chain:i,state:e})=>{const{selection:t}=e,{$from:n,$to:r}=t,s=i();return n.parentOffset===0?s.insertContentAt({from:Math.max(n.pos-1,0),to:r.pos},{type:this.name}):KT(t)?s.insertContentAt(r.pos,{type:this.name}):s.insertContent({type:this.name}),s.command(({tr:o,dispatch:a})=>{var l;if(a){const{$to:c}=o.selection,h=c.end();if(c.nodeAfter)c.nodeAfter.isTextblock?o.setSelection(Ve.create(o.doc,c.pos+1)):c.nodeAfter.isBlock?o.setSelection(Xe.create(o.doc,c.pos)):o.setSelection(Ve.create(o.doc,c.pos));else{const u=(l=c.parent.type.contentMatch.defaultType)===null||l===void 0?void 0:l.create();u&&(o.insert(h,u),o.setSelection(Ve.create(o.doc,h+1)))}o.scrollIntoView()}return!0}).run()}}},addInputRules(){return[bE({find:/^(?:---|-|___\s|\*\*\*\s)$/,type:this.type})]}}),aO=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))$/,lO=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))/g,cO=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))$/,hO=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))/g,uO=Di.create({name:"italic",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"em"},{tag:"i",getAttrs:i=>i.style.fontStyle!=="normal"&&null},{style:"font-style=normal",clearMark:i=>i.type.name===this.name},{style:"font-style=italic"}]},renderHTML({HTMLAttributes:i}){return["em",en(this.options.HTMLAttributes,i),0]},addCommands(){return{setItalic:()=>({commands:i})=>i.setMark(this.name),toggleItalic:()=>({commands:i})=>i.toggleMark(this.name),unsetItalic:()=>({commands:i})=>i.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-i":()=>this.editor.commands.toggleItalic(),"Mod-I":()=>this.editor.commands.toggleItalic()}},addInputRules(){return[ao({find:aO,type:this.type}),ao({find:cO,type:this.type})]},addPasteRules(){return[ms({find:lO,type:this.type}),ms({find:hO,type:this.type})]}}),dO=bi.create({name:"listItem",addOptions(){return{HTMLAttributes:{},bulletListTypeName:"bulletList",orderedListTypeName:"orderedList"}},content:"paragraph block*",defining:!0,parseHTML(){return[{tag:"li"}]},renderHTML({HTMLAttributes:i}){return["li",en(this.options.HTMLAttributes,i),0]},addKeyboardShortcuts(){return{Enter:()=>this.editor.commands.splitListItem(this.name),Tab:()=>this.editor.commands.sinkListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)}}}),fO="listItem",Ky="textStyle",Jy=/^(\d+)\.\s$/,pO=bi.create({name:"orderedList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},addAttributes(){return{start:{default:1,parseHTML:i=>i.hasAttribute("start")?parseInt(i.getAttribute("start")||"",10):1},type:{default:null,parseHTML:i=>i.getAttribute("type")}}},parseHTML(){return[{tag:"ol"}]},renderHTML({HTMLAttributes:i}){const{start:e,...t}=i;return e===1?["ol",en(this.options.HTMLAttributes,t),0]:["ol",en(this.options.HTMLAttributes,i),0]},addCommands(){return{toggleOrderedList:()=>({commands:i,chain:e})=>this.options.keepAttributes?e().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(fO,this.editor.getAttributes(Ky)).run():i.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-7":()=>this.editor.commands.toggleOrderedList()}},addInputRules(){let i=wa({find:Jy,type:this.type,getAttributes:e=>({start:+e[1]}),joinPredicate:(e,t)=>t.childCount+t.attrs.start===+e[1]});return(this.options.keepMarks||this.options.keepAttributes)&&(i=wa({find:Jy,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:e=>({start:+e[1],...this.editor.getAttributes(Ky)}),joinPredicate:(e,t)=>t.childCount+t.attrs.start===+e[1],editor:this.editor})),[i]}}),gO=bi.create({name:"paragraph",priority:1e3,addOptions(){return{HTMLAttributes:{}}},group:"block",content:"inline*",parseHTML(){return[{tag:"p"}]},renderHTML({HTMLAttributes:i}){return["p",en(this.options.HTMLAttributes,i),0]},addCommands(){return{setParagraph:()=>({commands:i})=>i.setNode(this.name)}},addKeyboardShortcuts(){return{"Mod-Alt-0":()=>this.editor.commands.setParagraph()}}}),mO=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))$/,xO=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))/g,bO=Di.create({name:"strike",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"s"},{tag:"del"},{tag:"strike"},{style:"text-decoration",consuming:!1,getAttrs:i=>i.includes("line-through")?{}:!1}]},renderHTML({HTMLAttributes:i}){return["s",en(this.options.HTMLAttributes,i),0]},addCommands(){return{setStrike:()=>({commands:i})=>i.setMark(this.name),toggleStrike:()=>({commands:i})=>i.toggleMark(this.name),unsetStrike:()=>({commands:i})=>i.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-s":()=>this.editor.commands.toggleStrike()}},addInputRules(){return[ao({find:mO,type:this.type})]},addPasteRules(){return[ms({find:xO,type:this.type})]}}),yO=bi.create({name:"text",group:"inline"}),vO=kn.create({name:"starterKit",addExtensions(){const i=[];return this.options.bold!==!1&&i.push(TE.configure(this.options.bold)),this.options.blockquote!==!1&&i.push(kE.configure(this.options.blockquote)),this.options.bulletList!==!1&&i.push(OE.configure(this.options.bulletList)),this.options.code!==!1&&i.push(LE.configure(this.options.code)),this.options.codeBlock!==!1&&i.push(NE.configure(this.options.codeBlock)),this.options.document!==!1&&i.push(_E.configure(this.options.document)),this.options.dropcursor!==!1&&i.push(BE.configure(this.options.dropcursor)),this.options.gapcursor!==!1&&i.push(GE.configure(this.options.gapcursor)),this.options.hardBreak!==!1&&i.push(qE.configure(this.options.hardBreak)),this.options.heading!==!1&&i.push(UE.configure(this.options.heading)),this.options.history!==!1&&i.push(sO.configure(this.options.history)),this.options.horizontalRule!==!1&&i.push(oO.configure(this.options.horizontalRule)),this.options.italic!==!1&&i.push(uO.configure(this.options.italic)),this.options.listItem!==!1&&i.push(dO.configure(this.options.listItem)),this.options.orderedList!==!1&&i.push(pO.configure(this.options.orderedList)),this.options.paragraph!==!1&&i.push(gO.configure(this.options.paragraph)),this.options.strike!==!1&&i.push(bO.configure(this.options.strike)),this.options.text!==!1&&i.push(yO.configure(this.options.text)),i}}),wO="aaa1rp3bb0ott3vie4c1le2ogado5udhabi7c0ademy5centure6ountant0s9o1tor4d0s1ult4e0g1ro2tna4f0l1rica5g0akhan5ency5i0g1rbus3force5tel5kdn3l0ibaba4pay4lfinanz6state5y2sace3tom5m0azon4ericanexpress7family11x2fam3ica3sterdam8nalytics7droid5quan4z2o0l2partments8p0le4q0uarelle8r0ab1mco4chi3my2pa2t0e3s0da2ia2sociates9t0hleta5torney7u0ction5di0ble3o3spost5thor3o0s4w0s2x0a2z0ure5ba0by2idu3namex4d1k2r0celona5laycard4s5efoot5gains6seball5ketball8uhaus5yern5b0c1t1va3cg1n2d1e0ats2uty4er2ntley5rlin4st0buy5t2f1g1h0arti5i0ble3d1ke2ng0o3o1z2j1lack0friday9ockbuster8g1omberg7ue3m0s1w2n0pparibas9o0ats3ehringer8fa2m1nd2o0k0ing5sch2tik2on4t1utique6x2r0adesco6idgestone9oadway5ker3ther5ussels7s1t1uild0ers6siness6y1zz3v1w1y1z0h3ca0b1fe2l0l1vinklein9m0era3p2non3petown5ital0one8r0avan4ds2e0er0s4s2sa1e1h1ino4t0ering5holic7ba1n1re3c1d1enter4o1rn3f0a1d2g1h0anel2nel4rity4se2t2eap3intai5ristmas6ome4urch5i0priani6rcle4sco3tadel4i0c2y3k1l0aims4eaning6ick2nic1que6othing5ud3ub0med6m1n1o0ach3des3ffee4llege4ogne5m0mbank4unity6pany2re3uter5sec4ndos3struction8ulting7tact3ractors9oking4l1p2rsica5untry4pon0s4rses6pa2r0edit0card4union9icket5own3s1uise0s6u0isinella9v1w1x1y0mru3ou3z2dad1nce3ta1e1ing3sun4y2clk3ds2e0al0er2s3gree4livery5l1oitte5ta3mocrat6ntal2ist5si0gn4v2hl2iamonds6et2gital5rect0ory7scount3ver5h2y2j1k1m1np2o0cs1tor4g1mains5t1wnload7rive4tv2ubai3nlop4pont4rban5vag2r2z2earth3t2c0o2deka3u0cation8e1g1mail3erck5nergy4gineer0ing9terprises10pson4quipment8r0icsson6ni3s0q1tate5t1u0rovision8s2vents5xchange6pert3osed4ress5traspace10fage2il1rwinds6th3mily4n0s2rm0ers5shion4t3edex3edback6rrari3ero6i0delity5o2lm2nal1nce1ial7re0stone6mdale6sh0ing5t0ness6j1k1lickr3ghts4r2orist4wers5y2m1o0o0d1tball6rd1ex2sale4um3undation8x2r0ee1senius7l1ogans4ntier7tr2ujitsu5n0d2rniture7tbol5yi3ga0l0lery3o1up4me0s3p1rden4y2b0iz3d0n2e0a1nt0ing5orge5f1g0ee3h1i0ft0s3ves2ing5l0ass3e1obal2o4m0ail3bh2o1x2n1odaddy5ld0point6f2o0dyear5g0le4p1t1v2p1q1r0ainger5phics5tis4een3ipe3ocery4up4s1t1u0cci3ge2ide2tars5ru3w1y2hair2mburg5ngout5us3bo2dfc0bank7ealth0care8lp1sinki6re1mes5iphop4samitsu7tachi5v2k0t2m1n1ockey4ldings5iday5medepot5goods5s0ense7nda3rse3spital5t0ing5t0els3mail5use3w2r1sbc3t1u0ghes5yatt3undai7ibm2cbc2e1u2d1e0ee3fm2kano4l1m0amat4db2mo0bilien9n0c1dustries8finiti5o2g1k1stitute6urance4e4t0ernational10uit4vestments10o1piranga7q1r0ish4s0maili5t0anbul7t0au2v3jaguar4va3cb2e0ep2tzt3welry6io2ll2m0p2nj2o0bs1urg4t1y2p0morgan6rs3uegos4niper7kaufen5ddi3e0rryhotels6logistics9properties14fh2g1h1i0a1ds2m1ndle4tchen5wi3m1n1oeln3matsu5sher5p0mg2n2r0d1ed3uokgroup8w1y0oto4z2la0caixa5mborghini8er3ncaster6d0rover6xess5salle5t0ino3robe5w0yer5b1c1ds2ease3clerc5frak4gal2o2xus4gbt3i0dl2fe0insurance9style7ghting6ke2lly3mited4o2ncoln4k2psy3ve1ing5k1lc1p2oan0s3cker3us3l1ndon4tte1o3ve3pl0financial11r1s1t0d0a3u0ndbeck6xe1ury5v1y2ma0drid4if1son4keup4n0agement7go3p1rket0ing3s4riott5shalls7ttel5ba2c0kinsey7d1e0d0ia3et2lbourne7me1orial6n0u2rckmsd7g1h1iami3crosoft7l1ni1t2t0subishi9k1l0b1s2m0a2n1o0bi0le4da2e1i1m1nash3ey2ster5rmon3tgage6scow4to0rcycles9v0ie4p1q1r1s0d2t0n1r2u0seum3ic4v1w1x1y1z2na0b1goya4me2vy3ba2c1e0c1t0bank4flix4work5ustar5w0s2xt0direct7us4f0l2g0o2hk2i0co2ke1on3nja3ssan1y5l1o0kia3rton4w0ruz3tv4p1r0a1w2tt2u1yc2z2obi1server7ffice5kinawa6layan0group9lo3m0ega4ne1g1l0ine5oo2pen3racle3nge4g0anic5igins6saka4tsuka4t2vh3pa0ge2nasonic7ris2s1tners4s1y3y2ccw3e0t2f0izer5g1h0armacy6d1ilips5one2to0graphy6s4ysio5ics1tet2ures6d1n0g1k2oneer5zza4k1l0ace2y0station9umbing5s3m1n0c2ohl2ker3litie5rn2st3r0america6xi3ess3ime3o0d0uctions8f1gressive8mo2perties3y5tection8u0dential9s1t1ub2w0c2y2qa1pon3uebec3st5racing4dio4e0ad1lestate6tor2y4cipes5d0stone5umbrella9hab3ise0n3t2liance6n0t0als5pair3ort3ublican8st0aurant8view0s5xroth6ich0ardli6oh3l1o1p2o0cks3deo3gers4om3s0vp3u0gby3hr2n2w0e2yukyu6sa0arland6fe0ty4kura4le1on3msclub4ung5ndvik0coromant12ofi4p1rl2s1ve2xo3b0i1s2c0b1haeffler7midt4olarships8ol3ule3warz5ience5ot3d1e0arch3t2cure1ity6ek2lect4ner3rvices6ven3w1x0y3fr2g1h0angrila6rp3ell3ia1ksha5oes2p0ping5uji3w3i0lk2na1gles5te3j1k0i0n2y0pe4l0ing4m0art3ile4n0cf3o0ccer3ial4ftbank4ware6hu2lar2utions7ng1y2y2pa0ce3ort2t3r0l2s1t0ada2ples4r1tebank4farm7c0group6ockholm6rage3e3ream4udio2y3yle4u0cks3pplies3y2ort5rf1gery5zuki5v1watch4iss4x1y0dney4stems6z2tab1ipei4lk2obao4rget4tamotors6r2too4x0i3c0i2d0k2eam2ch0nology8l1masek5nnis4va3f1g1h0d1eater2re6iaa2ckets5enda4ps2res2ol4j0maxx4x2k0maxx5l1m0all4n1o0day3kyo3ols3p1ray3shiba5tal3urs3wn2yota3s3r0ade1ing4ining5vel0ers0insurance16ust3v2t1ube2i1nes3shu4v0s2w1z2ua1bank3s2g1k1nicom3versity8o2ol2ps2s1y1z2va0cations7na1guard7c1e0gas3ntures6risign5mgensberater2ung14sicherung10t2g1i0ajes4deo3g1king4llas4n1p1rgin4sa1ion4va1o3laanderen9n1odka3lvo3te1ing3o2yage5u2wales2mart4ter4ng0gou5tch0es6eather0channel12bcam3er2site5d0ding5ibo2r3f1hoswho6ien2ki2lliamhill9n0dows4e1ners6me2olterskluwer11odside6rk0s2ld3w2s1tc1f3xbox3erox4ihuan4n2xx2yz3yachts4hoo3maxun5ndex5e1odobashi7ga2kohama6u0tube6t1un3za0ppos4ra3ero3ip2m1one3uerich6w2",kO="121342632165322333335355455655552435435422463632574574330355524444661154543332344423364211133222221212112052232222232212222223222241112222224322321222",lo=(i,e)=>{for(const t in e)i[t]=e[t];return i},Ud="numeric",Kd="ascii",Jd="alpha",ka="asciinumeric",Sa="alphanumeric",Zd="domain",Zy="emoji",SO="scheme",CO="slashscheme",Qd="whitespace";function AO(i,e){return i in e||(e[i]=[]),e[i]}function bs(i,e,t){e[Ud]&&(e[ka]=!0,e[Sa]=!0),e[Kd]&&(e[ka]=!0,e[Jd]=!0),e[ka]&&(e[Sa]=!0),e[Jd]&&(e[Sa]=!0),e[Sa]&&(e[Zd]=!0),e[Zy]&&(e[Zd]=!0);for(const n in e){const r=AO(n,t);r.indexOf(i)<0&&r.push(i)}}function MO(i,e){const t={};for(const n in e)e[n].indexOf(i)>=0&&(t[n]=!0);return t}function Xn(i=null){this.j={},this.jr=[],this.jd=null,this.t=i}Xn.groups={},Xn.prototype={accepts(){return!!this.t},go(i){const e=this,t=e.j[i];if(t)return t;for(let n=0;n<e.jr.length;n++){const r=e.jr[n][0],s=e.jr[n][1];if(s&&r.test(i))return s}return e.jd},has(i,e=!1){return e?i in this.j:!!this.go(i)},ta(i,e,t,n){for(let r=0;r<i.length;r++)this.tt(i[r],e,t,n)},tr(i,e,t,n){n=n||Xn.groups;let r;return e&&e.j?r=e:(r=new Xn(e),t&&n&&bs(e,t,n)),this.jr.push([i,r]),r},ts(i,e,t,n){let r=this;const s=i.length;if(!s)return r;for(let o=0;o<s-1;o++)r=r.tt(i[o]);return r.tt(i[s-1],e,t,n)},tt(i,e,t,n){n=n||Xn.groups;const r=this;if(e&&e.j)return r.j[i]=e,e;const s=e;let o,a=r.go(i);if(a?(o=new Xn,lo(o.j,a.j),o.jr.push.apply(o.jr,a.jr),o.jd=a.jd,o.t=a.t):o=new Xn,s){if(n)if(o.t&&typeof o.t=="string"){const l=lo(MO(o.t,n),t);bs(s,l,n)}else t&&bs(s,t,n);o.t=s}return r.j[i]=o,o}};const it=(i,e,t,n,r)=>i.ta(e,t,n,r),zt=(i,e,t,n,r)=>i.tr(e,t,n,r),Qy=(i,e,t,n,r)=>i.ts(e,t,n,r),pe=(i,e,t,n,r)=>i.tt(e,t,n,r),nr="WORD",ef="UWORD",ev="ASCIINUMERICAL",tv="ALPHANUMERICAL",Ca="LOCALHOST",tf="TLD",nf="UTLD",Mc="SCHEME",co="SLASH_SCHEME",rf="NUM",sf="WS",of="NL",Aa="OPENBRACE",Ma="CLOSEBRACE",Tc="OPENBRACKET",Ec="CLOSEBRACKET",Oc="OPENPAREN",Ic="CLOSEPAREN",Pc="OPENANGLEBRACKET",Lc="CLOSEANGLEBRACKET",Rc="FULLWIDTHLEFTPAREN",Dc="FULLWIDTHRIGHTPAREN",Nc="LEFTCORNERBRACKET",_c="RIGHTCORNERBRACKET",zc="LEFTWHITECORNERBRACKET",Fc="RIGHTWHITECORNERBRACKET",Bc="FULLWIDTHLESSTHAN",Hc="FULLWIDTHGREATERTHAN",Xc="AMPERSAND",af="APOSTROPHE",Wc="ASTERISK",Lr="AT",Yc="BACKSLASH",jc="BACKTICK",Vc="CARET",Rr="COLON",lf="COMMA",$c="DOLLAR",_i="DOT",Gc="EQUALS",cf="EXCLAMATION",ri="HYPHEN",Ta="PERCENT",qc="PIPE",Uc="PLUS",Kc="POUND",Ea="QUERY",hf="QUOTE",nv="FULLWIDTHMIDDLEDOT",uf="SEMI",zi="SLASH",Oa="TILDE",Jc="UNDERSCORE",iv="EMOJI",Zc="SYM";var rv=Object.freeze({__proto__:null,WORD:nr,UWORD:ef,ASCIINUMERICAL:ev,ALPHANUMERICAL:tv,LOCALHOST:Ca,TLD:tf,UTLD:nf,SCHEME:Mc,SLASH_SCHEME:co,NUM:rf,WS:sf,NL:of,OPENBRACE:Aa,CLOSEBRACE:Ma,OPENBRACKET:Tc,CLOSEBRACKET:Ec,OPENPAREN:Oc,CLOSEPAREN:Ic,OPENANGLEBRACKET:Pc,CLOSEANGLEBRACKET:Lc,FULLWIDTHLEFTPAREN:Rc,FULLWIDTHRIGHTPAREN:Dc,LEFTCORNERBRACKET:Nc,RIGHTCORNERBRACKET:_c,LEFTWHITECORNERBRACKET:zc,RIGHTWHITECORNERBRACKET:Fc,FULLWIDTHLESSTHAN:Bc,FULLWIDTHGREATERTHAN:Hc,AMPERSAND:Xc,APOSTROPHE:af,ASTERISK:Wc,AT:Lr,BACKSLASH:Yc,BACKTICK:jc,CARET:Vc,COLON:Rr,COMMA:lf,DOLLAR:$c,DOT:_i,EQUALS:Gc,EXCLAMATION:cf,HYPHEN:ri,PERCENT:Ta,PIPE:qc,PLUS:Uc,POUND:Kc,QUERY:Ea,QUOTE:hf,FULLWIDTHMIDDLEDOT:nv,SEMI:uf,SLASH:zi,TILDE:Oa,UNDERSCORE:Jc,EMOJI:iv,SYM:Zc});const ir=/[a-z]/,Ia=new RegExp("\\p{L}","u"),df=new RegExp("\\p{Emoji}","u"),rr=/\d/,ff=/\s/,sv="\r",pf=`
    `,TO="",EO="",gf="";let Qc=null,eh=null;function OO(i=[]){const e={};Xn.groups=e;const t=new Xn;Qc==null&&(Qc=av(wO)),eh==null&&(eh=av(kO)),pe(t,"'",af),pe(t,"{",Aa),pe(t,"}",Ma),pe(t,"[",Tc),pe(t,"]",Ec),pe(t,"(",Oc),pe(t,")",Ic),pe(t,"<",Pc),pe(t,">",Lc),pe(t,"",Rc),pe(t,"",Dc),pe(t,"",Nc),pe(t,"",_c),pe(t,"",zc),pe(t,"",Fc),pe(t,"",Bc),pe(t,"",Hc),pe(t,"&",Xc),pe(t,"*",Wc),pe(t,"@",Lr),pe(t,"`",jc),pe(t,"^",Vc),pe(t,":",Rr),pe(t,",",lf),pe(t,"$",$c),pe(t,".",_i),pe(t,"=",Gc),pe(t,"!",cf),pe(t,"-",ri),pe(t,"%",Ta),pe(t,"|",qc),pe(t,"+",Uc),pe(t,"#",Kc),pe(t,"?",Ea),pe(t,'"',hf),pe(t,"/",zi),pe(t,";",uf),pe(t,"~",Oa),pe(t,"_",Jc),pe(t,"\\",Yc),pe(t,"",nv);const n=zt(t,rr,rf,{[Ud]:!0});zt(n,rr,n);const r=zt(n,ir,ev,{[ka]:!0}),s=zt(n,Ia,tv,{[Sa]:!0}),o=zt(t,ir,nr,{[Kd]:!0});zt(o,rr,r),zt(o,ir,o),zt(r,rr,r),zt(r,ir,r);const a=zt(t,Ia,ef,{[Jd]:!0});zt(a,ir),zt(a,rr,s),zt(a,Ia,a),zt(s,rr,s),zt(s,ir),zt(s,Ia,s);const l=pe(t,pf,of,{[Qd]:!0}),c=pe(t,sv,sf,{[Qd]:!0}),h=zt(t,ff,sf,{[Qd]:!0});pe(t,gf,h),pe(c,pf,l),pe(c,gf,h),zt(c,ff,h),pe(h,sv),pe(h,pf),zt(h,ff,h),pe(h,gf,h);const u=zt(t,df,iv,{[Zy]:!0});pe(u,"#"),zt(u,df,u),pe(u,TO,u);const d=pe(u,EO);pe(d,"#"),zt(d,df,u);const f=[[ir,o],[rr,r]],g=[[ir,null],[Ia,a],[rr,s]];for(let m=0;m<Qc.length;m++)Dr(t,Qc[m],tf,nr,f);for(let m=0;m<eh.length;m++)Dr(t,eh[m],nf,ef,g);bs(tf,{tld:!0,ascii:!0},e),bs(nf,{utld:!0,alpha:!0},e),Dr(t,"file",Mc,nr,f),Dr(t,"mailto",Mc,nr,f),Dr(t,"http",co,nr,f),Dr(t,"https",co,nr,f),Dr(t,"ftp",co,nr,f),Dr(t,"ftps",co,nr,f),bs(Mc,{scheme:!0,ascii:!0},e),bs(co,{slashscheme:!0,ascii:!0},e),i=i.sort((m,b)=>m[0]>b[0]?1:-1);for(let m=0;m<i.length;m++){const b=i[m][0],w=i[m][1]?{[SO]:!0}:{[CO]:!0};b.indexOf("-")>=0?w[Zd]=!0:ir.test(b)?rr.test(b)?w[ka]=!0:w[Kd]=!0:w[Ud]=!0,Qy(t,b,b,w)}return Qy(t,"localhost",Ca,{ascii:!0}),t.jd=new Xn(Zc),{start:t,tokens:lo({groups:e},rv)}}function ov(i,e){const t=IO(e.replace(/[A-Z]/g,a=>a.toLowerCase())),n=t.length,r=[];let s=0,o=0;for(;o<n;){let a=i,l=null,c=0,h=null,u=-1,d=-1;for(;o<n&&(l=a.go(t[o]));)a=l,a.accepts()?(u=0,d=0,h=a):u>=0&&(u+=t[o].length,d++),c+=t[o].length,s+=t[o].length,o++;s-=u,o-=d,c-=u,r.push({t:h.t,v:e.slice(s-c,s),s:s-c,e:s})}return r}function IO(i){const e=[],t=i.length;let n=0;for(;n<t;){let r=i.charCodeAt(n),s,o=r<55296||r>56319||n+1===t||(s=i.charCodeAt(n+1))<56320||s>57343?i[n]:i.slice(n,n+2);e.push(o),n+=o.length}return e}function Dr(i,e,t,n,r){let s;const o=e.length;for(let a=0;a<o-1;a++){const l=e[a];i.j[l]?s=i.j[l]:(s=new Xn(n),s.jr=r.slice(),i.j[l]=s),i=s}return s=new Xn(t),s.jr=r.slice(),i.j[e[o-1]]=s,s}function av(i){const e=[],t=[];let n=0,r="0123456789";for(;n<i.length;){let s=0;for(;r.indexOf(i[n+s])>=0;)s++;if(s>0){e.push(t.join(""));for(let o=parseInt(i.substring(n,n+s),10);o>0;o--)t.pop();n+=s}else t.push(i[n]),n++}return e}const Pa={defaultProtocol:"http",events:null,format:lv,formatHref:lv,nl2br:!1,tagName:"a",target:null,rel:null,validate:!0,truncate:1/0,className:null,attributes:null,ignoreTags:[],render:null};function mf(i,e=null){let t=lo({},Pa);i&&(t=lo(t,i instanceof mf?i.o:i));const n=t.ignoreTags,r=[];for(let s=0;s<n.length;s++)r.push(n[s].toUpperCase());this.o=t,e&&(this.defaultRender=e),this.ignoreTags=r}mf.prototype={o:Pa,ignoreTags:[],defaultRender(i){return i},check(i){return this.get("validate",i.toString(),i)},get(i,e,t){const n=e!=null;let r=this.o[i];return r&&(typeof r=="object"?(r=t.t in r?r[t.t]:Pa[i],typeof r=="function"&&n&&(r=r(e,t))):typeof r=="function"&&n&&(r=r(e,t.t,t)),r)},getObj(i,e,t){let n=this.o[i];return typeof n=="function"&&e!=null&&(n=n(e,t.t,t)),n},render(i){const e=i.render(this);return(this.get("render",null,i)||this.defaultRender)(e,i.t,i)}};function lv(i){return i}function cv(i,e){this.t="token",this.v=i,this.tk=e}cv.prototype={isLink:!1,toString(){return this.v},toHref(i){return this.toString()},toFormattedString(i){const e=this.toString(),t=i.get("truncate",e,this),n=i.get("format",e,this);return t&&n.length>t?n.substring(0,t)+"":n},toFormattedHref(i){return i.get("formatHref",this.toHref(i.get("defaultProtocol")),this)},startIndex(){return this.tk[0].s},endIndex(){return this.tk[this.tk.length-1].e},toObject(i=Pa.defaultProtocol){return{type:this.t,value:this.toString(),isLink:this.isLink,href:this.toHref(i),start:this.startIndex(),end:this.endIndex()}},toFormattedObject(i){return{type:this.t,value:this.toFormattedString(i),isLink:this.isLink,href:this.toFormattedHref(i),start:this.startIndex(),end:this.endIndex()}},validate(i){return i.get("validate",this.toString(),this)},render(i){const e=this,t=this.toHref(i.get("defaultProtocol")),n=i.get("formatHref",t,this),r=i.get("tagName",t,e),s=this.toFormattedString(i),o={},a=i.get("className",t,e),l=i.get("target",t,e),c=i.get("rel",t,e),h=i.getObj("attributes",t,e),u=i.getObj("events",t,e);return o.href=n,a&&(o.class=a),l&&(o.target=l),c&&(o.rel=c),h&&lo(o,h),{tagName:r,attributes:o,content:s,eventListeners:u}}};function th(i,e){class t extends cv{constructor(r,s){super(r,s),this.t=i}}for(const n in e)t.prototype[n]=e[n];return t.t=i,t}const hv=th("email",{isLink:!0,toHref(){return"mailto:"+this.toString()}}),uv=th("text"),PO=th("nl"),nh=th("url",{isLink:!0,toHref(i=Pa.defaultProtocol){return this.hasProtocol()?this.v:`${i}://${this.v}`},hasProtocol(){const i=this.tk;return i.length>=2&&i[0].t!==Ca&&i[1].t===Rr}}),si=i=>new Xn(i);function LO({groups:i}){const e=i.domain.concat([Xc,Wc,Lr,Yc,jc,Vc,$c,Gc,ri,rf,Ta,qc,Uc,Kc,zi,Zc,Oa,Jc]),t=[Rr,lf,_i,cf,Ta,Ea,hf,uf,Pc,Lc,Aa,Ma,Ec,Tc,Oc,Ic,Rc,Dc,Nc,_c,zc,Fc,Bc,Hc],n=[Xc,af,Wc,Yc,jc,Vc,$c,Gc,ri,Aa,Ma,Ta,qc,Uc,Kc,Ea,zi,Zc,Oa,Jc],r=si(),s=pe(r,Oa);it(s,n,s),it(s,i.domain,s);const o=si(),a=si(),l=si();it(r,i.domain,o),it(r,i.scheme,a),it(r,i.slashscheme,l),it(o,n,s),it(o,i.domain,o);const c=pe(o,Lr);pe(s,Lr,c),pe(a,Lr,c),pe(l,Lr,c);const h=pe(s,_i);it(h,n,s),it(h,i.domain,s);const u=si();it(c,i.domain,u),it(u,i.domain,u);const d=pe(u,_i);it(d,i.domain,u);const f=si(hv);it(d,i.tld,f),it(d,i.utld,f),pe(c,Ca,f);const g=pe(u,ri);pe(g,ri,g),it(g,i.domain,u),it(f,i.domain,u),pe(f,_i,d),pe(f,ri,g);const m=pe(f,Rr);it(m,i.numeric,hv);const b=pe(o,ri),y=pe(o,_i);pe(b,ri,b),it(b,i.domain,o),it(y,n,s),it(y,i.domain,o);const w=si(nh);it(y,i.tld,w),it(y,i.utld,w),it(w,i.domain,o),it(w,n,s),pe(w,_i,y),pe(w,ri,b),pe(w,Lr,c);const C=pe(w,Rr),M=si(nh);it(C,i.numeric,M);const S=si(nh),O=si();it(S,e,S),it(S,t,O),it(O,e,S),it(O,t,O),pe(w,zi,S),pe(M,zi,S);const T=pe(a,Rr),I=pe(l,Rr),R=pe(I,zi),z=pe(R,zi);it(a,i.domain,o),pe(a,_i,y),pe(a,ri,b),it(l,i.domain,o),pe(l,_i,y),pe(l,ri,b),it(T,i.domain,S),pe(T,zi,S),pe(T,Ea,S),it(z,i.domain,S),it(z,e,S),pe(z,zi,S);const D=[[Aa,Ma],[Tc,Ec],[Oc,Ic],[Pc,Lc],[Rc,Dc],[Nc,_c],[zc,Fc],[Bc,Hc]];for(let B=0;B<D.length;B++){const[K,J]=D[B],se=pe(S,K);pe(O,K,se),pe(se,J,S);const ne=si(nh);it(se,e,ne);const ie=si();it(se,t),it(ne,e,ne),it(ne,t,ie),it(ie,e,ne),it(ie,t,ie),pe(ne,J,S),pe(ie,J,S)}return pe(r,Ca,w),pe(r,of,PO),{start:r,tokens:rv}}function RO(i,e,t){let n=t.length,r=0,s=[],o=[];for(;r<n;){let a=i,l=null,c=null,h=0,u=null,d=-1;for(;r<n&&!(l=a.go(t[r].t));)o.push(t[r++]);for(;r<n&&(c=l||a.go(t[r].t));)l=null,a=c,a.accepts()?(d=0,u=a):d>=0&&d++,r++,h++;if(d<0)r-=h,r<n&&(o.push(t[r]),r++);else{o.length>0&&(s.push(xf(uv,e,o)),o=[]),r-=d,h-=d;const f=u.t,g=t.slice(r-h,r);s.push(xf(f,e,g))}}return o.length>0&&s.push(xf(uv,e,o)),s}function xf(i,e,t){const n=t[0].s,r=t[t.length-1].e,s=e.slice(n,r);return new i(s,t)}const DO=typeof console<"u"&&console&&console.warn||(()=>{}),NO="until manual call of linkify.init(). Register all schemes and plugins before invoking linkify the first time.",Pt={scanner:null,parser:null,tokenQueue:[],pluginQueue:[],customSchemes:[],initialized:!1};function _O(){return Xn.groups={},Pt.scanner=null,Pt.parser=null,Pt.tokenQueue=[],Pt.pluginQueue=[],Pt.customSchemes=[],Pt.initialized=!1,Pt}function dv(i,e=!1){if(Pt.initialized&&DO(`linkifyjs: already initialized - will not register custom scheme "${i}" ${NO}`),!/^[0-9a-z]+(-[0-9a-z]+)*$/.test(i))throw new Error(`linkifyjs: incorrect scheme format.
    1. Must only contain digits, lowercase ASCII letters or "-"
    2. Cannot start or end with "-"
    3. "-" cannot repeat`);Pt.customSchemes.push([i,e])}function zO(){Pt.scanner=OO(Pt.customSchemes);for(let i=0;i<Pt.tokenQueue.length;i++)Pt.tokenQueue[i][1]({scanner:Pt.scanner});Pt.parser=LO(Pt.scanner.tokens);for(let i=0;i<Pt.pluginQueue.length;i++)Pt.pluginQueue[i][1]({scanner:Pt.scanner,parser:Pt.parser});return Pt.initialized=!0,Pt}function bf(i){return Pt.initialized||zO(),RO(Pt.parser.start,i,ov(Pt.scanner.start,i))}bf.scan=ov;function fv(i,e=null,t=null){if(e&&typeof e=="object"){if(t)throw Error(`linkifyjs: Invalid link type ${e}; must be a string`);t=e,e=null}const n=new mf(t),r=bf(i),s=[];for(let o=0;o<r.length;o++){const a=r[o];a.isLink&&(!e||a.t===e)&&n.check(a)&&s.push(a.toFormattedObject(n))}return s}function FO(i){return i.length===1?i[0].isLink:i.length===3&&i[1].isLink?["()","[]"].includes(i[0].value+i[2].value):!1}function BO(i){return new an({key:new Un("autolink"),appendTransaction:(e,t,n)=>{const r=e.some(c=>c.docChanged)&&!t.doc.eq(n.doc),s=e.some(c=>c.getMeta("preventAutolink"));if(!r||s)return;const{tr:o}=n,a=HT(t.doc,[...e]);if(qT(a).forEach(({newRange:c})=>{const h=WT(n.doc,c,f=>f.isTextblock);let u,d;if(h.length>1?(u=h[0],d=n.doc.textBetween(u.pos,u.pos+u.node.nodeSize,void 0," ")):h.length&&n.doc.textBetween(c.from,c.to," "," ").endsWith(" ")&&(u=h[0],d=n.doc.textBetween(u.pos,c.to,void 0," ")),u&&d){const f=d.split(" ").filter(y=>y!=="");if(f.length<=0)return!1;const g=f[f.length-1],m=u.pos+d.lastIndexOf(g);if(!g)return!1;const b=bf(g).map(y=>y.toObject(i.defaultProtocol));if(!FO(b))return!1;b.filter(y=>y.isLink).map(y=>({...y,from:m+y.start+1,to:m+y.end+1})).filter(y=>n.schema.marks.code?!n.doc.rangeHasMark(y.from,y.to,n.schema.marks.code):!0).filter(y=>i.validate(y.value)).filter(y=>i.shouldAutoLink(y.value)).forEach(y=>{Hd(y.from,y.to,n.doc).some(w=>w.mark.type===i.type)||o.addMark(y.from,y.to,i.type.create({href:y.href}))})}}),!!o.steps.length)return o}})}function HO(i){return new an({key:new Un("handleClickLink"),props:{handleClick:(e,t,n)=>{var r,s;if(n.button!==0||!e.editable)return!1;let o=n.target;const a=[];for(;o.nodeName!=="DIV";)a.push(o),o=o.parentNode;if(!a.find(d=>d.nodeName==="A"))return!1;const l=Fy(e.state,i.type.name),c=n.target,h=(r=c==null?void 0:c.href)!==null&&r!==void 0?r:l.href,u=(s=c==null?void 0:c.target)!==null&&s!==void 0?s:l.target;return c&&h?(window.open(h,u),!0):!1}}})}function XO(i){return new an({key:new Un("handlePasteLink"),props:{handlePaste:(e,t,n)=>{const{state:r}=e,{selection:s}=r,{empty:o}=s;if(o)return!1;let a="";n.content.forEach(c=>{a+=c.textContent});const l=fv(a,{defaultProtocol:i.defaultProtocol}).find(c=>c.isLink&&c.value===a);return!a||!l?!1:i.editor.commands.setMark(i.type,{href:l.href})}}})}const WO=/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g;function ys(i,e){const t=["http","https","ftp","ftps","mailto","tel","callto","sms","cid","xmpp"];return e&&e.forEach(n=>{const r=typeof n=="string"?n:n.scheme;r&&t.push(r)}),!i||i.replace(WO,"").match(new RegExp(`^(?:(?:${t.join("|")}):|[^a-z]|[a-z0-9+.-]+(?:[^a-z+.-:]|$))`,"i"))}const YO=Di.create({name:"link",priority:1e3,keepOnSplit:!1,exitable:!0,onCreate(){this.options.validate&&!this.options.shouldAutoLink&&(this.options.shouldAutoLink=this.options.validate,console.warn("The `validate` option is deprecated. Rename to the `shouldAutoLink` option instead.")),this.options.protocols.forEach(i=>{if(typeof i=="string"){dv(i);return}dv(i.scheme,i.optionalSlashes)})},onDestroy(){_O()},inclusive(){return this.options.autolink},addOptions(){return{openOnClick:!0,linkOnPaste:!0,autolink:!0,protocols:[],defaultProtocol:"http",HTMLAttributes:{target:"_blank",rel:"noopener noreferrer nofollow",class:null},isAllowedUri:(i,e)=>!!ys(i,e.protocols),validate:i=>!!i,shouldAutoLink:i=>!!i}},addAttributes(){return{href:{default:null,parseHTML(i){return i.getAttribute("href")}},target:{default:this.options.HTMLAttributes.target},rel:{default:this.options.HTMLAttributes.rel},class:{default:this.options.HTMLAttributes.class}}},parseHTML(){return[{tag:"a[href]",getAttrs:i=>{const e=i.getAttribute("href");return!e||!this.options.isAllowedUri(e,{defaultValidate:t=>!!ys(t,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?!1:null}}]},renderHTML({HTMLAttributes:i}){return this.options.isAllowedUri(i.href,{defaultValidate:e=>!!ys(e,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?["a",en(this.options.HTMLAttributes,i),0]:["a",en(this.options.HTMLAttributes,{...i,href:""}),0]},addCommands(){return{setLink:i=>({chain:e})=>{const{href:t}=i;return this.options.isAllowedUri(t,{defaultValidate:n=>!!ys(n,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?e().setMark(this.name,i).setMeta("preventAutolink",!0).run():!1},toggleLink:i=>({chain:e})=>{const{href:t}=i;return this.options.isAllowedUri(t,{defaultValidate:n=>!!ys(n,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?e().toggleMark(this.name,i,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run():!1},unsetLink:()=>({chain:i})=>i().unsetMark(this.name,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run()}},addPasteRules(){return[ms({find:i=>{const e=[];if(i){const{protocols:t,defaultProtocol:n}=this.options,r=fv(i).filter(s=>s.isLink&&this.options.isAllowedUri(s.value,{defaultValidate:o=>!!ys(o,t),protocols:t,defaultProtocol:n}));r.length&&r.forEach(s=>e.push({text:s.value,data:{href:s.href},index:s.start}))}return e},type:this.type,getAttributes:i=>{var e;return{href:(e=i.data)===null||e===void 0?void 0:e.href}}})]},addProseMirrorPlugins(){const i=[],{protocols:e,defaultProtocol:t}=this.options;return this.options.autolink&&i.push(BO({type:this.type,defaultProtocol:this.options.defaultProtocol,validate:n=>this.options.isAllowedUri(n,{defaultValidate:r=>!!ys(r,e),protocols:e,defaultProtocol:t}),shouldAutoLink:this.options.shouldAutoLink})),this.options.openOnClick===!0&&i.push(HO({type:this.type})),this.options.linkOnPaste&&i.push(XO({editor:this.editor,defaultProtocol:this.options.defaultProtocol,type:this.type})),i}}),jO=kn.create({name:"textAlign",addOptions(){return{types:[],alignments:["left","center","right","justify"],defaultAlignment:null}},addGlobalAttributes(){return[{types:this.options.types,attributes:{textAlign:{default:this.options.defaultAlignment,parseHTML:i=>{const e=i.style.textAlign;return this.options.alignments.includes(e)?e:this.options.defaultAlignment},renderHTML:i=>i.textAlign?{style:`text-align: ${i.textAlign}`}:{}}}}]},addCommands(){return{setTextAlign:i=>({commands:e})=>this.options.alignments.includes(i)?this.options.types.map(t=>e.updateAttributes(t,{textAlign:i})).every(t=>t):!1,unsetTextAlign:()=>({commands:i})=>this.options.types.map(e=>i.resetAttributes(e,"textAlign")).every(e=>e)}},addKeyboardShortcuts(){return{"Mod-Shift-l":()=>this.editor.commands.setTextAlign("left"),"Mod-Shift-e":()=>this.editor.commands.setTextAlign("center"),"Mod-Shift-r":()=>this.editor.commands.setTextAlign("right"),"Mod-Shift-j":()=>this.editor.commands.setTextAlign("justify")}}}),VO=Di.create({name:"underline",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"u"},{style:"text-decoration",consuming:!1,getAttrs:i=>i.includes("underline")?{}:!1}]},renderHTML({HTMLAttributes:i}){return["u",en(this.options.HTMLAttributes,i),0]},addCommands(){return{setUnderline:()=>({commands:i})=>i.setMark(this.name),toggleUnderline:()=>({commands:i})=>i.toggleMark(this.name),unsetUnderline:()=>({commands:i})=>i.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-u":()=>this.editor.commands.toggleUnderline(),"Mod-U":()=>this.editor.commands.toggleUnderline()}}});function $O(i){const e=[],t=o=>{const a=[],l=/\[style type="(bold|italic|underlined|linethrough)"\](.*?)\[\/style\]|\[link href="(.*?)"\](.*?)\[\/link\]/gs;let c,h=0;for(;(c=l.exec(o))!==null;){if(c.index>h&&a.push(...n(o.slice(h,c.index))),c[1]){const u=c[1],d=c[2],f=[];u==="bold"&&f.push({type:"bold"}),u==="italic"&&f.push({type:"italic"}),u==="underlined"&&f.push({type:"underline"}),u==="linethrough"&&f.push({type:"strike"}),a.push(...n(d,f))}else if(c[3]){const u=c[3],d=c[4];a.push(...n(d,[{type:"link",attrs:{href:u}}]))}h=l.lastIndex}return h<o.length&&a.push(...n(o.slice(h))),a},n=(o,a=[])=>{const l=o.split(`
    `),c=[];return l.forEach((h,u)=>{h.length>0&&c.push({type:"text",text:h,...a.length>0?{marks:a}:{}}),u<l.length-1&&c.push({type:"hardBreak"})}),c},r=/\[align type="(left|center|right)"\](.*?)\[\/align\]/gs;return i.split(/\n{2,}/).forEach(o=>{let a,l=0;for(;(a=r.exec(o))!==null;){if(a.index>l){const u=o.slice(l,a.index).trim();u&&e.push({type:"paragraph",content:t(u)})}const c=a[1],h=a[2].trim();e.push({type:"paragraph",attrs:{textAlign:c},content:t(h)}),l=r.lastIndex}if(l<o.length){const c=o.slice(l).trim();c&&e.push({type:"paragraph",content:t(c)})}}),{type:"doc",content:e}}function GO(i){const e=n=>{if(n.type==="text"){let r=n.text||"";return n.marks&&n.marks.forEach(s=>{var o;s.type==="bold"?r=`[style type="bold"]${r}[/style]`:s.type==="italic"?r=`[style type="italic"]${r}[/style]`:s.type==="underline"?r=`[style type="underlined"]${r}[/style]`:s.type==="strike"?r=`[style type="linethrough"]${r}[/style]`:s.type==="link"&&((o=s.attrs)!=null&&o.href)&&(r=`[link href="${s.attrs.href}"]${r}[/link]`)}),r}return""},t=n=>{var r,s;if(n.type==="paragraph"){let o="";return(r=n.attrs)!=null&&r.textAlign&&(o+=`[align type="${n.attrs.textAlign}"]`),n.content&&n.content.forEach(a=>{o+=e(a)}),(s=n.attrs)!=null&&s.textAlign&&(o+="[/align]"),o}return""};return i.map(n=>t(n)).join(`
    
    `)}const qO={class:"flex flex-col gap-2"},UO={class:"editor-screen"},KO={class:"toolbar"},JO=["disabled"],ZO=["disabled"],QO=["disabled"],eI=["disabled"],tI=["disabled"],nI=["disabled"],iI=["disabled"],rI=["disabled"],sI=["disabled"],oI={class:"editor-footer"},aI={class:"flex gap-1"},lI={class:"flex gap-1"},cI={key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center"},hI={class:"bg-white p-4 rounded shadow max-w-sm w-full space-y-2"},uI={class:"flex justify-end gap-2"},dI=Ml({__name:"Editor",setup(i,{expose:e}){const t=mn(),n=mn(),r=mn(null),s=mn("edit"),o=mn(!1),a=mn(""),l=mn(""),c=Du(()=>{var m;return new Intl.NumberFormat("de-DE").format(((m=r.value)==null?void 0:m.getText().length)??0)}),h=Du(()=>{var y;const b=(((y=r.value)==null?void 0:y.getText())??"").replace(/[^\p{L}\p{N}'-]+/gu," ").trim();return new Intl.NumberFormat("de-DE").format(b.split(/\s+/).filter(w=>w.length>0).length)});Ol(()=>{r.value=new yE({extensions:[vO,VO,YO.configure({openOnClick:!1}),jO.configure({types:["heading","paragraph"],alignments:["left","center","right"]})],content:"",onUpdate:d,onBlur:d})});async function u(m){t.value=m,await wl(),r.value&&(r.value.commands.setContent($O(m.value)),n.value&&n.value.append(m))}function d(){!t.value||!r.value||(t.value.value=GO(r.value.getJSON().content||[]))}function f(){if(!r.value)return;const{state:m,view:b}=r.value,{selection:y}=m,{from:w,to:C,empty:M}=y;if(a.value="",l.value="",r.value.isActive("link")){let S=!1;m.doc.nodesBetween(w,C,(O,T,I,R)=>{const z=O.marks.find(D=>D.type.name==="link");if(!z)return!0;if(a.value=z.attrs.href||"",l.value=O.text||"",M&&O.isText){const D=T,B=T+O.nodeSize,K=m.tr.setSelection(Ve.create(m.doc,D,B));b.dispatch(K),b.focus()}return S=!0,!1}),!S&&!M&&(l.value=m.doc.textBetween(w,C).trim())}else M||(l.value=m.doc.textBetween(w,C).trim());o.value=!0}function g(){r.value&&(r.value.chain().focus().insertContent(`<a href="${a.value}">${l.value}</a>`).run(),o.value=!1)}return e({setTextarea:u}),(m,b)=>(Xt(),xn("div",qO,[It("div",UO,[It("div",KO,[r.value?(Xt(),xn("button",{key:0,type:"button",onClick:b[0]||(b[0]=y=>r.value.chain().focus().setTextAlign("left").run()),disabled:s.value=="code"||!r.value.can().chain().focus().setTextAlign("left").run(),class:Tn({"toolbar-button":!0,"is-active":r.value.isActive("left")})},[Nt(On(wS),{class:"w-4 h-4"})],10,JO)):bn("",!0),r.value?(Xt(),xn("button",{key:1,type:"button",onClick:b[1]||(b[1]=y=>r.value.chain().focus().setTextAlign("center").run()),disabled:s.value=="code"||!r.value.can().chain().focus().setTextAlign("center").run(),class:Tn({"toolbar-button":!0,"is-active":r.value.isActive("center")})},[Nt(On(vS),{class:"w-4 h-4"})],10,ZO)):bn("",!0),r.value?(Xt(),xn("button",{key:2,type:"button",onClick:b[2]||(b[2]=y=>r.value.chain().focus().setTextAlign("right").run()),disabled:s.value=="code"||!r.value.can().chain().focus().setTextAlign("right").run(),class:Tn({"toolbar-button":!0,"is-active":r.value.isActive("right")})},[Nt(On(kS),{class:"w-4 h-4"})],10,QO)):bn("",!0),b[12]||(b[12]=It("span",{class:"toolbar-separator"},null,-1)),r.value?(Xt(),xn("button",{key:3,type:"button",onClick:b[3]||(b[3]=y=>r.value.chain().focus().toggleBold().run()),disabled:s.value=="code"||!r.value.can().chain().focus().toggleBold().run(),class:Tn({"toolbar-button":!0,"is-active":r.value.isActive("bold")})},[Nt(On(SS),{class:"w-4 h-4"})],10,eI)):bn("",!0),r.value?(Xt(),xn("button",{key:4,type:"button",onClick:b[4]||(b[4]=y=>r.value.chain().focus().toggleItalic().run()),disabled:s.value=="code"||!r.value.can().chain().focus().toggleItalic().run(),class:Tn({"toolbar-button":!0,"is-active":r.value.isActive("italic")})},[Nt(On(AS),{class:"w-4 h-4"})],10,tI)):bn("",!0),r.value?(Xt(),xn("button",{key:5,type:"button",onClick:b[5]||(b[5]=y=>r.value.chain().focus().toggleUnderline().run()),disabled:s.value=="code"||!r.value.can().chain().focus().toggleUnderline().run(),class:Tn({"toolbar-button":!0,"is-active":r.value.isActive("underline")})},[Nt(On(IS),{class:"w-4 h-4"})],10,nI)):bn("",!0),r.value?(Xt(),xn("button",{key:6,type:"button",onClick:b[6]||(b[6]=y=>r.value.chain().focus().toggleStrike().run()),disabled:s.value=="code"||!r.value.can().chain().focus().toggleStrike().run(),class:Tn({"toolbar-button":!0,"is-active":r.value.isActive("strike")})},[Nt(On(OS),{class:"w-4 h-4"})],10,iI)):bn("",!0),b[13]||(b[13]=It("span",{class:"toolbar-separator"},null,-1)),r.value?(Xt(),xn("button",{key:7,type:"button",onClick:f,disabled:s.value=="code",class:Tn({"toolbar-button":!0,"is-active":r.value.isActive("link")})},[Nt(On(TS),{class:"w-4 h-4"})],10,rI)):bn("",!0),r.value?(Xt(),xn("button",{key:8,type:"button",onClick:b[7]||(b[7]=y=>r.value.chain().focus().unsetLink().run()),disabled:s.value=="code"||!r.value.isActive("link"),class:Tn({"toolbar-button":!0})},[Nt(On(MS),{class:"w-4 h-4"})],8,sI)):bn("",!0),b[14]||(b[14]=It("span",{class:"ml-auto"},null,-1)),r.value?(Xt(),xn("button",{key:9,type:"button",class:"toolbar-button",onClick:b[8]||(b[8]=y=>s.value=s.value=="edit"?"code":"edit")},[s.value=="code"?(Xt(),Ko(On(ES),{key:0,class:"w-4 h-4"})):s.value=="edit"?(Xt(),Ko(On(CS),{key:1,class:"w-4 h-4"})):bn("",!0)])):bn("",!0)]),It("div",{class:Tn(["editor-content",{"is-visible":s.value=="edit"}])},[r.value?(Xt(),Ko(On(vE),{key:0,editor:r.value,class:"prose max-w-none"},null,8,["editor"])):bn("",!0)],2),It("div",{ref_key:"source",ref:n,class:Tn(["editor-source",{"is-visible":s.value=="code"}])},null,2),It("div",oI,[It("div",aI,[b[15]||(b[15]=It("strong",null,"Zeichen",-1)),Zo(" "+ll(c.value),1)]),It("div",lI,[b[16]||(b[16]=It("strong",null,"Wrter",-1)),Zo(" "+ll(h.value),1)])])]),o.value?(Xt(),xn("div",cI,[It("div",hI,[It("label",null,[b[17]||(b[17]=Zo(" URL: ")),Wg(It("input",{"onUpdate:modelValue":b[9]||(b[9]=y=>a.value=y),class:"border p-1 w-full"},null,512),[[qm,a.value]])]),It("label",null,[b[18]||(b[18]=Zo(" Link-Text: ")),Wg(It("input",{"onUpdate:modelValue":b[10]||(b[10]=y=>l.value=y),class:"border p-1 w-full"},null,512),[[qm,l.value]])]),It("div",uI,[It("button",{type:"button",onClick:g,class:"bg-blue-500 text-white px-3 py-1 rounded"},"Einfgen"),It("button",{type:"button",onClick:b[11]||(b[11]=y=>o.value=!1),class:"px-3 py-1"},"Abbrechen")])])])):bn("",!0)]))}}),pv=(i,e)=>{const t=i.__vccOpts||i;for(const[n,r]of e)t[n]=r;return t},fI=pv(dI,[["__scopeId","data-v-19ac82d7"]]);function gv(i){if(typeof i>"u")return new Promise(e=>gv(e.bind(null,null)));document.readyState==="loading"?document.addEventListener("DOMContentLoaded",i):i.call(document)}var pI=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function gI(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var ih={exports:{}},mI=ih.exports,mv;function xI(){return mv||(mv=1,function(i,e){(function(t,n){i.exports=n()})(mI,function(){var t=function(p,x){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(v,k){v.__proto__=k}||function(v,k){for(var A in k)Object.prototype.hasOwnProperty.call(k,A)&&(v[A]=k[A])})(p,x)},n=function(){return(n=Object.assign||function(p){for(var x,v=1,k=arguments.length;v<k;v++)for(var A in x=arguments[v])Object.prototype.hasOwnProperty.call(x,A)&&(p[A]=x[A]);return p}).apply(this,arguments)};function r(p,x,v){for(var k,A=0,E=x.length;A<E;A++)!k&&A in x||((k=k||Array.prototype.slice.call(x,0,A))[A]=x[A]);return p.concat(k||Array.prototype.slice.call(x))}var s=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:pI,o=Object.keys,a=Array.isArray;function l(p,x){return typeof x!="object"||o(x).forEach(function(v){p[v]=x[v]}),p}typeof Promise>"u"||s.Promise||(s.Promise=Promise);var c=Object.getPrototypeOf,h={}.hasOwnProperty;function u(p,x){return h.call(p,x)}function d(p,x){typeof x=="function"&&(x=x(c(p))),(typeof Reflect>"u"?o:Reflect.ownKeys)(x).forEach(function(v){g(p,v,x[v])})}var f=Object.defineProperty;function g(p,x,v,k){f(p,x,l(v&&u(v,"get")&&typeof v.get=="function"?{get:v.get,set:v.set,configurable:!0}:{value:v,configurable:!0,writable:!0},k))}function m(p){return{from:function(x){return p.prototype=Object.create(x.prototype),g(p.prototype,"constructor",p),{extend:d.bind(null,p.prototype)}}}}var b=Object.getOwnPropertyDescriptor,y=[].slice;function w(p,x,v){return y.call(p,x,v)}function C(p,x){return x(p)}function M(p){if(!p)throw new Error("Assertion Failed")}function S(p){s.setImmediate?setImmediate(p):setTimeout(p,0)}function O(p,x){if(typeof x=="string"&&u(p,x))return p[x];if(!x)return p;if(typeof x!="string"){for(var v=[],k=0,A=x.length;k<A;++k){var E=O(p,x[k]);v.push(E)}return v}var P=x.indexOf(".");if(P!==-1){var N=p[x.substr(0,P)];return N==null?void 0:O(N,x.substr(P+1))}}function T(p,x,v){if(p&&x!==void 0&&!("isFrozen"in Object&&Object.isFrozen(p)))if(typeof x!="string"&&"length"in x){M(typeof v!="string"&&"length"in v);for(var k=0,A=x.length;k<A;++k)T(p,x[k],v[k])}else{var E,P,N=x.indexOf(".");N!==-1?(E=x.substr(0,N),(P=x.substr(N+1))===""?v===void 0?a(p)&&!isNaN(parseInt(E))?p.splice(E,1):delete p[E]:p[E]=v:T(N=!(N=p[E])||!u(p,E)?p[E]={}:N,P,v)):v===void 0?a(p)&&!isNaN(parseInt(x))?p.splice(x,1):delete p[x]:p[x]=v}}function I(p){var x,v={};for(x in p)u(p,x)&&(v[x]=p[x]);return v}var R=[].concat;function z(p){return R.apply([],p)}var We="BigUint64Array,BigInt64Array,Array,Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,FileSystemDirectoryHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(z([8,16,32,64].map(function(p){return["Int","Uint","Float"].map(function(x){return x+p+"Array"})}))).filter(function(p){return s[p]}),D=new Set(We.map(function(p){return s[p]})),B=null;function K(p){return B=new WeakMap,p=function x(v){if(!v||typeof v!="object")return v;var k=B.get(v);if(k)return k;if(a(v)){k=[],B.set(v,k);for(var A=0,E=v.length;A<E;++A)k.push(x(v[A]))}else if(D.has(v.constructor))k=v;else{var P,N=c(v);for(P in k=N===Object.prototype?{}:Object.create(N),B.set(v,k),v)u(v,P)&&(k[P]=x(v[P]))}return k}(p),B=null,p}var J={}.toString;function se(p){return J.call(p).slice(8,-1)}var ne=typeof Symbol<"u"?Symbol.iterator:"@@iterator",ie=typeof ne=="symbol"?function(p){var x;return p!=null&&(x=p[ne])&&x.apply(p)}:function(){return null};function ae(p,x){return x=p.indexOf(x),0<=x&&p.splice(x,1),0<=x}var Me={};function Re(p){var x,v,k,A;if(arguments.length===1){if(a(p))return p.slice();if(this===Me&&typeof p=="string")return[p];if(A=ie(p)){for(v=[];!(k=A.next()).done;)v.push(k.value);return v}if(p==null)return[p];if(typeof(x=p.length)!="number")return[p];for(v=new Array(x);x--;)v[x]=p[x];return v}for(x=arguments.length,v=new Array(x);x--;)v[x]=arguments[x];return v}var _e=typeof Symbol<"u"?function(p){return p[Symbol.toStringTag]==="AsyncFunction"}:function(){return!1},ze=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],hi=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat(ze),Je={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function rt(p,x){this.name=p,this.message=x}function Ge(p,x){return p+". Errors: "+Object.keys(x).map(function(v){return x[v].toString()}).filter(function(v,k,A){return A.indexOf(v)===k}).join(`
    `)}function Mt(p,x,v,k){this.failures=x,this.failedKeys=k,this.successCount=v,this.message=Ge(p,x)}function Ue(p,x){this.name="BulkError",this.failures=Object.keys(x).map(function(v){return x[v]}),this.failuresByPos=x,this.message=Ge(p,this.failures)}m(rt).from(Error).extend({toString:function(){return this.name+": "+this.message}}),m(Mt).from(rt),m(Ue).from(rt);var $e=hi.reduce(function(p,x){return p[x]=x+"Error",p},{}),ot=rt,Ce=hi.reduce(function(p,x){var v=x+"Error";function k(A,E){this.name=v,A?typeof A=="string"?(this.message="".concat(A).concat(E?`
     `+E:""),this.inner=E||null):typeof A=="object"&&(this.message="".concat(A.name," ").concat(A.message),this.inner=A):(this.message=Je[x]||v,this.inner=null)}return m(k).from(ot),p[x]=k,p},{});Ce.Syntax=SyntaxError,Ce.Type=TypeError,Ce.Range=RangeError;var Tt=ze.reduce(function(p,x){return p[x+"Error"]=Ce[x],p},{}),Et=hi.reduce(function(p,x){return["Syntax","Type","Range"].indexOf(x)===-1&&(p[x+"Error"]=Ce[x]),p},{});function ct(){}function L(p){return p}function F(p,x){return p==null||p===L?x:function(v){return x(p(v))}}function te(p,x){return function(){p.apply(this,arguments),x.apply(this,arguments)}}function de(p,x){return p===ct?x:function(){var v=p.apply(this,arguments);v!==void 0&&(arguments[0]=v);var k=this.onsuccess,A=this.onerror;this.onsuccess=null,this.onerror=null;var E=x.apply(this,arguments);return k&&(this.onsuccess=this.onsuccess?te(k,this.onsuccess):k),A&&(this.onerror=this.onerror?te(A,this.onerror):A),E!==void 0?E:v}}function le(p,x){return p===ct?x:function(){p.apply(this,arguments);var v=this.onsuccess,k=this.onerror;this.onsuccess=this.onerror=null,x.apply(this,arguments),v&&(this.onsuccess=this.onsuccess?te(v,this.onsuccess):v),k&&(this.onerror=this.onerror?te(k,this.onerror):k)}}function ce(p,x){return p===ct?x:function(v){var k=p.apply(this,arguments);l(v,k);var A=this.onsuccess,E=this.onerror;return this.onsuccess=null,this.onerror=null,v=x.apply(this,arguments),A&&(this.onsuccess=this.onsuccess?te(A,this.onsuccess):A),E&&(this.onerror=this.onerror?te(E,this.onerror):E),k===void 0?v===void 0?void 0:v:l(k,v)}}function ke(p,x){return p===ct?x:function(){return x.apply(this,arguments)!==!1&&p.apply(this,arguments)}}function be(p,x){return p===ct?x:function(){var v=p.apply(this,arguments);if(v&&typeof v.then=="function"){for(var k=this,A=arguments.length,E=new Array(A);A--;)E[A]=arguments[A];return v.then(function(){return x.apply(k,E)})}return x.apply(this,arguments)}}Et.ModifyError=Mt,Et.DexieError=rt,Et.BulkError=Ue;var fe=typeof location<"u"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function ue(p){fe=p}var Be={},Ae=100,We=typeof Promise>"u"?[]:function(){var p=Promise.resolve();if(typeof crypto>"u"||!crypto.subtle)return[p,c(p),p];var x=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[x,c(x),p]}(),ze=We[0],hi=We[1],We=We[2],hi=hi&&hi.then,Ze=ze&&ze.constructor,xt=!!We,ht=function(p,x){Sn.push([p,x]),qt&&(queueMicrotask(YP),qt=!1)},fn=!0,qt=!0,nn=[],Fn=[],ar=L,Si={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:ct,pgp:!1,env:{},finalize:ct},Ie=Si,Sn=[],Fi=0,vh=[];function Pe(p){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");this._listeners=[],this._lib=!1;var x=this._PSD=Ie;if(typeof p!="function"){if(p!==Be)throw new TypeError("Not a function");return this._state=arguments[1],this._value=arguments[2],void(this._state===!1&&bp(this,this._value))}this._state=null,this._value=null,++x.ref,function v(k,A){try{A(function(E){if(k._state===null){if(E===k)throw new TypeError("A promise cannot be resolved with itself.");var P=k._lib&&Co();E&&typeof E.then=="function"?v(k,function(N,X){E instanceof Pe?E._then(N,X):E.then(N,X)}):(k._state=!0,k._value=E,D0(k)),P&&Ao()}},bp.bind(null,k))}catch(E){bp(k,E)}}(this,p)}var xp={get:function(){var p=Ie,x=Ch;function v(k,A){var E=this,P=!p.global&&(p!==Ie||x!==Ch),N=P&&!Xr(),X=new Pe(function(Y,G){yp(E,new R0(_0(k,p,P,N),_0(A,p,P,N),Y,G,p))});return this._consoleTask&&(X._consoleTask=this._consoleTask),X}return v.prototype=Be,v},set:function(p){g(this,"then",p&&p.prototype===Be?xp:{get:function(){return p},set:xp.set})}};function R0(p,x,v,k,A){this.onFulfilled=typeof p=="function"?p:null,this.onRejected=typeof x=="function"?x:null,this.resolve=v,this.reject=k,this.psd=A}function bp(p,x){var v,k;Fn.push(x),p._state===null&&(v=p._lib&&Co(),x=ar(x),p._state=!1,p._value=x,k=p,nn.some(function(A){return A._value===k._value})||nn.push(k),D0(p),v&&Ao())}function D0(p){var x=p._listeners;p._listeners=[];for(var v=0,k=x.length;v<k;++v)yp(p,x[v]);var A=p._PSD;--A.ref||A.finalize(),Fi===0&&(++Fi,ht(function(){--Fi==0&&vp()},[]))}function yp(p,x){if(p._state!==null){var v=p._state?x.onFulfilled:x.onRejected;if(v===null)return(p._state?x.resolve:x.reject)(p._value);++x.psd.ref,++Fi,ht(WP,[v,p,x])}else p._listeners.push(x)}function WP(p,x,v){try{var k,A=x._value;!x._state&&Fn.length&&(Fn=[]),k=fe&&x._consoleTask?x._consoleTask.run(function(){return p(A)}):p(A),x._state||Fn.indexOf(A)!==-1||function(E){for(var P=nn.length;P;)if(nn[--P]._value===E._value)return nn.splice(P,1)}(x),v.resolve(k)}catch(E){v.reject(E)}finally{--Fi==0&&vp(),--v.psd.ref||v.psd.finalize()}}function YP(){Is(Si,function(){Co()&&Ao()})}function Co(){var p=fn;return qt=fn=!1,p}function Ao(){var p,x,v;do for(;0<Sn.length;)for(p=Sn,Sn=[],v=p.length,x=0;x<v;++x){var k=p[x];k[0].apply(null,k[1])}while(0<Sn.length);qt=fn=!0}function vp(){var p=nn;nn=[],p.forEach(function(k){k._PSD.onunhandled.call(null,k._value,k)});for(var x=vh.slice(0),v=x.length;v;)x[--v]()}function wh(p){return new Pe(Be,!1,p)}function Rt(p,x){var v=Ie;return function(){var k=Co(),A=Ie;try{return Wr(v,!0),p.apply(this,arguments)}catch(E){x&&x(E)}finally{Wr(A,!1),k&&Ao()}}}d(Pe.prototype,{then:xp,_then:function(p,x){yp(this,new R0(null,null,p,x,Ie))},catch:function(p){if(arguments.length===1)return this.then(null,p);var x=p,v=arguments[1];return typeof x=="function"?this.then(null,function(k){return(k instanceof x?v:wh)(k)}):this.then(null,function(k){return(k&&k.name===x?v:wh)(k)})},finally:function(p){return this.then(function(x){return Pe.resolve(p()).then(function(){return x})},function(x){return Pe.resolve(p()).then(function(){return wh(x)})})},timeout:function(p,x){var v=this;return p<1/0?new Pe(function(k,A){var E=setTimeout(function(){return A(new Ce.Timeout(x))},p);v.then(k,A).finally(clearTimeout.bind(null,E))}):this}}),typeof Symbol<"u"&&Symbol.toStringTag&&g(Pe.prototype,Symbol.toStringTag,"Dexie.Promise"),Si.env=N0(),d(Pe,{all:function(){var p=Re.apply(null,arguments).map(Ah);return new Pe(function(x,v){p.length===0&&x([]);var k=p.length;p.forEach(function(A,E){return Pe.resolve(A).then(function(P){p[E]=P,--k||x(p)},v)})})},resolve:function(p){return p instanceof Pe?p:p&&typeof p.then=="function"?new Pe(function(x,v){p.then(x,v)}):new Pe(Be,!0,p)},reject:wh,race:function(){var p=Re.apply(null,arguments).map(Ah);return new Pe(function(x,v){p.map(function(k){return Pe.resolve(k).then(x,v)})})},PSD:{get:function(){return Ie},set:function(p){return Ie=p}},totalEchoes:{get:function(){return Ch}},newPSD:Hr,usePSD:Is,scheduler:{get:function(){return ht},set:function(p){ht=p}},rejectionMapper:{get:function(){return ar},set:function(p){ar=p}},follow:function(p,x){return new Pe(function(v,k){return Hr(function(A,E){var P=Ie;P.unhandleds=[],P.onunhandled=E,P.finalize=te(function(){var N,X=this;N=function(){X.unhandleds.length===0?A():E(X.unhandleds[0])},vh.push(function Y(){N(),vh.splice(vh.indexOf(Y),1)}),++Fi,ht(function(){--Fi==0&&vp()},[])},P.finalize),p()},x,v,k)})}}),Ze&&(Ze.allSettled&&g(Pe,"allSettled",function(){var p=Re.apply(null,arguments).map(Ah);return new Pe(function(x){p.length===0&&x([]);var v=p.length,k=new Array(v);p.forEach(function(A,E){return Pe.resolve(A).then(function(P){return k[E]={status:"fulfilled",value:P}},function(P){return k[E]={status:"rejected",reason:P}}).then(function(){return--v||x(k)})})})}),Ze.any&&typeof AggregateError<"u"&&g(Pe,"any",function(){var p=Re.apply(null,arguments).map(Ah);return new Pe(function(x,v){p.length===0&&v(new AggregateError([]));var k=p.length,A=new Array(k);p.forEach(function(E,P){return Pe.resolve(E).then(function(N){return x(N)},function(N){A[P]=N,--k||v(new AggregateError(A))})})})}),Ze.withResolvers&&(Pe.withResolvers=Ze.withResolvers));var rn={awaits:0,echoes:0,id:0},jP=0,kh=[],Sh=0,Ch=0,VP=0;function Hr(p,x,v,k){var A=Ie,E=Object.create(A);return E.parent=A,E.ref=0,E.global=!1,E.id=++VP,Si.env,E.env=xt?{Promise:Pe,PromiseProp:{value:Pe,configurable:!0,writable:!0},all:Pe.all,race:Pe.race,allSettled:Pe.allSettled,any:Pe.any,resolve:Pe.resolve,reject:Pe.reject}:{},x&&l(E,x),++A.ref,E.finalize=function(){--this.parent.ref||this.parent.finalize()},k=Is(E,p,v,k),E.ref===0&&E.finalize(),k}function Mo(){return rn.id||(rn.id=++jP),++rn.awaits,rn.echoes+=Ae,rn.id}function Xr(){return!!rn.awaits&&(--rn.awaits==0&&(rn.id=0),rn.echoes=rn.awaits*Ae,!0)}function Ah(p){return rn.echoes&&p&&p.constructor===Ze?(Mo(),p.then(function(x){return Xr(),x},function(x){return Xr(),Wt(x)})):p}function $P(){var p=kh[kh.length-1];kh.pop(),Wr(p,!1)}function Wr(p,x){var v,k=Ie;(x?!rn.echoes||Sh++&&p===Ie:!Sh||--Sh&&p===Ie)||queueMicrotask(x?(function(A){++Ch,rn.echoes&&--rn.echoes!=0||(rn.echoes=rn.awaits=rn.id=0),kh.push(Ie),Wr(A,!0)}).bind(null,p):$P),p!==Ie&&(Ie=p,k===Si&&(Si.env=N0()),xt&&(v=Si.env.Promise,x=p.env,(k.global||p.global)&&(Object.defineProperty(s,"Promise",x.PromiseProp),v.all=x.all,v.race=x.race,v.resolve=x.resolve,v.reject=x.reject,x.allSettled&&(v.allSettled=x.allSettled),x.any&&(v.any=x.any))))}function N0(){var p=s.Promise;return xt?{Promise:p,PromiseProp:Object.getOwnPropertyDescriptor(s,"Promise"),all:p.all,race:p.race,allSettled:p.allSettled,any:p.any,resolve:p.resolve,reject:p.reject}:{}}function Is(p,x,v,k,A){var E=Ie;try{return Wr(p,!0),x(v,k,A)}finally{Wr(E,!1)}}function _0(p,x,v,k){return typeof p!="function"?p:function(){var A=Ie;v&&Mo(),Wr(x,!0);try{return p.apply(this,arguments)}finally{Wr(A,!1),k&&queueMicrotask(Xr)}}}function wp(p){Promise===Ze&&rn.echoes===0?Sh===0?p():enqueueNativeMicroTask(p):setTimeout(p,0)}(""+hi).indexOf("[native code]")===-1&&(Mo=Xr=ct);var Wt=Pe.reject,Ps="",lr="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",z0="String expected.",To=[],Mh="__dbnames",kp="readonly",Sp="readwrite";function Ls(p,x){return p?x?function(){return p.apply(this,arguments)&&x.apply(this,arguments)}:p:x}var F0={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function Th(p){return typeof p!="string"||/\./.test(p)?function(x){return x}:function(x){return x[p]===void 0&&p in x&&delete(x=K(x))[p],x}}function B0(){throw Ce.Type()}function ut(p,x){try{var v=H0(p),k=H0(x);if(v!==k)return v==="Array"?1:k==="Array"?-1:v==="binary"?1:k==="binary"?-1:v==="string"?1:k==="string"?-1:v==="Date"?1:k!=="Date"?NaN:-1;switch(v){case"number":case"Date":case"string":return x<p?1:p<x?-1:0;case"binary":return function(A,E){for(var P=A.length,N=E.length,X=P<N?P:N,Y=0;Y<X;++Y)if(A[Y]!==E[Y])return A[Y]<E[Y]?-1:1;return P===N?0:P<N?-1:1}(X0(p),X0(x));case"Array":return function(A,E){for(var P=A.length,N=E.length,X=P<N?P:N,Y=0;Y<X;++Y){var G=ut(A[Y],E[Y]);if(G!==0)return G}return P===N?0:P<N?-1:1}(p,x)}}catch{}return NaN}function H0(p){var x=typeof p;return x!="object"?x:ArrayBuffer.isView(p)?"binary":(p=se(p),p==="ArrayBuffer"?"binary":p)}function X0(p){return p instanceof Uint8Array?p:ArrayBuffer.isView(p)?new Uint8Array(p.buffer,p.byteOffset,p.byteLength):new Uint8Array(p)}var W0=(Lt.prototype._trans=function(p,x,v){var k=this._tx||Ie.trans,A=this.name,E=fe&&typeof console<"u"&&console.createTask&&console.createTask("Dexie: ".concat(p==="readonly"?"read":"write"," ").concat(this.name));function P(Y,G,_){if(!_.schema[A])throw new Ce.NotFound("Table "+A+" not part of transaction");return x(_.idbtrans,_)}var N=Co();try{var X=k&&k.db._novip===this.db._novip?k===Ie.trans?k._promise(p,P,v):Hr(function(){return k._promise(p,P,v)},{trans:k,transless:Ie.transless||Ie}):function Y(G,_,U,W){if(G.idbdb&&(G._state.openComplete||Ie.letThrough||G._vip)){var $=G._createTransaction(_,U,G._dbSchema);try{$.create(),G._state.PR1398_maxLoop=3}catch(q){return q.name===$e.InvalidState&&G.isOpen()&&0<--G._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),G.close({disableAutoOpen:!1}),G.open().then(function(){return Y(G,_,U,W)})):Wt(q)}return $._promise(_,function(q,V){return Hr(function(){return Ie.trans=$,W(q,V,$)})}).then(function(q){if(_==="readwrite")try{$.idbtrans.commit()}catch{}return _==="readonly"?q:$._completion.then(function(){return q})})}if(G._state.openComplete)return Wt(new Ce.DatabaseClosed(G._state.dbOpenError));if(!G._state.isBeingOpened){if(!G._state.autoOpen)return Wt(new Ce.DatabaseClosed);G.open().catch(ct)}return G._state.dbReadyPromise.then(function(){return Y(G,_,U,W)})}(this.db,p,[this.name],P);return E&&(X._consoleTask=E,X=X.catch(function(Y){return console.trace(Y),Wt(Y)})),X}finally{N&&Ao()}},Lt.prototype.get=function(p,x){var v=this;return p&&p.constructor===Object?this.where(p).first(x):p==null?Wt(new Ce.Type("Invalid argument to Table.get()")):this._trans("readonly",function(k){return v.core.get({trans:k,key:p}).then(function(A){return v.hook.reading.fire(A)})}).then(x)},Lt.prototype.where=function(p){if(typeof p=="string")return new this.db.WhereClause(this,p);if(a(p))return new this.db.WhereClause(this,"[".concat(p.join("+"),"]"));var x=o(p);if(x.length===1)return this.where(x[0]).equals(p[x[0]]);var v=this.schema.indexes.concat(this.schema.primKey).filter(function(N){if(N.compound&&x.every(function(Y){return 0<=N.keyPath.indexOf(Y)})){for(var X=0;X<x.length;++X)if(x.indexOf(N.keyPath[X])===-1)return!1;return!0}return!1}).sort(function(N,X){return N.keyPath.length-X.keyPath.length})[0];if(v&&this.db._maxKey!==Ps){var E=v.keyPath.slice(0,x.length);return this.where(E).equals(E.map(function(X){return p[X]}))}!v&&fe&&console.warn("The query ".concat(JSON.stringify(p)," on ").concat(this.name," would benefit from a ")+"compound index [".concat(x.join("+"),"]"));var k=this.schema.idxByName;function A(N,X){return ut(N,X)===0}var P=x.reduce(function(_,X){var Y=_[0],G=_[1],_=k[X],U=p[X];return[Y||_,Y||!_?Ls(G,_&&_.multi?function(W){return W=O(W,X),a(W)&&W.some(function($){return A(U,$)})}:function(W){return A(U,O(W,X))}):G]},[null,null]),E=P[0],P=P[1];return E?this.where(E.name).equals(p[E.keyPath]).filter(P):v?this.filter(P):this.where(x).equals("")},Lt.prototype.filter=function(p){return this.toCollection().and(p)},Lt.prototype.count=function(p){return this.toCollection().count(p)},Lt.prototype.offset=function(p){return this.toCollection().offset(p)},Lt.prototype.limit=function(p){return this.toCollection().limit(p)},Lt.prototype.each=function(p){return this.toCollection().each(p)},Lt.prototype.toArray=function(p){return this.toCollection().toArray(p)},Lt.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))},Lt.prototype.orderBy=function(p){return new this.db.Collection(new this.db.WhereClause(this,a(p)?"[".concat(p.join("+"),"]"):p))},Lt.prototype.reverse=function(){return this.toCollection().reverse()},Lt.prototype.mapToClass=function(p){var x,v=this.db,k=this.name;function A(){return x!==null&&x.apply(this,arguments)||this}(this.schema.mappedClass=p).prototype instanceof B0&&(function(X,Y){if(typeof Y!="function"&&Y!==null)throw new TypeError("Class extends value "+String(Y)+" is not a constructor or null");function G(){this.constructor=X}t(X,Y),X.prototype=Y===null?Object.create(Y):(G.prototype=Y.prototype,new G)}(A,x=p),Object.defineProperty(A.prototype,"db",{get:function(){return v},enumerable:!1,configurable:!0}),A.prototype.table=function(){return k},p=A);for(var E=new Set,P=p.prototype;P;P=c(P))Object.getOwnPropertyNames(P).forEach(function(X){return E.add(X)});function N(X){if(!X)return X;var Y,G=Object.create(p.prototype);for(Y in X)if(!E.has(Y))try{G[Y]=X[Y]}catch{}return G}return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=N,this.hook("reading",N),p},Lt.prototype.defineClass=function(){return this.mapToClass(function(p){l(this,p)})},Lt.prototype.add=function(p,x){var v=this,k=this.schema.primKey,A=k.auto,E=k.keyPath,P=p;return E&&A&&(P=Th(E)(p)),this._trans("readwrite",function(N){return v.core.mutate({trans:N,type:"add",keys:x!=null?[x]:null,values:[P]})}).then(function(N){return N.numFailures?Pe.reject(N.failures[0]):N.lastResult}).then(function(N){if(E)try{T(p,E,N)}catch{}return N})},Lt.prototype.update=function(p,x){return typeof p!="object"||a(p)?this.where(":id").equals(p).modify(x):(p=O(p,this.schema.primKey.keyPath),p===void 0?Wt(new Ce.InvalidArgument("Given object does not contain its primary key")):this.where(":id").equals(p).modify(x))},Lt.prototype.put=function(p,x){var v=this,k=this.schema.primKey,A=k.auto,E=k.keyPath,P=p;return E&&A&&(P=Th(E)(p)),this._trans("readwrite",function(N){return v.core.mutate({trans:N,type:"put",values:[P],keys:x!=null?[x]:null})}).then(function(N){return N.numFailures?Pe.reject(N.failures[0]):N.lastResult}).then(function(N){if(E)try{T(p,E,N)}catch{}return N})},Lt.prototype.delete=function(p){var x=this;return this._trans("readwrite",function(v){return x.core.mutate({trans:v,type:"delete",keys:[p]})}).then(function(v){return v.numFailures?Pe.reject(v.failures[0]):void 0})},Lt.prototype.clear=function(){var p=this;return this._trans("readwrite",function(x){return p.core.mutate({trans:x,type:"deleteRange",range:F0})}).then(function(x){return x.numFailures?Pe.reject(x.failures[0]):void 0})},Lt.prototype.bulkGet=function(p){var x=this;return this._trans("readonly",function(v){return x.core.getMany({keys:p,trans:v}).then(function(k){return k.map(function(A){return x.hook.reading.fire(A)})})})},Lt.prototype.bulkAdd=function(p,x,v){var k=this,A=Array.isArray(x)?x:void 0,E=(v=v||(A?void 0:x))?v.allKeys:void 0;return this._trans("readwrite",function(P){var Y=k.schema.primKey,N=Y.auto,Y=Y.keyPath;if(Y&&A)throw new Ce.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(A&&A.length!==p.length)throw new Ce.InvalidArgument("Arguments objects and keys must have the same length");var X=p.length,Y=Y&&N?p.map(Th(Y)):p;return k.core.mutate({trans:P,type:"add",keys:A,values:Y,wantResults:E}).then(function($){var _=$.numFailures,U=$.results,W=$.lastResult,$=$.failures;if(_===0)return E?U:W;throw new Ue("".concat(k.name,".bulkAdd(): ").concat(_," of ").concat(X," operations failed"),$)})})},Lt.prototype.bulkPut=function(p,x,v){var k=this,A=Array.isArray(x)?x:void 0,E=(v=v||(A?void 0:x))?v.allKeys:void 0;return this._trans("readwrite",function(P){var Y=k.schema.primKey,N=Y.auto,Y=Y.keyPath;if(Y&&A)throw new Ce.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(A&&A.length!==p.length)throw new Ce.InvalidArgument("Arguments objects and keys must have the same length");var X=p.length,Y=Y&&N?p.map(Th(Y)):p;return k.core.mutate({trans:P,type:"put",keys:A,values:Y,wantResults:E}).then(function($){var _=$.numFailures,U=$.results,W=$.lastResult,$=$.failures;if(_===0)return E?U:W;throw new Ue("".concat(k.name,".bulkPut(): ").concat(_," of ").concat(X," operations failed"),$)})})},Lt.prototype.bulkUpdate=function(p){var x=this,v=this.core,k=p.map(function(P){return P.key}),A=p.map(function(P){return P.changes}),E=[];return this._trans("readwrite",function(P){return v.getMany({trans:P,keys:k,cache:"clone"}).then(function(N){var X=[],Y=[];p.forEach(function(_,U){var W=_.key,$=_.changes,q=N[U];if(q){for(var V=0,Z=Object.keys($);V<Z.length;V++){var Q=Z[V],ee=$[Q];if(Q===x.schema.primKey.keyPath){if(ut(ee,W)!==0)throw new Ce.Constraint("Cannot update primary key in bulkUpdate()")}else T(q,Q,ee)}E.push(U),X.push(W),Y.push(q)}});var G=X.length;return v.mutate({trans:P,type:"put",keys:X,values:Y,updates:{keys:k,changeSpecs:A}}).then(function(_){var U=_.numFailures,W=_.failures;if(U===0)return G;for(var $=0,q=Object.keys(W);$<q.length;$++){var V,Z=q[$],Q=E[Number(Z)];Q!=null&&(V=W[Z],delete W[Z],W[Q]=V)}throw new Ue("".concat(x.name,".bulkUpdate(): ").concat(U," of ").concat(G," operations failed"),W)})})})},Lt.prototype.bulkDelete=function(p){var x=this,v=p.length;return this._trans("readwrite",function(k){return x.core.mutate({trans:k,type:"delete",keys:p})}).then(function(P){var A=P.numFailures,E=P.lastResult,P=P.failures;if(A===0)return E;throw new Ue("".concat(x.name,".bulkDelete(): ").concat(A," of ").concat(v," operations failed"),P)})},Lt);function Lt(){}function qa(p){function x(P,N){if(N){for(var X=arguments.length,Y=new Array(X-1);--X;)Y[X-1]=arguments[X];return v[P].subscribe.apply(null,Y),p}if(typeof P=="string")return v[P]}var v={};x.addEventType=E;for(var k=1,A=arguments.length;k<A;++k)E(arguments[k]);return x;function E(P,N,X){if(typeof P!="object"){var Y;N=N||ke;var G={subscribers:[],fire:X=X||ct,subscribe:function(_){G.subscribers.indexOf(_)===-1&&(G.subscribers.push(_),G.fire=N(G.fire,_))},unsubscribe:function(_){G.subscribers=G.subscribers.filter(function(U){return U!==_}),G.fire=G.subscribers.reduce(N,X)}};return v[P]=x[P]=G}o(Y=P).forEach(function(_){var U=Y[_];if(a(U))E(_,Y[_][0],Y[_][1]);else{if(U!=="asap")throw new Ce.InvalidArgument("Invalid event config");var W=E(_,L,function(){for(var $=arguments.length,q=new Array($);$--;)q[$]=arguments[$];W.subscribers.forEach(function(V){S(function(){V.apply(null,q)})})})}})}}function Ua(p,x){return m(x).from({prototype:p}),x}function Eo(p,x){return!(p.filter||p.algorithm||p.or)&&(x?p.justLimit:!p.replayFilter)}function Cp(p,x){p.filter=Ls(p.filter,x)}function Ap(p,x,v){var k=p.replayFilter;p.replayFilter=k?function(){return Ls(k(),x())}:x,p.justLimit=v&&!k}function Eh(p,x){if(p.isPrimKey)return x.primaryKey;var v=x.getIndexByKeyPath(p.index);if(!v)throw new Ce.Schema("KeyPath "+p.index+" on object store "+x.name+" is not indexed");return v}function Y0(p,x,v){var k=Eh(p,x.schema);return x.openCursor({trans:v,values:!p.keysOnly,reverse:p.dir==="prev",unique:!!p.unique,query:{index:k,range:p.range}})}function Oh(p,x,v,k){var A=p.replayFilter?Ls(p.filter,p.replayFilter()):p.filter;if(p.or){var E={},P=function(N,X,Y){var G,_;A&&!A(X,Y,function(U){return X.stop(U)},function(U){return X.fail(U)})||((_=""+(G=X.primaryKey))=="[object ArrayBuffer]"&&(_=""+new Uint8Array(G)),u(E,_)||(E[_]=!0,x(N,X,Y)))};return Promise.all([p.or._iterate(P,v),j0(Y0(p,k,v),p.algorithm,P,!p.keysOnly&&p.valueMapper)])}return j0(Y0(p,k,v),Ls(p.algorithm,A),x,!p.keysOnly&&p.valueMapper)}function j0(p,x,v,k){var A=Rt(k?function(E,P,N){return v(k(E),P,N)}:v);return p.then(function(E){if(E)return E.start(function(){var P=function(){return E.continue()};x&&!x(E,function(N){return P=N},function(N){E.stop(N),P=ct},function(N){E.fail(N),P=ct})||A(E.value,E,function(N){return P=N}),P()})})}var Ka=(V0.prototype.execute=function(p){var x=this["@@propmod"];if(x.add!==void 0){var v=x.add;if(a(v))return r(r([],a(p)?p:[],!0),v).sort();if(typeof v=="number")return(Number(p)||0)+v;if(typeof v=="bigint")try{return BigInt(p)+v}catch{return BigInt(0)+v}throw new TypeError("Invalid term ".concat(v))}if(x.remove!==void 0){var k=x.remove;if(a(k))return a(p)?p.filter(function(A){return!k.includes(A)}).sort():[];if(typeof k=="number")return Number(p)-k;if(typeof k=="bigint")try{return BigInt(p)-k}catch{return BigInt(0)-k}throw new TypeError("Invalid subtrahend ".concat(k))}return v=(v=x.replacePrefix)===null||v===void 0?void 0:v[0],v&&typeof p=="string"&&p.startsWith(v)?x.replacePrefix[1]+p.substring(v.length):p},V0);function V0(p){this["@@propmod"]=p}var GP=(gt.prototype._read=function(p,x){var v=this._ctx;return v.error?v.table._trans(null,Wt.bind(null,v.error)):v.table._trans("readonly",p).then(x)},gt.prototype._write=function(p){var x=this._ctx;return x.error?x.table._trans(null,Wt.bind(null,x.error)):x.table._trans("readwrite",p,"locked")},gt.prototype._addAlgorithm=function(p){var x=this._ctx;x.algorithm=Ls(x.algorithm,p)},gt.prototype._iterate=function(p,x){return Oh(this._ctx,p,x,this._ctx.table.core)},gt.prototype.clone=function(p){var x=Object.create(this.constructor.prototype),v=Object.create(this._ctx);return p&&l(v,p),x._ctx=v,x},gt.prototype.raw=function(){return this._ctx.valueMapper=null,this},gt.prototype.each=function(p){var x=this._ctx;return this._read(function(v){return Oh(x,p,v,x.table.core)})},gt.prototype.count=function(p){var x=this;return this._read(function(v){var k=x._ctx,A=k.table.core;if(Eo(k,!0))return A.count({trans:v,query:{index:Eh(k,A.schema),range:k.range}}).then(function(P){return Math.min(P,k.limit)});var E=0;return Oh(k,function(){return++E,!1},v,A).then(function(){return E})}).then(p)},gt.prototype.sortBy=function(p,x){var v=p.split(".").reverse(),k=v[0],A=v.length-1;function E(X,Y){return Y?E(X[v[Y]],Y-1):X[k]}var P=this._ctx.dir==="next"?1:-1;function N(X,Y){return ut(E(X,A),E(Y,A))*P}return this.toArray(function(X){return X.sort(N)}).then(x)},gt.prototype.toArray=function(p){var x=this;return this._read(function(v){var k=x._ctx;if(k.dir==="next"&&Eo(k,!0)&&0<k.limit){var A=k.valueMapper,E=Eh(k,k.table.core.schema);return k.table.core.query({trans:v,limit:k.limit,values:!0,query:{index:E,range:k.range}}).then(function(N){return N=N.result,A?N.map(A):N})}var P=[];return Oh(k,function(N){return P.push(N)},v,k.table.core).then(function(){return P})},p)},gt.prototype.offset=function(p){var x=this._ctx;return p<=0||(x.offset+=p,Eo(x)?Ap(x,function(){var v=p;return function(k,A){return v===0||(v===1?--v:A(function(){k.advance(v),v=0}),!1)}}):Ap(x,function(){var v=p;return function(){return--v<0}})),this},gt.prototype.limit=function(p){return this._ctx.limit=Math.min(this._ctx.limit,p),Ap(this._ctx,function(){var x=p;return function(v,k,A){return--x<=0&&k(A),0<=x}},!0),this},gt.prototype.until=function(p,x){return Cp(this._ctx,function(v,k,A){return!p(v.value)||(k(A),x)}),this},gt.prototype.first=function(p){return this.limit(1).toArray(function(x){return x[0]}).then(p)},gt.prototype.last=function(p){return this.reverse().first(p)},gt.prototype.filter=function(p){var x;return Cp(this._ctx,function(v){return p(v.value)}),(x=this._ctx).isMatch=Ls(x.isMatch,p),this},gt.prototype.and=function(p){return this.filter(p)},gt.prototype.or=function(p){return new this.db.WhereClause(this._ctx.table,p,this)},gt.prototype.reverse=function(){return this._ctx.dir=this._ctx.dir==="prev"?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},gt.prototype.desc=function(){return this.reverse()},gt.prototype.eachKey=function(p){var x=this._ctx;return x.keysOnly=!x.isMatch,this.each(function(v,k){p(k.key,k)})},gt.prototype.eachUniqueKey=function(p){return this._ctx.unique="unique",this.eachKey(p)},gt.prototype.eachPrimaryKey=function(p){var x=this._ctx;return x.keysOnly=!x.isMatch,this.each(function(v,k){p(k.primaryKey,k)})},gt.prototype.keys=function(p){var x=this._ctx;x.keysOnly=!x.isMatch;var v=[];return this.each(function(k,A){v.push(A.key)}).then(function(){return v}).then(p)},gt.prototype.primaryKeys=function(p){var x=this._ctx;if(x.dir==="next"&&Eo(x,!0)&&0<x.limit)return this._read(function(k){var A=Eh(x,x.table.core.schema);return x.table.core.query({trans:k,values:!1,limit:x.limit,query:{index:A,range:x.range}})}).then(function(k){return k.result}).then(p);x.keysOnly=!x.isMatch;var v=[];return this.each(function(k,A){v.push(A.primaryKey)}).then(function(){return v}).then(p)},gt.prototype.uniqueKeys=function(p){return this._ctx.unique="unique",this.keys(p)},gt.prototype.firstKey=function(p){return this.limit(1).keys(function(x){return x[0]}).then(p)},gt.prototype.lastKey=function(p){return this.reverse().firstKey(p)},gt.prototype.distinct=function(){var p=this._ctx,p=p.index&&p.table.schema.idxByName[p.index];if(!p||!p.multi)return this;var x={};return Cp(this._ctx,function(A){var k=A.primaryKey.toString(),A=u(x,k);return x[k]=!0,!A}),this},gt.prototype.modify=function(p){var x=this,v=this._ctx;return this._write(function(k){var A,E,P;P=typeof p=="function"?p:(A=o(p),E=A.length,function(V){for(var Z=!1,Q=0;Q<E;++Q){var ee=A[Q],re=p[ee],ge=O(V,ee);re instanceof Ka?(T(V,ee,re.execute(ge)),Z=!0):ge!==re&&(T(V,ee,re),Z=!0)}return Z});var N=v.table.core,_=N.schema.primaryKey,X=_.outbound,Y=_.extractKey,G=200,_=x.db._options.modifyChunkSize;_&&(G=typeof _=="object"?_[N.name]||_["*"]||200:_);function U(V,ee){var Q=ee.failures,ee=ee.numFailures;$+=V-ee;for(var re=0,ge=o(Q);re<ge.length;re++){var Se=ge[re];W.push(Q[Se])}}var W=[],$=0,q=[];return x.clone().primaryKeys().then(function(V){function Z(ee){var re=Math.min(G,V.length-ee);return N.getMany({trans:k,keys:V.slice(ee,ee+re),cache:"immutable"}).then(function(ge){for(var Se=[],me=[],ye=X?[]:null,Te=[],we=0;we<re;++we){var De=ge[we],Qe={value:K(De),primKey:V[ee+we]};P.call(Qe,Qe.value,Qe)!==!1&&(Qe.value==null?Te.push(V[ee+we]):X||ut(Y(De),Y(Qe.value))===0?(me.push(Qe.value),X&&ye.push(V[ee+we])):(Te.push(V[ee+we]),Se.push(Qe.value)))}return Promise.resolve(0<Se.length&&N.mutate({trans:k,type:"add",values:Se}).then(function(at){for(var lt in at.failures)Te.splice(parseInt(lt),1);U(Se.length,at)})).then(function(){return(0<me.length||Q&&typeof p=="object")&&N.mutate({trans:k,type:"put",keys:ye,values:me,criteria:Q,changeSpec:typeof p!="function"&&p,isAdditionalChunk:0<ee}).then(function(at){return U(me.length,at)})}).then(function(){return(0<Te.length||Q&&p===Mp)&&N.mutate({trans:k,type:"delete",keys:Te,criteria:Q,isAdditionalChunk:0<ee}).then(function(at){return U(Te.length,at)})}).then(function(){return V.length>ee+re&&Z(ee+G)})})}var Q=Eo(v)&&v.limit===1/0&&(typeof p!="function"||p===Mp)&&{index:v.index,range:v.range};return Z(0).then(function(){if(0<W.length)throw new Mt("Error modifying one or more objects",W,$,q);return V.length})})})},gt.prototype.delete=function(){var p=this._ctx,x=p.range;return Eo(p)&&(p.isPrimKey||x.type===3)?this._write(function(v){var k=p.table.core.schema.primaryKey,A=x;return p.table.core.count({trans:v,query:{index:k,range:A}}).then(function(E){return p.table.core.mutate({trans:v,type:"deleteRange",range:A}).then(function(P){var N=P.failures;if(P.lastResult,P.results,P=P.numFailures,P)throw new Mt("Could not delete some values",Object.keys(N).map(function(X){return N[X]}),E-P);return E-P})})}):this.modify(Mp)},gt);function gt(){}var Mp=function(p,x){return x.value=null};function qP(p,x){return p<x?-1:p===x?0:1}function UP(p,x){return x<p?-1:p===x?0:1}function Zn(p,x,v){return p=p instanceof G0?new p.Collection(p):p,p._ctx.error=new(v||TypeError)(x),p}function Oo(p){return new p.Collection(p,function(){return $0("")}).limit(0)}function Ih(p,x,v,k){var A,E,P,N,X,Y,G,_=v.length;if(!v.every(function($){return typeof $=="string"}))return Zn(p,z0);function U($){A=$==="next"?function(V){return V.toUpperCase()}:function(V){return V.toLowerCase()},E=$==="next"?function(V){return V.toLowerCase()}:function(V){return V.toUpperCase()},P=$==="next"?qP:UP;var q=v.map(function(V){return{lower:E(V),upper:A(V)}}).sort(function(V,Z){return P(V.lower,Z.lower)});N=q.map(function(V){return V.upper}),X=q.map(function(V){return V.lower}),G=(Y=$)==="next"?"":k}U("next"),p=new p.Collection(p,function(){return Yr(N[0],X[_-1]+k)}),p._ondirectionchange=function($){U($)};var W=0;return p._addAlgorithm(function($,q,V){var Z=$.key;if(typeof Z!="string")return!1;var Q=E(Z);if(x(Q,X,W))return!0;for(var ee=null,re=W;re<_;++re){var ge=function(Se,me,ye,Te,we,De){for(var Qe=Math.min(Se.length,Te.length),at=-1,lt=0;lt<Qe;++lt){var Qn=me[lt];if(Qn!==Te[lt])return we(Se[lt],ye[lt])<0?Se.substr(0,lt)+ye[lt]+ye.substr(lt+1):we(Se[lt],Te[lt])<0?Se.substr(0,lt)+Te[lt]+ye.substr(lt+1):0<=at?Se.substr(0,at)+me[at]+ye.substr(at+1):null;we(Se[lt],Qn)<0&&(at=lt)}return Qe<Te.length&&De==="next"?Se+ye.substr(Se.length):Qe<Se.length&&De==="prev"?Se.substr(0,ye.length):at<0?null:Se.substr(0,at)+Te[at]+ye.substr(at+1)}(Z,Q,N[re],X[re],P,Y);ge===null&&ee===null?W=re+1:(ee===null||0<P(ee,ge))&&(ee=ge)}return q(ee!==null?function(){$.continue(ee+G)}:V),!1}),p}function Yr(p,x,v,k){return{type:2,lower:p,upper:x,lowerOpen:v,upperOpen:k}}function $0(p){return{type:1,lower:p,upper:p}}var G0=(Object.defineProperty(sn.prototype,"Collection",{get:function(){return this._ctx.table.db.Collection},enumerable:!1,configurable:!0}),sn.prototype.between=function(p,x,v,k){v=v!==!1,k=k===!0;try{return 0<this._cmp(p,x)||this._cmp(p,x)===0&&(v||k)&&(!v||!k)?Oo(this):new this.Collection(this,function(){return Yr(p,x,!v,!k)})}catch{return Zn(this,lr)}},sn.prototype.equals=function(p){return p==null?Zn(this,lr):new this.Collection(this,function(){return $0(p)})},sn.prototype.above=function(p){return p==null?Zn(this,lr):new this.Collection(this,function(){return Yr(p,void 0,!0)})},sn.prototype.aboveOrEqual=function(p){return p==null?Zn(this,lr):new this.Collection(this,function(){return Yr(p,void 0,!1)})},sn.prototype.below=function(p){return p==null?Zn(this,lr):new this.Collection(this,function(){return Yr(void 0,p,!1,!0)})},sn.prototype.belowOrEqual=function(p){return p==null?Zn(this,lr):new this.Collection(this,function(){return Yr(void 0,p)})},sn.prototype.startsWith=function(p){return typeof p!="string"?Zn(this,z0):this.between(p,p+Ps,!0,!0)},sn.prototype.startsWithIgnoreCase=function(p){return p===""?this.startsWith(p):Ih(this,function(x,v){return x.indexOf(v[0])===0},[p],Ps)},sn.prototype.equalsIgnoreCase=function(p){return Ih(this,function(x,v){return x===v[0]},[p],"")},sn.prototype.anyOfIgnoreCase=function(){var p=Re.apply(Me,arguments);return p.length===0?Oo(this):Ih(this,function(x,v){return v.indexOf(x)!==-1},p,"")},sn.prototype.startsWithAnyOfIgnoreCase=function(){var p=Re.apply(Me,arguments);return p.length===0?Oo(this):Ih(this,function(x,v){return v.some(function(k){return x.indexOf(k)===0})},p,Ps)},sn.prototype.anyOf=function(){var p=this,x=Re.apply(Me,arguments),v=this._cmp;try{x.sort(v)}catch{return Zn(this,lr)}if(x.length===0)return Oo(this);var k=new this.Collection(this,function(){return Yr(x[0],x[x.length-1])});k._ondirectionchange=function(E){v=E==="next"?p._ascending:p._descending,x.sort(v)};var A=0;return k._addAlgorithm(function(E,P,N){for(var X=E.key;0<v(X,x[A]);)if(++A===x.length)return P(N),!1;return v(X,x[A])===0||(P(function(){E.continue(x[A])}),!1)}),k},sn.prototype.notEqual=function(p){return this.inAnyRange([[-1/0,p],[p,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})},sn.prototype.noneOf=function(){var p=Re.apply(Me,arguments);if(p.length===0)return new this.Collection(this);try{p.sort(this._ascending)}catch{return Zn(this,lr)}var x=p.reduce(function(v,k){return v?v.concat([[v[v.length-1][1],k]]):[[-1/0,k]]},null);return x.push([p[p.length-1],this.db._maxKey]),this.inAnyRange(x,{includeLowers:!1,includeUppers:!1})},sn.prototype.inAnyRange=function(Z,x){var v=this,k=this._cmp,A=this._ascending,E=this._descending,P=this._min,N=this._max;if(Z.length===0)return Oo(this);if(!Z.every(function(Q){return Q[0]!==void 0&&Q[1]!==void 0&&A(Q[0],Q[1])<=0}))return Zn(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",Ce.InvalidArgument);var X=!x||x.includeLowers!==!1,Y=x&&x.includeUppers===!0,G,_=A;function U(Q,ee){return _(Q[0],ee[0])}try{(G=Z.reduce(function(Q,ee){for(var re=0,ge=Q.length;re<ge;++re){var Se=Q[re];if(k(ee[0],Se[1])<0&&0<k(ee[1],Se[0])){Se[0]=P(Se[0],ee[0]),Se[1]=N(Se[1],ee[1]);break}}return re===ge&&Q.push(ee),Q},[])).sort(U)}catch{return Zn(this,lr)}var W=0,$=Y?function(Q){return 0<A(Q,G[W][1])}:function(Q){return 0<=A(Q,G[W][1])},q=X?function(Q){return 0<E(Q,G[W][0])}:function(Q){return 0<=E(Q,G[W][0])},V=$,Z=new this.Collection(this,function(){return Yr(G[0][0],G[G.length-1][1],!X,!Y)});return Z._ondirectionchange=function(Q){_=Q==="next"?(V=$,A):(V=q,E),G.sort(U)},Z._addAlgorithm(function(Q,ee,re){for(var ge,Se=Q.key;V(Se);)if(++W===G.length)return ee(re),!1;return!$(ge=Se)&&!q(ge)||(v._cmp(Se,G[W][1])===0||v._cmp(Se,G[W][0])===0||ee(function(){_===A?Q.continue(G[W][0]):Q.continue(G[W][1])}),!1)}),Z},sn.prototype.startsWithAnyOf=function(){var p=Re.apply(Me,arguments);return p.every(function(x){return typeof x=="string"})?p.length===0?Oo(this):this.inAnyRange(p.map(function(x){return[x,x+Ps]})):Zn(this,"startsWithAnyOf() only works with strings")},sn);function sn(){}function Bi(p){return Rt(function(x){return Ja(x),p(x.target.error),!1})}function Ja(p){p.stopPropagation&&p.stopPropagation(),p.preventDefault&&p.preventDefault()}var Za="storagemutated",Tp="x-storagemutated-1",jr=qa(null,Za),KP=(Hi.prototype._lock=function(){return M(!Ie.global),++this._reculock,this._reculock!==1||Ie.global||(Ie.lockOwnerFor=this),this},Hi.prototype._unlock=function(){if(M(!Ie.global),--this._reculock==0)for(Ie.global||(Ie.lockOwnerFor=null);0<this._blockedFuncs.length&&!this._locked();){var p=this._blockedFuncs.shift();try{Is(p[1],p[0])}catch{}}return this},Hi.prototype._locked=function(){return this._reculock&&Ie.lockOwnerFor!==this},Hi.prototype.create=function(p){var x=this;if(!this.mode)return this;var v=this.db.idbdb,k=this.db._state.dbOpenError;if(M(!this.idbtrans),!p&&!v)switch(k&&k.name){case"DatabaseClosedError":throw new Ce.DatabaseClosed(k);case"MissingAPIError":throw new Ce.MissingAPI(k.message,k);default:throw new Ce.OpenFailed(k)}if(!this.active)throw new Ce.TransactionInactive;return M(this._completion._state===null),(p=this.idbtrans=p||(this.db.core||v).transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability})).onerror=Rt(function(A){Ja(A),x._reject(p.error)}),p.onabort=Rt(function(A){Ja(A),x.active&&x._reject(new Ce.Abort(p.error)),x.active=!1,x.on("abort").fire(A)}),p.oncomplete=Rt(function(){x.active=!1,x._resolve(),"mutatedParts"in p&&jr.storagemutated.fire(p.mutatedParts)}),this},Hi.prototype._promise=function(p,x,v){var k=this;if(p==="readwrite"&&this.mode!=="readwrite")return Wt(new Ce.ReadOnly("Transaction is readonly"));if(!this.active)return Wt(new Ce.TransactionInactive);if(this._locked())return new Pe(function(E,P){k._blockedFuncs.push([function(){k._promise(p,x,v).then(E,P)},Ie])});if(v)return Hr(function(){var E=new Pe(function(P,N){k._lock();var X=x(P,N,k);X&&X.then&&X.then(P,N)});return E.finally(function(){return k._unlock()}),E._lib=!0,E});var A=new Pe(function(E,P){var N=x(E,P,k);N&&N.then&&N.then(E,P)});return A._lib=!0,A},Hi.prototype._root=function(){return this.parent?this.parent._root():this},Hi.prototype.waitFor=function(p){var x,v=this._root(),k=Pe.resolve(p);v._waitingFor?v._waitingFor=v._waitingFor.then(function(){return k}):(v._waitingFor=k,v._waitingQueue=[],x=v.idbtrans.objectStore(v.storeNames[0]),function E(){for(++v._spinCount;v._waitingQueue.length;)v._waitingQueue.shift()();v._waitingFor&&(x.get(-1/0).onsuccess=E)}());var A=v._waitingFor;return new Pe(function(E,P){k.then(function(N){return v._waitingQueue.push(Rt(E.bind(null,N)))},function(N){return v._waitingQueue.push(Rt(P.bind(null,N)))}).finally(function(){v._waitingFor===A&&(v._waitingFor=null)})})},Hi.prototype.abort=function(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new Ce.Abort))},Hi.prototype.table=function(p){var x=this._memoizedTables||(this._memoizedTables={});if(u(x,p))return x[p];var v=this.schema[p];if(!v)throw new Ce.NotFound("Table "+p+" not part of transaction");return v=new this.db.Table(p,v,this),v.core=this.db.core.table(p),x[p]=v},Hi);function Hi(){}function Ep(p,x,v,k,A,E,P){return{name:p,keyPath:x,unique:v,multi:k,auto:A,compound:E,src:(v&&!P?"&":"")+(k?"*":"")+(A?"++":"")+q0(x)}}function q0(p){return typeof p=="string"?p:p?"["+[].join.call(p,"+")+"]":""}function Op(p,x,v){return{name:p,primKey:x,indexes:v,mappedClass:null,idxByName:(k=function(A){return[A.name,A]},v.reduce(function(A,E,P){return P=k(E,P),P&&(A[P[0]]=P[1]),A},{}))};var k}var Qa=function(p){try{return p.only([[]]),Qa=function(){return[[]]},[[]]}catch{return Qa=function(){return Ps},Ps}};function Ip(p){return p==null?function(){}:typeof p=="string"?(x=p).split(".").length===1?function(v){return v[x]}:function(v){return O(v,x)}:function(v){return O(v,p)};var x}function U0(p){return[].slice.call(p)}var JP=0;function el(p){return p==null?":id":typeof p=="string"?p:"[".concat(p.join("+"),"]")}function ZP(p,x,X){function k(V){if(V.type===3)return null;if(V.type===4)throw new Error("Cannot convert never type to IDBKeyRange");var W=V.lower,$=V.upper,q=V.lowerOpen,V=V.upperOpen;return W===void 0?$===void 0?null:x.upperBound($,!!V):$===void 0?x.lowerBound(W,!!q):x.bound(W,$,!!q,!!V)}function A(U){var W,$=U.name;return{name:$,schema:U,mutate:function(q){var V=q.trans,Z=q.type,Q=q.keys,ee=q.values,re=q.range;return new Promise(function(ge,Se){ge=Rt(ge);var me=V.objectStore($),ye=me.keyPath==null,Te=Z==="put"||Z==="add";if(!Te&&Z!=="delete"&&Z!=="deleteRange")throw new Error("Invalid operation type: "+Z);var we,De=(Q||ee||{length:1}).length;if(Q&&ee&&Q.length!==ee.length)throw new Error("Given keys array must have same length as given values array.");if(De===0)return ge({numFailures:0,failures:{},results:[],lastResult:void 0});function Qe(Bn){++Qn,Ja(Bn)}var at=[],lt=[],Qn=0;if(Z==="deleteRange"){if(re.type===4)return ge({numFailures:Qn,failures:lt,results:[],lastResult:void 0});re.type===3?at.push(we=me.clear()):at.push(we=me.delete(k(re)))}else{var ye=Te?ye?[ee,Q]:[ee,null]:[Q,null],Ke=ye[0],An=ye[1];if(Te)for(var Mn=0;Mn<De;++Mn)at.push(we=An&&An[Mn]!==void 0?me[Z](Ke[Mn],An[Mn]):me[Z](Ke[Mn])),we.onerror=Qe;else for(Mn=0;Mn<De;++Mn)at.push(we=me[Z](Ke[Mn])),we.onerror=Qe}function Yh(Bn){Bn=Bn.target.result,at.forEach(function(Ns,qp){return Ns.error!=null&&(lt[qp]=Ns.error)}),ge({numFailures:Qn,failures:lt,results:Z==="delete"?Q:at.map(function(Ns){return Ns.result}),lastResult:Bn})}we.onerror=function(Bn){Qe(Bn),Yh(Bn)},we.onsuccess=Yh})},getMany:function(q){var V=q.trans,Z=q.keys;return new Promise(function(Q,ee){Q=Rt(Q);for(var re,ge=V.objectStore($),Se=Z.length,me=new Array(Se),ye=0,Te=0,we=function(at){at=at.target,me[at._pos]=at.result,++Te===ye&&Q(me)},De=Bi(ee),Qe=0;Qe<Se;++Qe)Z[Qe]!=null&&((re=ge.get(Z[Qe]))._pos=Qe,re.onsuccess=we,re.onerror=De,++ye);ye===0&&Q(me)})},get:function(q){var V=q.trans,Z=q.key;return new Promise(function(Q,ee){Q=Rt(Q);var re=V.objectStore($).get(Z);re.onsuccess=function(ge){return Q(ge.target.result)},re.onerror=Bi(ee)})},query:(W=Y,function(q){return new Promise(function(V,Z){V=Rt(V);var Q,ee,re,ye=q.trans,ge=q.values,Se=q.limit,we=q.query,me=Se===1/0?void 0:Se,Te=we.index,we=we.range,ye=ye.objectStore($),Te=Te.isPrimaryKey?ye:ye.index(Te.name),we=k(we);if(Se===0)return V({result:[]});W?((me=ge?Te.getAll(we,me):Te.getAllKeys(we,me)).onsuccess=function(De){return V({result:De.target.result})},me.onerror=Bi(Z)):(Q=0,ee=!ge&&"openKeyCursor"in Te?Te.openKeyCursor(we):Te.openCursor(we),re=[],ee.onsuccess=function(De){var Qe=ee.result;return Qe?(re.push(ge?Qe.value:Qe.primaryKey),++Q===Se?V({result:re}):void Qe.continue()):V({result:re})},ee.onerror=Bi(Z))})}),openCursor:function(q){var V=q.trans,Z=q.values,Q=q.query,ee=q.reverse,re=q.unique;return new Promise(function(ge,Se){ge=Rt(ge);var Te=Q.index,me=Q.range,ye=V.objectStore($),ye=Te.isPrimaryKey?ye:ye.index(Te.name),Te=ee?re?"prevunique":"prev":re?"nextunique":"next",we=!Z&&"openKeyCursor"in ye?ye.openKeyCursor(k(me),Te):ye.openCursor(k(me),Te);we.onerror=Bi(Se),we.onsuccess=Rt(function(De){var Qe,at,lt,Qn,Ke=we.result;Ke?(Ke.___id=++JP,Ke.done=!1,Qe=Ke.continue.bind(Ke),at=(at=Ke.continuePrimaryKey)&&at.bind(Ke),lt=Ke.advance.bind(Ke),Qn=function(){throw new Error("Cursor not stopped")},Ke.trans=V,Ke.stop=Ke.continue=Ke.continuePrimaryKey=Ke.advance=function(){throw new Error("Cursor not started")},Ke.fail=Rt(Se),Ke.next=function(){var An=this,Mn=1;return this.start(function(){return Mn--?An.continue():An.stop()}).then(function(){return An})},Ke.start=function(An){function Mn(){if(we.result)try{An()}catch(Bn){Ke.fail(Bn)}else Ke.done=!0,Ke.start=function(){throw new Error("Cursor behind last entry")},Ke.stop()}var Yh=new Promise(function(Bn,Ns){Bn=Rt(Bn),we.onerror=Bi(Ns),Ke.fail=Ns,Ke.stop=function(qp){Ke.stop=Ke.continue=Ke.continuePrimaryKey=Ke.advance=Qn,Bn(qp)}});return we.onsuccess=Rt(function(Bn){we.onsuccess=Mn,Mn()}),Ke.continue=Qe,Ke.continuePrimaryKey=at,Ke.advance=lt,Mn(),Yh},ge(Ke)):ge(null)},Se)})},count:function(q){var V=q.query,Z=q.trans,Q=V.index,ee=V.range;return new Promise(function(re,ge){var Se=Z.objectStore($),me=Q.isPrimaryKey?Se:Se.index(Q.name),Se=k(ee),me=Se?me.count(Se):me.count();me.onsuccess=Rt(function(ye){return re(ye.target.result)}),me.onerror=Bi(ge)})}}}var E,P,N,G=(P=X,N=U0((E=p).objectStoreNames),{schema:{name:E.name,tables:N.map(function(U){return P.objectStore(U)}).map(function(U){var W=U.keyPath,V=U.autoIncrement,$=a(W),q={},V={name:U.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:W==null,compound:$,keyPath:W,autoIncrement:V,unique:!0,extractKey:Ip(W)},indexes:U0(U.indexNames).map(function(Z){return U.index(Z)}).map(function(re){var Q=re.name,ee=re.unique,ge=re.multiEntry,re=re.keyPath,ge={name:Q,compound:a(re),keyPath:re,unique:ee,multiEntry:ge,extractKey:Ip(re)};return q[el(re)]=ge}),getIndexByKeyPath:function(Z){return q[el(Z)]}};return q[":id"]=V.primaryKey,W!=null&&(q[el(W)]=V.primaryKey),V})},hasGetAll:0<N.length&&"getAll"in P.objectStore(N[0])&&!(typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}),X=G.schema,Y=G.hasGetAll,G=X.tables.map(A),_={};return G.forEach(function(U){return _[U.name]=U}),{stack:"dbcore",transaction:p.transaction.bind(p),table:function(U){if(!_[U])throw new Error("Table '".concat(U,"' not found"));return _[U]},MIN_KEY:-1/0,MAX_KEY:Qa(x),schema:X}}function QP(p,x,v,k){var A=v.IDBKeyRange;return v.indexedDB,{dbcore:(k=ZP(x,A,k),p.dbcore.reduce(function(E,P){return P=P.create,n(n({},E),P(E))},k))}}function Ph(p,k){var v=k.db,k=QP(p._middlewares,v,p._deps,k);p.core=k.dbcore,p.tables.forEach(function(A){var E=A.name;p.core.schema.tables.some(function(P){return P.name===E})&&(A.core=p.core.table(E),p[E]instanceof p.Table&&(p[E].core=A.core))})}function Lh(p,x,v,k){v.forEach(function(A){var E=k[A];x.forEach(function(P){var N=function X(Y,G){return b(Y,G)||(Y=c(Y))&&X(Y,G)}(P,A);(!N||"value"in N&&N.value===void 0)&&(P===p.Transaction.prototype||P instanceof p.Transaction?g(P,A,{get:function(){return this.table(A)},set:function(X){f(this,A,{value:X,writable:!0,configurable:!0,enumerable:!0})}}):P[A]=new p.Table(A,E))})})}function Pp(p,x){x.forEach(function(v){for(var k in v)v[k]instanceof p.Table&&delete v[k]})}function eL(p,x){return p._cfg.version-x._cfg.version}function tL(p,x,v,k){var A=p._dbSchema;v.objectStoreNames.contains("$meta")&&!A.$meta&&(A.$meta=Op("$meta",J0("")[0],[]),p._storeNames.push("$meta"));var E=p._createTransaction("readwrite",p._storeNames,A);E.create(v),E._completion.catch(k);var P=E._reject.bind(E),N=Ie.transless||Ie;Hr(function(){return Ie.trans=E,Ie.transless=N,x!==0?(Ph(p,v),Y=x,((X=E).storeNames.includes("$meta")?X.table("$meta").get("version").then(function(G){return G??Y}):Pe.resolve(Y)).then(function(G){return U=G,W=E,$=v,q=[],G=(_=p)._versions,V=_._dbSchema=Dh(0,_.idbdb,$),(G=G.filter(function(Z){return Z._cfg.version>=U})).length!==0?(G.forEach(function(Z){q.push(function(){var Q=V,ee=Z._cfg.dbschema;Nh(_,Q,$),Nh(_,ee,$),V=_._dbSchema=ee;var re=Lp(Q,ee);re.add.forEach(function(Te){Rp($,Te[0],Te[1].primKey,Te[1].indexes)}),re.change.forEach(function(Te){if(Te.recreate)throw new Ce.Upgrade("Not yet support for changing primary key");var we=$.objectStore(Te.name);Te.add.forEach(function(De){return Rh(we,De)}),Te.change.forEach(function(De){we.deleteIndex(De.name),Rh(we,De)}),Te.del.forEach(function(De){return we.deleteIndex(De)})});var ge=Z._cfg.contentUpgrade;if(ge&&Z._cfg.version>U){Ph(_,$),W._memoizedTables={};var Se=I(ee);re.del.forEach(function(Te){Se[Te]=Q[Te]}),Pp(_,[_.Transaction.prototype]),Lh(_,[_.Transaction.prototype],o(Se),Se),W.schema=Se;var me,ye=_e(ge);return ye&&Mo(),re=Pe.follow(function(){var Te;(me=ge(W))&&ye&&(Te=Xr.bind(null,null),me.then(Te,Te))}),me&&typeof me.then=="function"?Pe.resolve(me):re.then(function(){return me})}}),q.push(function(Q){var ee,re,ge=Z._cfg.dbschema;ee=ge,re=Q,[].slice.call(re.db.objectStoreNames).forEach(function(Se){return ee[Se]==null&&re.db.deleteObjectStore(Se)}),Pp(_,[_.Transaction.prototype]),Lh(_,[_.Transaction.prototype],_._storeNames,_._dbSchema),W.schema=_._dbSchema}),q.push(function(Q){_.idbdb.objectStoreNames.contains("$meta")&&(Math.ceil(_.idbdb.version/10)===Z._cfg.version?(_.idbdb.deleteObjectStore("$meta"),delete _._dbSchema.$meta,_._storeNames=_._storeNames.filter(function(ee){return ee!=="$meta"})):Q.objectStore("$meta").put(Z._cfg.version,"version"))})}),function Z(){return q.length?Pe.resolve(q.shift()(W.idbtrans)).then(Z):Pe.resolve()}().then(function(){K0(V,$)})):Pe.resolve();var _,U,W,$,q,V}).catch(P)):(o(A).forEach(function(G){Rp(v,G,A[G].primKey,A[G].indexes)}),Ph(p,v),void Pe.follow(function(){return p.on.populate.fire(E)}).catch(P));var X,Y})}function nL(p,x){K0(p._dbSchema,x),x.db.version%10!=0||x.objectStoreNames.contains("$meta")||x.db.createObjectStore("$meta").add(Math.ceil(x.db.version/10-1),"version");var v=Dh(0,p.idbdb,x);Nh(p,p._dbSchema,x);for(var k=0,A=Lp(v,p._dbSchema).change;k<A.length;k++){var E=function(P){if(P.change.length||P.recreate)return console.warn("Unable to patch indexes of table ".concat(P.name," because it has changes on the type of index or primary key.")),{value:void 0};var N=x.objectStore(P.name);P.add.forEach(function(X){fe&&console.debug("Dexie upgrade patch: Creating missing index ".concat(P.name,".").concat(X.src)),Rh(N,X)})}(A[k]);if(typeof E=="object")return E.value}}function Lp(p,x){var v,k={del:[],add:[],change:[]};for(v in p)x[v]||k.del.push(v);for(v in x){var A=p[v],E=x[v];if(A){var P={name:v,def:E,recreate:!1,del:[],add:[],change:[]};if(""+(A.primKey.keyPath||"")!=""+(E.primKey.keyPath||"")||A.primKey.auto!==E.primKey.auto)P.recreate=!0,k.change.push(P);else{var N=A.idxByName,X=E.idxByName,Y=void 0;for(Y in N)X[Y]||P.del.push(Y);for(Y in X){var G=N[Y],_=X[Y];G?G.src!==_.src&&P.change.push(_):P.add.push(_)}(0<P.del.length||0<P.add.length||0<P.change.length)&&k.change.push(P)}}else k.add.push([v,E])}return k}function Rp(p,x,v,k){var A=p.db.createObjectStore(x,v.keyPath?{keyPath:v.keyPath,autoIncrement:v.auto}:{autoIncrement:v.auto});return k.forEach(function(E){return Rh(A,E)}),A}function K0(p,x){o(p).forEach(function(v){x.db.objectStoreNames.contains(v)||(fe&&console.debug("Dexie: Creating missing table",v),Rp(x,v,p[v].primKey,p[v].indexes))})}function Rh(p,x){p.createIndex(x.name,x.keyPath,{unique:x.unique,multiEntry:x.multi})}function Dh(p,x,v){var k={};return w(x.objectStoreNames,0).forEach(function(A){for(var E=v.objectStore(A),P=Ep(q0(Y=E.keyPath),Y||"",!0,!1,!!E.autoIncrement,Y&&typeof Y!="string",!0),N=[],X=0;X<E.indexNames.length;++X){var G=E.index(E.indexNames[X]),Y=G.keyPath,G=Ep(G.name,Y,!!G.unique,!!G.multiEntry,!1,Y&&typeof Y!="string",!1);N.push(G)}k[A]=Op(A,P,N)}),k}function Nh(p,x,v){for(var k=v.db.objectStoreNames,A=0;A<k.length;++A){var E=k[A],P=v.objectStore(E);p._hasGetAll="getAll"in P;for(var N=0;N<P.indexNames.length;++N){var X=P.indexNames[N],Y=P.index(X).keyPath,G=typeof Y=="string"?Y:"["+w(Y).join("+")+"]";!x[E]||(Y=x[E].idxByName[G])&&(Y.name=X,delete x[E].idxByName[G],x[E].idxByName[X]=Y)}}typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&s.WorkerGlobalScope&&s instanceof s.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(p._hasGetAll=!1)}function J0(p){return p.split(",").map(function(x,v){var k=(x=x.trim()).replace(/([&*]|\+\+)/g,""),A=/^\[/.test(k)?k.match(/^\[(.*)\]$/)[1].split("+"):k;return Ep(k,A||null,/\&/.test(x),/\*/.test(x),/\+\+/.test(x),a(A),v===0)})}var iL=(_h.prototype._parseStoresSpec=function(p,x){o(p).forEach(function(v){if(p[v]!==null){var k=J0(p[v]),A=k.shift();if(A.unique=!0,A.multi)throw new Ce.Schema("Primary key cannot be multi-valued");k.forEach(function(E){if(E.auto)throw new Ce.Schema("Only primary key can be marked as autoIncrement (++)");if(!E.keyPath)throw new Ce.Schema("Index must have a name and cannot be an empty string")}),x[v]=Op(v,A,k)}})},_h.prototype.stores=function(v){var x=this.db;this._cfg.storesSource=this._cfg.storesSource?l(this._cfg.storesSource,v):v;var v=x._versions,k={},A={};return v.forEach(function(E){l(k,E._cfg.storesSource),A=E._cfg.dbschema={},E._parseStoresSpec(k,A)}),x._dbSchema=A,Pp(x,[x._allTables,x,x.Transaction.prototype]),Lh(x,[x._allTables,x,x.Transaction.prototype,this._cfg.tables],o(A),A),x._storeNames=o(A),this},_h.prototype.upgrade=function(p){return this._cfg.contentUpgrade=be(this._cfg.contentUpgrade||ct,p),this},_h);function _h(){}function Dp(p,x){var v=p._dbNamesDB;return v||(v=p._dbNamesDB=new cr(Mh,{addons:[],indexedDB:p,IDBKeyRange:x})).version(1).stores({dbnames:"name"}),v.table("dbnames")}function Np(p){return p&&typeof p.databases=="function"}function _p(p){return Hr(function(){return Ie.letThrough=!0,p()})}function zp(p){return!("from"in p)}var Cn=function(p,x){if(!this){var v=new Cn;return p&&"d"in p&&l(v,p),v}l(this,arguments.length?{d:1,from:p,to:1<arguments.length?x:p}:{d:0})};function tl(p,x,v){var k=ut(x,v);if(!isNaN(k)){if(0<k)throw RangeError();if(zp(p))return l(p,{from:x,to:v,d:1});var A=p.l,k=p.r;if(ut(v,p.from)<0)return A?tl(A,x,v):p.l={from:x,to:v,d:1,l:null,r:null},Q0(p);if(0<ut(x,p.to))return k?tl(k,x,v):p.r={from:x,to:v,d:1,l:null,r:null},Q0(p);ut(x,p.from)<0&&(p.from=x,p.l=null,p.d=k?k.d+1:1),0<ut(v,p.to)&&(p.to=v,p.r=null,p.d=p.l?p.l.d+1:1),v=!p.r,A&&!p.l&&nl(p,A),k&&v&&nl(p,k)}}function nl(p,x){zp(x)||function v(k,X){var E=X.from,P=X.to,N=X.l,X=X.r;tl(k,E,P),N&&v(k,N),X&&v(k,X)}(p,x)}function Z0(p,x){var v=zh(x),k=v.next();if(k.done)return!1;for(var A=k.value,E=zh(p),P=E.next(A.from),N=P.value;!k.done&&!P.done;){if(ut(N.from,A.to)<=0&&0<=ut(N.to,A.from))return!0;ut(A.from,N.from)<0?A=(k=v.next(N.from)).value:N=(P=E.next(A.from)).value}return!1}function zh(p){var x=zp(p)?null:{s:0,n:p};return{next:function(v){for(var k=0<arguments.length;x;)switch(x.s){case 0:if(x.s=1,k)for(;x.n.l&&ut(v,x.n.from)<0;)x={up:x,n:x.n.l,s:1};else for(;x.n.l;)x={up:x,n:x.n.l,s:1};case 1:if(x.s=2,!k||ut(v,x.n.to)<=0)return{value:x.n,done:!1};case 2:if(x.n.r){x.s=3,x={up:x,n:x.n.r,s:0};continue}case 3:x=x.up}return{done:!0}}}}function Q0(p){var x,v,k=(((x=p.r)===null||x===void 0?void 0:x.d)||0)-(((v=p.l)===null||v===void 0?void 0:v.d)||0),A=1<k?"r":k<-1?"l":"";A&&(x=A=="r"?"l":"r",v=n({},p),k=p[A],p.from=k.from,p.to=k.to,p[A]=k[A],v[A]=k[x],(p[x]=v).d=ew(v)),p.d=ew(p)}function ew(v){var x=v.r,v=v.l;return(x?v?Math.max(x.d,v.d):x.d:v?v.d:0)+1}function Fh(p,x){return o(x).forEach(function(v){p[v]?nl(p[v],x[v]):p[v]=function k(A){var E,P,N={};for(E in A)u(A,E)&&(P=A[E],N[E]=!P||typeof P!="object"||D.has(P.constructor)?P:k(P));return N}(x[v])}),p}function Fp(p,x){return p.all||x.all||Object.keys(p).some(function(v){return x[v]&&Z0(x[v],p[v])})}d(Cn.prototype,((hi={add:function(p){return nl(this,p),this},addKey:function(p){return tl(this,p,p),this},addKeys:function(p){var x=this;return p.forEach(function(v){return tl(x,v,v)}),this},hasKey:function(p){var x=zh(this).next(p).value;return x&&ut(x.from,p)<=0&&0<=ut(x.to,p)}})[ne]=function(){return zh(this)},hi));var Rs={},Bp={},Hp=!1;function Bh(p){Fh(Bp,p),Hp||(Hp=!0,setTimeout(function(){Hp=!1,Xp(Bp,!(Bp={}))},0))}function Xp(p,x){x===void 0&&(x=!1);var v=new Set;if(p.all)for(var k=0,A=Object.values(Rs);k<A.length;k++)tw(P=A[k],p,v,x);else for(var E in p){var P,N=/^idb\:\/\/(.*)\/(.*)\//.exec(E);N&&(E=N[1],N=N[2],(P=Rs["idb://".concat(E,"/").concat(N)])&&tw(P,p,v,x))}v.forEach(function(X){return X()})}function tw(p,x,v,k){for(var A=[],E=0,P=Object.entries(p.queries.query);E<P.length;E++){for(var N=P[E],X=N[0],Y=[],G=0,_=N[1];G<_.length;G++){var U=_[G];Fp(x,U.obsSet)?U.subscribers.forEach(function(V){return v.add(V)}):k&&Y.push(U)}k&&A.push([X,Y])}if(k)for(var W=0,$=A;W<$.length;W++){var q=$[W],X=q[0],Y=q[1];p.queries.query[X]=Y}}function rL(p){var x=p._state,v=p._deps.indexedDB;if(x.isBeingOpened||p.idbdb)return x.dbReadyPromise.then(function(){return x.dbOpenError?Wt(x.dbOpenError):p});x.isBeingOpened=!0,x.dbOpenError=null,x.openComplete=!1;var k=x.openCanceller,A=Math.round(10*p.verno),E=!1;function P(){if(x.openCanceller!==k)throw new Ce.DatabaseClosed("db.open() was cancelled")}function N(){return new Pe(function(U,W){if(P(),!v)throw new Ce.MissingAPI;var $=p.name,q=x.autoSchema||!A?v.open($):v.open($,A);if(!q)throw new Ce.MissingAPI;q.onerror=Bi(W),q.onblocked=Rt(p._fireOnBlocked),q.onupgradeneeded=Rt(function(V){var Z;G=q.transaction,x.autoSchema&&!p._options.allowEmptyDB?(q.onerror=Ja,G.abort(),q.result.close(),(Z=v.deleteDatabase($)).onsuccess=Z.onerror=Rt(function(){W(new Ce.NoSuchDatabase("Database ".concat($," doesnt exist")))})):(G.onerror=Bi(W),V=V.oldVersion>Math.pow(2,62)?0:V.oldVersion,_=V<1,p.idbdb=q.result,E&&nL(p,G),tL(p,V/10,G,W))},W),q.onsuccess=Rt(function(){G=null;var V,Z,Q,ee,re,ge=p.idbdb=q.result,Se=w(ge.objectStoreNames);if(0<Se.length)try{var me=ge.transaction((ee=Se).length===1?ee[0]:ee,"readonly");if(x.autoSchema)Z=ge,Q=me,(V=p).verno=Z.version/10,Q=V._dbSchema=Dh(0,Z,Q),V._storeNames=w(Z.objectStoreNames,0),Lh(V,[V._allTables],o(Q),Q);else if(Nh(p,p._dbSchema,me),((re=Lp(Dh(0,(re=p).idbdb,me),re._dbSchema)).add.length||re.change.some(function(ye){return ye.add.length||ye.change.length}))&&!E)return console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Dexie will add missing parts and increment native version number to workaround this."),ge.close(),A=ge.version+1,E=!0,U(N());Ph(p,me)}catch{}To.push(p),ge.onversionchange=Rt(function(ye){x.vcFired=!0,p.on("versionchange").fire(ye)}),ge.onclose=Rt(function(ye){p.on("close").fire(ye)}),_&&(re=p._deps,me=$,ge=re.indexedDB,re=re.IDBKeyRange,Np(ge)||me===Mh||Dp(ge,re).put({name:me}).catch(ct)),U()},W)}).catch(function(U){switch(U==null?void 0:U.name){case"UnknownError":if(0<x.PR1398_maxLoop)return x.PR1398_maxLoop--,console.warn("Dexie: Workaround for Chrome UnknownError on open()"),N();break;case"VersionError":if(0<A)return A=0,N()}return Pe.reject(U)})}var X,Y=x.dbReadyResolve,G=null,_=!1;return Pe.race([k,(typeof navigator>"u"?Pe.resolve():!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent)&&indexedDB.databases?new Promise(function(U){function W(){return indexedDB.databases().finally(U)}X=setInterval(W,100),W()}).finally(function(){return clearInterval(X)}):Promise.resolve()).then(N)]).then(function(){return P(),x.onReadyBeingFired=[],Pe.resolve(_p(function(){return p.on.ready.fire(p.vip)})).then(function U(){if(0<x.onReadyBeingFired.length){var W=x.onReadyBeingFired.reduce(be,ct);return x.onReadyBeingFired=[],Pe.resolve(_p(function(){return W(p.vip)})).then(U)}})}).finally(function(){x.openCanceller===k&&(x.onReadyBeingFired=null,x.isBeingOpened=!1)}).catch(function(U){x.dbOpenError=U;try{G&&G.abort()}catch{}return k===x.openCanceller&&p._close(),Wt(U)}).finally(function(){x.openComplete=!0,Y()}).then(function(){var U;return _&&(U={},p.tables.forEach(function(W){W.schema.indexes.forEach(function($){$.name&&(U["idb://".concat(p.name,"/").concat(W.name,"/").concat($.name)]=new Cn(-1/0,[[[]]]))}),U["idb://".concat(p.name,"/").concat(W.name,"/")]=U["idb://".concat(p.name,"/").concat(W.name,"/:dels")]=new Cn(-1/0,[[[]]])}),jr(Za).fire(U),Xp(U,!0)),p})}function Wp(p){function x(E){return p.next(E)}var v=A(x),k=A(function(E){return p.throw(E)});function A(E){return function(X){var N=E(X),X=N.value;return N.done?X:X&&typeof X.then=="function"?X.then(v,k):a(X)?Promise.all(X).then(v,k):v(X)}}return A(x)()}function Hh(p,x,v){for(var k=a(p)?p.slice():[p],A=0;A<v;++A)k.push(x);return k}var sL={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:function(p){return n(n({},p),{table:function(x){var v=p.table(x),k=v.schema,A={},E=[];function P(_,U,W){var $=el(_),q=A[$]=A[$]||[],V=_==null?0:typeof _=="string"?1:_.length,Z=0<U,Z=n(n({},W),{name:Z?"".concat($,"(virtual-from:").concat(W.name,")"):W.name,lowLevelIndex:W,isVirtual:Z,keyTail:U,keyLength:V,extractKey:Ip(_),unique:!Z&&W.unique});return q.push(Z),Z.isPrimaryKey||E.push(Z),1<V&&P(V===2?_[0]:_.slice(0,V-1),U+1,W),q.sort(function(Q,ee){return Q.keyTail-ee.keyTail}),Z}x=P(k.primaryKey.keyPath,0,k.primaryKey),A[":id"]=[x];for(var N=0,X=k.indexes;N<X.length;N++){var Y=X[N];P(Y.keyPath,0,Y)}function G(_){var U,W=_.query.index;return W.isVirtual?n(n({},_),{query:{index:W.lowLevelIndex,range:(U=_.query.range,W=W.keyTail,{type:U.type===1?2:U.type,lower:Hh(U.lower,U.lowerOpen?p.MAX_KEY:p.MIN_KEY,W),lowerOpen:!0,upper:Hh(U.upper,U.upperOpen?p.MIN_KEY:p.MAX_KEY,W),upperOpen:!0})}}):_}return n(n({},v),{schema:n(n({},k),{primaryKey:x,indexes:E,getIndexByKeyPath:function(_){return(_=A[el(_)])&&_[0]}}),count:function(_){return v.count(G(_))},query:function(_){return v.query(G(_))},openCursor:function(_){var U=_.query.index,W=U.keyTail,$=U.isVirtual,q=U.keyLength;return $?v.openCursor(G(_)).then(function(Z){return Z&&V(Z)}):v.openCursor(_);function V(Z){return Object.create(Z,{continue:{value:function(Q){Q!=null?Z.continue(Hh(Q,_.reverse?p.MAX_KEY:p.MIN_KEY,W)):_.unique?Z.continue(Z.key.slice(0,q).concat(_.reverse?p.MIN_KEY:p.MAX_KEY,W)):Z.continue()}},continuePrimaryKey:{value:function(Q,ee){Z.continuePrimaryKey(Hh(Q,p.MAX_KEY,W),ee)}},primaryKey:{get:function(){return Z.primaryKey}},key:{get:function(){var Q=Z.key;return q===1?Q[0]:Q.slice(0,q)}},value:{get:function(){return Z.value}}})}}})}})}};function Yp(p,x,v,k){return v=v||{},k=k||"",o(p).forEach(function(A){var E,P,N;u(x,A)?(E=p[A],P=x[A],typeof E=="object"&&typeof P=="object"&&E&&P?(N=se(E))!==se(P)?v[k+A]=x[A]:N==="Object"?Yp(E,P,v,k+A+"."):E!==P&&(v[k+A]=x[A]):E!==P&&(v[k+A]=x[A])):v[k+A]=void 0}),o(x).forEach(function(A){u(p,A)||(v[k+A]=x[A])}),v}function jp(p,x){return x.type==="delete"?x.keys:x.keys||x.values.map(p.extractKey)}var oL={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(p){return n(n({},p),{table:function(x){var v=p.table(x),k=v.schema.primaryKey;return n(n({},v),{mutate:function(A){var E=Ie.trans,P=E.table(x).hook,N=P.deleting,X=P.creating,Y=P.updating;switch(A.type){case"add":if(X.fire===ct)break;return E._promise("readwrite",function(){return G(A)},!0);case"put":if(X.fire===ct&&Y.fire===ct)break;return E._promise("readwrite",function(){return G(A)},!0);case"delete":if(N.fire===ct)break;return E._promise("readwrite",function(){return G(A)},!0);case"deleteRange":if(N.fire===ct)break;return E._promise("readwrite",function(){return function _(U,W,$){return v.query({trans:U,values:!1,query:{index:k,range:W},limit:$}).then(function(q){var V=q.result;return G({type:"delete",keys:V,trans:U}).then(function(Z){return 0<Z.numFailures?Promise.reject(Z.failures[0]):V.length<$?{failures:[],numFailures:0,lastResult:void 0}:_(U,n(n({},W),{lower:V[V.length-1],lowerOpen:!0}),$)})})}(A.trans,A.range,1e4)},!0)}return v.mutate(A);function G(_){var U,W,$,q=Ie.trans,V=_.keys||jp(k,_);if(!V)throw new Error("Keys missing");return(_=_.type==="add"||_.type==="put"?n(n({},_),{keys:V}):n({},_)).type!=="delete"&&(_.values=r([],_.values)),_.keys&&(_.keys=r([],_.keys)),U=v,$=V,((W=_).type==="add"?Promise.resolve([]):U.getMany({trans:W.trans,keys:$,cache:"immutable"})).then(function(Z){var Q=V.map(function(ee,re){var ge,Se,me,ye=Z[re],Te={onerror:null,onsuccess:null};return _.type==="delete"?N.fire.call(Te,ee,ye,q):_.type==="add"||ye===void 0?(ge=X.fire.call(Te,ee,_.values[re],q),ee==null&&ge!=null&&(_.keys[re]=ee=ge,k.outbound||T(_.values[re],k.keyPath,ee))):(ge=Yp(ye,_.values[re]),(Se=Y.fire.call(Te,ge,ee,ye,q))&&(me=_.values[re],Object.keys(Se).forEach(function(we){u(me,we)?me[we]=Se[we]:T(me,we,Se[we])}))),Te});return v.mutate(_).then(function(ee){for(var re=ee.failures,ge=ee.results,Se=ee.numFailures,ee=ee.lastResult,me=0;me<V.length;++me){var ye=(ge||V)[me],Te=Q[me];ye==null?Te.onerror&&Te.onerror(re[me]):Te.onsuccess&&Te.onsuccess(_.type==="put"&&Z[me]?_.values[me]:ye)}return{failures:re,results:ge,numFailures:Se,lastResult:ee}}).catch(function(ee){return Q.forEach(function(re){return re.onerror&&re.onerror(ee)}),Promise.reject(ee)})})}}})}})}};function nw(p,x,v){try{if(!x||x.keys.length<p.length)return null;for(var k=[],A=0,E=0;A<x.keys.length&&E<p.length;++A)ut(x.keys[A],p[E])===0&&(k.push(v?K(x.values[A]):x.values[A]),++E);return k.length===p.length?k:null}catch{return null}}var aL={stack:"dbcore",level:-1,create:function(p){return{table:function(x){var v=p.table(x);return n(n({},v),{getMany:function(k){if(!k.cache)return v.getMany(k);var A=nw(k.keys,k.trans._cache,k.cache==="clone");return A?Pe.resolve(A):v.getMany(k).then(function(E){return k.trans._cache={keys:k.keys,values:k.cache==="clone"?K(E):E},E})},mutate:function(k){return k.type!=="add"&&(k.trans._cache=null),v.mutate(k)}})}}}};function iw(p,x){return p.trans.mode==="readonly"&&!!p.subscr&&!p.trans.explicit&&p.trans.db._options.cache!=="disabled"&&!x.schema.primaryKey.outbound}function rw(p,x){switch(p){case"query":return x.values&&!x.unique;case"get":case"getMany":case"count":case"openCursor":return!1}}var lL={stack:"dbcore",level:0,name:"Observability",create:function(p){var x=p.schema.name,v=new Cn(p.MIN_KEY,p.MAX_KEY);return n(n({},p),{transaction:function(k,A,E){if(Ie.subscr&&A!=="readonly")throw new Ce.ReadOnly("Readwrite transaction in liveQuery context. Querier source: ".concat(Ie.querier));return p.transaction(k,A,E)},table:function(k){var A=p.table(k),E=A.schema,P=E.primaryKey,_=E.indexes,N=P.extractKey,X=P.outbound,Y=P.autoIncrement&&_.filter(function(W){return W.compound&&W.keyPath.includes(P.keyPath)}),G=n(n({},A),{mutate:function(W){function $(we){return we="idb://".concat(x,"/").concat(k,"/").concat(we),ee[we]||(ee[we]=new Cn)}var q,V,Z,Q=W.trans,ee=W.mutatedParts||(W.mutatedParts={}),re=$(""),ge=$(":dels"),Se=W.type,Te=W.type==="deleteRange"?[W.range]:W.type==="delete"?[W.keys]:W.values.length<50?[jp(P,W).filter(function(we){return we}),W.values]:[],me=Te[0],ye=Te[1],Te=W.trans._cache;return a(me)?(re.addKeys(me),(Te=Se==="delete"||me.length===ye.length?nw(me,Te):null)||ge.addKeys(me),(Te||ye)&&(q=$,V=Te,Z=ye,E.indexes.forEach(function(we){var De=q(we.name||"");function Qe(lt){return lt!=null?we.extractKey(lt):null}function at(lt){return we.multiEntry&&a(lt)?lt.forEach(function(Qn){return De.addKey(Qn)}):De.addKey(lt)}(V||Z).forEach(function(lt,An){var Ke=V&&Qe(V[An]),An=Z&&Qe(Z[An]);ut(Ke,An)!==0&&(Ke!=null&&at(Ke),An!=null&&at(An))})}))):me?(ye={from:(ye=me.lower)!==null&&ye!==void 0?ye:p.MIN_KEY,to:(ye=me.upper)!==null&&ye!==void 0?ye:p.MAX_KEY},ge.add(ye),re.add(ye)):(re.add(v),ge.add(v),E.indexes.forEach(function(we){return $(we.name).add(v)})),A.mutate(W).then(function(we){return!me||W.type!=="add"&&W.type!=="put"||(re.addKeys(we.results),Y&&Y.forEach(function(De){for(var Qe=W.values.map(function(Ke){return De.extractKey(Ke)}),at=De.keyPath.findIndex(function(Ke){return Ke===P.keyPath}),lt=0,Qn=we.results.length;lt<Qn;++lt)Qe[lt][at]=we.results[lt];$(De.name).addKeys(Qe)})),Q.mutatedParts=Fh(Q.mutatedParts||{},ee),we})}}),_=function($){var q=$.query,$=q.index,q=q.range;return[$,new Cn(($=q.lower)!==null&&$!==void 0?$:p.MIN_KEY,(q=q.upper)!==null&&q!==void 0?q:p.MAX_KEY)]},U={get:function(W){return[P,new Cn(W.key)]},getMany:function(W){return[P,new Cn().addKeys(W.keys)]},count:_,query:_,openCursor:_};return o(U).forEach(function(W){G[W]=function($){var q=Ie.subscr,V=!!q,Z=iw(Ie,A)&&rw(W,$)?$.obsSet={}:q;if(V){var Q=function(ye){return ye="idb://".concat(x,"/").concat(k,"/").concat(ye),Z[ye]||(Z[ye]=new Cn)},ee=Q(""),re=Q(":dels"),q=U[W]($),V=q[0],q=q[1];if((W==="query"&&V.isPrimaryKey&&!$.values?re:Q(V.name||"")).add(q),!V.isPrimaryKey){if(W!=="count"){var ge=W==="query"&&X&&$.values&&A.query(n(n({},$),{values:!1}));return A[W].apply(this,arguments).then(function(ye){if(W==="query"){if(X&&$.values)return ge.then(function(Qe){return Qe=Qe.result,ee.addKeys(Qe),ye});var Te=$.values?ye.result.map(N):ye.result;($.values?ee:re).addKeys(Te)}else if(W==="openCursor"){var we=ye,De=$.values;return we&&Object.create(we,{key:{get:function(){return re.addKey(we.primaryKey),we.key}},primaryKey:{get:function(){var Qe=we.primaryKey;return re.addKey(Qe),Qe}},value:{get:function(){return De&&ee.addKey(we.primaryKey),we.value}}})}return ye})}re.add(v)}}return A[W].apply(this,arguments)}}),G}})}};function sw(p,x,v){if(v.numFailures===0)return x;if(x.type==="deleteRange")return null;var k=x.keys?x.keys.length:"values"in x&&x.values?x.values.length:1;return v.numFailures===k?null:(x=n({},x),a(x.keys)&&(x.keys=x.keys.filter(function(A,E){return!(E in v.failures)})),"values"in x&&a(x.values)&&(x.values=x.values.filter(function(A,E){return!(E in v.failures)})),x)}function Vp(p,x){return v=p,((k=x).lower===void 0||(k.lowerOpen?0<ut(v,k.lower):0<=ut(v,k.lower)))&&(p=p,(x=x).upper===void 0||(x.upperOpen?ut(p,x.upper)<0:ut(p,x.upper)<=0));var v,k}function ow(p,x,U,k,A,E){if(!U||U.length===0)return p;var P=x.query.index,N=P.multiEntry,X=x.query.range,Y=k.schema.primaryKey.extractKey,G=P.extractKey,_=(P.lowLevelIndex||P).extractKey,U=U.reduce(function(W,$){var q=W,V=[];if($.type==="add"||$.type==="put")for(var Z=new Cn,Q=$.values.length-1;0<=Q;--Q){var ee,re=$.values[Q],ge=Y(re);Z.hasKey(ge)||(ee=G(re),(N&&a(ee)?ee.some(function(we){return Vp(we,X)}):Vp(ee,X))&&(Z.addKey(ge),V.push(re)))}switch($.type){case"add":var Se=new Cn().addKeys(x.values?W.map(function(De){return Y(De)}):W),q=W.concat(x.values?V.filter(function(De){return De=Y(De),!Se.hasKey(De)&&(Se.addKey(De),!0)}):V.map(function(De){return Y(De)}).filter(function(De){return!Se.hasKey(De)&&(Se.addKey(De),!0)}));break;case"put":var me=new Cn().addKeys($.values.map(function(De){return Y(De)}));q=W.filter(function(De){return!me.hasKey(x.values?Y(De):De)}).concat(x.values?V:V.map(function(De){return Y(De)}));break;case"delete":var ye=new Cn().addKeys($.keys);q=W.filter(function(De){return!ye.hasKey(x.values?Y(De):De)});break;case"deleteRange":var Te=$.range;q=W.filter(function(De){return!Vp(Y(De),Te)})}return q},p);return U===p?p:(U.sort(function(W,$){return ut(_(W),_($))||ut(Y(W),Y($))}),x.limit&&x.limit<1/0&&(U.length>x.limit?U.length=x.limit:p.length===x.limit&&U.length<x.limit&&(A.dirty=!0)),E?Object.freeze(U):U)}function aw(p,x){return ut(p.lower,x.lower)===0&&ut(p.upper,x.upper)===0&&!!p.lowerOpen==!!x.lowerOpen&&!!p.upperOpen==!!x.upperOpen}function cL(p,x){return function(v,k,A,E){if(v===void 0)return k!==void 0?-1:0;if(k===void 0)return 1;if((k=ut(v,k))===0){if(A&&E)return 0;if(A)return 1;if(E)return-1}return k}(p.lower,x.lower,p.lowerOpen,x.lowerOpen)<=0&&0<=function(v,k,A,E){if(v===void 0)return k!==void 0?1:0;if(k===void 0)return-1;if((k=ut(v,k))===0){if(A&&E)return 0;if(A)return-1;if(E)return 1}return k}(p.upper,x.upper,p.upperOpen,x.upperOpen)}function hL(p,x,v,k){p.subscribers.add(v),k.addEventListener("abort",function(){var A,E;p.subscribers.delete(v),p.subscribers.size===0&&(A=p,E=x,setTimeout(function(){A.subscribers.size===0&&ae(E,A)},3e3))})}var uL={stack:"dbcore",level:0,name:"Cache",create:function(p){var x=p.schema.name;return n(n({},p),{transaction:function(v,k,A){var E,P,N=p.transaction(v,k,A);return k==="readwrite"&&(P=(E=new AbortController).signal,A=function(X){return function(){if(E.abort(),k==="readwrite"){for(var Y=new Set,G=0,_=v;G<_.length;G++){var U=_[G],W=Rs["idb://".concat(x,"/").concat(U)];if(W){var $=p.table(U),q=W.optimisticOps.filter(function(De){return De.trans===N});if(N._explicit&&X&&N.mutatedParts)for(var V=0,Z=Object.values(W.queries.query);V<Z.length;V++)for(var Q=0,ee=(Se=Z[V]).slice();Q<ee.length;Q++)Fp((me=ee[Q]).obsSet,N.mutatedParts)&&(ae(Se,me),me.subscribers.forEach(function(De){return Y.add(De)}));else if(0<q.length){W.optimisticOps=W.optimisticOps.filter(function(De){return De.trans!==N});for(var re=0,ge=Object.values(W.queries.query);re<ge.length;re++)for(var Se,me,ye,Te=0,we=(Se=ge[re]).slice();Te<we.length;Te++)(me=we[Te]).res!=null&&N.mutatedParts&&(X&&!me.dirty?(ye=Object.isFrozen(me.res),ye=ow(me.res,me.req,q,$,me,ye),me.dirty?(ae(Se,me),me.subscribers.forEach(function(De){return Y.add(De)})):ye!==me.res&&(me.res=ye,me.promise=Pe.resolve({result:ye}))):(me.dirty&&ae(Se,me),me.subscribers.forEach(function(De){return Y.add(De)})))}}}Y.forEach(function(De){return De()})}}},N.addEventListener("abort",A(!1),{signal:P}),N.addEventListener("error",A(!1),{signal:P}),N.addEventListener("complete",A(!0),{signal:P})),N},table:function(v){var k=p.table(v),A=k.schema.primaryKey;return n(n({},k),{mutate:function(E){var P=Ie.trans;if(A.outbound||P.db._options.cache==="disabled"||P.explicit||P.idbtrans.mode!=="readwrite")return k.mutate(E);var N=Rs["idb://".concat(x,"/").concat(v)];return N?(P=k.mutate(E),E.type!=="add"&&E.type!=="put"||!(50<=E.values.length||jp(A,E).some(function(X){return X==null}))?(N.optimisticOps.push(E),E.mutatedParts&&Bh(E.mutatedParts),P.then(function(X){0<X.numFailures&&(ae(N.optimisticOps,E),(X=sw(0,E,X))&&N.optimisticOps.push(X),E.mutatedParts&&Bh(E.mutatedParts))}),P.catch(function(){ae(N.optimisticOps,E),E.mutatedParts&&Bh(E.mutatedParts)})):P.then(function(X){var Y=sw(0,n(n({},E),{values:E.values.map(function(G,_){var U;return X.failures[_]?G:(G=(U=A.keyPath)!==null&&U!==void 0&&U.includes(".")?K(G):n({},G),T(G,A.keyPath,X.results[_]),G)})}),X);N.optimisticOps.push(Y),queueMicrotask(function(){return E.mutatedParts&&Bh(E.mutatedParts)})}),P):k.mutate(E)},query:function(E){if(!iw(Ie,k)||!rw("query",E))return k.query(E);var P=((Y=Ie.trans)===null||Y===void 0?void 0:Y.db._options.cache)==="immutable",_=Ie,N=_.requery,X=_.signal,Y=function($,q,V,Z){var Q=Rs["idb://".concat($,"/").concat(q)];if(!Q)return[];if(!(q=Q.queries[V]))return[null,!1,Q,null];var ee=q[(Z.query?Z.query.index.name:null)||""];if(!ee)return[null,!1,Q,null];switch(V){case"query":var re=ee.find(function(ge){return ge.req.limit===Z.limit&&ge.req.values===Z.values&&aw(ge.req.query.range,Z.query.range)});return re?[re,!0,Q,ee]:[ee.find(function(ge){return("limit"in ge.req?ge.req.limit:1/0)>=Z.limit&&(!Z.values||ge.req.values)&&cL(ge.req.query.range,Z.query.range)}),!1,Q,ee];case"count":return re=ee.find(function(ge){return aw(ge.req.query.range,Z.query.range)}),[re,!!re,Q,ee]}}(x,v,"query",E),G=Y[0],_=Y[1],U=Y[2],W=Y[3];return G&&_?G.obsSet=E.obsSet:(_=k.query(E).then(function($){var q=$.result;if(G&&(G.res=q),P){for(var V=0,Z=q.length;V<Z;++V)Object.freeze(q[V]);Object.freeze(q)}else $.result=K(q);return $}).catch(function($){return W&&G&&ae(W,G),Promise.reject($)}),G={obsSet:E.obsSet,promise:_,subscribers:new Set,type:"query",req:E,dirty:!1},W?W.push(G):(W=[G],(U=U||(Rs["idb://".concat(x,"/").concat(v)]={queries:{query:{},count:{}},objs:new Map,optimisticOps:[],unsignaledParts:{}})).queries.query[E.query.index.name||""]=W)),hL(G,W,N,X),G.promise.then(function($){return{result:ow($.result,E,U==null?void 0:U.optimisticOps,k,G,P)}})}})}})}};function Xh(p,x){return new Proxy(p,{get:function(v,k,A){return k==="db"?x:Reflect.get(v,k,A)}})}var cr=(Yt.prototype.version=function(p){if(isNaN(p)||p<.1)throw new Ce.Type("Given version is not a positive number");if(p=Math.round(10*p)/10,this.idbdb||this._state.isBeingOpened)throw new Ce.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,p);var x=this._versions,v=x.filter(function(k){return k._cfg.version===p})[0];return v||(v=new this.Version(p),x.push(v),x.sort(eL),v.stores({}),this._state.autoSchema=!1,v)},Yt.prototype._whenReady=function(p){var x=this;return this.idbdb&&(this._state.openComplete||Ie.letThrough||this._vip)?p():new Pe(function(v,k){if(x._state.openComplete)return k(new Ce.DatabaseClosed(x._state.dbOpenError));if(!x._state.isBeingOpened){if(!x._state.autoOpen)return void k(new Ce.DatabaseClosed);x.open().catch(ct)}x._state.dbReadyPromise.then(v,k)}).then(p)},Yt.prototype.use=function(p){var x=p.stack,v=p.create,k=p.level,A=p.name;return A&&this.unuse({stack:x,name:A}),p=this._middlewares[x]||(this._middlewares[x]=[]),p.push({stack:x,create:v,level:k??10,name:A}),p.sort(function(E,P){return E.level-P.level}),this},Yt.prototype.unuse=function(p){var x=p.stack,v=p.name,k=p.create;return x&&this._middlewares[x]&&(this._middlewares[x]=this._middlewares[x].filter(function(A){return k?A.create!==k:!!v&&A.name!==v})),this},Yt.prototype.open=function(){var p=this;return Is(Si,function(){return rL(p)})},Yt.prototype._close=function(){var p=this._state,x=To.indexOf(this);if(0<=x&&To.splice(x,1),this.idbdb){try{this.idbdb.close()}catch{}this.idbdb=null}p.isBeingOpened||(p.dbReadyPromise=new Pe(function(v){p.dbReadyResolve=v}),p.openCanceller=new Pe(function(v,k){p.cancelOpen=k}))},Yt.prototype.close=function(v){var x=(v===void 0?{disableAutoOpen:!0}:v).disableAutoOpen,v=this._state;x?(v.isBeingOpened&&v.cancelOpen(new Ce.DatabaseClosed),this._close(),v.autoOpen=!1,v.dbOpenError=new Ce.DatabaseClosed):(this._close(),v.autoOpen=this._options.autoOpen||v.isBeingOpened,v.openComplete=!1,v.dbOpenError=null)},Yt.prototype.delete=function(p){var x=this;p===void 0&&(p={disableAutoOpen:!0});var v=0<arguments.length&&typeof arguments[0]!="object",k=this._state;return new Pe(function(A,E){function P(){x.close(p);var N=x._deps.indexedDB.deleteDatabase(x.name);N.onsuccess=Rt(function(){var X,Y,G;X=x._deps,Y=x.name,G=X.indexedDB,X=X.IDBKeyRange,Np(G)||Y===Mh||Dp(G,X).delete(Y).catch(ct),A()}),N.onerror=Bi(E),N.onblocked=x._fireOnBlocked}if(v)throw new Ce.InvalidArgument("Invalid closeOptions argument to db.delete()");k.isBeingOpened?k.dbReadyPromise.then(P):P()})},Yt.prototype.backendDB=function(){return this.idbdb},Yt.prototype.isOpen=function(){return this.idbdb!==null},Yt.prototype.hasBeenClosed=function(){var p=this._state.dbOpenError;return p&&p.name==="DatabaseClosed"},Yt.prototype.hasFailed=function(){return this._state.dbOpenError!==null},Yt.prototype.dynamicallyOpened=function(){return this._state.autoSchema},Object.defineProperty(Yt.prototype,"tables",{get:function(){var p=this;return o(this._allTables).map(function(x){return p._allTables[x]})},enumerable:!1,configurable:!0}),Yt.prototype.transaction=function(){var p=(function(x,v,k){var A=arguments.length;if(A<2)throw new Ce.InvalidArgument("Too few arguments");for(var E=new Array(A-1);--A;)E[A-1]=arguments[A];return k=E.pop(),[x,z(E),k]}).apply(this,arguments);return this._transaction.apply(this,p)},Yt.prototype._transaction=function(p,x,v){var k=this,A=Ie.trans;A&&A.db===this&&p.indexOf("!")===-1||(A=null);var E,P,N=p.indexOf("?")!==-1;p=p.replace("!","").replace("?","");try{if(P=x.map(function(Y){if(Y=Y instanceof k.Table?Y.name:Y,typeof Y!="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return Y}),p=="r"||p===kp)E=kp;else{if(p!="rw"&&p!=Sp)throw new Ce.InvalidArgument("Invalid transaction mode: "+p);E=Sp}if(A){if(A.mode===kp&&E===Sp){if(!N)throw new Ce.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");A=null}A&&P.forEach(function(Y){if(A&&A.storeNames.indexOf(Y)===-1){if(!N)throw new Ce.SubTransaction("Table "+Y+" not included in parent transaction.");A=null}}),N&&A&&!A.active&&(A=null)}}catch(Y){return A?A._promise(null,function(G,_){_(Y)}):Wt(Y)}var X=(function Y(G,_,U,W,$){return Pe.resolve().then(function(){var q=Ie.transless||Ie,V=G._createTransaction(_,U,G._dbSchema,W);if(V.explicit=!0,q={trans:V,transless:q},W)V.idbtrans=W.idbtrans;else try{V.create(),V.idbtrans._explicit=!0,G._state.PR1398_maxLoop=3}catch(ee){return ee.name===$e.InvalidState&&G.isOpen()&&0<--G._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),G.close({disableAutoOpen:!1}),G.open().then(function(){return Y(G,_,U,null,$)})):Wt(ee)}var Z,Q=_e($);return Q&&Mo(),q=Pe.follow(function(){var ee;(Z=$.call(V,V))&&(Q?(ee=Xr.bind(null,null),Z.then(ee,ee)):typeof Z.next=="function"&&typeof Z.throw=="function"&&(Z=Wp(Z)))},q),(Z&&typeof Z.then=="function"?Pe.resolve(Z).then(function(ee){return V.active?ee:Wt(new Ce.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))}):q.then(function(){return Z})).then(function(ee){return W&&V._resolve(),V._completion.then(function(){return ee})}).catch(function(ee){return V._reject(ee),Wt(ee)})})}).bind(null,this,E,P,A,v);return A?A._promise(E,X,"lock"):Ie.trans?Is(Ie.transless,function(){return k._whenReady(X)}):this._whenReady(X)},Yt.prototype.table=function(p){if(!u(this._allTables,p))throw new Ce.InvalidTable("Table ".concat(p," does not exist"));return this._allTables[p]},Yt);function Yt(p,x){var v=this;this._middlewares={},this.verno=0;var k=Yt.dependencies;this._options=x=n({addons:Yt.addons,autoOpen:!0,indexedDB:k.indexedDB,IDBKeyRange:k.IDBKeyRange,cache:"cloned"},x),this._deps={indexedDB:x.indexedDB,IDBKeyRange:x.IDBKeyRange},k=x.addons,this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;var A,E,P,N,X,Y={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:ct,dbReadyPromise:null,cancelOpen:ct,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3,autoOpen:x.autoOpen};Y.dbReadyPromise=new Pe(function(_){Y.dbReadyResolve=_}),Y.openCanceller=new Pe(function(_,U){Y.cancelOpen=U}),this._state=Y,this.name=p,this.on=qa(this,"populate","blocked","versionchange","close",{ready:[be,ct]}),this.on.ready.subscribe=C(this.on.ready.subscribe,function(_){return function(U,W){Yt.vip(function(){var $,q=v._state;q.openComplete?(q.dbOpenError||Pe.resolve().then(U),W&&_(U)):q.onReadyBeingFired?(q.onReadyBeingFired.push(U),W&&_(U)):(_(U),$=v,W||_(function V(){$.on.ready.unsubscribe(U),$.on.ready.unsubscribe(V)}))})}}),this.Collection=(A=this,Ua(GP.prototype,function(Z,V){this.db=A;var W=F0,$=null;if(V)try{W=V()}catch(Q){$=Q}var q=Z._ctx,V=q.table,Z=V.hook.reading.fire;this._ctx={table:V,index:q.index,isPrimKey:!q.index||V.schema.primKey.keyPath&&q.index===V.schema.primKey.name,range:W,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:$,or:q.or,valueMapper:Z!==L?Z:null}})),this.Table=(E=this,Ua(W0.prototype,function(_,U,W){this.db=E,this._tx=W,this.name=_,this.schema=U,this.hook=E._allTables[_]?E._allTables[_].hook:qa(null,{creating:[de,ct],reading:[F,L],updating:[ce,ct],deleting:[le,ct]})})),this.Transaction=(P=this,Ua(KP.prototype,function(_,U,W,$,q){var V=this;this.db=P,this.mode=_,this.storeNames=U,this.schema=W,this.chromeTransactionDurability=$,this.idbtrans=null,this.on=qa(this,"complete","error","abort"),this.parent=q||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new Pe(function(Z,Q){V._resolve=Z,V._reject=Q}),this._completion.then(function(){V.active=!1,V.on.complete.fire()},function(Z){var Q=V.active;return V.active=!1,V.on.error.fire(Z),V.parent?V.parent._reject(Z):Q&&V.idbtrans&&V.idbtrans.abort(),Wt(Z)})})),this.Version=(N=this,Ua(iL.prototype,function(_){this.db=N,this._cfg={version:_,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})),this.WhereClause=(X=this,Ua(G0.prototype,function(_,U,W){if(this.db=X,this._ctx={table:_,index:U===":id"?null:U,or:W},this._cmp=this._ascending=ut,this._descending=function($,q){return ut(q,$)},this._max=function($,q){return 0<ut($,q)?$:q},this._min=function($,q){return ut($,q)<0?$:q},this._IDBKeyRange=X._deps.IDBKeyRange,!this._IDBKeyRange)throw new Ce.MissingAPI})),this.on("versionchange",function(_){0<_.newVersion?console.warn("Another connection wants to upgrade database '".concat(v.name,"'. Closing db now to resume the upgrade.")):console.warn("Another connection wants to delete database '".concat(v.name,"'. Closing db now to resume the delete request.")),v.close({disableAutoOpen:!1})}),this.on("blocked",function(_){!_.newVersion||_.newVersion<_.oldVersion?console.warn("Dexie.delete('".concat(v.name,"') was blocked")):console.warn("Upgrade '".concat(v.name,"' blocked by other connection holding version ").concat(_.oldVersion/10))}),this._maxKey=Qa(x.IDBKeyRange),this._createTransaction=function(_,U,W,$){return new v.Transaction(_,U,W,v._options.chromeTransactionDurability,$)},this._fireOnBlocked=function(_){v.on("blocked").fire(_),To.filter(function(U){return U.name===v.name&&U!==v&&!U._state.vcFired}).map(function(U){return U.on("versionchange").fire(_)})},this.use(aL),this.use(uL),this.use(lL),this.use(sL),this.use(oL);var G=new Proxy(this,{get:function(_,U,W){if(U==="_vip")return!0;if(U==="table")return function(q){return Xh(v.table(q),G)};var $=Reflect.get(_,U,W);return $ instanceof W0?Xh($,G):U==="tables"?$.map(function(q){return Xh(q,G)}):U==="_createTransaction"?function(){return Xh($.apply(this,arguments),G)}:$}});this.vip=G,k.forEach(function(_){return _(v)})}var Wh,hi=typeof Symbol<"u"&&"observable"in Symbol?Symbol.observable:"@@observable",dL=($p.prototype.subscribe=function(p,x,v){return this._subscribe(p&&typeof p!="function"?p:{next:p,error:x,complete:v})},$p.prototype[hi]=function(){return this},$p);function $p(p){this._subscribe=p}try{Wh={indexedDB:s.indexedDB||s.mozIndexedDB||s.webkitIndexedDB||s.msIndexedDB,IDBKeyRange:s.IDBKeyRange||s.webkitIDBKeyRange}}catch{Wh={indexedDB:null,IDBKeyRange:null}}function lw(p){var x,v=!1,k=new dL(function(A){var E=_e(p),P,N=!1,X={},Y={},G={get closed(){return N},unsubscribe:function(){N||(N=!0,P&&P.abort(),_&&jr.storagemutated.unsubscribe(W))}};A.start&&A.start(G);var _=!1,U=function(){return wp($)},W=function(q){Fh(X,q),Fp(Y,X)&&U()},$=function(){var q,V,Z;!N&&Wh.indexedDB&&(X={},q={},P&&P.abort(),P=new AbortController,Z=function(Q){var ee=Co();try{E&&Mo();var re=Hr(p,Q);return re=E?re.finally(Xr):re}finally{ee&&Ao()}}(V={subscr:q,signal:P.signal,requery:U,querier:p,trans:null}),Promise.resolve(Z).then(function(Q){v=!0,x=Q,N||V.signal.aborted||(X={},function(ee){for(var re in ee)if(u(ee,re))return;return 1}(Y=q)||_||(jr(Za,W),_=!0),wp(function(){return!N&&A.next&&A.next(Q)}))},function(Q){v=!1,["DatabaseClosedError","AbortError"].includes(Q==null?void 0:Q.name)||N||wp(function(){N||A.error&&A.error(Q)})}))};return setTimeout(U,0),G});return k.hasValue=function(){return v},k.getValue=function(){return x},k}var Ds=cr;function Gp(p){var x=Vr;try{Vr=!0,jr.storagemutated.fire(p),Xp(p,!0)}finally{Vr=x}}d(Ds,n(n({},Et),{delete:function(p){return new Ds(p,{addons:[]}).delete()},exists:function(p){return new Ds(p,{addons:[]}).open().then(function(x){return x.close(),!0}).catch("NoSuchDatabaseError",function(){return!1})},getDatabaseNames:function(p){try{return x=Ds.dependencies,v=x.indexedDB,x=x.IDBKeyRange,(Np(v)?Promise.resolve(v.databases()).then(function(k){return k.map(function(A){return A.name}).filter(function(A){return A!==Mh})}):Dp(v,x).toCollection().primaryKeys()).then(p)}catch{return Wt(new Ce.MissingAPI)}var x,v},defineClass:function(){return function(p){l(this,p)}},ignoreTransaction:function(p){return Ie.trans?Is(Ie.transless,p):p()},vip:_p,async:function(p){return function(){try{var x=Wp(p.apply(this,arguments));return x&&typeof x.then=="function"?x:Pe.resolve(x)}catch(v){return Wt(v)}}},spawn:function(p,x,v){try{var k=Wp(p.apply(v,x||[]));return k&&typeof k.then=="function"?k:Pe.resolve(k)}catch(A){return Wt(A)}},currentTransaction:{get:function(){return Ie.trans||null}},waitFor:function(p,x){return x=Pe.resolve(typeof p=="function"?Ds.ignoreTransaction(p):p).timeout(x||6e4),Ie.trans?Ie.trans.waitFor(x):x},Promise:Pe,debug:{get:function(){return fe},set:function(p){ue(p)}},derive:m,extend:l,props:d,override:C,Events:qa,on:jr,liveQuery:lw,extendObservabilitySet:Fh,getByKeyPath:O,setByKeyPath:T,delByKeyPath:function(p,x){typeof x=="string"?T(p,x,void 0):"length"in x&&[].map.call(x,function(v){T(p,v,void 0)})},shallowClone:I,deepClone:K,getObjectDiff:Yp,cmp:ut,asap:S,minKey:-1/0,addons:[],connections:To,errnames:$e,dependencies:Wh,cache:Rs,semVer:"4.0.11",version:"4.0.11".split(".").map(function(p){return parseInt(p)}).reduce(function(p,x,v){return p+x/Math.pow(10,2*v)})})),Ds.maxKey=Qa(Ds.dependencies.IDBKeyRange),typeof dispatchEvent<"u"&&typeof addEventListener<"u"&&(jr(Za,function(p){Vr||(p=new CustomEvent(Tp,{detail:p}),Vr=!0,dispatchEvent(p),Vr=!1)}),addEventListener(Tp,function(p){p=p.detail,Vr||Gp(p)}));var Io,Vr=!1,cw=function(){};return typeof BroadcastChannel<"u"&&((cw=function(){(Io=new BroadcastChannel(Tp)).onmessage=function(p){return p.data&&Gp(p.data)}})(),typeof Io.unref=="function"&&Io.unref(),jr(Za,function(p){Vr||Io.postMessage(p)})),typeof addEventListener<"u"&&(addEventListener("pagehide",function(p){if(!cr.disableBfCache&&p.persisted){fe&&console.debug("Dexie: handling persisted pagehide"),Io!=null&&Io.close();for(var x=0,v=To;x<v.length;x++)v[x].close({disableAutoOpen:!1})}}),addEventListener("pageshow",function(p){!cr.disableBfCache&&p.persisted&&(fe&&console.debug("Dexie: handling persisted pageshow"),cw(),Gp({all:new Cn(-1/0,[[]])}))})),Pe.rejectionMapper=function(p,x){return!p||p instanceof rt||p instanceof TypeError||p instanceof SyntaxError||!p.name||!Tt[p.name]?p:(x=new Tt[p.name](x||p.message,p),"stack"in p&&g(x,"stack",{get:function(){return this.inner.stack}}),x)},ue(fe),n(cr,Object.freeze({__proto__:null,Dexie:cr,liveQuery:lw,Entity:B0,cmp:ut,PropModification:Ka,replacePrefix:function(p,x){return new Ka({replacePrefix:[p,x]})},add:function(p){return new Ka({add:p})},remove:function(p){return new Ka({remove:p})},default:cr,RangeSet:Cn,mergeRanges:nl,rangesOverlap:Z0}),{default:cr}),cr})}(ih)),ih.exports}var bI=xI();const yf=gI(bI),xv=Symbol.for("Dexie"),rh=globalThis[xv]||(globalThis[xv]=yf);if(yf.semVer!==rh.semVer)throw new Error(`Two different versions of Dexie loaded in the same app: ${yf.semVer} and ${rh.semVer}`);const{liveQuery:CL,mergeRanges:AL,rangesOverlap:ML,RangeSet:TL,cmp:EL,Entity:OL,PropModification:IL,replacePrefix:PL,add:LL,remove:RL}=rh,ho=new rh("FAFIX");ho.version(1).stores({statistics:"++id, title, link, chapters, words, reviews, recommendations, views, favorites, bookmarks, offlineLibraries, bookshelves, date, time"});async function yI(i,e,t,n){const r=new Date,s=c=>String(c).padStart(2,"0"),o=`${r.getFullYear()}-${s(r.getMonth()+1)}-${s(r.getDate())}`,a=`${s(r.getHours())}:${s(r.getMinutes())}:${s(r.getSeconds())}`,l=await ho.statistics.where({title:i,date:o}).first();l?await ho.statistics.update(l.id,{time:a,...t}):await ho.statistics.add({title:i,link:e,date:o,time:a,...t})}async function vI(){const i=await ho.statistics.toArray().then(e=>{const t=new Map;for(const n of e){const r=`${n.title}||${n.link}`;t.has(r)||t.set(r,{title:n.title,link:n.link,data:[]})}return Array.from(t.values())});for(const e of i)e.data=await ho.statistics.where({link:e.link}).sortBy("date");return i}/*!
     * ApexCharts v4.5.0
     * (c) 2018-2025 ApexCharts
     * Released under the MIT License.
     */function vf(i,e){(e==null||e>i.length)&&(e=i.length);for(var t=0,n=Array(e);t<e;t++)n[t]=i[t];return n}function bv(i){if(i===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}function Ee(i,e){if(!(i instanceof e))throw new TypeError("Cannot call a class as a function")}function yv(i,e){for(var t=0;t<e.length;t++){var n=e[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(i,Sv(n.key),n)}}function Oe(i,e,t){return e&&yv(i.prototype,e),t&&yv(i,t),Object.defineProperty(i,"prototype",{writable:!1}),i}function La(i,e){var t=typeof Symbol<"u"&&i[Symbol.iterator]||i["@@iterator"];if(!t){if(Array.isArray(i)||(t=kf(i))||e){t&&(i=t);var n=0,r=function(){};return{s:r,n:function(){return n>=i.length?{done:!0}:{done:!1,value:i[n++]}},e:function(l){throw l},f:r}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
    In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var s,o=!0,a=!1;return{s:function(){t=t.call(i)},n:function(){var l=t.next();return o=l.done,l},e:function(l){a=!0,s=l},f:function(){try{o||t.return==null||t.return()}finally{if(a)throw s}}}}function Ra(i){var e=vv();return function(){var t,n=oh(i);if(e){var r=oh(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return function(s,o){if(o&&(typeof o=="object"||typeof o=="function"))return o;if(o!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return bv(s)}(this,t)}}function sh(i,e,t){return(e=Sv(e))in i?Object.defineProperty(i,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):i[e]=t,i}function oh(i){return oh=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},oh(i)}function Da(i,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");i.prototype=Object.create(e&&e.prototype,{constructor:{value:i,writable:!0,configurable:!0}}),Object.defineProperty(i,"prototype",{writable:!1}),e&&wf(i,e)}function vv(){try{var i=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(vv=function(){return!!i})()}function wv(i,e){var t=Object.keys(i);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(i);e&&(n=n.filter(function(r){return Object.getOwnPropertyDescriptor(i,r).enumerable})),t.push.apply(t,n)}return t}function xe(i){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?wv(Object(t),!0).forEach(function(n){sh(i,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(t)):wv(Object(t)).forEach(function(n){Object.defineProperty(i,n,Object.getOwnPropertyDescriptor(t,n))})}return i}function wf(i,e){return wf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,n){return t.__proto__=n,t},wf(i,e)}function kv(i,e){return function(t){if(Array.isArray(t))return t}(i)||function(t,n){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var s,o,a,l,c=[],h=!0,u=!1;try{if(a=(r=r.call(t)).next,n===0){if(Object(r)!==r)return;h=!1}else for(;!(h=(s=a.call(r)).done)&&(c.push(s.value),c.length!==n);h=!0);}catch(d){u=!0,o=d}finally{try{if(!h&&r.return!=null&&(l=r.return(),Object(l)!==l))return}finally{if(u)throw o}}return c}}(i,e)||kf(i,e)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
    In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function Gt(i){return function(e){if(Array.isArray(e))return vf(e)}(i)||function(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}(i)||kf(i)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
    In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function Sv(i){var e=function(t,n){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var s=r.call(t,n);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(n==="string"?String:Number)(t)}(i,"string");return typeof e=="symbol"?e:e+""}function uo(i){return uo=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},uo(i)}function kf(i,e){if(i){if(typeof i=="string")return vf(i,e);var t={}.toString.call(i).slice(8,-1);return t==="Object"&&i.constructor&&(t=i.constructor.name),t==="Map"||t==="Set"?Array.from(i):t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?vf(i,e):void 0}}var H=function(){function i(){Ee(this,i)}return Oe(i,[{key:"shadeRGBColor",value:function(e,t){var n=t.split(","),r=e<0?0:255,s=e<0?-1*e:e,o=parseInt(n[0].slice(4),10),a=parseInt(n[1],10),l=parseInt(n[2],10);return"rgb("+(Math.round((r-o)*s)+o)+","+(Math.round((r-a)*s)+a)+","+(Math.round((r-l)*s)+l)+")"}},{key:"shadeHexColor",value:function(e,t){var n=parseInt(t.slice(1),16),r=e<0?0:255,s=e<0?-1*e:e,o=n>>16,a=n>>8&255,l=255&n;return"#"+(16777216+65536*(Math.round((r-o)*s)+o)+256*(Math.round((r-a)*s)+a)+(Math.round((r-l)*s)+l)).toString(16).slice(1)}},{key:"shadeColor",value:function(e,t){return i.isColorHex(t)?this.shadeHexColor(e,t):this.shadeRGBColor(e,t)}}],[{key:"bind",value:function(e,t){return function(){return e.apply(t,arguments)}}},{key:"isObject",value:function(e){return e&&uo(e)==="object"&&!Array.isArray(e)&&e!=null}},{key:"is",value:function(e,t){return Object.prototype.toString.call(t)==="[object "+e+"]"}},{key:"listToArray",value:function(e){var t,n=[];for(t=0;t<e.length;t++)n[t]=e[t];return n}},{key:"extend",value:function(e,t){var n=this;typeof Object.assign!="function"&&(Object.assign=function(s){if(s==null)throw new TypeError("Cannot convert undefined or null to object");for(var o=Object(s),a=1;a<arguments.length;a++){var l=arguments[a];if(l!=null)for(var c in l)l.hasOwnProperty(c)&&(o[c]=l[c])}return o});var r=Object.assign({},e);return this.isObject(e)&&this.isObject(t)&&Object.keys(t).forEach(function(s){n.isObject(t[s])&&s in e?r[s]=n.extend(e[s],t[s]):Object.assign(r,sh({},s,t[s]))}),r}},{key:"extendArray",value:function(e,t){var n=[];return e.map(function(r){n.push(i.extend(t,r))}),e=n}},{key:"monthMod",value:function(e){return e%12}},{key:"clone",value:function(e){var t,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:new WeakMap;if(e===null||uo(e)!=="object")return e;if(n.has(e))return n.get(e);if(Array.isArray(e)){t=[],n.set(e,t);for(var r=0;r<e.length;r++)t[r]=this.clone(e[r],n)}else if(e instanceof Date)t=new Date(e.getTime());else for(var s in t={},n.set(e,t),e)e.hasOwnProperty(s)&&(t[s]=this.clone(e[s],n));return t}},{key:"log10",value:function(e){return Math.log(e)/Math.LN10}},{key:"roundToBase10",value:function(e){return Math.pow(10,Math.floor(Math.log10(e)))}},{key:"roundToBase",value:function(e,t){return Math.pow(t,Math.floor(Math.log(e)/Math.log(t)))}},{key:"parseNumber",value:function(e){return e===null?e:parseFloat(e)}},{key:"stripNumber",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:2;return Number.isInteger(e)?e:parseFloat(e.toPrecision(t))}},{key:"randomId",value:function(){return(Math.random()+1).toString(36).substring(4)}},{key:"noExponents",value:function(e){return e.toString().includes("e")?Math.round(e):e}},{key:"elementExists",value:function(e){return!(!e||!e.isConnected)}},{key:"getDimensions",value:function(e){var t=getComputedStyle(e,null),n=e.clientHeight,r=e.clientWidth;return n-=parseFloat(t.paddingTop)+parseFloat(t.paddingBottom),[r-=parseFloat(t.paddingLeft)+parseFloat(t.paddingRight),n]}},{key:"getBoundingClientRect",value:function(e){var t=e.getBoundingClientRect();return{top:t.top,right:t.right,bottom:t.bottom,left:t.left,width:e.clientWidth,height:e.clientHeight,x:t.left,y:t.top}}},{key:"getLargestStringFromArr",value:function(e){return e.reduce(function(t,n){return Array.isArray(n)&&(n=n.reduce(function(r,s){return r.length>s.length?r:s})),t.length>n.length?t:n},0)}},{key:"hexToRgba",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"#999999",t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:.6;e.substring(0,1)!=="#"&&(e="#999999");var n=e.replace("#","");n=n.match(new RegExp("(.{"+n.length/3+"})","g"));for(var r=0;r<n.length;r++)n[r]=parseInt(n[r].length===1?n[r]+n[r]:n[r],16);return t!==void 0&&n.push(t),"rgba("+n.join(",")+")"}},{key:"getOpacityFromRGBA",value:function(e){return parseFloat(e.replace(/^.*,(.+)\)/,"$1"))}},{key:"rgb2hex",value:function(e){return(e=e.match(/^rgba?[\s+]?\([\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?/i))&&e.length===4?"#"+("0"+parseInt(e[1],10).toString(16)).slice(-2)+("0"+parseInt(e[2],10).toString(16)).slice(-2)+("0"+parseInt(e[3],10).toString(16)).slice(-2):""}},{key:"isColorHex",value:function(e){return/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)|(^#[0-9A-F]{8}$)/i.test(e)}},{key:"getPolygonPos",value:function(e,t){for(var n=[],r=2*Math.PI/t,s=0;s<t;s++){var o={};o.x=e*Math.sin(s*r),o.y=-e*Math.cos(s*r),n.push(o)}return n}},{key:"polarToCartesian",value:function(e,t,n,r){var s=(r-90)*Math.PI/180;return{x:e+n*Math.cos(s),y:t+n*Math.sin(s)}}},{key:"escapeString",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"x",n=e.toString().slice();return n=n.replace(/[` ~!@#$%^&*()|+\=?;:'",.<>{}[\]\\/]/gi,t)}},{key:"negToZero",value:function(e){return e<0?0:e}},{key:"moveIndexInArray",value:function(e,t,n){if(n>=e.length)for(var r=n-e.length+1;r--;)e.push(void 0);return e.splice(n,0,e.splice(t,1)[0]),e}},{key:"extractNumber",value:function(e){return parseFloat(e.replace(/[^\d.]*/g,""))}},{key:"findAncestor",value:function(e,t){for(;(e=e.parentElement)&&!e.classList.contains(t););return e}},{key:"setELstyles",value:function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e.style.key=t[n])}},{key:"preciseAddition",value:function(e,t){var n=(String(e).split(".")[1]||"").length,r=(String(t).split(".")[1]||"").length,s=Math.pow(10,Math.max(n,r));return(Math.round(e*s)+Math.round(t*s))/s}},{key:"isNumber",value:function(e){return!isNaN(e)&&parseFloat(Number(e))===e&&!isNaN(parseInt(e,10))}},{key:"isFloat",value:function(e){return Number(e)===e&&e%1!=0}},{key:"isMsEdge",value:function(){var e=window.navigator.userAgent,t=e.indexOf("Edge/");return t>0&&parseInt(e.substring(t+5,e.indexOf(".",t)),10)}},{key:"getGCD",value:function(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:7,r=Math.pow(10,n-Math.floor(Math.log10(Math.max(e,t))));for(e=Math.round(Math.abs(e)*r),t=Math.round(Math.abs(t)*r);t;){var s=t;t=e%t,e=s}return e/r}},{key:"getPrimeFactors",value:function(e){for(var t=[],n=2;e>=2;)e%n==0?(t.push(n),e/=n):n++;return t}},{key:"mod",value:function(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:7,r=Math.pow(10,n-Math.floor(Math.log10(Math.max(e,t))));return(e=Math.round(Math.abs(e)*r))%(t=Math.round(Math.abs(t)*r))/r}}]),i}(),fo=function(){function i(e){Ee(this,i),this.ctx=e,this.w=e.w}return Oe(i,[{key:"animateLine",value:function(e,t,n,r){e.attr(t).animate(r).attr(n)}},{key:"animateMarker",value:function(e,t,n,r){e.attr({opacity:0}).animate(t).attr({opacity:1}).after(function(){r()})}},{key:"animateRect",value:function(e,t,n,r,s){e.attr(t).animate(r).attr(n).after(function(){return s()})}},{key:"animatePathsGradually",value:function(e){var t=e.el,n=e.realIndex,r=e.j,s=e.fill,o=e.pathFrom,a=e.pathTo,l=e.speed,c=e.delay,h=this.w,u=0;h.config.chart.animations.animateGradually.enabled&&(u=h.config.chart.animations.animateGradually.delay),h.config.chart.animations.dynamicAnimation.enabled&&h.globals.dataChanged&&h.config.chart.type!=="bar"&&(u=0),this.morphSVG(t,n,r,h.config.chart.type!=="line"||h.globals.comboCharts?s:"stroke",o,a,l,c*u)}},{key:"showDelayedElements",value:function(){this.w.globals.delayedElements.forEach(function(e){var t=e.el;t.classList.remove("apexcharts-element-hidden"),t.classList.add("apexcharts-hidden-element-shown")})}},{key:"animationCompleted",value:function(e){var t=this.w;t.globals.animationEnded||(t.globals.animationEnded=!0,this.showDelayedElements(),typeof t.config.chart.events.animationEnd=="function"&&t.config.chart.events.animationEnd(this.ctx,{el:e,w:t}))}},{key:"morphSVG",value:function(e,t,n,r,s,o,a,l){var c=this,h=this.w;s||(s=e.attr("pathFrom")),o||(o=e.attr("pathTo"));var u=function(d){return h.config.chart.type==="radar"&&(a=1),"M 0 ".concat(h.globals.gridHeight)};(!s||s.indexOf("undefined")>-1||s.indexOf("NaN")>-1)&&(s=u()),(!o.trim()||o.indexOf("undefined")>-1||o.indexOf("NaN")>-1)&&(o=u()),h.globals.shouldAnimate||(a=1),e.plot(s).animate(1,l).plot(s).animate(a,l).plot(o).after(function(){H.isNumber(n)?n===h.globals.series[h.globals.maxValsInArrayIndex].length-2&&h.globals.shouldAnimate&&c.animationCompleted(e):r!=="none"&&h.globals.shouldAnimate&&(!h.globals.comboCharts&&t===h.globals.series.length-1||h.globals.comboCharts)&&c.animationCompleted(e),c.showDelayedElements()})}}]),i}();const Sf={},Cv=[];function nt(i,e){if(Array.isArray(i))for(const t of i)nt(t,e);else if(typeof i!="object")Av(Object.getOwnPropertyNames(e)),Sf[i]=Object.assign(Sf[i]||{},e);else for(const t in i)nt(t,i[t])}function Wn(i){return Sf[i]||{}}function Av(i){Cv.push(...i)}function Cf(i,e){let t;const n=i.length,r=[];for(t=0;t<n;t++)r.push(e(i[t]));return r}function Af(i){return i%360*Math.PI/180}function po(i){return i.charAt(0).toUpperCase()+i.slice(1)}function go(i,e,t,n){return e!=null&&t!=null||(n=n||i.bbox(),e==null?e=n.width/n.height*t:t==null&&(t=n.height/n.width*e)),{width:e,height:t}}function Mf(i,e){const t=i.origin;let n=i.ox!=null?i.ox:i.originX!=null?i.originX:"center",r=i.oy!=null?i.oy:i.originY!=null?i.originY:"center";t!=null&&([n,r]=Array.isArray(t)?t:typeof t=="object"?[t.x,t.y]:[t,t]);const s=typeof n=="string",o=typeof r=="string";if(s||o){const{height:a,width:l,x:c,y:h}=e.bbox();s&&(n=n.includes("left")?c:n.includes("right")?c+l:c+l/2),o&&(r=r.includes("top")?h:r.includes("bottom")?h+a:h+a/2)}return[n,r]}const wI=new Set(["desc","metadata","title"]),Tf=i=>wI.has(i.nodeName),Mv=(i,e,t={})=>{const n={...e};for(const r in n)n[r].valueOf()===t[r]&&delete n[r];Object.keys(n).length?i.node.setAttribute("data-svgjs",JSON.stringify(n)):(i.node.removeAttribute("data-svgjs"),i.node.removeAttribute("svgjs:data"))},Ef="http://www.w3.org/2000/svg",Of="http://www.w3.org/2000/xmlns/",mo="http://www.w3.org/1999/xlink",dt={window:typeof window>"u"?null:window,document:typeof document>"u"?null:document};function Na(){return dt.window}let If=class{};const vs={},Pf="___SYMBOL___ROOT___";function _a(i,e=Ef){return dt.document.createElementNS(e,i)}function _n(i,e=!1){if(i instanceof If)return i;if(typeof i=="object")return Lf(i);if(i==null)return new vs[Pf];if(typeof i=="string"&&i.charAt(0)!=="<")return Lf(dt.document.querySelector(i));const t=e?dt.document.createElement("div"):_a("svg");return t.innerHTML=i,i=Lf(t.firstChild),t.removeChild(t.firstChild),i}function St(i,e){return e&&(e instanceof dt.window.Node||e.ownerDocument&&e instanceof e.ownerDocument.defaultView.Node)?e:_a(i)}function oi(i){if(!i)return null;if(i.instance instanceof If)return i.instance;if(i.nodeName==="#document-fragment")return new vs.Fragment(i);let e=po(i.nodeName||"Dom");return e==="LinearGradient"||e==="RadialGradient"?e="Gradient":vs[e]||(e="Dom"),new vs[e](i)}let Lf=oi;function ft(i,e=i.name,t=!1){return vs[e]=i,t&&(vs[Pf]=i),Av(Object.getOwnPropertyNames(i.prototype)),i}let kI=1e3;function Tv(i){return"Svgjs"+po(i)+kI++}function Ev(i){for(let e=i.children.length-1;e>=0;e--)Ev(i.children[e]);return i.id&&(i.id=Tv(i.nodeName)),i}function Ye(i,e){let t,n;for(n=(i=Array.isArray(i)?i:[i]).length-1;n>=0;n--)for(t in e)i[n].prototype[t]=e[t]}function Ct(i){return function(...e){const t=e[e.length-1];return!t||t.constructor!==Object||t instanceof Array?i.apply(this,e):i.apply(this,e.slice(0,-1)).attr(t)}}nt("Dom",{siblings:function(){return this.parent().children()},position:function(){return this.parent().index(this)},next:function(){return this.siblings()[this.position()+1]},prev:function(){return this.siblings()[this.position()-1]},forward:function(){const i=this.position();return this.parent().add(this.remove(),i+1),this},backward:function(){const i=this.position();return this.parent().add(this.remove(),i?i-1:0),this},front:function(){return this.parent().add(this.remove()),this},back:function(){return this.parent().add(this.remove(),0),this},before:function(i){(i=_n(i)).remove();const e=this.position();return this.parent().add(i,e),this},after:function(i){(i=_n(i)).remove();const e=this.position();return this.parent().add(i,e+1),this},insertBefore:function(i){return(i=_n(i)).before(this),this},insertAfter:function(i){return(i=_n(i)).after(this),this}});const Ov=/^([+-]?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?)([a-z%]*)$/i,SI=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i,CI=/rgb\((\d+),(\d+),(\d+)\)/,AI=/(#[a-z_][a-z0-9\-_]*)/i,MI=/\)\s*,?\s*/,TI=/\s/g,Iv=/^#[a-f0-9]{3}$|^#[a-f0-9]{6}$/i,Pv=/^rgb\(/,Lv=/^(\s+)?$/,Rv=/^[+-]?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,EI=/\.(jpg|jpeg|png|gif|svg)(\?[^=]+.*)?/i,sr=/[\s,]+/,Rf=/[MLHVCSQTAZ]/i;function OI(i){const e=Math.round(i),t=Math.max(0,Math.min(255,e)).toString(16);return t.length===1?"0"+t:t}function xo(i,e){for(let t=e.length;t--;)if(i[e[t]]==null)return!1;return!0}function Df(i,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?i+6*(e-i)*t:t<.5?e:t<2/3?i+(e-i)*(2/3-t)*6:i}nt("Dom",{classes:function(){const i=this.attr("class");return i==null?[]:i.trim().split(sr)},hasClass:function(i){return this.classes().indexOf(i)!==-1},addClass:function(i){if(!this.hasClass(i)){const e=this.classes();e.push(i),this.attr("class",e.join(" "))}return this},removeClass:function(i){return this.hasClass(i)&&this.attr("class",this.classes().filter(function(e){return e!==i}).join(" ")),this},toggleClass:function(i){return this.hasClass(i)?this.removeClass(i):this.addClass(i)}}),nt("Dom",{css:function(i,e){const t={};if(arguments.length===0)return this.node.style.cssText.split(/\s*;\s*/).filter(function(n){return!!n.length}).forEach(function(n){const r=n.split(/\s*:\s*/);t[r[0]]=r[1]}),t;if(arguments.length<2){if(Array.isArray(i)){for(const n of i){const r=n;t[n]=this.node.style.getPropertyValue(r)}return t}if(typeof i=="string")return this.node.style.getPropertyValue(i);if(typeof i=="object")for(const n in i)this.node.style.setProperty(n,i[n]==null||Lv.test(i[n])?"":i[n])}return arguments.length===2&&this.node.style.setProperty(i,e==null||Lv.test(e)?"":e),this},show:function(){return this.css("display","")},hide:function(){return this.css("display","none")},visible:function(){return this.css("display")!=="none"}}),nt("Dom",{data:function(i,e,t){if(i==null)return this.data(Cf(function(n,r){let s;const o=n.length,a=[];for(s=0;s<o;s++)r(n[s])&&a.push(n[s]);return a}(this.node.attributes,n=>n.nodeName.indexOf("data-")===0),n=>n.nodeName.slice(5)));if(i instanceof Array){const n={};for(const r of i)n[r]=this.data(r);return n}if(typeof i=="object")for(e in i)this.data(e,i[e]);else if(arguments.length<2)try{return JSON.parse(this.attr("data-"+i))}catch{return this.attr("data-"+i)}else this.attr("data-"+i,e===null?null:t===!0||typeof e=="string"||typeof e=="number"?e:JSON.stringify(e));return this}}),nt("Dom",{remember:function(i,e){if(typeof arguments[0]=="object")for(const t in i)this.remember(t,i[t]);else{if(arguments.length===1)return this.memory()[i];this.memory()[i]=e}return this},forget:function(){if(arguments.length===0)this._memory={};else for(let i=arguments.length-1;i>=0;i--)delete this.memory()[arguments[i]];return this},memory:function(){return this._memory=this._memory||{}}});class kt{constructor(...e){this.init(...e)}static isColor(e){return e&&(e instanceof kt||this.isRgb(e)||this.test(e))}static isRgb(e){return e&&typeof e.r=="number"&&typeof e.g=="number"&&typeof e.b=="number"}static random(e="vibrant",t){const{random:n,round:r,sin:s,PI:o}=Math;if(e==="vibrant"){const a=24*n()+57,l=38*n()+45,c=360*n();return new kt(a,l,c,"lch")}if(e==="sine"){const a=r(80*s(2*o*(t=t??n())/.5+.01)+150),l=r(50*s(2*o*t/.5+4.6)+200),c=r(100*s(2*o*t/.5+2.3)+150);return new kt(a,l,c)}if(e==="pastel"){const a=8*n()+86,l=17*n()+9,c=360*n();return new kt(a,l,c,"lch")}if(e==="dark"){const a=10+10*n(),l=50*n()+86,c=360*n();return new kt(a,l,c,"lch")}if(e==="rgb"){const a=255*n(),l=255*n(),c=255*n();return new kt(a,l,c)}if(e==="lab"){const a=100*n(),l=256*n()-128,c=256*n()-128;return new kt(a,l,c,"lab")}if(e==="grey"){const a=255*n();return new kt(a,a,a)}throw new Error("Unsupported random color mode")}static test(e){return typeof e=="string"&&(Iv.test(e)||Pv.test(e))}cmyk(){const{_a:e,_b:t,_c:n}=this.rgb(),[r,s,o]=[e,t,n].map(l=>l/255),a=Math.min(1-r,1-s,1-o);return a===1?new kt(0,0,0,1,"cmyk"):new kt((1-r-a)/(1-a),(1-s-a)/(1-a),(1-o-a)/(1-a),a,"cmyk")}hsl(){const{_a:e,_b:t,_c:n}=this.rgb(),[r,s,o]=[e,t,n].map(d=>d/255),a=Math.max(r,s,o),l=Math.min(r,s,o),c=(a+l)/2,h=a===l,u=a-l;return new kt(360*(h?0:a===r?((s-o)/u+(s<o?6:0))/6:a===s?((o-r)/u+2)/6:a===o?((r-s)/u+4)/6:0),100*(h?0:c>.5?u/(2-a-l):u/(a+l)),100*c,"hsl")}init(e=0,t=0,n=0,r=0,s="rgb"){if(e=e||0,this.space)for(const u in this.space)delete this[this.space[u]];if(typeof e=="number")s=typeof r=="string"?r:s,r=typeof r=="string"?0:r,Object.assign(this,{_a:e,_b:t,_c:n,_d:r,space:s});else if(e instanceof Array)this.space=t||(typeof e[3]=="string"?e[3]:e[4])||"rgb",Object.assign(this,{_a:e[0],_b:e[1],_c:e[2],_d:e[3]||0});else if(e instanceof Object){const u=function(d,f){const g=xo(d,"rgb")?{_a:d.r,_b:d.g,_c:d.b,_d:0,space:"rgb"}:xo(d,"xyz")?{_a:d.x,_b:d.y,_c:d.z,_d:0,space:"xyz"}:xo(d,"hsl")?{_a:d.h,_b:d.s,_c:d.l,_d:0,space:"hsl"}:xo(d,"lab")?{_a:d.l,_b:d.a,_c:d.b,_d:0,space:"lab"}:xo(d,"lch")?{_a:d.l,_b:d.c,_c:d.h,_d:0,space:"lch"}:xo(d,"cmyk")?{_a:d.c,_b:d.m,_c:d.y,_d:d.k,space:"cmyk"}:{_a:0,_b:0,_c:0,space:"rgb"};return g.space=f||g.space,g}(e,t);Object.assign(this,u)}else if(typeof e=="string")if(Pv.test(e)){const u=e.replace(TI,""),[d,f,g]=CI.exec(u).slice(1,4).map(m=>parseInt(m));Object.assign(this,{_a:d,_b:f,_c:g,_d:0,space:"rgb"})}else{if(!Iv.test(e))throw Error("Unsupported string format, can't construct Color");{const u=m=>parseInt(m,16),[,d,f,g]=SI.exec(function(m){return m.length===4?["#",m.substring(1,2),m.substring(1,2),m.substring(2,3),m.substring(2,3),m.substring(3,4),m.substring(3,4)].join(""):m}(e)).map(u);Object.assign(this,{_a:d,_b:f,_c:g,_d:0,space:"rgb"})}}const{_a:o,_b:a,_c:l,_d:c}=this,h=this.space==="rgb"?{r:o,g:a,b:l}:this.space==="xyz"?{x:o,y:a,z:l}:this.space==="hsl"?{h:o,s:a,l}:this.space==="lab"?{l:o,a,b:l}:this.space==="lch"?{l:o,c:a,h:l}:this.space==="cmyk"?{c:o,m:a,y:l,k:c}:{};Object.assign(this,h)}lab(){const{x:e,y:t,z:n}=this.xyz();return new kt(116*t-16,500*(e-t),200*(t-n),"lab")}lch(){const{l:e,a:t,b:n}=this.lab(),r=Math.sqrt(t**2+n**2);let s=180*Math.atan2(n,t)/Math.PI;return s<0&&(s*=-1,s=360-s),new kt(e,r,s,"lch")}rgb(){if(this.space==="rgb")return this;if((e=this.space)==="lab"||e==="xyz"||e==="lch"){let{x:t,y:n,z:r}=this;if(this.space==="lab"||this.space==="lch"){let{l:f,a:g,b:m}=this;if(this.space==="lch"){const{c:O,h:T}=this,I=Math.PI/180;g=O*Math.cos(I*T),m=O*Math.sin(I*T)}const b=(f+16)/116,y=g/500+b,w=b-m/200,C=16/116,M=.008856,S=7.787;t=.95047*(y**3>M?y**3:(y-C)/S),n=1*(b**3>M?b**3:(b-C)/S),r=1.08883*(w**3>M?w**3:(w-C)/S)}const s=3.2406*t+-1.5372*n+-.4986*r,o=-.9689*t+1.8758*n+.0415*r,a=.0557*t+-.204*n+1.057*r,l=Math.pow,c=.0031308,h=s>c?1.055*l(s,1/2.4)-.055:12.92*s,u=o>c?1.055*l(o,1/2.4)-.055:12.92*o,d=a>c?1.055*l(a,1/2.4)-.055:12.92*a;return new kt(255*h,255*u,255*d)}if(this.space==="hsl"){let{h:t,s:n,l:r}=this;if(t/=360,n/=100,r/=100,n===0)return r*=255,new kt(r,r,r);const s=r<.5?r*(1+n):r+n-r*n,o=2*r-s,a=255*Df(o,s,t+1/3),l=255*Df(o,s,t),c=255*Df(o,s,t-1/3);return new kt(a,l,c)}if(this.space==="cmyk"){const{c:t,m:n,y:r,k:s}=this,o=255*(1-Math.min(1,t*(1-s)+s)),a=255*(1-Math.min(1,n*(1-s)+s)),l=255*(1-Math.min(1,r*(1-s)+s));return new kt(o,a,l)}return this;var e}toArray(){const{_a:e,_b:t,_c:n,_d:r,space:s}=this;return[e,t,n,r,s]}toHex(){const[e,t,n]=this._clamped().map(OI);return`#${e}${t}${n}`}toRgb(){const[e,t,n]=this._clamped();return`rgb(${e},${t},${n})`}toString(){return this.toHex()}xyz(){const{_a:e,_b:t,_c:n}=this.rgb(),[r,s,o]=[e,t,n].map(b=>b/255),a=r>.04045?Math.pow((r+.055)/1.055,2.4):r/12.92,l=s>.04045?Math.pow((s+.055)/1.055,2.4):s/12.92,c=o>.04045?Math.pow((o+.055)/1.055,2.4):o/12.92,h=(.4124*a+.3576*l+.1805*c)/.95047,u=(.2126*a+.7152*l+.0722*c)/1,d=(.0193*a+.1192*l+.9505*c)/1.08883,f=h>.008856?Math.pow(h,1/3):7.787*h+16/116,g=u>.008856?Math.pow(u,1/3):7.787*u+16/116,m=d>.008856?Math.pow(d,1/3):7.787*d+16/116;return new kt(f,g,m,"xyz")}_clamped(){const{_a:e,_b:t,_c:n}=this.rgb(),{max:r,min:s,round:o}=Math;return[e,t,n].map(a=>r(0,s(o(a),255)))}}class mt{constructor(...e){this.init(...e)}clone(){return new mt(this)}init(e,t){const s=Array.isArray(e)?{x:e[0],y:e[1]}:typeof e=="object"?{x:e.x,y:e.y}:{x:e,y:t};return this.x=s.x==null?0:s.x,this.y=s.y==null?0:s.y,this}toArray(){return[this.x,this.y]}transform(e){return this.clone().transformO(e)}transformO(e){Fe.isMatrixLike(e)||(e=new Fe(e));const{x:t,y:n}=this;return this.x=e.a*t+e.c*n+e.e,this.y=e.b*t+e.d*n+e.f,this}}function bo(i,e,t){return Math.abs(e-i)<1e-6}class Fe{constructor(...e){this.init(...e)}static formatTransforms(e){const t=e.flip==="both"||e.flip===!0,n=e.flip&&(t||e.flip==="x")?-1:1,r=e.flip&&(t||e.flip==="y")?-1:1,s=e.skew&&e.skew.length?e.skew[0]:isFinite(e.skew)?e.skew:isFinite(e.skewX)?e.skewX:0,o=e.skew&&e.skew.length?e.skew[1]:isFinite(e.skew)?e.skew:isFinite(e.skewY)?e.skewY:0,a=e.scale&&e.scale.length?e.scale[0]*n:isFinite(e.scale)?e.scale*n:isFinite(e.scaleX)?e.scaleX*n:n,l=e.scale&&e.scale.length?e.scale[1]*r:isFinite(e.scale)?e.scale*r:isFinite(e.scaleY)?e.scaleY*r:r,c=e.shear||0,h=e.rotate||e.theta||0,u=new mt(e.origin||e.around||e.ox||e.originX,e.oy||e.originY),d=u.x,f=u.y,g=new mt(e.position||e.px||e.positionX||NaN,e.py||e.positionY||NaN),m=g.x,b=g.y,y=new mt(e.translate||e.tx||e.translateX,e.ty||e.translateY),w=y.x,C=y.y,M=new mt(e.relative||e.rx||e.relativeX,e.ry||e.relativeY);return{scaleX:a,scaleY:l,skewX:s,skewY:o,shear:c,theta:h,rx:M.x,ry:M.y,tx:w,ty:C,ox:d,oy:f,px:m,py:b}}static fromArray(e){return{a:e[0],b:e[1],c:e[2],d:e[3],e:e[4],f:e[5]}}static isMatrixLike(e){return e.a!=null||e.b!=null||e.c!=null||e.d!=null||e.e!=null||e.f!=null}static matrixMultiply(e,t,n){const r=e.a*t.a+e.c*t.b,s=e.b*t.a+e.d*t.b,o=e.a*t.c+e.c*t.d,a=e.b*t.c+e.d*t.d,l=e.e+e.a*t.e+e.c*t.f,c=e.f+e.b*t.e+e.d*t.f;return n.a=r,n.b=s,n.c=o,n.d=a,n.e=l,n.f=c,n}around(e,t,n){return this.clone().aroundO(e,t,n)}aroundO(e,t,n){const r=e||0,s=t||0;return this.translateO(-r,-s).lmultiplyO(n).translateO(r,s)}clone(){return new Fe(this)}decompose(e=0,t=0){const n=this.a,r=this.b,s=this.c,o=this.d,a=this.e,l=this.f,c=n*o-r*s,h=c>0?1:-1,u=h*Math.sqrt(n*n+r*r),d=Math.atan2(h*r,h*n),f=180/Math.PI*d,g=Math.cos(d),m=Math.sin(d),b=(n*s+r*o)/c,y=s*u/(b*n-r)||o*u/(b*r+n);return{scaleX:u,scaleY:y,shear:b,rotate:f,translateX:a-e+e*g*u+t*(b*g*u-m*y),translateY:l-t+e*m*u+t*(b*m*u+g*y),originX:e,originY:t,a:this.a,b:this.b,c:this.c,d:this.d,e:this.e,f:this.f}}equals(e){if(e===this)return!0;const t=new Fe(e);return bo(this.a,t.a)&&bo(this.b,t.b)&&bo(this.c,t.c)&&bo(this.d,t.d)&&bo(this.e,t.e)&&bo(this.f,t.f)}flip(e,t){return this.clone().flipO(e,t)}flipO(e,t){return e==="x"?this.scaleO(-1,1,t,0):e==="y"?this.scaleO(1,-1,0,t):this.scaleO(-1,-1,e,t||e)}init(e){const t=Fe.fromArray([1,0,0,1,0,0]);return e=e instanceof hn?e.matrixify():typeof e=="string"?Fe.fromArray(e.split(sr).map(parseFloat)):Array.isArray(e)?Fe.fromArray(e):typeof e=="object"&&Fe.isMatrixLike(e)?e:typeof e=="object"?new Fe().transform(e):arguments.length===6?Fe.fromArray([].slice.call(arguments)):t,this.a=e.a!=null?e.a:t.a,this.b=e.b!=null?e.b:t.b,this.c=e.c!=null?e.c:t.c,this.d=e.d!=null?e.d:t.d,this.e=e.e!=null?e.e:t.e,this.f=e.f!=null?e.f:t.f,this}inverse(){return this.clone().inverseO()}inverseO(){const e=this.a,t=this.b,n=this.c,r=this.d,s=this.e,o=this.f,a=e*r-t*n;if(!a)throw new Error("Cannot invert "+this);const l=r/a,c=-t/a,h=-n/a,u=e/a,d=-(l*s+h*o),f=-(c*s+u*o);return this.a=l,this.b=c,this.c=h,this.d=u,this.e=d,this.f=f,this}lmultiply(e){return this.clone().lmultiplyO(e)}lmultiplyO(e){const t=e instanceof Fe?e:new Fe(e);return Fe.matrixMultiply(t,this,this)}multiply(e){return this.clone().multiplyO(e)}multiplyO(e){const t=e instanceof Fe?e:new Fe(e);return Fe.matrixMultiply(this,t,this)}rotate(e,t,n){return this.clone().rotateO(e,t,n)}rotateO(e,t=0,n=0){e=Af(e);const r=Math.cos(e),s=Math.sin(e),{a:o,b:a,c:l,d:c,e:h,f:u}=this;return this.a=o*r-a*s,this.b=a*r+o*s,this.c=l*r-c*s,this.d=c*r+l*s,this.e=h*r-u*s+n*s-t*r+t,this.f=u*r+h*s-t*s-n*r+n,this}scale(){return this.clone().scaleO(...arguments)}scaleO(e,t=e,n=0,r=0){arguments.length===3&&(r=n,n=t,t=e);const{a:s,b:o,c:a,d:l,e:c,f:h}=this;return this.a=s*e,this.b=o*t,this.c=a*e,this.d=l*t,this.e=c*e-n*e+n,this.f=h*t-r*t+r,this}shear(e,t,n){return this.clone().shearO(e,t,n)}shearO(e,t=0,n=0){const{a:r,b:s,c:o,d:a,e:l,f:c}=this;return this.a=r+s*e,this.c=o+a*e,this.e=l+c*e-n*e,this}skew(){return this.clone().skewO(...arguments)}skewO(e,t=e,n=0,r=0){arguments.length===3&&(r=n,n=t,t=e),e=Af(e),t=Af(t);const s=Math.tan(e),o=Math.tan(t),{a,b:l,c,d:h,e:u,f:d}=this;return this.a=a+l*s,this.b=l+a*o,this.c=c+h*s,this.d=h+c*o,this.e=u+d*s-r*s,this.f=d+u*o-n*o,this}skewX(e,t,n){return this.skew(e,0,t,n)}skewY(e,t,n){return this.skew(0,e,t,n)}toArray(){return[this.a,this.b,this.c,this.d,this.e,this.f]}toString(){return"matrix("+this.a+","+this.b+","+this.c+","+this.d+","+this.e+","+this.f+")"}transform(e){if(Fe.isMatrixLike(e))return new Fe(e).multiplyO(this);const t=Fe.formatTransforms(e),{x:n,y:r}=new mt(t.ox,t.oy).transform(this),s=new Fe().translateO(t.rx,t.ry).lmultiplyO(this).translateO(-n,-r).scaleO(t.scaleX,t.scaleY).skewO(t.skewX,t.skewY).shearO(t.shear).rotateO(t.theta).translateO(n,r);if(isFinite(t.px)||isFinite(t.py)){const o=new mt(n,r).transform(s),a=isFinite(t.px)?t.px-o.x:0,l=isFinite(t.py)?t.py-o.y:0;s.translateO(a,l)}return s.translateO(t.tx,t.ty),s}translate(e,t){return this.clone().translateO(e,t)}translateO(e,t){return this.e+=e||0,this.f+=t||0,this}valueOf(){return{a:this.a,b:this.b,c:this.c,d:this.d,e:this.e,f:this.f}}}function Nr(){if(!Nr.nodes){const i=_n().size(2,0);i.node.style.cssText=["opacity: 0","position: absolute","left: -100%","top: -100%","overflow: hidden"].join(";"),i.attr("focusable","false"),i.attr("aria-hidden","true");const e=i.path().node;Nr.nodes={svg:i,path:e}}if(!Nr.nodes.svg.node.parentNode){const i=dt.document.body||dt.document.documentElement;Nr.nodes.svg.addTo(i)}return Nr.nodes}function Dv(i){return!(i.width||i.height||i.x||i.y)}ft(Fe,"Matrix");class Ft{constructor(...e){this.init(...e)}addOffset(){return this.x+=dt.window.pageXOffset,this.y+=dt.window.pageYOffset,new Ft(this)}init(e){return e=typeof e=="string"?e.split(sr).map(parseFloat):Array.isArray(e)?e:typeof e=="object"?[e.left!=null?e.left:e.x,e.top!=null?e.top:e.y,e.width,e.height]:arguments.length===4?[].slice.call(arguments):[0,0,0,0],this.x=e[0]||0,this.y=e[1]||0,this.width=this.w=e[2]||0,this.height=this.h=e[3]||0,this.x2=this.x+this.w,this.y2=this.y+this.h,this.cx=this.x+this.w/2,this.cy=this.y+this.h/2,this}isNulled(){return Dv(this)}merge(e){const t=Math.min(this.x,e.x),n=Math.min(this.y,e.y),r=Math.max(this.x+this.width,e.x+e.width)-t,s=Math.max(this.y+this.height,e.y+e.height)-n;return new Ft(t,n,r,s)}toArray(){return[this.x,this.y,this.width,this.height]}toString(){return this.x+" "+this.y+" "+this.width+" "+this.height}transform(e){e instanceof Fe||(e=new Fe(e));let t=1/0,n=-1/0,r=1/0,s=-1/0;return[new mt(this.x,this.y),new mt(this.x2,this.y),new mt(this.x,this.y2),new mt(this.x2,this.y2)].forEach(function(o){o=o.transform(e),t=Math.min(t,o.x),n=Math.max(n,o.x),r=Math.min(r,o.y),s=Math.max(s,o.y)}),new Ft(t,r,n-t,s-r)}}function Nv(i,e,t){let n;try{if(n=e(i.node),Dv(n)&&(r=i.node)!==dt.document&&!(dt.document.documentElement.contains||function(s){for(;s.parentNode;)s=s.parentNode;return s===dt.document}).call(dt.document.documentElement,r))throw new Error("Element not in the dom")}catch{n=t(i)}var r;return n}nt({viewbox:{viewbox(i,e,t,n){return i==null?new Ft(this.attr("viewBox")):this.attr("viewBox",new Ft(i,e,t,n))},zoom(i,e){let{width:t,height:n}=this.attr(["width","height"]);if((t||n)&&typeof t!="string"&&typeof n!="string"||(t=this.node.clientWidth,n=this.node.clientHeight),!t||!n)throw new Error("Impossible to get absolute width and height. Please provide an absolute width and height attribute on the zooming element");const r=this.viewbox(),s=t/r.width,o=n/r.height,a=Math.min(s,o);if(i==null)return a;let l=a/i;l===1/0&&(l=Number.MAX_SAFE_INTEGER/100),e=e||new mt(t/2/s+r.x,n/2/o+r.y);const c=new Ft(r).transform(new Fe({scale:l,origin:e}));return this.viewbox(c)}}}),ft(Ft,"Box");class ws extends Array{constructor(e=[],...t){if(super(e,...t),typeof e=="number")return this;this.length=0,this.push(...e)}}Ye([ws],{each(i,...e){return typeof i=="function"?this.map((t,n,r)=>i.call(t,t,n,r)):this.map(t=>t[i](...e))},toArray(){return Array.prototype.concat.apply([],this)}});const II=["toArray","constructor","each"];function ks(i,e){return new ws(Cf((e||dt.document).querySelectorAll(i),function(t){return oi(t)}))}ws.extend=function(i){i=i.reduce((e,t)=>(II.includes(t)||t[0]==="_"||(t in Array.prototype&&(e["$"+t]=Array.prototype[t]),e[t]=function(...n){return this.each(t,...n)}),e),{}),Ye([ws],i)};let PI=0;const _v={};function zv(i){let e=i.getEventHolder();return e===dt.window&&(e=_v),e.events||(e.events={}),e.events}function Nf(i){return i.getEventTarget()}function or(i,e,t,n,r){const s=t.bind(n||i),o=_n(i),a=zv(o),l=Nf(o);e=Array.isArray(e)?e:e.split(sr),t._svgjsListenerId||(t._svgjsListenerId=++PI),e.forEach(function(c){const h=c.split(".")[0],u=c.split(".")[1]||"*";a[h]=a[h]||{},a[h][u]=a[h][u]||{},a[h][u][t._svgjsListenerId]=s,l.addEventListener(h,s,r||!1)})}function ai(i,e,t,n){const r=_n(i),s=zv(r),o=Nf(r);(typeof t!="function"||(t=t._svgjsListenerId))&&(e=Array.isArray(e)?e:(e||"").split(sr)).forEach(function(a){const l=a&&a.split(".")[0],c=a&&a.split(".")[1];let h,u;if(t)s[l]&&s[l][c||"*"]&&(o.removeEventListener(l,s[l][c||"*"][t],n||!1),delete s[l][c||"*"][t]);else if(l&&c){if(s[l]&&s[l][c]){for(u in s[l][c])ai(o,[l,c].join("."),u);delete s[l][c]}}else if(c)for(a in s)for(h in s[a])c===h&&ai(o,[a,c].join("."));else if(l){if(s[l]){for(h in s[l])ai(o,[l,h].join("."));delete s[l]}}else{for(a in s)ai(o,a);(function(d){let f=d.getEventHolder();f===dt.window&&(f=_v),f.events&&(f.events={})})(r)}})}class za extends If{addEventListener(){}dispatch(e,t,n){return function(r,s,o,a){const l=Nf(r);return s instanceof dt.window.Event||(s=new dt.window.CustomEvent(s,{detail:o,cancelable:!0,...a})),l.dispatchEvent(s),s}(this,e,t,n)}dispatchEvent(e){const t=this.getEventHolder().events;if(!t)return!0;const n=t[e.type];for(const r in n)for(const s in n[r])n[r][s](e);return!e.defaultPrevented}fire(e,t,n){return this.dispatch(e,t,n),this}getEventHolder(){return this}getEventTarget(){return this}off(e,t,n){return ai(this,e,t,n),this}on(e,t,n,r){return or(this,e,t,n,r),this}removeEventListener(){}}function Fv(){}ft(za,"EventTarget");const _f=400,LI=">",RI=0,DI={"fill-opacity":1,"stroke-opacity":1,"stroke-width":0,"stroke-linejoin":"miter","stroke-linecap":"butt",fill:"#000000",stroke:"#000000",opacity:1,x:0,y:0,cx:0,cy:0,width:0,height:0,r:0,rx:0,ry:0,offset:0,"stop-opacity":1,"stop-color":"#000000","text-anchor":"start"};class Ss extends Array{constructor(...e){super(...e),this.init(...e)}clone(){return new this.constructor(this)}init(e){return typeof e=="number"||(this.length=0,this.push(...this.parse(e))),this}parse(e=[]){return e instanceof Array?e:e.trim().split(sr).map(parseFloat)}toArray(){return Array.prototype.concat.apply([],this)}toSet(){return new Set(this)}toString(){return this.join(" ")}valueOf(){const e=[];return e.push(...this),e}}class qe{constructor(...e){this.init(...e)}convert(e){return new qe(this.value,e)}divide(e){return e=new qe(e),new qe(this/e,this.unit||e.unit)}init(e,t){return t=Array.isArray(e)?e[1]:t,e=Array.isArray(e)?e[0]:e,this.value=0,this.unit=t||"",typeof e=="number"?this.value=isNaN(e)?0:isFinite(e)?e:e<0?-34e37:34e37:typeof e=="string"?(t=e.match(Ov))&&(this.value=parseFloat(t[1]),t[5]==="%"?this.value/=100:t[5]==="s"&&(this.value*=1e3),this.unit=t[5]):e instanceof qe&&(this.value=e.valueOf(),this.unit=e.unit),this}minus(e){return e=new qe(e),new qe(this-e,this.unit||e.unit)}plus(e){return e=new qe(e),new qe(this+e,this.unit||e.unit)}times(e){return e=new qe(e),new qe(this*e,this.unit||e.unit)}toArray(){return[this.value,this.unit]}toJSON(){return this.toString()}toString(){return(this.unit==="%"?~~(1e8*this.value)/1e6:this.unit==="s"?this.value/1e3:this.value)+this.unit}valueOf(){return this.value}}const NI=new Set(["fill","stroke","color","bgcolor","stop-color","flood-color","lighting-color"]),Bv=[];class _r extends za{constructor(e,t){super(),this.node=e,this.type=e.nodeName,t&&e!==t&&this.attr(t)}add(e,t){return(e=_n(e)).removeNamespace&&this.node instanceof dt.window.SVGElement&&e.removeNamespace(),t==null?this.node.appendChild(e.node):e.node!==this.node.childNodes[t]&&this.node.insertBefore(e.node,this.node.childNodes[t]),this}addTo(e,t){return _n(e).put(this,t)}children(){return new ws(Cf(this.node.children,function(e){return oi(e)}))}clear(){for(;this.node.hasChildNodes();)this.node.removeChild(this.node.lastChild);return this}clone(e=!0,t=!0){this.writeDataToDom();let n=this.node.cloneNode(e);return t&&(n=Ev(n)),new this.constructor(n)}each(e,t){const n=this.children();let r,s;for(r=0,s=n.length;r<s;r++)e.apply(n[r],[r,n]),t&&n[r].each(e,t);return this}element(e,t){return this.put(new _r(_a(e),t))}first(){return oi(this.node.firstChild)}get(e){return oi(this.node.childNodes[e])}getEventHolder(){return this.node}getEventTarget(){return this.node}has(e){return this.index(e)>=0}html(e,t){return this.xml(e,t,"http://www.w3.org/1999/xhtml")}id(e){return e!==void 0||this.node.id||(this.node.id=Tv(this.type)),this.attr("id",e)}index(e){return[].slice.call(this.node.childNodes).indexOf(e.node)}last(){return oi(this.node.lastChild)}matches(e){const t=this.node,n=t.matches||t.matchesSelector||t.msMatchesSelector||t.mozMatchesSelector||t.webkitMatchesSelector||t.oMatchesSelector||null;return n&&n.call(t,e)}parent(e){let t=this;if(!t.node.parentNode)return null;if(t=oi(t.node.parentNode),!e)return t;do if(typeof e=="string"?t.matches(e):t instanceof e)return t;while(t=oi(t.node.parentNode));return t}put(e,t){return e=_n(e),this.add(e,t),e}putIn(e,t){return _n(e).add(this,t)}remove(){return this.parent()&&this.parent().removeElement(this),this}removeElement(e){return this.node.removeChild(e.node),this}replace(e){return e=_n(e),this.node.parentNode&&this.node.parentNode.replaceChild(e.node,this.node),e}round(e=2,t=null){const n=10**e,r=this.attr(t);for(const s in r)typeof r[s]=="number"&&(r[s]=Math.round(r[s]*n)/n);return this.attr(r),this}svg(e,t){return this.xml(e,t,Ef)}toString(){return this.id()}words(e){return this.node.textContent=e,this}wrap(e){const t=this.parent();if(!t)return this.addTo(e);const n=t.index(this);return t.put(e,n).put(this)}writeDataToDom(){return this.each(function(){this.writeDataToDom()}),this}xml(e,t,n){if(typeof e=="boolean"&&(n=t,t=e,e=null),e==null||typeof e=="function"){t=t==null||t,this.writeDataToDom();let a=this;if(e!=null){if(a=oi(a.node.cloneNode(!0)),t){const l=e(a);if(a=l||a,l===!1)return""}a.each(function(){const l=e(this),c=l||this;l===!1?this.remove():l&&this!==c&&this.replace(c)},!0)}return t?a.node.outerHTML:a.node.innerHTML}t=t!=null&&t;const r=_a("wrapper",n),s=dt.document.createDocumentFragment();r.innerHTML=e;for(let a=r.children.length;a--;)s.appendChild(r.firstElementChild);const o=this.parent();return t?this.replace(s)&&o:this.add(s)}}Ye(_r,{attr:function(i,e,t){if(i==null){i={},e=this.node.attributes;for(const n of e)i[n.nodeName]=Rv.test(n.nodeValue)?parseFloat(n.nodeValue):n.nodeValue;return i}if(i instanceof Array)return i.reduce((n,r)=>(n[r]=this.attr(r),n),{});if(typeof i=="object"&&i.constructor===Object)for(e in i)this.attr(e,i[e]);else if(e===null)this.node.removeAttribute(i);else{if(e==null)return(e=this.node.getAttribute(i))==null?DI[i]:Rv.test(e)?parseFloat(e):e;typeof(e=Bv.reduce((n,r)=>r(i,n,this),e))=="number"?e=new qe(e):NI.has(i)&&kt.isColor(e)?e=new kt(e):e.constructor===Array&&(e=new Ss(e)),i==="leading"?this.leading&&this.leading(e):typeof t=="string"?this.node.setAttributeNS(t,i,e.toString()):this.node.setAttribute(i,e.toString()),!this.rebuild||i!=="font-size"&&i!=="x"||this.rebuild()}return this},find:function(i){return ks(i,this.node)},findOne:function(i){return oi(this.node.querySelector(i))}}),ft(_r,"Dom");let hn=class extends _r{constructor(i,e){super(i,e),this.dom={},this.node.instance=this,(i.hasAttribute("data-svgjs")||i.hasAttribute("svgjs:data"))&&this.setData(JSON.parse(i.getAttribute("data-svgjs"))??JSON.parse(i.getAttribute("svgjs:data"))??{})}center(i,e){return this.cx(i).cy(e)}cx(i){return i==null?this.x()+this.width()/2:this.x(i-this.width()/2)}cy(i){return i==null?this.y()+this.height()/2:this.y(i-this.height()/2)}defs(){const i=this.root();return i&&i.defs()}dmove(i,e){return this.dx(i).dy(e)}dx(i=0){return this.x(new qe(i).plus(this.x()))}dy(i=0){return this.y(new qe(i).plus(this.y()))}getEventHolder(){return this}height(i){return this.attr("height",i)}move(i,e){return this.x(i).y(e)}parents(i=this.root()){const e=typeof i=="string";e||(i=_n(i));const t=new ws;let n=this;for(;(n=n.parent())&&n.node!==dt.document&&n.nodeName!=="#document-fragment"&&(t.push(n),e||n.node!==i.node)&&(!e||!n.matches(i));)if(n.node===this.root().node)return null;return t}reference(i){if(!(i=this.attr(i)))return null;const e=(i+"").match(AI);return e?_n(e[1]):null}root(){const i=this.parent(function(e){return vs[e]}(Pf));return i&&i.root()}setData(i){return this.dom=i,this}size(i,e){const t=go(this,i,e);return this.width(new qe(t.width)).height(new qe(t.height))}width(i){return this.attr("width",i)}writeDataToDom(){return Mv(this,this.dom),super.writeDataToDom()}x(i){return this.attr("x",i)}y(i){return this.attr("y",i)}};Ye(hn,{bbox:function(){const i=Nv(this,e=>e.getBBox(),e=>{try{const t=e.clone().addTo(Nr().svg).show(),n=t.node.getBBox();return t.remove(),n}catch(t){throw new Error(`Getting bbox of element "${e.node.nodeName}" is not possible: ${t.toString()}`)}});return new Ft(i)},rbox:function(i){const e=Nv(this,n=>n.getBoundingClientRect(),n=>{throw new Error(`Getting rbox of element "${n.node.nodeName}" is not possible`)}),t=new Ft(e);return i?t.transform(i.screenCTM().inverseO()):t.addOffset()},inside:function(i,e){const t=this.bbox();return i>t.x&&e>t.y&&i<t.x+t.width&&e<t.y+t.height},point:function(i,e){return new mt(i,e).transformO(this.screenCTM().inverseO())},ctm:function(){return new Fe(this.node.getCTM())},screenCTM:function(){try{if(typeof this.isRoot=="function"&&!this.isRoot()){const i=this.rect(1,1),e=i.node.getScreenCTM();return i.remove(),new Fe(e)}return new Fe(this.node.getScreenCTM())}catch{return console.warn(`Cannot get CTM from SVG node ${this.node.nodeName}. Is the element rendered?`),new Fe}}}),ft(hn,"Element");const Fa={stroke:["color","width","opacity","linecap","linejoin","miterlimit","dasharray","dashoffset"],fill:["color","opacity","rule"],prefix:function(i,e){return e==="color"?i:i+"-"+e}};["fill","stroke"].forEach(function(i){const e={};let t;e[i]=function(n){if(n===void 0)return this.attr(i);if(typeof n=="string"||n instanceof kt||kt.isRgb(n)||n instanceof hn)this.attr(i,n);else for(t=Fa[i].length-1;t>=0;t--)n[Fa[i][t]]!=null&&this.attr(Fa.prefix(i,Fa[i][t]),n[Fa[i][t]]);return this},nt(["Element","Runner"],e)}),nt(["Element","Runner"],{matrix:function(i,e,t,n,r,s){return i==null?new Fe(this):this.attr("transform",new Fe(i,e,t,n,r,s))},rotate:function(i,e,t){return this.transform({rotate:i,ox:e,oy:t},!0)},skew:function(i,e,t,n){return arguments.length===1||arguments.length===3?this.transform({skew:i,ox:e,oy:t},!0):this.transform({skew:[i,e],ox:t,oy:n},!0)},shear:function(i,e,t){return this.transform({shear:i,ox:e,oy:t},!0)},scale:function(i,e,t,n){return arguments.length===1||arguments.length===3?this.transform({scale:i,ox:e,oy:t},!0):this.transform({scale:[i,e],ox:t,oy:n},!0)},translate:function(i,e){return this.transform({translate:[i,e]},!0)},relative:function(i,e){return this.transform({relative:[i,e]},!0)},flip:function(i="both",e="center"){return"xybothtrue".indexOf(i)===-1&&(e=i,i="both"),this.transform({flip:i,origin:e},!0)},opacity:function(i){return this.attr("opacity",i)}}),nt("radius",{radius:function(i,e=i){return(this._element||this).type==="radialGradient"?this.attr("r",new qe(i)):this.rx(i).ry(e)}}),nt("Path",{length:function(){return this.node.getTotalLength()},pointAt:function(i){return new mt(this.node.getPointAtLength(i))}}),nt(["Element","Runner"],{font:function(i,e){if(typeof i=="object"){for(e in i)this.font(e,i[e]);return this}return i==="leading"?this.leading(e):i==="anchor"?this.attr("text-anchor",e):i==="size"||i==="family"||i==="weight"||i==="stretch"||i==="variant"||i==="style"?this.attr("font-"+i,e):this.attr(i,e)}}),nt("Element",["click","dblclick","mousedown","mouseup","mouseover","mouseout","mousemove","mouseenter","mouseleave","touchstart","touchmove","touchleave","touchend","touchcancel","contextmenu","wheel","pointerdown","pointermove","pointerup","pointerleave","pointercancel"].reduce(function(i,e){return i[e]=function(t){return t===null?this.off(e):this.on(e,t),this},i},{})),nt("Element",{untransform:function(){return this.attr("transform",null)},matrixify:function(){return(this.attr("transform")||"").split(MI).slice(0,-1).map(function(e){const t=e.trim().split("(");return[t[0],t[1].split(sr).map(function(n){return parseFloat(n)})]}).reverse().reduce(function(e,t){return t[0]==="matrix"?e.lmultiply(Fe.fromArray(t[1])):e[t[0]].apply(e,t[1])},new Fe)},toParent:function(i,e){if(this===i)return this;if(Tf(this.node))return this.addTo(i,e);const t=this.screenCTM(),n=i.screenCTM().inverse();return this.addTo(i,e).untransform().transform(n.multiply(t)),this},toRoot:function(i){return this.toParent(this.root(),i)},transform:function(i,e){if(i==null||typeof i=="string"){const n=new Fe(this).decompose();return i==null?n:n[i]}Fe.isMatrixLike(i)||(i={...i,origin:Mf(i,this)});const t=new Fe(e===!0?this:e||!1).transform(i);return this.attr("transform",t)}});class zn extends hn{flatten(){return this.each(function(){if(this instanceof zn)return this.flatten().ungroup()}),this}ungroup(e=this.parent(),t=e.index(this)){return t=t===-1?e.children().length:t,this.each(function(n,r){return r[r.length-n-1].toParent(e,t)}),this.remove()}}ft(zn,"Container");class ah extends zn{constructor(e,t=e){super(St("defs",e),t)}flatten(){return this}ungroup(){return this}}ft(ah,"Defs");class Kn extends hn{}function zf(i){return this.attr("rx",i)}function Ff(i){return this.attr("ry",i)}function Hv(i){return i==null?this.cx()-this.rx():this.cx(i+this.rx())}function Xv(i){return i==null?this.cy()-this.ry():this.cy(i+this.ry())}function Wv(i){return this.attr("cx",i)}function Yv(i){return this.attr("cy",i)}function jv(i){return i==null?2*this.rx():this.rx(new qe(i).divide(2))}function Vv(i){return i==null?2*this.ry():this.ry(new qe(i).divide(2))}ft(Kn,"Shape");var _I=Object.freeze({__proto__:null,cx:Wv,cy:Yv,height:Vv,rx:zf,ry:Ff,width:jv,x:Hv,y:Xv});class lh extends Kn{constructor(e,t=e){super(St("ellipse",e),t)}size(e,t){const n=go(this,e,t);return this.rx(new qe(n.width).divide(2)).ry(new qe(n.height).divide(2))}}Ye(lh,_I),nt("Container",{ellipse:Ct(function(i=0,e=i){return this.put(new lh).size(i,e).move(0,0)})}),ft(lh,"Ellipse");class $v extends _r{constructor(e=dt.document.createDocumentFragment()){super(e)}xml(e,t,n){if(typeof e=="boolean"&&(n=t,t=e,e=null),e==null||typeof e=="function"){const r=new _r(_a("wrapper",n));return r.add(this.node.cloneNode(!0)),r.xml(!1,n)}return super.xml(e,!1,n)}}function Gv(i,e){return(this._element||this).type==="radialGradient"?this.attr({fx:new qe(i),fy:new qe(e)}):this.attr({x1:new qe(i),y1:new qe(e)})}function qv(i,e){return(this._element||this).type==="radialGradient"?this.attr({cx:new qe(i),cy:new qe(e)}):this.attr({x2:new qe(i),y2:new qe(e)})}ft($v,"Fragment");var zI=Object.freeze({__proto__:null,from:Gv,to:qv});class Ba extends zn{constructor(e,t){super(St(e+"Gradient",typeof e=="string"?null:e),t)}attr(e,t,n){return e==="transform"&&(e="gradientTransform"),super.attr(e,t,n)}bbox(){return new Ft}targets(){return ks("svg [fill*="+this.id()+"]")}toString(){return this.url()}update(e){return this.clear(),typeof e=="function"&&e.call(this,this),this}url(){return"url(#"+this.id()+")"}}Ye(Ba,zI),nt({Container:{gradient(...i){return this.defs().gradient(...i)}},Defs:{gradient:Ct(function(i,e){return this.put(new Ba(i)).update(e)})}}),ft(Ba,"Gradient");class Ha extends zn{constructor(e,t=e){super(St("pattern",e),t)}attr(e,t,n){return e==="transform"&&(e="patternTransform"),super.attr(e,t,n)}bbox(){return new Ft}targets(){return ks("svg [fill*="+this.id()+"]")}toString(){return this.url()}update(e){return this.clear(),typeof e=="function"&&e.call(this,this),this}url(){return"url(#"+this.id()+")"}}nt({Container:{pattern(...i){return this.defs().pattern(...i)}},Defs:{pattern:Ct(function(i,e,t){return this.put(new Ha).update(t).attr({x:0,y:0,width:i,height:e,patternUnits:"userSpaceOnUse"})})}}),ft(Ha,"Pattern");let ch=class extends Kn{constructor(i,e=i){super(St("image",i),e)}load(i,e){if(!i)return this;const t=new dt.window.Image;return or(t,"load",function(n){const r=this.parent(Ha);this.width()===0&&this.height()===0&&this.size(t.width,t.height),r instanceof Ha&&r.width()===0&&r.height()===0&&r.size(this.width(),this.height()),typeof e=="function"&&e.call(this,n)},this),or(t,"load error",function(){ai(t)}),this.attr("href",t.src=i,mo)}};var Uv;Uv=function(i,e,t){return i!=="fill"&&i!=="stroke"||EI.test(e)&&(e=t.root().defs().image(e)),e instanceof ch&&(e=t.root().defs().pattern(0,0,n=>{n.add(e)})),e},Bv.push(Uv),nt({Container:{image:Ct(function(i,e){return this.put(new ch).size(0,0).load(i,e)})}}),ft(ch,"Image");class zr extends Ss{bbox(){let e=-1/0,t=-1/0,n=1/0,r=1/0;return this.forEach(function(s){e=Math.max(s[0],e),t=Math.max(s[1],t),n=Math.min(s[0],n),r=Math.min(s[1],r)}),new Ft(n,r,e-n,t-r)}move(e,t){const n=this.bbox();if(e-=n.x,t-=n.y,!isNaN(e)&&!isNaN(t))for(let r=this.length-1;r>=0;r--)this[r]=[this[r][0]+e,this[r][1]+t];return this}parse(e=[0,0]){const t=[];(e=e instanceof Array?Array.prototype.concat.apply([],e):e.trim().split(sr).map(parseFloat)).length%2!=0&&e.pop();for(let n=0,r=e.length;n<r;n+=2)t.push([e[n],e[n+1]]);return t}size(e,t){let n;const r=this.bbox();for(n=this.length-1;n>=0;n--)r.width&&(this[n][0]=(this[n][0]-r.x)*e/r.width+r.x),r.height&&(this[n][1]=(this[n][1]-r.y)*t/r.height+r.y);return this}toLine(){return{x1:this[0][0],y1:this[0][1],x2:this[1][0],y2:this[1][1]}}toString(){const e=[];for(let t=0,n=this.length;t<n;t++)e.push(this[t].join(","));return e.join(" ")}transform(e){return this.clone().transformO(e)}transformO(e){Fe.isMatrixLike(e)||(e=new Fe(e));for(let t=this.length;t--;){const[n,r]=this[t];this[t][0]=e.a*n+e.c*r+e.e,this[t][1]=e.b*n+e.d*r+e.f}return this}}var Bf=Object.freeze({__proto__:null,MorphArray:zr,height:function(i){const e=this.bbox();return i==null?e.height:this.size(e.width,i)},width:function(i){const e=this.bbox();return i==null?e.width:this.size(i,e.height)},x:function(i){return i==null?this.bbox().x:this.move(i,this.bbox().y)},y:function(i){return i==null?this.bbox().y:this.move(this.bbox().x,i)}});let Cs=class extends Kn{constructor(i,e=i){super(St("line",i),e)}array(){return new zr([[this.attr("x1"),this.attr("y1")],[this.attr("x2"),this.attr("y2")]])}move(i,e){return this.attr(this.array().move(i,e).toLine())}plot(i,e,t,n){return i==null?this.array():(i=e!==void 0?{x1:i,y1:e,x2:t,y2:n}:new zr(i).toLine(),this.attr(i))}size(i,e){const t=go(this,i,e);return this.attr(this.array().size(t.width,t.height).toLine())}};Ye(Cs,Bf),nt({Container:{line:Ct(function(...i){return Cs.prototype.plot.apply(this.put(new Cs),i[0]!=null?i:[0,0,0,0])})}}),ft(Cs,"Line");let hh=class extends zn{constructor(i,e=i){super(St("marker",i),e)}height(i){return this.attr("markerHeight",i)}orient(i){return this.attr("orient",i)}ref(i,e){return this.attr("refX",i).attr("refY",e)}toString(){return"url(#"+this.id()+")"}update(i){return this.clear(),typeof i=="function"&&i.call(this,this),this}width(i){return this.attr("markerWidth",i)}};function yo(i,e){return function(t){return t==null?this[i]:(this[i]=t,e&&e.call(this),this)}}nt({Container:{marker(...i){return this.defs().marker(...i)}},Defs:{marker:Ct(function(i,e,t){return this.put(new hh).size(i,e).ref(i/2,e/2).viewbox(0,0,i,e).attr("orient","auto").update(t)})},marker:{marker(i,e,t,n){let r=["marker"];return i!=="all"&&r.push(i),r=r.join("-"),i=arguments[1]instanceof hh?arguments[1]:this.defs().marker(e,t,n),this.attr(r,i)}}}),ft(hh,"Marker");const FI={"-":function(i){return i},"<>":function(i){return-Math.cos(i*Math.PI)/2+.5},">":function(i){return Math.sin(i*Math.PI/2)},"<":function(i){return 1-Math.cos(i*Math.PI/2)},bezier:function(i,e,t,n){return function(r){return r<0?i>0?e/i*r:t>0?n/t*r:0:r>1?t<1?(1-n)/(1-t)*r+(n-t)/(1-t):i<1?(1-e)/(1-i)*r+(e-i)/(1-i):1:3*r*(1-r)**2*e+3*r**2*(1-r)*n+r**3}},steps:function(i,e="end"){e=e.split("-").reverse()[0];let t=i;return e==="none"?--t:e==="both"&&++t,(n,r=!1)=>{let s=Math.floor(n*i);const o=n*s%1==0;return e!=="start"&&e!=="both"||++s,r&&o&&--s,n>=0&&s<0&&(s=0),n<=1&&s>t&&(s=t),s/t}}};class Hf{done(){return!1}}class Xf extends Hf{constructor(e=LI){super(),this.ease=FI[e]||e}step(e,t,n){return typeof e!="number"?n<1?e:t:e+(t-e)*this.ease(n)}}class uh extends Hf{constructor(e){super(),this.stepper=e}done(e){return e.done}step(e,t,n,r){return this.stepper(e,t,n,r)}}function Kv(){const i=(this._duration||500)/1e3,e=this._overshoot||0,t=Math.PI,n=Math.log(e/100+1e-10),r=-n/Math.sqrt(t*t+n*n),s=3.9/(r*i);this.d=2*r*s,this.k=s*s}Ye(class extends uh{constructor(i=500,e=0){super(),this.duration(i).overshoot(e)}step(i,e,t,n){if(typeof i=="string")return i;if(n.done=t===1/0,t===1/0)return e;if(t===0)return i;t>100&&(t=16),t/=1e3;const r=n.velocity||0,s=-this.d*r-this.k*(i-e),o=i+r*t+s*t*t/2;return n.velocity=r+s*t,n.done=Math.abs(e-o)+Math.abs(r)<.002,n.done?e:o}},{duration:yo("_duration",Kv),overshoot:yo("_overshoot",Kv)}),Ye(class extends uh{constructor(i=.1,e=.01,t=0,n=1e3){super(),this.p(i).i(e).d(t).windup(n)}step(i,e,t,n){if(typeof i=="string")return i;if(n.done=t===1/0,t===1/0)return e;if(t===0)return i;const r=e-i;let s=(n.integral||0)+r*t;const o=(r-(n.error||0))/t,a=this._windup;return a!==!1&&(s=Math.max(-a,Math.min(s,a))),n.error=r,n.integral=s,n.done=Math.abs(r)<.001,n.done?e:i+(this.P*r+this.I*s+this.D*o)}},{windup:yo("_windup"),p:yo("P"),i:yo("I"),d:yo("D")});const BI={M:2,L:2,H:1,V:1,C:6,S:4,Q:4,T:2,A:7,Z:0},Wf={M:function(i,e,t){return e.x=t.x=i[0],e.y=t.y=i[1],["M",e.x,e.y]},L:function(i,e){return e.x=i[0],e.y=i[1],["L",i[0],i[1]]},H:function(i,e){return e.x=i[0],["H",i[0]]},V:function(i,e){return e.y=i[0],["V",i[0]]},C:function(i,e){return e.x=i[4],e.y=i[5],["C",i[0],i[1],i[2],i[3],i[4],i[5]]},S:function(i,e){return e.x=i[2],e.y=i[3],["S",i[0],i[1],i[2],i[3]]},Q:function(i,e){return e.x=i[2],e.y=i[3],["Q",i[0],i[1],i[2],i[3]]},T:function(i,e){return e.x=i[0],e.y=i[1],["T",i[0],i[1]]},Z:function(i,e,t){return e.x=t.x,e.y=t.y,["Z"]},A:function(i,e){return e.x=i[5],e.y=i[6],["A",i[0],i[1],i[2],i[3],i[4],i[5],i[6]]}},Yf="mlhvqtcsaz".split("");for(let i=0,e=Yf.length;i<e;++i)Wf[Yf[i]]=function(t){return function(n,r,s){if(t==="H")n[0]=n[0]+r.x;else if(t==="V")n[0]=n[0]+r.y;else if(t==="A")n[5]=n[5]+r.x,n[6]=n[6]+r.y;else for(let o=0,a=n.length;o<a;++o)n[o]=n[o]+(o%2?r.y:r.x);return Wf[t](n,r,s)}}(Yf[i].toUpperCase());function jf(i){return i.segment.length&&i.segment.length-1===BI[i.segment[0].toUpperCase()]}function HI(i,e){i.inNumber&&As(i,!1);const t=Rf.test(e);if(t)i.segment=[e];else{const n=i.lastCommand,r=n.toLowerCase(),s=n===r;i.segment=[r==="m"?s?"l":"L":n]}return i.inSegment=!0,i.lastCommand=i.segment[0],t}function As(i,e){if(!i.inNumber)throw new Error("Parser Error");i.number&&i.segment.push(parseFloat(i.number)),i.inNumber=e,i.number="",i.pointSeen=!1,i.hasExponent=!1,jf(i)&&Vf(i)}function Vf(i){i.inSegment=!1,i.absolute&&(i.segment=function(e){const t=e.segment[0];return Wf[t](e.segment.slice(1),e.p,e.p0)}(i)),i.segments.push(i.segment)}function XI(i){if(!i.segment.length)return!1;const e=i.segment[0].toUpperCase()==="A",t=i.segment.length;return e&&(t===4||t===5)}function WI(i){return i.lastToken.toUpperCase()==="E"}const YI=new Set([" ",",","	",`
    `,"\r","\f"]);class vi extends Ss{bbox(){return Nr().path.setAttribute("d",this.toString()),new Ft(Nr.nodes.path.getBBox())}move(e,t){const n=this.bbox();if(e-=n.x,t-=n.y,!isNaN(e)&&!isNaN(t))for(let r,s=this.length-1;s>=0;s--)r=this[s][0],r==="M"||r==="L"||r==="T"?(this[s][1]+=e,this[s][2]+=t):r==="H"?this[s][1]+=e:r==="V"?this[s][1]+=t:r==="C"||r==="S"||r==="Q"?(this[s][1]+=e,this[s][2]+=t,this[s][3]+=e,this[s][4]+=t,r==="C"&&(this[s][5]+=e,this[s][6]+=t)):r==="A"&&(this[s][6]+=e,this[s][7]+=t);return this}parse(e="M0 0"){return Array.isArray(e)&&(e=Array.prototype.concat.apply([],e).toString()),function(t,n=!0){let r=0,s="";const o={segment:[],inNumber:!1,number:"",lastToken:"",inSegment:!1,segments:[],pointSeen:!1,hasExponent:!1,absolute:n,p0:new mt,p:new mt};for(;o.lastToken=s,s=t.charAt(r++);)if(o.inSegment||!HI(o,s))if(s!==".")if(isNaN(parseInt(s)))if(YI.has(s))o.inNumber&&As(o,!1);else if(s!=="-"&&s!=="+")if(s.toUpperCase()!=="E"){if(Rf.test(s)){if(o.inNumber)As(o,!1);else{if(!jf(o))throw new Error("parser Error");Vf(o)}--r}}else o.number+=s,o.hasExponent=!0;else{if(o.inNumber&&!WI(o)){As(o,!1),--r;continue}o.number+=s,o.inNumber=!0}else{if(o.number==="0"||XI(o)){o.inNumber=!0,o.number=s,As(o,!0);continue}o.inNumber=!0,o.number+=s}else{if(o.pointSeen||o.hasExponent){As(o,!1),--r;continue}o.inNumber=!0,o.pointSeen=!0,o.number+=s}return o.inNumber&&As(o,!1),o.inSegment&&jf(o)&&Vf(o),o.segments}(e)}size(e,t){const n=this.bbox();let r,s;for(n.width=n.width===0?1:n.width,n.height=n.height===0?1:n.height,r=this.length-1;r>=0;r--)s=this[r][0],s==="M"||s==="L"||s==="T"?(this[r][1]=(this[r][1]-n.x)*e/n.width+n.x,this[r][2]=(this[r][2]-n.y)*t/n.height+n.y):s==="H"?this[r][1]=(this[r][1]-n.x)*e/n.width+n.x:s==="V"?this[r][1]=(this[r][1]-n.y)*t/n.height+n.y:s==="C"||s==="S"||s==="Q"?(this[r][1]=(this[r][1]-n.x)*e/n.width+n.x,this[r][2]=(this[r][2]-n.y)*t/n.height+n.y,this[r][3]=(this[r][3]-n.x)*e/n.width+n.x,this[r][4]=(this[r][4]-n.y)*t/n.height+n.y,s==="C"&&(this[r][5]=(this[r][5]-n.x)*e/n.width+n.x,this[r][6]=(this[r][6]-n.y)*t/n.height+n.y)):s==="A"&&(this[r][1]=this[r][1]*e/n.width,this[r][2]=this[r][2]*t/n.height,this[r][6]=(this[r][6]-n.x)*e/n.width+n.x,this[r][7]=(this[r][7]-n.y)*t/n.height+n.y);return this}toString(){return function(e){let t="";for(let n=0,r=e.length;n<r;n++)t+=e[n][0],e[n][1]!=null&&(t+=e[n][1],e[n][2]!=null&&(t+=" ",t+=e[n][2],e[n][3]!=null&&(t+=" ",t+=e[n][3],t+=" ",t+=e[n][4],e[n][5]!=null&&(t+=" ",t+=e[n][5],t+=" ",t+=e[n][6],e[n][7]!=null&&(t+=" ",t+=e[n][7])))));return t+" "}(this)}}const Jv=i=>{const e=typeof i;return e==="number"?qe:e==="string"?kt.isColor(i)?kt:sr.test(i)?Rf.test(i)?vi:Ss:Ov.test(i)?qe:$f:Gf.indexOf(i.constructor)>-1?i.constructor:Array.isArray(i)?Ss:e==="object"?Wa:$f};class Ms{constructor(e){this._stepper=e||new Xf("-"),this._from=null,this._to=null,this._type=null,this._context=null,this._morphObj=null}at(e){return this._morphObj.morph(this._from,this._to,e,this._stepper,this._context)}done(){return this._context.map(this._stepper.done).reduce(function(e,t){return e&&t},!0)}from(e){return e==null?this._from:(this._from=this._set(e),this)}stepper(e){return e==null?this._stepper:(this._stepper=e,this)}to(e){return e==null?this._to:(this._to=this._set(e),this)}type(e){return e==null?this._type:(this._type=e,this)}_set(e){this._type||this.type(Jv(e));let t=new this._type(e);return this._type===kt&&(t=this._to?t[this._to[4]]():this._from?t[this._from[4]]():t),this._type===Wa&&(t=this._to?t.align(this._to):this._from?t.align(this._from):t),t=t.toConsumable(),this._morphObj=this._morphObj||new this._type,this._context=this._context||Array.apply(null,Array(t.length)).map(Object).map(function(n){return n.done=!0,n}),t}}class $f{constructor(...e){this.init(...e)}init(e){return e=Array.isArray(e)?e[0]:e,this.value=e,this}toArray(){return[this.value]}valueOf(){return this.value}}class Xa{constructor(...e){this.init(...e)}init(e){return Array.isArray(e)&&(e={scaleX:e[0],scaleY:e[1],shear:e[2],rotate:e[3],translateX:e[4],translateY:e[5],originX:e[6],originY:e[7]}),Object.assign(this,Xa.defaults,e),this}toArray(){const e=this;return[e.scaleX,e.scaleY,e.shear,e.rotate,e.translateX,e.translateY,e.originX,e.originY]}}Xa.defaults={scaleX:1,scaleY:1,shear:0,rotate:0,translateX:0,translateY:0,originX:0,originY:0};const jI=(i,e)=>i[0]<e[0]?-1:i[0]>e[0]?1:0;class Wa{constructor(...e){this.init(...e)}align(e){const t=this.values;for(let n=0,r=t.length;n<r;++n){if(t[n+1]===e[n+1]){if(t[n+1]===kt&&e[n+7]!==t[n+7]){const a=e[n+7],l=new kt(this.values.splice(n+3,5))[a]().toArray();this.values.splice(n+3,0,...l)}n+=t[n+2]+2;continue}if(!e[n+1])return this;const s=new e[n+1]().toArray(),o=t[n+2]+3;t.splice(n,o,e[n],e[n+1],e[n+2],...s),n+=t[n+2]+2}return this}init(e){if(this.values=[],Array.isArray(e))return void(this.values=e.slice());e=e||{};const t=[];for(const n in e){const r=Jv(e[n]),s=new r(e[n]).toArray();t.push([n,r,s.length,...s])}return t.sort(jI),this.values=t.reduce((n,r)=>n.concat(r),[]),this}toArray(){return this.values}valueOf(){const e={},t=this.values;for(;t.length;){const n=t.shift(),r=t.shift(),s=t.shift(),o=t.splice(0,s);e[n]=new r(o)}return e}}const Gf=[$f,Xa,Wa];class vo extends Kn{constructor(e,t=e){super(St("path",e),t)}array(){return this._array||(this._array=new vi(this.attr("d")))}clear(){return delete this._array,this}height(e){return e==null?this.bbox().height:this.size(this.bbox().width,e)}move(e,t){return this.attr("d",this.array().move(e,t))}plot(e){return e==null?this.array():this.clear().attr("d",typeof e=="string"?e:this._array=new vi(e))}size(e,t){const n=go(this,e,t);return this.attr("d",this.array().size(n.width,n.height))}width(e){return e==null?this.bbox().width:this.size(e,this.bbox().height)}x(e){return e==null?this.bbox().x:this.move(e,this.bbox().y)}y(e){return e==null?this.bbox().y:this.move(this.bbox().x,e)}}vo.prototype.MorphArray=vi,nt({Container:{path:Ct(function(i){return this.put(new vo).plot(i||new vi)})}}),ft(vo,"Path");var Zv=Object.freeze({__proto__:null,array:function(){return this._array||(this._array=new zr(this.attr("points")))},clear:function(){return delete this._array,this},move:function(i,e){return this.attr("points",this.array().move(i,e))},plot:function(i){return i==null?this.array():this.clear().attr("points",typeof i=="string"?i:this._array=new zr(i))},size:function(i,e){const t=go(this,i,e);return this.attr("points",this.array().size(t.width,t.height))}});class Ts extends Kn{constructor(e,t=e){super(St("polygon",e),t)}}nt({Container:{polygon:Ct(function(i){return this.put(new Ts).plot(i||new zr)})}}),Ye(Ts,Bf),Ye(Ts,Zv),ft(Ts,"Polygon");class Es extends Kn{constructor(e,t=e){super(St("polyline",e),t)}}nt({Container:{polyline:Ct(function(i){return this.put(new Es).plot(i||new zr)})}}),Ye(Es,Bf),Ye(Es,Zv),ft(Es,"Polyline");class dh extends Kn{constructor(e,t=e){super(St("rect",e),t)}}Ye(dh,{rx:zf,ry:Ff}),nt({Container:{rect:Ct(function(i,e){return this.put(new dh).size(i,e)})}}),ft(dh,"Rect");class qf{constructor(){this._first=null,this._last=null}first(){return this._first&&this._first.value}last(){return this._last&&this._last.value}push(e){const t=e.next!==void 0?e:{value:e,next:null,prev:null};return this._last?(t.prev=this._last,this._last.next=t,this._last=t):(this._last=t,this._first=t),t}remove(e){e.prev&&(e.prev.next=e.next),e.next&&(e.next.prev=e.prev),e===this._last&&(this._last=e.prev),e===this._first&&(this._first=e.next),e.prev=null,e.next=null}shift(){const e=this._first;return e?(this._first=e.next,this._first&&(this._first.prev=null),this._last=this._first?this._last:null,e.value):null}}const vt={nextDraw:null,frames:new qf,timeouts:new qf,immediates:new qf,timer:()=>dt.window.performance||dt.window.Date,transforms:[],frame(i){const e=vt.frames.push({run:i});return vt.nextDraw===null&&(vt.nextDraw=dt.window.requestAnimationFrame(vt._draw)),e},timeout(i,e){e=e||0;const t=vt.timer().now()+e,n=vt.timeouts.push({run:i,time:t});return vt.nextDraw===null&&(vt.nextDraw=dt.window.requestAnimationFrame(vt._draw)),n},immediate(i){const e=vt.immediates.push(i);return vt.nextDraw===null&&(vt.nextDraw=dt.window.requestAnimationFrame(vt._draw)),e},cancelFrame(i){i!=null&&vt.frames.remove(i)},clearTimeout(i){i!=null&&vt.timeouts.remove(i)},cancelImmediate(i){i!=null&&vt.immediates.remove(i)},_draw(i){let e=null;const t=vt.timeouts.last();for(;(e=vt.timeouts.shift())&&(i>=e.time?e.run():vt.timeouts.push(e),e!==t););let n=null;const r=vt.frames.last();for(;n!==r&&(n=vt.frames.shift());)n.run(i);let s=null;for(;s=vt.immediates.shift();)s();vt.nextDraw=vt.timeouts.first()||vt.frames.first()?dt.window.requestAnimationFrame(vt._draw):null}},VI=function(i){const e=i.start,t=i.runner.duration();return{start:e,duration:t,end:e+t,runner:i.runner}},$I=function(){const i=dt.window;return(i.performance||i.Date).now()};class Qv extends za{constructor(e=$I){super(),this._timeSource=e,this.terminate()}active(){return!!this._nextFrame}finish(){return this.time(this.getEndTimeOfTimeline()+1),this.pause()}getEndTime(){const e=this.getLastRunnerInfo(),t=e?e.runner.duration():0;return(e?e.start:this._time)+t}getEndTimeOfTimeline(){const e=this._runners.map(t=>t.start+t.runner.duration());return Math.max(0,...e)}getLastRunnerInfo(){return this.getRunnerInfoById(this._lastRunnerId)}getRunnerInfoById(e){return this._runners[this._runnerIds.indexOf(e)]||null}pause(){return this._paused=!0,this._continue()}persist(e){return e==null?this._persist:(this._persist=e,this)}play(){return this._paused=!1,this.updateTime()._continue()}reverse(e){const t=this.speed();if(e==null)return this.speed(-t);const n=Math.abs(t);return this.speed(e?-n:n)}schedule(e,t,n){if(e==null)return this._runners.map(VI);let r=0;const s=this.getEndTime();if(t=t||0,n==null||n==="last"||n==="after")r=s;else if(n==="absolute"||n==="start")r=t,t=0;else if(n==="now")r=this._time;else if(n==="relative"){const l=this.getRunnerInfoById(e.id);l&&(r=l.start+t,t=0)}else{if(n!=="with-last")throw new Error('Invalid value for the "when" parameter');{const l=this.getLastRunnerInfo();r=l?l.start:this._time}}e.unschedule(),e.timeline(this);const o=e.persist(),a={persist:o===null?this._persist:o,start:r+t,runner:e};return this._lastRunnerId=e.id,this._runners.push(a),this._runners.sort((l,c)=>l.start-c.start),this._runnerIds=this._runners.map(l=>l.runner.id),this.updateTime()._continue(),this}seek(e){return this.time(this._time+e)}source(e){return e==null?this._timeSource:(this._timeSource=e,this)}speed(e){return e==null?this._speed:(this._speed=e,this)}stop(){return this.time(0),this.pause()}time(e){return e==null?this._time:(this._time=e,this._continue(!0))}unschedule(e){const t=this._runnerIds.indexOf(e.id);return t<0||(this._runners.splice(t,1),this._runnerIds.splice(t,1),e.timeline(null)),this}updateTime(){return this.active()||(this._lastSourceTime=this._timeSource()),this}_continue(e=!1){return vt.cancelFrame(this._nextFrame),this._nextFrame=null,e?this._stepImmediate():(this._paused||(this._nextFrame=vt.frame(this._step)),this)}_stepFn(e=!1){const t=this._timeSource();let n=t-this._lastSourceTime;e&&(n=0);const r=this._speed*n+(this._time-this._lastStepTime);this._lastSourceTime=t,e||(this._time+=r,this._time=this._time<0?0:this._time),this._lastStepTime=this._time,this.fire("time",this._time);for(let o=this._runners.length;o--;){const a=this._runners[o],l=a.runner;this._time-a.start<=0&&l.reset()}let s=!1;for(let o=0,a=this._runners.length;o<a;o++){const l=this._runners[o],c=l.runner;let h=r;const u=this._time-l.start;if(u<=0){s=!0;continue}u<h&&(h=u),c.active()&&(c.step(h).done?l.persist!==!0&&c.duration()-c.time()+this._time+l.persist<this._time&&(c.unschedule(),--o,--a):s=!0)}return s&&!(this._speed<0&&this._time===0)||this._runnerIds.length&&this._speed<0&&this._time>0?this._continue():(this.pause(),this.fire("finished")),this}terminate(){this._startTime=0,this._speed=1,this._persist=0,this._nextFrame=null,this._paused=!0,this._runners=[],this._runnerIds=[],this._lastRunnerId=-1,this._time=0,this._lastSourceTime=0,this._lastStepTime=0,this._step=this._stepFn.bind(this,!1),this._stepImmediate=this._stepFn.bind(this,!0)}}nt({Element:{timeline:function(i){return i==null?(this._timeline=this._timeline||new Qv,this._timeline):(this._timeline=i,this)}}});class Jn extends za{constructor(e){super(),this.id=Jn.id++,e=typeof(e=e??_f)=="function"?new uh(e):e,this._element=null,this._timeline=null,this.done=!1,this._queue=[],this._duration=typeof e=="number"&&e,this._isDeclarative=e instanceof uh,this._stepper=this._isDeclarative?e:new Xf,this._history={},this.enabled=!0,this._time=0,this._lastTime=0,this._reseted=!0,this.transforms=new Fe,this.transformId=1,this._haveReversed=!1,this._reverse=!1,this._loopsDone=0,this._swing=!1,this._wait=0,this._times=1,this._frameId=null,this._persist=!!this._isDeclarative||null}static sanitise(e,t,n){let r=1,s=!1,o=0;return t=t??RI,n=n||"last",typeof(e=e??_f)!="object"||e instanceof Hf||(t=e.delay??t,n=e.when??n,s=e.swing||s,r=e.times??r,o=e.wait??o,e=e.duration??_f),{duration:e,delay:t,swing:s,times:r,wait:o,when:n}}active(e){return e==null?this.enabled:(this.enabled=e,this)}addTransform(e){return this.transforms.lmultiplyO(e),this}after(e){return this.on("finished",e)}animate(e,t,n){const r=Jn.sanitise(e,t,n),s=new Jn(r.duration);return this._timeline&&s.timeline(this._timeline),this._element&&s.element(this._element),s.loop(r).schedule(r.delay,r.when)}clearTransform(){return this.transforms=new Fe,this}clearTransformsFromQueue(){this.done&&this._timeline&&this._timeline._runnerIds.includes(this.id)||(this._queue=this._queue.filter(e=>!e.isTransform))}delay(e){return this.animate(0,e)}duration(){return this._times*(this._wait+this._duration)-this._wait}during(e){return this.queue(null,e)}ease(e){return this._stepper=new Xf(e),this}element(e){return e==null?this._element:(this._element=e,e._prepareRunner(),this)}finish(){return this.step(1/0)}loop(e,t,n){return typeof e=="object"&&(t=e.swing,n=e.wait,e=e.times),this._times=e||1/0,this._swing=t||!1,this._wait=n||0,this._times===!0&&(this._times=1/0),this}loops(e){const t=this._duration+this._wait;if(e==null){const s=Math.floor(this._time/t),o=(this._time-s*t)/this._duration;return Math.min(s+o,this._times)}const n=e%1,r=t*Math.floor(e)+this._duration*n;return this.time(r)}persist(e){return e==null?this._persist:(this._persist=e,this)}position(e){const t=this._time,n=this._duration,r=this._wait,s=this._times,o=this._swing,a=this._reverse;let l;if(e==null){const u=function(f){const g=o*Math.floor(f%(2*(r+n))/(r+n)),m=g&&!a||!g&&a,b=Math.pow(-1,m)*(f%(r+n))/n+m;return Math.max(Math.min(b,1),0)},d=s*(r+n)-r;return l=t<=0?Math.round(u(1e-5)):t<d?u(t):Math.round(u(d-1e-5)),l}const c=Math.floor(this.loops()),h=o&&c%2==0;return l=c+(h&&!a||a&&h?e:1-e),this.loops(l)}progress(e){return e==null?Math.min(1,this._time/this.duration()):this.time(e*this.duration())}queue(e,t,n,r){return this._queue.push({initialiser:e||Fv,runner:t||Fv,retarget:n,isTransform:r,initialised:!1,finished:!1}),this.timeline()&&this.timeline()._continue(),this}reset(){return this._reseted||(this.time(0),this._reseted=!0),this}reverse(e){return this._reverse=e??!this._reverse,this}schedule(e,t,n){if(e instanceof Qv||(n=t,t=e,e=this.timeline()),!e)throw Error("Runner cannot be scheduled without timeline");return e.schedule(this,t,n),this}step(e){if(!this.enabled)return this;e=e??16,this._time+=e;const t=this.position(),n=this._lastPosition!==t&&this._time>=0;this._lastPosition=t;const r=this.duration(),s=this._lastTime<=0&&this._time>0,o=this._lastTime<r&&this._time>=r;this._lastTime=this._time,s&&this.fire("start",this);const a=this._isDeclarative;this.done=!a&&!o&&this._time>=r,this._reseted=!1;let l=!1;return(n||a)&&(this._initialise(n),this.transforms=new Fe,l=this._run(a?e:t),this.fire("step",this)),this.done=this.done||l&&a,o&&this.fire("finished",this),this}time(e){if(e==null)return this._time;const t=e-this._time;return this.step(t),this}timeline(e){return e===void 0?this._timeline:(this._timeline=e,this)}unschedule(){const e=this.timeline();return e&&e.unschedule(this),this}_initialise(e){if(e||this._isDeclarative)for(let t=0,n=this._queue.length;t<n;++t){const r=this._queue[t],s=this._isDeclarative||!r.initialised&&e;e=!r.finished,s&&e&&(r.initialiser.call(this),r.initialised=!0)}}_rememberMorpher(e,t){if(this._history[e]={morpher:t,caller:this._queue[this._queue.length-1]},this._isDeclarative){const n=this.timeline();n&&n.play()}}_run(e){let t=!0;for(let n=0,r=this._queue.length;n<r;++n){const s=this._queue[n],o=s.runner.call(this,e);s.finished=s.finished||o===!0,t=t&&s.finished}return t}_tryRetarget(e,t,n){if(this._history[e]){if(!this._history[e].caller.initialised){const s=this._queue.indexOf(this._history[e].caller);return this._queue.splice(s,1),!1}this._history[e].caller.retarget?this._history[e].caller.retarget.call(this,t,n):this._history[e].morpher.to(t),this._history[e].caller.finished=!1;const r=this.timeline();return r&&r.play(),!0}return!1}}Jn.id=0;class fh{constructor(e=new Fe,t=-1,n=!0){this.transforms=e,this.id=t,this.done=n}clearTransformsFromQueue(){}}Ye([Jn,fh],{mergeWith(i){return new fh(i.transforms.lmultiply(this.transforms),i.id)}});const e0=(i,e)=>i.lmultiplyO(e),t0=i=>i.transforms;function GI(){const i=this._transformationRunners.runners.map(t0).reduce(e0,new Fe);this.transform(i),this._transformationRunners.merge(),this._transformationRunners.length()===1&&(this._frameId=null)}class qI{constructor(){this.runners=[],this.ids=[]}add(e){if(this.runners.includes(e))return;const t=e.id+1;return this.runners.push(e),this.ids.push(t),this}clearBefore(e){const t=this.ids.indexOf(e+1)||1;return this.ids.splice(0,t,0),this.runners.splice(0,t,new fh).forEach(n=>n.clearTransformsFromQueue()),this}edit(e,t){const n=this.ids.indexOf(e+1);return this.ids.splice(n,1,e+1),this.runners.splice(n,1,t),this}getByID(e){return this.runners[this.ids.indexOf(e+1)]}length(){return this.ids.length}merge(){let e=null;for(let t=0;t<this.runners.length;++t){const n=this.runners[t];if(e&&n.done&&e.done&&(!n._timeline||!n._timeline._runnerIds.includes(n.id))&&(!e._timeline||!e._timeline._runnerIds.includes(e.id))){this.remove(n.id);const r=n.mergeWith(e);this.edit(e.id,r),e=r,--t}else e=n}return this}remove(e){const t=this.ids.indexOf(e+1);return this.ids.splice(t,1),this.runners.splice(t,1),this}}nt({Element:{animate(i,e,t){const n=Jn.sanitise(i,e,t),r=this.timeline();return new Jn(n.duration).loop(n).element(this).timeline(r.play()).schedule(n.delay,n.when)},delay(i,e){return this.animate(0,i,e)},_clearTransformRunnersBefore(i){this._transformationRunners.clearBefore(i.id)},_currentTransform(i){return this._transformationRunners.runners.filter(e=>e.id<=i.id).map(t0).reduce(e0,new Fe)},_addRunner(i){this._transformationRunners.add(i),vt.cancelImmediate(this._frameId),this._frameId=vt.immediate(GI.bind(this))},_prepareRunner(){this._frameId==null&&(this._transformationRunners=new qI().add(new fh(new Fe(this))))}}}),Ye(Jn,{attr(i,e){return this.styleAttr("attr",i,e)},css(i,e){return this.styleAttr("css",i,e)},styleAttr(i,e,t){if(typeof e=="string")return this.styleAttr(i,{[e]:t});let n=e;if(this._tryRetarget(i,n))return this;let r=new Ms(this._stepper).to(n),s=Object.keys(n);return this.queue(function(){r=r.from(this.element()[i](s))},function(o){return this.element()[i](r.at(o).valueOf()),r.done()},function(o){const a=Object.keys(o),l=(c=s,a.filter(u=>!c.includes(u)));var c;if(l.length){const u=this.element()[i](l),d=new Wa(r.from()).valueOf();Object.assign(d,u),r.from(d)}const h=new Wa(r.to()).valueOf();Object.assign(h,o),r.to(h),s=a,n=o}),this._rememberMorpher(i,r),this},zoom(i,e){if(this._tryRetarget("zoom",i,e))return this;let t=new Ms(this._stepper).to(new qe(i));return this.queue(function(){t=t.from(this.element().zoom())},function(n){return this.element().zoom(t.at(n),e),t.done()},function(n,r){e=r,t.to(n)}),this._rememberMorpher("zoom",t),this},transform(i,e,t){if(e=i.relative||e,this._isDeclarative&&!e&&this._tryRetarget("transform",i))return this;const n=Fe.isMatrixLike(i);t=i.affine!=null?i.affine:t??!n;const r=new Ms(this._stepper).type(t?Xa:Fe);let s,o,a,l,c;return this.queue(function(){o=o||this.element(),s=s||Mf(i,o),c=new Fe(e?void 0:o),o._addRunner(this),e||o._clearTransformRunnersBefore(this)},function(h){e||this.clearTransform();const{x:u,y:d}=new mt(s).transform(o._currentTransform(this));let f=new Fe({...i,origin:[u,d]}),g=this._isDeclarative&&a?a:c;if(t){f=f.decompose(u,d),g=g.decompose(u,d);const b=f.rotate,y=g.rotate,w=[b-360,b,b+360],C=w.map(O=>Math.abs(O-y)),M=Math.min(...C),S=C.indexOf(M);f.rotate=w[S]}e&&(n||(f.rotate=i.rotate||0),this._isDeclarative&&l&&(g.rotate=l)),r.from(g),r.to(f);const m=r.at(h);return l=m.rotate,a=new Fe(m),this.addTransform(a),o._addRunner(this),r.done()},function(h){(h.origin||"center").toString()!==(i.origin||"center").toString()&&(s=Mf(h,o)),i={...h,origin:s}},!0),this._isDeclarative&&this._rememberMorpher("transform",r),this},x(i){return this._queueNumber("x",i)},y(i){return this._queueNumber("y",i)},ax(i){return this._queueNumber("ax",i)},ay(i){return this._queueNumber("ay",i)},dx(i=0){return this._queueNumberDelta("x",i)},dy(i=0){return this._queueNumberDelta("y",i)},dmove(i,e){return this.dx(i).dy(e)},_queueNumberDelta(i,e){if(e=new qe(e),this._tryRetarget(i,e))return this;const t=new Ms(this._stepper).to(e);let n=null;return this.queue(function(){n=this.element()[i](),t.from(n),t.to(n+e)},function(r){return this.element()[i](t.at(r)),t.done()},function(r){t.to(n+new qe(r))}),this._rememberMorpher(i,t),this},_queueObject(i,e){if(this._tryRetarget(i,e))return this;const t=new Ms(this._stepper).to(e);return this.queue(function(){t.from(this.element()[i]())},function(n){return this.element()[i](t.at(n)),t.done()}),this._rememberMorpher(i,t),this},_queueNumber(i,e){return this._queueObject(i,new qe(e))},cx(i){return this._queueNumber("cx",i)},cy(i){return this._queueNumber("cy",i)},move(i,e){return this.x(i).y(e)},amove(i,e){return this.ax(i).ay(e)},center(i,e){return this.cx(i).cy(e)},size(i,e){let t;return i&&e||(t=this._element.bbox()),i||(i=t.width/t.height*e),e||(e=t.height/t.width*i),this.width(i).height(e)},width(i){return this._queueNumber("width",i)},height(i){return this._queueNumber("height",i)},plot(i,e,t,n){if(arguments.length===4)return this.plot([i,e,t,n]);if(this._tryRetarget("plot",i))return this;const r=new Ms(this._stepper).type(this._element.MorphArray).to(i);return this.queue(function(){r.from(this._element.array())},function(s){return this._element.plot(r.at(s)),r.done()}),this._rememberMorpher("plot",r),this},leading(i){return this._queueNumber("leading",i)},viewbox(i,e,t,n){return this._queueObject("viewbox",new Ft(i,e,t,n))},update(i){return typeof i!="object"?this.update({offset:arguments[0],color:arguments[1],opacity:arguments[2]}):(i.opacity!=null&&this.attr("stop-opacity",i.opacity),i.color!=null&&this.attr("stop-color",i.color),i.offset!=null&&this.attr("offset",i.offset),this)}}),Ye(Jn,{rx:zf,ry:Ff,from:Gv,to:qv}),ft(Jn,"Runner");class Uf extends zn{constructor(e,t=e){super(St("svg",e),t),this.namespace()}defs(){return this.isRoot()?oi(this.node.querySelector("defs"))||this.put(new ah):this.root().defs()}isRoot(){return!this.node.parentNode||!(this.node.parentNode instanceof dt.window.SVGElement)&&this.node.parentNode.nodeName!=="#document-fragment"}namespace(){return this.isRoot()?this.attr({xmlns:Ef,version:"1.1"}).attr("xmlns:xlink",mo,Of):this.root().namespace()}removeNamespace(){return this.attr({xmlns:null,version:null}).attr("xmlns:xlink",null,Of).attr("xmlns:svgjs",null,Of)}root(){return this.isRoot()?this:super.root()}}nt({Container:{nested:Ct(function(){return this.put(new Uf)})}}),ft(Uf,"Svg",!0);let Kf=class extends zn{constructor(i,e=i){super(St("symbol",i),e)}};nt({Container:{symbol:Ct(function(){return this.put(new Kf)})}}),ft(Kf,"Symbol");var n0=Object.freeze({__proto__:null,amove:function(i,e){return this.ax(i).ay(e)},ax:function(i){return this.attr("x",i)},ay:function(i){return this.attr("y",i)},build:function(i){return this._build=!!i,this},center:function(i,e,t=this.bbox()){return this.cx(i,t).cy(e,t)},cx:function(i,e=this.bbox()){return i==null?e.cx:this.attr("x",this.attr("x")+i-e.cx)},cy:function(i,e=this.bbox()){return i==null?e.cy:this.attr("y",this.attr("y")+i-e.cy)},length:function(){return this.node.getComputedTextLength()},move:function(i,e,t=this.bbox()){return this.x(i,t).y(e,t)},plain:function(i){return this._build===!1&&this.clear(),this.node.appendChild(dt.document.createTextNode(i)),this},x:function(i,e=this.bbox()){return i==null?e.x:this.attr("x",this.attr("x")+i-e.x)},y:function(i,e=this.bbox()){return i==null?e.y:this.attr("y",this.attr("y")+i-e.y)}});class wi extends Kn{constructor(e,t=e){super(St("text",e),t),this.dom.leading=this.dom.leading??new qe(1.3),this._rebuild=!0,this._build=!1}leading(e){return e==null?this.dom.leading:(this.dom.leading=new qe(e),this.rebuild())}rebuild(e){if(typeof e=="boolean"&&(this._rebuild=e),this._rebuild){const t=this;let n=0;const r=this.dom.leading;this.each(function(s){if(Tf(this.node))return;const o=dt.window.getComputedStyle(this.node).getPropertyValue("font-size"),a=r*new qe(o);this.dom.newLined&&(this.attr("x",t.attr("x")),this.text()===`
    `?n+=a:(this.attr("dy",s?a+n:0),n=0))}),this.fire("rebuild")}return this}setData(e){return this.dom=e,this.dom.leading=new qe(e.leading||1.3),this}writeDataToDom(){return Mv(this,this.dom,{leading:1.3}),this}text(e){if(e===void 0){const t=this.node.childNodes;let n=0;e="";for(let r=0,s=t.length;r<s;++r)t[r].nodeName==="textPath"||Tf(t[r])?r===0&&(n=r+1):(r!==n&&t[r].nodeType!==3&&oi(t[r]).dom.newLined===!0&&(e+=`
    `),e+=t[r].textContent);return e}if(this.clear().build(!0),typeof e=="function")e.call(this,this);else for(let t=0,n=(e=(e+"").split(`
    `)).length;t<n;t++)this.newLine(e[t]);return this.build(!1).rebuild()}}Ye(wi,n0),nt({Container:{text:Ct(function(i=""){return this.put(new wi).text(i)}),plain:Ct(function(i=""){return this.put(new wi).plain(i)})}}),ft(wi,"Text");class ph extends Kn{constructor(e,t=e){super(St("tspan",e),t),this._build=!1}dx(e){return this.attr("dx",e)}dy(e){return this.attr("dy",e)}newLine(){this.dom.newLined=!0;const e=this.parent();if(!(e instanceof wi))return this;const t=e.index(this),n=dt.window.getComputedStyle(this.node).getPropertyValue("font-size"),r=e.dom.leading*new qe(n);return this.dy(t?r:0).attr("x",e.x())}text(e){return e==null?this.node.textContent+(this.dom.newLined?`
    `:""):(typeof e=="function"?(this.clear().build(!0),e.call(this,this),this.build(!1)):this.plain(e),this)}}Ye(ph,n0),nt({Tspan:{tspan:Ct(function(i=""){const e=new ph;return this._build||this.clear(),this.put(e).text(i)})},Text:{newLine:function(i=""){return this.tspan(i).newLine()}}}),ft(ph,"Tspan");class Jf extends Kn{constructor(e,t=e){super(St("circle",e),t)}radius(e){return this.attr("r",e)}rx(e){return this.attr("r",e)}ry(e){return this.rx(e)}size(e){return this.radius(new qe(e).divide(2))}}Ye(Jf,{x:Hv,y:Xv,cx:Wv,cy:Yv,width:jv,height:Vv}),nt({Container:{circle:Ct(function(i=0){return this.put(new Jf).size(i).move(0,0)})}}),ft(Jf,"Circle");class Zf extends zn{constructor(e,t=e){super(St("clipPath",e),t)}remove(){return this.targets().forEach(function(e){e.unclip()}),super.remove()}targets(){return ks("svg [clip-path*="+this.id()+"]")}}nt({Container:{clip:Ct(function(){return this.defs().put(new Zf)})},Element:{clipper(){return this.reference("clip-path")},clipWith(i){const e=i instanceof Zf?i:this.parent().clip().add(i);return this.attr("clip-path","url(#"+e.id()+")")},unclip(){return this.attr("clip-path",null)}}}),ft(Zf,"ClipPath");class i0 extends hn{constructor(e,t=e){super(St("foreignObject",e),t)}}nt({Container:{foreignObject:Ct(function(i,e){return this.put(new i0).size(i,e)})}}),ft(i0,"ForeignObject");var r0=Object.freeze({__proto__:null,dmove:function(i,e){return this.children().forEach(t=>{let n;try{n=t.node instanceof Na().SVGSVGElement?new Ft(t.attr(["x","y","width","height"])):t.bbox()}catch{return}const r=new Fe(t),s=r.translate(i,e).transform(r.inverse()),o=new mt(n.x,n.y).transform(s);t.move(o.x,o.y)}),this},dx:function(i){return this.dmove(i,0)},dy:function(i){return this.dmove(0,i)},height:function(i,e=this.bbox()){return i==null?e.height:this.size(e.width,i,e)},move:function(i=0,e=0,t=this.bbox()){const n=i-t.x,r=e-t.y;return this.dmove(n,r)},size:function(i,e,t=this.bbox()){const n=go(this,i,e,t),r=n.width/t.width,s=n.height/t.height;return this.children().forEach(o=>{const a=new mt(t).transform(new Fe(o).inverse());o.scale(r,s,a.x,a.y)}),this},width:function(i,e=this.bbox()){return i==null?e.width:this.size(i,e.height,e)},x:function(i,e=this.bbox()){return i==null?e.x:this.move(i,e.y,e)},y:function(i,e=this.bbox()){return i==null?e.y:this.move(e.x,i,e)}});class Fr extends zn{constructor(e,t=e){super(St("g",e),t)}}Ye(Fr,r0),nt({Container:{group:Ct(function(){return this.put(new Fr)})}}),ft(Fr,"G");class gh extends zn{constructor(e,t=e){super(St("a",e),t)}target(e){return this.attr("target",e)}to(e){return this.attr("href",e,mo)}}Ye(gh,r0),nt({Container:{link:Ct(function(i){return this.put(new gh).to(i)})},Element:{unlink(){const i=this.linker();if(!i)return this;const e=i.parent();if(!e)return this.remove();const t=e.index(i);return e.add(this,t),i.remove(),this},linkTo(i){let e=this.linker();return e||(e=new gh,this.wrap(e)),typeof i=="function"?i.call(e,e):e.to(i),this},linker(){const i=this.parent();return i&&i.node.nodeName.toLowerCase()==="a"?i:null}}}),ft(gh,"A");class Qf extends zn{constructor(e,t=e){super(St("mask",e),t)}remove(){return this.targets().forEach(function(e){e.unmask()}),super.remove()}targets(){return ks("svg [mask*="+this.id()+"]")}}nt({Container:{mask:Ct(function(){return this.defs().put(new Qf)})},Element:{masker(){return this.reference("mask")},maskWith(i){const e=i instanceof Qf?i:this.parent().mask().add(i);return this.attr("mask","url(#"+e.id()+")")},unmask(){return this.attr("mask",null)}}}),ft(Qf,"Mask");class s0 extends hn{constructor(e,t=e){super(St("stop",e),t)}update(e){return(typeof e=="number"||e instanceof qe)&&(e={offset:arguments[0],color:arguments[1],opacity:arguments[2]}),e.opacity!=null&&this.attr("stop-opacity",e.opacity),e.color!=null&&this.attr("stop-color",e.color),e.offset!=null&&this.attr("offset",new qe(e.offset)),this}}nt({Gradient:{stop:function(i,e,t){return this.put(new s0).update(i,e,t)}}}),ft(s0,"Stop");class ep extends hn{constructor(e,t=e){super(St("style",e),t)}addText(e=""){return this.node.textContent+=e,this}font(e,t,n={}){return this.rule("@font-face",{fontFamily:e,src:t,...n})}rule(e,t){return this.addText(function(n,r){if(!n)return"";if(!r)return n;let s=n+"{";for(const o in r)s+=o.replace(/([A-Z])/g,function(a,l){return"-"+l.toLowerCase()})+":"+r[o]+";";return s+="}",s}(e,t))}}nt("Dom",{style(i,e){return this.put(new ep).rule(i,e)},fontface(i,e,t){return this.put(new ep).font(i,e,t)}}),ft(ep,"Style");class tp extends wi{constructor(e,t=e){super(St("textPath",e),t)}array(){const e=this.track();return e?e.array():null}plot(e){const t=this.track();let n=null;return t&&(n=t.plot(e)),e==null?n:this}track(){return this.reference("href")}}nt({Container:{textPath:Ct(function(i,e){return i instanceof wi||(i=this.text(i)),i.path(e)})},Text:{path:Ct(function(i,e=!0){const t=new tp;let n;if(i instanceof vo||(i=this.defs().path(i)),t.attr("href","#"+i,mo),e)for(;n=this.node.firstChild;)t.node.appendChild(n);return this.put(t)}),textPath(){return this.findOne("textPath")}},Path:{text:Ct(function(i){return i instanceof wi||(i=new wi().addTo(this.parent()).text(i)),i.path(this)}),targets(){return ks("svg textPath").filter(i=>(i.attr("href")||"").includes(this.id()))}}}),tp.prototype.MorphArray=vi,ft(tp,"TextPath");class o0 extends Kn{constructor(e,t=e){super(St("use",e),t)}use(e,t){return this.attr("href",(t||"")+"#"+e,mo)}}nt({Container:{use:Ct(function(i,e){return this.put(new o0).use(i,e)})}}),ft(o0,"Use");const UI=_n;Ye([Uf,Kf,ch,Ha,hh],Wn("viewbox")),Ye([Cs,Es,Ts,vo],Wn("marker")),Ye(wi,Wn("Text")),Ye(vo,Wn("Path")),Ye(ah,Wn("Defs")),Ye([wi,ph],Wn("Tspan")),Ye([dh,lh,Ba,Jn],Wn("radius")),Ye(za,Wn("EventTarget")),Ye(_r,Wn("Dom")),Ye(hn,Wn("Element")),Ye(Kn,Wn("Shape")),Ye([zn,$v],Wn("Container")),Ye(Ba,Wn("Gradient")),Ye(Jn,Wn("Runner")),ws.extend([...new Set(Cv)]),function(i=[]){Gf.push(...[].concat(i))}([qe,kt,Ft,Fe,Ss,zr,vi,mt]),Ye(Gf,{to(i){return new Ms().type(this.constructor).from(this.toArray()).to(i)},fromArray(i){return this.init(i),this},toConsumable(){return this.toArray()},morph(i,e,t,n,r){return this.fromArray(i.map(function(s,o){return n.step(s,e[o],t,r[o],r)}))}});class Ot extends hn{constructor(e){super(St("filter",e),e),this.$source="SourceGraphic",this.$sourceAlpha="SourceAlpha",this.$background="BackgroundImage",this.$backgroundAlpha="BackgroundAlpha",this.$fill="FillPaint",this.$stroke="StrokePaint",this.$autoSetIn=!0}put(e,t){return!(e=super.put(e,t)).attr("in")&&this.$autoSetIn&&e.attr("in",this.$source),e.attr("result")||e.attr("result",e.id()),e}remove(){return this.targets().each("unfilter"),super.remove()}targets(){return ks('svg [filter*="'+this.id()+'"]')}toString(){return"url(#"+this.id()+")"}}class np extends hn{constructor(e,t){super(e,t),this.result(this.id())}in(e){if(e==null){const t=this.attr("in");return this.parent()&&this.parent().find(`[result="${t}"]`)[0]||t}return this.attr("in",e)}result(e){return this.attr("result",e)}toString(){return this.result()}}const li=i=>function(...e){for(let t=i.length;t--;)e[t]!=null&&this.attr(i[t],e[t])},KI={blend:li(["in","in2","mode"]),colorMatrix:li(["type","values"]),composite:li(["in","in2","operator"]),convolveMatrix:function(i){i=new Ss(i).toString(),this.attr({order:Math.sqrt(i.split(" ").length),kernelMatrix:i})},diffuseLighting:li(["surfaceScale","lightingColor","diffuseConstant","kernelUnitLength"]),displacementMap:li(["in","in2","scale","xChannelSelector","yChannelSelector"]),dropShadow:li(["in","dx","dy","stdDeviation"]),flood:li(["flood-color","flood-opacity"]),gaussianBlur:function(i=0,e=i){this.attr("stdDeviation",i+" "+e)},image:function(i){this.attr("href",i,mo)},morphology:li(["operator","radius"]),offset:li(["dx","dy"]),specularLighting:li(["surfaceScale","lightingColor","diffuseConstant","specularExponent","kernelUnitLength"]),tile:li([]),turbulence:li(["baseFrequency","numOctaves","seed","stitchTiles","type"])};["blend","colorMatrix","componentTransfer","composite","convolveMatrix","diffuseLighting","displacementMap","dropShadow","flood","gaussianBlur","image","merge","morphology","offset","specularLighting","tile","turbulence"].forEach(i=>{const e=po(i),t=KI[i];Ot[e+"Effect"]=class extends np{constructor(n){super(St("fe"+e,n),n)}update(n){return t.apply(this,n),this}},Ot.prototype[i]=Ct(function(n,...r){const s=new Ot[e+"Effect"];return n==null?this.put(s):(typeof n=="function"?n.call(s,s):r.unshift(n),this.put(s).update(r))})}),Ye(Ot,{merge(i){const e=this.put(new Ot.MergeEffect);return typeof i=="function"?(i.call(e,e),e):((i instanceof Array?i:[...arguments]).forEach(t=>{t instanceof Ot.MergeNode?e.put(t):e.mergeNode(t)}),e)},componentTransfer(i={}){const e=this.put(new Ot.ComponentTransferEffect);if(typeof i=="function")return i.call(e,e),e;i.r||i.g||i.b||i.a||(i={r:i,g:i,b:i,a:i});for(const t in i)e.add(new Ot["Func"+t.toUpperCase()](i[t]));return e}}),["distantLight","pointLight","spotLight","mergeNode","FuncR","FuncG","FuncB","FuncA"].forEach(i=>{const e=po(i);Ot[e]=class extends np{constructor(t){super(St("fe"+e,t),t)}}}),["funcR","funcG","funcB","funcA"].forEach(function(i){const e=Ot[po(i)],t=Ct(function(){return this.put(new e)});Ot.ComponentTransferEffect.prototype[i]=t}),["distantLight","pointLight","spotLight"].forEach(i=>{const e=Ot[po(i)],t=Ct(function(){return this.put(new e)});Ot.DiffuseLightingEffect.prototype[i]=t,Ot.SpecularLightingEffect.prototype[i]=t}),Ye(Ot.MergeEffect,{mergeNode(i){return this.put(new Ot.MergeNode).attr("in",i)}}),Ye(ah,{filter:function(i){const e=this.put(new Ot);return typeof i=="function"&&i.call(e,e),e}}),Ye(zn,{filter:function(i){return this.defs().filter(i)}}),Ye(hn,{filterWith:function(i){const e=i instanceof Ot?i:this.defs().filter(i);return this.attr("filter",e)},unfilter:function(i){return this.attr("filter",null)},filterer(){return this.reference("filter")}}),Ye(np,{blend:function(i,e){return this.parent()&&this.parent().blend(this,i,e)},colorMatrix:function(i,e){return this.parent()&&this.parent().colorMatrix(i,e).in(this)},componentTransfer:function(i){return this.parent()&&this.parent().componentTransfer(i).in(this)},composite:function(i,e){return this.parent()&&this.parent().composite(this,i,e)},convolveMatrix:function(i){return this.parent()&&this.parent().convolveMatrix(i).in(this)},diffuseLighting:function(i,e,t,n){return this.parent()&&this.parent().diffuseLighting(i,t,n).in(this)},displacementMap:function(i,e,t,n){return this.parent()&&this.parent().displacementMap(this,i,e,t,n)},dropShadow:function(i,e,t){return this.parent()&&this.parent().dropShadow(this,i,e,t).in(this)},flood:function(i,e){return this.parent()&&this.parent().flood(i,e)},gaussianBlur:function(i,e){return this.parent()&&this.parent().gaussianBlur(i,e).in(this)},image:function(i){return this.parent()&&this.parent().image(i)},merge:function(i){return i=i instanceof Array?i:[...i],this.parent()&&this.parent().merge(this,...i)},morphology:function(i,e){return this.parent()&&this.parent().morphology(i,e).in(this)},offset:function(i,e){return this.parent()&&this.parent().offset(i,e).in(this)},specularLighting:function(i,e,t,n,r){return this.parent()&&this.parent().specularLighting(i,t,n,r).in(this)},tile:function(){return this.parent()&&this.parent().tile().in(this)},turbulence:function(i,e,t,n,r){return this.parent()&&this.parent().turbulence(i,e,t,n,r).in(this)}}),Ye(Ot.MergeEffect,{in:function(i){return i instanceof Ot.MergeNode?this.add(i,0):this.add(new Ot.MergeNode().in(i),0),this}}),Ye([Ot.CompositeEffect,Ot.BlendEffect,Ot.DisplacementMapEffect],{in2:function(i){if(i==null){const e=this.attr("in2");return this.parent()&&this.parent().find(`[result="${e}"]`)[0]||e}return this.attr("in2",i)}}),Ot.filter={sepiatone:[.343,.669,.119,0,0,.249,.626,.13,0,0,.172,.334,.111,0,0,0,0,0,1,0]};var un=function(){function i(e){Ee(this,i),this.ctx=e,this.w=e.w}return Oe(i,[{key:"getDefaultFilter",value:function(e,t){var n=this.w;e.unfilter(!0),new Ot().size("120%","180%","-5%","-40%"),n.config.chart.dropShadow.enabled&&this.dropShadow(e,n.config.chart.dropShadow,t)}},{key:"applyFilter",value:function(e,t,n){var r,s=this,o=this.w;if(e.unfilter(!0),n!=="none"){var a,l,c=o.config.chart.dropShadow,h=n==="lighten"?2:.3;e.filterWith(function(u){u.colorMatrix({type:"matrix",values:`
              `.concat(h,` 0 0 0 0
              0 `).concat(h,` 0 0 0
              0 0 `).concat(h,` 0 0
              0 0 0 1 0
            `),in:"SourceGraphic",result:"brightness"}),c.enabled&&s.addShadow(u,t,c,"brightness")}),!c.noUserSpaceOnUse&&((a=e.filterer())===null||a===void 0||(l=a.node)===null||l===void 0||l.setAttribute("filterUnits","userSpaceOnUse")),this._scaleFilterSize((r=e.filterer())===null||r===void 0?void 0:r.node)}else this.getDefaultFilter(e,t)}},{key:"addShadow",value:function(e,t,n,r){var s,o=this.w,a=n.blur,l=n.top,c=n.left,h=n.color,u=n.opacity;if(h=Array.isArray(h)?h[t]:h,((s=o.config.chart.dropShadow.enabledOnSeries)===null||s===void 0?void 0:s.length)>0&&o.config.chart.dropShadow.enabledOnSeries.indexOf(t)===-1)return e;e.offset({in:r,dx:c,dy:l,result:"offset"}),e.gaussianBlur({in:"offset",stdDeviation:a,result:"blur"}),e.flood({"flood-color":h,"flood-opacity":u,result:"flood"}),e.composite({in:"flood",in2:"blur",operator:"in",result:"shadow"}),e.merge(["shadow",r])}},{key:"dropShadow",value:function(e,t){var n,r,s,o,a,l=this,c=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,h=this.w;return e.unfilter(!0),H.isMsEdge()&&h.config.chart.type==="radialBar"||((n=h.config.chart.dropShadow.enabledOnSeries)===null||n===void 0?void 0:n.length)>0&&((s=h.config.chart.dropShadow.enabledOnSeries)===null||s===void 0?void 0:s.indexOf(c))===-1?e:(e.filterWith(function(u){l.addShadow(u,c,t,"SourceGraphic")}),t.noUserSpaceOnUse||(o=e.filterer())===null||o===void 0||(a=o.node)===null||a===void 0||a.setAttribute("filterUnits","userSpaceOnUse"),this._scaleFilterSize((r=e.filterer())===null||r===void 0?void 0:r.node),e)}},{key:"setSelectionFilter",value:function(e,t,n){var r=this.w;if(r.globals.selectedDataPoints[t]!==void 0&&r.globals.selectedDataPoints[t].indexOf(n)>-1){e.node.setAttribute("selected",!0);var s=r.config.states.active.filter;s!=="none"&&this.applyFilter(e,t,s.type)}}},{key:"_scaleFilterSize",value:function(e){e&&function(t){for(var n in t)t.hasOwnProperty(n)&&e.setAttribute(n,t[n])}({width:"200%",height:"200%",x:"-50%",y:"-50%"})}}]),i}(),oe=function(){function i(e){Ee(this,i),this.ctx=e,this.w=e.w}return Oe(i,[{key:"roundPathCorners",value:function(e,t){function n(I,R,z){var D=R.x-I.x,B=R.y-I.y,K=Math.sqrt(D*D+B*B);return r(I,R,Math.min(1,z/K))}function r(I,R,z){return{x:I.x+(R.x-I.x)*z,y:I.y+(R.y-I.y)*z}}function s(I,R){I.length>2&&(I[I.length-2]=R.x,I[I.length-1]=R.y)}function o(I){return{x:parseFloat(I[I.length-2]),y:parseFloat(I[I.length-1])}}e.indexOf("NaN")>-1&&(e="");var a=e.split(/[,\s]/).reduce(function(I,R){var z=R.match("([a-zA-Z])(.+)");return z?(I.push(z[1]),I.push(z[2])):I.push(R),I},[]).reduce(function(I,R){return parseFloat(R)==R&&I.length?I[I.length-1].push(R):I.push([R]),I},[]),l=[];if(a.length>1){var c=o(a[0]),h=null;a[a.length-1][0]=="Z"&&a[0].length>2&&(h=["L",c.x,c.y],a[a.length-1]=h),l.push(a[0]);for(var u=1;u<a.length;u++){var d=l[l.length-1],f=a[u],g=f==h?a[1]:a[u+1];if(g&&d&&d.length>2&&f[0]=="L"&&g.length>2&&g[0]=="L"){var m,b,y=o(d),w=o(f),C=o(g);m=n(w,y,t),b=n(w,C,t),s(f,m),f.origPoint=w,l.push(f);var M=r(m,w,.5),S=r(w,b,.5),O=["C",M.x,M.y,S.x,S.y,b.x,b.y];O.origPoint=w,l.push(O)}else l.push(f)}if(h){var T=o(l[l.length-1]);l.push(["Z"]),s(l[0],T)}}else l=a;return l.reduce(function(I,R){return I+R.join(" ")+" "},"")}},{key:"drawLine",value:function(e,t,n,r){var s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:"#a8a8a8",o=arguments.length>5&&arguments[5]!==void 0?arguments[5]:0,a=arguments.length>6&&arguments[6]!==void 0?arguments[6]:null,l=arguments.length>7&&arguments[7]!==void 0?arguments[7]:"butt";return this.w.globals.dom.Paper.line().attr({x1:e,y1:t,x2:n,y2:r,stroke:s,"stroke-dasharray":o,"stroke-width":a,"stroke-linecap":l})}},{key:"drawRect",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0,s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0,o=arguments.length>5&&arguments[5]!==void 0?arguments[5]:"#fefefe",a=arguments.length>6&&arguments[6]!==void 0?arguments[6]:1,l=arguments.length>7&&arguments[7]!==void 0?arguments[7]:null,c=arguments.length>8&&arguments[8]!==void 0?arguments[8]:null,h=arguments.length>9&&arguments[9]!==void 0?arguments[9]:0,u=this.w.globals.dom.Paper.rect();return u.attr({x:e,y:t,width:n>0?n:0,height:r>0?r:0,rx:s,ry:s,opacity:a,"stroke-width":l!==null?l:0,stroke:c!==null?c:"none","stroke-dasharray":h}),u.node.setAttribute("fill",o),u}},{key:"drawPolygon",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"#e1e1e1",n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"none";return this.w.globals.dom.Paper.polygon(e).attr({fill:r,stroke:t,"stroke-width":n})}},{key:"drawCircle",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;e<0&&(e=0);var n=this.w.globals.dom.Paper.circle(2*e);return t!==null&&n.attr(t),n}},{key:"drawPath",value:function(e){var t=e.d,n=t===void 0?"":t,r=e.stroke,s=r===void 0?"#a8a8a8":r,o=e.strokeWidth,a=o===void 0?1:o,l=e.fill,c=e.fillOpacity,h=c===void 0?1:c,u=e.strokeOpacity,d=u===void 0?1:u,f=e.classes,g=e.strokeLinecap,m=g===void 0?null:g,b=e.strokeDashArray,y=b===void 0?0:b,w=this.w;return m===null&&(m=w.config.stroke.lineCap),(n.indexOf("undefined")>-1||n.indexOf("NaN")>-1)&&(n="M 0 ".concat(w.globals.gridHeight)),w.globals.dom.Paper.path(n).attr({fill:l,"fill-opacity":h,stroke:s,"stroke-opacity":d,"stroke-linecap":m,"stroke-width":a,"stroke-dasharray":y,class:f})}},{key:"group",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,t=this.w.globals.dom.Paper.group();return e!==null&&t.attr(e),t}},{key:"move",value:function(e,t){var n=["M",e,t].join(" ");return n}},{key:"line",value:function(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,r=null;return n===null?r=[" L",e,t].join(" "):n==="H"?r=[" H",e].join(" "):n==="V"&&(r=[" V",t].join(" ")),r}},{key:"curve",value:function(e,t,n,r,s,o){var a=["C",e,t,n,r,s,o].join(" ");return a}},{key:"quadraticCurve",value:function(e,t,n,r){return["Q",e,t,n,r].join(" ")}},{key:"arc",value:function(e,t,n,r,s,o,a){var l="A";arguments.length>7&&arguments[7]!==void 0&&arguments[7]&&(l="a");var c=[l,e,t,n,r,s,o,a].join(" ");return c}},{key:"renderPaths",value:function(e){var t,n=e.j,r=e.realIndex,s=e.pathFrom,o=e.pathTo,a=e.stroke,l=e.strokeWidth,c=e.strokeLinecap,h=e.fill,u=e.animationDelay,d=e.initialSpeed,f=e.dataChangeSpeed,g=e.className,m=e.chartType,b=e.shouldClipToGrid,y=b===void 0||b,w=e.bindEventsOnPaths,C=w===void 0||w,M=e.drawShadow,S=M===void 0||M,O=this.w,T=new un(this.ctx),I=new fo(this.ctx),R=this.w.config.chart.animations.enabled,z=R&&this.w.config.chart.animations.dynamicAnimation.enabled,D=!!(R&&!O.globals.resized||z&&O.globals.dataChanged&&O.globals.shouldAnimate);D?t=s:(t=o,O.globals.animationEnded=!0);var B=O.config.stroke.dashArray,K=0;K=Array.isArray(B)?B[r]:O.config.stroke.dashArray;var J=this.drawPath({d:t,stroke:a,strokeWidth:l,fill:h,fillOpacity:1,classes:g,strokeLinecap:c,strokeDashArray:K});J.attr("index",r),y&&(m==="bar"&&!O.globals.isHorizontal||O.globals.comboCharts?J.attr({"clip-path":"url(#gridRectBarMask".concat(O.globals.cuid,")")}):J.attr({"clip-path":"url(#gridRectMask".concat(O.globals.cuid,")")})),O.config.chart.dropShadow.enabled&&S&&T.dropShadow(J,O.config.chart.dropShadow,r),C&&(J.node.addEventListener("mouseenter",this.pathMouseEnter.bind(this,J)),J.node.addEventListener("mouseleave",this.pathMouseLeave.bind(this,J)),J.node.addEventListener("mousedown",this.pathMouseDown.bind(this,J))),J.attr({pathTo:o,pathFrom:s});var se={el:J,j:n,realIndex:r,pathFrom:s,pathTo:o,fill:h,strokeWidth:l,delay:u};return!R||O.globals.resized||O.globals.dataChanged?!O.globals.resized&&O.globals.dataChanged||I.showDelayedElements():I.animatePathsGradually(xe(xe({},se),{},{speed:d})),O.globals.dataChanged&&z&&D&&I.animatePathsGradually(xe(xe({},se),{},{speed:f})),J}},{key:"drawPattern",value:function(e,t,n){var r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"#a8a8a8",s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;return this.w.globals.dom.Paper.pattern(t,n,function(o){e==="horizontalLines"?o.line(0,0,n,0).stroke({color:r,width:s+1}):e==="verticalLines"?o.line(0,0,0,t).stroke({color:r,width:s+1}):e==="slantedLines"?o.line(0,0,t,n).stroke({color:r,width:s}):e==="squares"?o.rect(t,n).fill("none").stroke({color:r,width:s}):e==="circles"&&o.circle(t).fill("none").stroke({color:r,width:s})})}},{key:"drawGradient",value:function(e,t,n,r,s){var o,a=arguments.length>5&&arguments[5]!==void 0?arguments[5]:null,l=arguments.length>6&&arguments[6]!==void 0?arguments[6]:null,c=arguments.length>7&&arguments[7]!==void 0?arguments[7]:[],h=arguments.length>8&&arguments[8]!==void 0?arguments[8]:0,u=this.w;t.length<9&&t.indexOf("#")===0&&(t=H.hexToRgba(t,r)),n.length<9&&n.indexOf("#")===0&&(n=H.hexToRgba(n,s));var d=0,f=1,g=1,m=null;l!==null&&(d=l[0]!==void 0?l[0]/100:0,f=l[1]!==void 0?l[1]/100:1,g=l[2]!==void 0?l[2]/100:1,m=l[3]!==void 0?l[3]/100:null);var b=!(u.config.chart.type!=="donut"&&u.config.chart.type!=="pie"&&u.config.chart.type!=="polarArea"&&u.config.chart.type!=="bubble");if(o=c&&c.length!==0?u.globals.dom.Paper.gradient(b?"radial":"linear",function(C){(Array.isArray(c[h])?c[h]:c).forEach(function(M){C.stop(M.offset/100,M.color,M.opacity)})}):u.globals.dom.Paper.gradient(b?"radial":"linear",function(C){C.stop(d,t,r),C.stop(f,n,s),C.stop(g,n,s),m!==null&&C.stop(m,t,r)}),b){var y=u.globals.gridWidth/2,w=u.globals.gridHeight/2;u.config.chart.type!=="bubble"?o.attr({gradientUnits:"userSpaceOnUse",cx:y,cy:w,r:a}):o.attr({cx:.5,cy:.5,r:.8,fx:.2,fy:.2})}else e==="vertical"?o.from(0,0).to(0,1):e==="diagonal"?o.from(0,0).to(1,1):e==="horizontal"?o.from(0,1).to(1,1):e==="diagonal2"&&o.from(1,0).to(0,1);return o}},{key:"getTextBasedOnMaxWidth",value:function(e){var t=e.text,n=e.maxWidth,r=e.fontSize,s=e.fontFamily,o=this.getTextRects(t,r,s),a=o.width/t.length,l=Math.floor(n/a);return n<o.width?t.slice(0,l-3)+"...":t}},{key:"drawText",value:function(e){var t=this,n=e.x,r=e.y,s=e.text,o=e.textAnchor,a=e.fontSize,l=e.fontFamily,c=e.fontWeight,h=e.foreColor,u=e.opacity,d=e.maxWidth,f=e.cssClass,g=f===void 0?"":f,m=e.isPlainText,b=m===void 0||m,y=e.dominantBaseline,w=y===void 0?"auto":y,C=this.w;s===void 0&&(s="");var M=s;o||(o="start"),h&&h.length||(h=C.config.chart.foreColor),l=l||C.config.chart.fontFamily,c=c||"regular";var S,O={maxWidth:d,fontSize:a=a||"11px",fontFamily:l};return Array.isArray(s)?S=C.globals.dom.Paper.text(function(T){for(var I=0;I<s.length;I++)M=s[I],d&&(M=t.getTextBasedOnMaxWidth(xe({text:s[I]},O))),I===0?T.tspan(M):T.tspan(M).newLine()}):(d&&(M=this.getTextBasedOnMaxWidth(xe({text:s},O))),S=b?C.globals.dom.Paper.plain(s):C.globals.dom.Paper.text(function(T){return T.tspan(M)})),S.attr({x:n,y:r,"text-anchor":o,"dominant-baseline":w,"font-size":a,"font-family":l,"font-weight":c,fill:h,class:"apexcharts-text "+g}),S.node.style.fontFamily=l,S.node.style.opacity=u,S}},{key:"getMarkerPath",value:function(e,t,n,r){var s="";switch(n){case"cross":s="M ".concat(e-(r/=1.4)," ").concat(t-r," L ").concat(e+r," ").concat(t+r,"  M ").concat(e-r," ").concat(t+r," L ").concat(e+r," ").concat(t-r);break;case"plus":s="M ".concat(e-(r/=1.12)," ").concat(t," L ").concat(e+r," ").concat(t,"  M ").concat(e," ").concat(t-r," L ").concat(e," ").concat(t+r);break;case"star":case"sparkle":var o=5;r*=1.15,n==="sparkle"&&(r/=1.1,o=4);for(var a=Math.PI/o,l=0;l<=2*o;l++){var c=l*a,h=l%2==0?r:r/2;s+=(l===0?"M":"L")+(e+h*Math.sin(c))+","+(t-h*Math.cos(c))}s+="Z";break;case"triangle":s="M ".concat(e," ").concat(t-r,` 
                 L `).concat(e+r," ").concat(t+r,` 
                 L `).concat(e-r," ").concat(t+r,` 
                 Z`);break;case"square":case"rect":s="M ".concat(e-(r/=1.125)," ").concat(t-r,` 
               L `).concat(e+r," ").concat(t-r,` 
               L `).concat(e+r," ").concat(t+r,` 
               L `).concat(e-r," ").concat(t+r,` 
               Z`);break;case"diamond":r*=1.05,s="M ".concat(e," ").concat(t-r,` 
                 L `).concat(e+r," ").concat(t,` 
                 L `).concat(e," ").concat(t+r,` 
                 L `).concat(e-r," ").concat(t,` 
                Z`);break;case"line":s="M ".concat(e-(r/=1.1)," ").concat(t,` 
               L `).concat(e+r," ").concat(t);break;default:r*=2,s="M ".concat(e,", ").concat(t,` 
               m -`).concat(r/2,`, 0 
               a `).concat(r/2,",").concat(r/2," 0 1,0 ").concat(r,`,0 
               a `).concat(r/2,",").concat(r/2," 0 1,0 -").concat(r,",0")}return s}},{key:"drawMarkerShape",value:function(e,t,n,r,s){var o=this.drawPath({d:this.getMarkerPath(e,t,n,r,s),stroke:s.pointStrokeColor,strokeDashArray:s.pointStrokeDashArray,strokeWidth:s.pointStrokeWidth,fill:s.pointFillColor,fillOpacity:s.pointFillOpacity,strokeOpacity:s.pointStrokeOpacity});return o.attr({cx:e,cy:t,shape:s.shape,class:s.class?s.class:""}),o}},{key:"drawMarker",value:function(e,t,n){e=e||0;var r=n.pSize||0;return H.isNumber(t)||(r=0,t=0),this.drawMarkerShape(e,t,n==null?void 0:n.shape,r,xe(xe({},n),n.shape==="line"||n.shape==="plus"||n.shape==="cross"?{pointStrokeColor:n.pointFillColor,pointStrokeOpacity:n.pointFillOpacity}:{}))}},{key:"pathMouseEnter",value:function(e,t){var n=this.w,r=new un(this.ctx),s=parseInt(e.node.getAttribute("index"),10),o=parseInt(e.node.getAttribute("j"),10);if(typeof n.config.chart.events.dataPointMouseEnter=="function"&&n.config.chart.events.dataPointMouseEnter(t,this.ctx,{seriesIndex:s,dataPointIndex:o,w:n}),this.ctx.events.fireEvent("dataPointMouseEnter",[t,this.ctx,{seriesIndex:s,dataPointIndex:o,w:n}]),(n.config.states.active.filter.type==="none"||e.node.getAttribute("selected")!=="true")&&n.config.states.hover.filter.type!=="none"&&!n.globals.isTouchDevice){var a=n.config.states.hover.filter;r.applyFilter(e,s,a.type)}}},{key:"pathMouseLeave",value:function(e,t){var n=this.w,r=new un(this.ctx),s=parseInt(e.node.getAttribute("index"),10),o=parseInt(e.node.getAttribute("j"),10);typeof n.config.chart.events.dataPointMouseLeave=="function"&&n.config.chart.events.dataPointMouseLeave(t,this.ctx,{seriesIndex:s,dataPointIndex:o,w:n}),this.ctx.events.fireEvent("dataPointMouseLeave",[t,this.ctx,{seriesIndex:s,dataPointIndex:o,w:n}]),n.config.states.active.filter.type!=="none"&&e.node.getAttribute("selected")==="true"||n.config.states.hover.filter.type!=="none"&&r.getDefaultFilter(e,s)}},{key:"pathMouseDown",value:function(e,t){var n=this.w,r=new un(this.ctx),s=parseInt(e.node.getAttribute("index"),10),o=parseInt(e.node.getAttribute("j"),10),a="false";if(e.node.getAttribute("selected")==="true"){if(e.node.setAttribute("selected","false"),n.globals.selectedDataPoints[s].indexOf(o)>-1){var l=n.globals.selectedDataPoints[s].indexOf(o);n.globals.selectedDataPoints[s].splice(l,1)}}else{if(!n.config.states.active.allowMultipleDataPointsSelection&&n.globals.selectedDataPoints.length>0){n.globals.selectedDataPoints=[];var c=n.globals.dom.Paper.find(".apexcharts-series path:not(.apexcharts-decoration-element)"),h=n.globals.dom.Paper.find(".apexcharts-series circle:not(.apexcharts-decoration-element), .apexcharts-series rect:not(.apexcharts-decoration-element)"),u=function(g){Array.prototype.forEach.call(g,function(m){m.node.setAttribute("selected","false"),r.getDefaultFilter(m,s)})};u(c),u(h)}e.node.setAttribute("selected","true"),a="true",n.globals.selectedDataPoints[s]===void 0&&(n.globals.selectedDataPoints[s]=[]),n.globals.selectedDataPoints[s].push(o)}if(a==="true"){var d=n.config.states.active.filter;if(d!=="none")r.applyFilter(e,s,d.type);else if(n.config.states.hover.filter!=="none"&&!n.globals.isTouchDevice){var f=n.config.states.hover.filter;r.applyFilter(e,s,f.type)}}else n.config.states.active.filter.type!=="none"&&(n.config.states.hover.filter.type==="none"||n.globals.isTouchDevice?r.getDefaultFilter(e,s):(f=n.config.states.hover.filter,r.applyFilter(e,s,f.type)));typeof n.config.chart.events.dataPointSelection=="function"&&n.config.chart.events.dataPointSelection(t,this.ctx,{selectedDataPoints:n.globals.selectedDataPoints,seriesIndex:s,dataPointIndex:o,w:n}),t&&this.ctx.events.fireEvent("dataPointSelection",[t,this.ctx,{selectedDataPoints:n.globals.selectedDataPoints,seriesIndex:s,dataPointIndex:o,w:n}])}},{key:"rotateAroundCenter",value:function(e){var t={};return e&&typeof e.getBBox=="function"&&(t=e.getBBox()),{x:t.x+t.width/2,y:t.y+t.height/2}}},{key:"getTextRects",value:function(e,t,n,r){var s=!(arguments.length>4&&arguments[4]!==void 0)||arguments[4],o=this.w,a=this.drawText({x:-200,y:-200,text:e,textAnchor:"start",fontSize:t,fontFamily:n,foreColor:"#fff",opacity:0});r&&a.attr("transform",r),o.globals.dom.Paper.add(a);var l=a.bbox();return s||(l=a.node.getBoundingClientRect()),a.remove(),{width:l.width,height:l.height}}},{key:"placeTextWithEllipsis",value:function(e,t,n){if(typeof e.getComputedTextLength=="function"&&(e.textContent=t,t.length>0&&e.getComputedTextLength()>=n/1.1)){for(var r=t.length-3;r>0;r-=3)if(e.getSubStringLength(0,r)<=n/1.1)return void(e.textContent=t.substring(0,r)+"...");e.textContent="."}}}],[{key:"setAttrs",value:function(e,t){for(var n in t)t.hasOwnProperty(n)&&e.setAttribute(n,t[n])}}]),i}(),Bt=function(){function i(e){Ee(this,i),this.ctx=e,this.w=e.w}return Oe(i,[{key:"getStackedSeriesTotals",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],t=this.w,n=[];if(t.globals.series.length===0)return n;for(var r=0;r<t.globals.series[t.globals.maxValsInArrayIndex].length;r++){for(var s=0,o=0;o<t.globals.series.length;o++)t.globals.series[o][r]!==void 0&&e.indexOf(o)===-1&&(s+=t.globals.series[o][r]);n.push(s)}return n}},{key:"getSeriesTotalByIndex",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;return e===null?this.w.config.series.reduce(function(t,n){return t+n},0):this.w.globals.series[e].reduce(function(t,n){return t+n},0)}},{key:"getStackedSeriesTotalsByGroups",value:function(){var e=this,t=this.w,n=[];return t.globals.seriesGroups.forEach(function(r){var s=[];t.config.series.forEach(function(a,l){r.indexOf(t.globals.seriesNames[l])>-1&&s.push(l)});var o=t.globals.series.map(function(a,l){return s.indexOf(l)===-1?l:-1}).filter(function(a){return a!==-1});n.push(e.getStackedSeriesTotals(o))}),n}},{key:"setSeriesYAxisMappings",value:function(){var e=this.w.globals,t=this.w.config,n=[],r=[],s=[],o=e.series.length>t.yaxis.length||t.yaxis.some(function(u){return Array.isArray(u.seriesName)});t.series.forEach(function(u,d){s.push(d),r.push(null)}),t.yaxis.forEach(function(u,d){n[d]=[]});var a=[];t.yaxis.forEach(function(u,d){var f=!1;if(u.seriesName){var g=[];Array.isArray(u.seriesName)?g=u.seriesName:g.push(u.seriesName),g.forEach(function(m){t.series.forEach(function(b,y){if(b.name===m){var w=y;d===y||o?!o||s.indexOf(y)>-1?n[d].push([d,y]):console.warn("Series '"+b.name+"' referenced more than once in what looks like the new style. That is, when using either seriesName: [], or when there are more series than yaxes."):(n[y].push([y,d]),w=d),f=!0,(w=s.indexOf(w))!==-1&&s.splice(w,1)}})})}f||a.push(d)}),n=n.map(function(u,d){var f=[];return u.forEach(function(g){r[g[1]]=g[0],f.push(g[1])}),f});for(var l=t.yaxis.length-1,c=0;c<a.length&&(l=a[c],n[l]=[],s);c++){var h=s[0];s.shift(),n[l].push(h),r[h]=l}s.forEach(function(u){n[l].push(u),r[u]=l}),e.seriesYAxisMap=n.map(function(u){return u}),e.seriesYAxisReverseMap=r.map(function(u){return u}),e.seriesYAxisMap.forEach(function(u,d){u.forEach(function(f){t.series[f]&&t.series[f].group===void 0&&(t.series[f].group="apexcharts-axis-".concat(d.toString()))})})}},{key:"isSeriesNull",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;return(e===null?this.w.config.series.filter(function(t){return t!==null}):this.w.config.series[e].data.filter(function(t){return t!==null})).length===0}},{key:"seriesHaveSameValues",value:function(e){return this.w.globals.series[e].every(function(t,n,r){return t===r[0]})}},{key:"getCategoryLabels",value:function(e){var t=this.w,n=e.slice();return t.config.xaxis.convertedCatToNumeric&&(n=e.map(function(r,s){return t.config.xaxis.labels.formatter(r-t.globals.minX+1)})),n}},{key:"getLargestSeries",value:function(){var e=this.w;e.globals.maxValsInArrayIndex=e.globals.series.map(function(t){return t.length}).indexOf(Math.max.apply(Math,e.globals.series.map(function(t){return t.length})))}},{key:"getLargestMarkerSize",value:function(){var e=this.w,t=0;return e.globals.markers.size.forEach(function(n){t=Math.max(t,n)}),e.config.markers.discrete&&e.config.markers.discrete.length&&e.config.markers.discrete.forEach(function(n){t=Math.max(t,n.size)}),t>0&&(e.config.markers.hover.size>0?t=e.config.markers.hover.size:t+=e.config.markers.hover.sizeOffset),e.globals.markers.largestSize=t,t}},{key:"getSeriesTotals",value:function(){var e=this.w;e.globals.seriesTotals=e.globals.series.map(function(t,n){var r=0;if(Array.isArray(t))for(var s=0;s<t.length;s++)r+=t[s];else r+=t;return r})}},{key:"getSeriesTotalsXRange",value:function(e,t){var n=this.w;return n.globals.series.map(function(r,s){for(var o=0,a=0;a<r.length;a++)n.globals.seriesX[s][a]>e&&n.globals.seriesX[s][a]<t&&(o+=r[a]);return o})}},{key:"getPercentSeries",value:function(){var e=this.w;e.globals.seriesPercent=e.globals.series.map(function(t,n){var r=[];if(Array.isArray(t))for(var s=0;s<t.length;s++){var o=e.globals.stackedSeriesTotals[s],a=0;o&&(a=100*t[s]/o),r.push(a)}else{var l=100*t/e.globals.seriesTotals.reduce(function(c,h){return c+h},0);r.push(l)}return r})}},{key:"getCalculatedRatios",value:function(){var e,t,n,r=this,s=this.w,o=s.globals,a=[],l=0,c=[],h=.1,u=0;if(o.yRange=[],o.isMultipleYAxis)for(var d=0;d<o.minYArr.length;d++)o.yRange.push(Math.abs(o.minYArr[d]-o.maxYArr[d])),c.push(0);else o.yRange.push(Math.abs(o.minY-o.maxY));o.xRange=Math.abs(o.maxX-o.minX),o.zRange=Math.abs(o.maxZ-o.minZ);for(var f=0;f<o.yRange.length;f++)a.push(o.yRange[f]/o.gridHeight);if(t=o.xRange/o.gridWidth,e=o.yRange/o.gridWidth,n=o.xRange/o.gridHeight,(l=o.zRange/o.gridHeight*16)||(l=1),o.minY!==Number.MIN_VALUE&&Math.abs(o.minY)!==0&&(o.hasNegs=!0),s.globals.seriesYAxisReverseMap.length>0){var g=function(b,y){var w=s.config.yaxis[s.globals.seriesYAxisReverseMap[y]],C=b<0?-1:1;return b=Math.abs(b),w.logarithmic&&(b=r.getBaseLog(w.logBase,b)),-C*b/a[y]};if(o.isMultipleYAxis){c=[];for(var m=0;m<a.length;m++)c.push(g(o.minYArr[m],m))}else(c=[]).push(g(o.minY,0)),o.minY!==Number.MIN_VALUE&&Math.abs(o.minY)!==0&&(h=-o.minY/e,u=o.minX/t)}else(c=[]).push(0),h=0,u=0;return{yRatio:a,invertedYRatio:e,zRatio:l,xRatio:t,invertedXRatio:n,baseLineInvertedY:h,baseLineY:c,baseLineX:u}}},{key:"getLogSeries",value:function(e){var t=this,n=this.w;return n.globals.seriesLog=e.map(function(r,s){var o=n.globals.seriesYAxisReverseMap[s];return n.config.yaxis[o]&&n.config.yaxis[o].logarithmic?r.map(function(a){return a===null?null:t.getLogVal(n.config.yaxis[o].logBase,a,s)}):r}),n.globals.invalidLogScale?e:n.globals.seriesLog}},{key:"getLogValAtSeriesIndex",value:function(e,t){if(e===null)return null;var n=this.w,r=n.globals.seriesYAxisReverseMap[t];return n.config.yaxis[r]&&n.config.yaxis[r].logarithmic?this.getLogVal(n.config.yaxis[r].logBase,e,t):e}},{key:"getBaseLog",value:function(e,t){return Math.log(t)/Math.log(e)}},{key:"getLogVal",value:function(e,t,n){if(t<=0)return 0;var r=this.w,s=r.globals.minYArr[n]===0?-1:this.getBaseLog(e,r.globals.minYArr[n]),o=(r.globals.maxYArr[n]===0?0:this.getBaseLog(e,r.globals.maxYArr[n]))-s;return t<1?t/o:(this.getBaseLog(e,t)-s)/o}},{key:"getLogYRatios",value:function(e){var t=this,n=this.w,r=this.w.globals;return r.yLogRatio=e.slice(),r.logYRange=r.yRange.map(function(s,o){var a=n.globals.seriesYAxisReverseMap[o];if(n.config.yaxis[a]&&t.w.config.yaxis[a].logarithmic){var l,c=-Number.MAX_VALUE,h=Number.MIN_VALUE;return r.seriesLog.forEach(function(u,d){u.forEach(function(f){n.config.yaxis[d]&&n.config.yaxis[d].logarithmic&&(c=Math.max(f,c),h=Math.min(f,h))})}),l=Math.pow(r.yRange[o],Math.abs(h-c)/r.yRange[o]),r.yLogRatio[o]=l/r.gridHeight,l}}),r.invalidLogScale?e.slice():r.yLogRatio}},{key:"drawSeriesByGroup",value:function(e,t,n,r){var s=this.w,o=[];return e.series.length>0&&t.forEach(function(a){var l=[],c=[];e.i.forEach(function(h,u){s.config.series[h].group===a&&(l.push(e.series[u]),c.push(h))}),l.length>0&&o.push(r.draw(l,n,c))}),o}}],[{key:"checkComboSeries",value:function(e,t){var n=!1,r=0,s=0;return t===void 0&&(t="line"),e.length&&e[0].type!==void 0&&e.forEach(function(o){o.type!=="bar"&&o.type!=="column"&&o.type!=="candlestick"&&o.type!=="boxPlot"||r++,o.type!==void 0&&o.type!==t&&s++}),s>0&&(n=!0),{comboBarCount:r,comboCharts:n}}},{key:"extendArrayProps",value:function(e,t,n){var r,s,o,a,l,c;return(r=t)!==null&&r!==void 0&&r.yaxis&&(t=e.extendYAxis(t,n)),(s=t)!==null&&s!==void 0&&s.annotations&&(t.annotations.yaxis&&(t=e.extendYAxisAnnotations(t)),(o=t)!==null&&o!==void 0&&(a=o.annotations)!==null&&a!==void 0&&a.xaxis&&(t=e.extendXAxisAnnotations(t)),(l=t)!==null&&l!==void 0&&(c=l.annotations)!==null&&c!==void 0&&c.points&&(t=e.extendPointAnnotations(t))),t}}]),i}(),mh=function(){function i(e){Ee(this,i),this.w=e.w,this.annoCtx=e}return Oe(i,[{key:"setOrientations",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,n=this.w;if(e.label.orientation==="vertical"){var r=t!==null?t:0,s=n.globals.dom.baseEl.querySelector(".apexcharts-xaxis-annotations .apexcharts-xaxis-annotation-label[rel='".concat(r,"']"));if(s!==null){var o=s.getBoundingClientRect();s.setAttribute("x",parseFloat(s.getAttribute("x"))-o.height+4);var a=e.label.position==="top"?o.width:-o.width;s.setAttribute("y",parseFloat(s.getAttribute("y"))+a);var l=this.annoCtx.graphics.rotateAroundCenter(s),c=l.x,h=l.y;s.setAttribute("transform","rotate(-90 ".concat(c," ").concat(h,")"))}}}},{key:"addBackgroundToAnno",value:function(e,t){var n=this.w;if(!e||!t.label.text||!String(t.label.text).trim())return null;var r=n.globals.dom.baseEl.querySelector(".apexcharts-grid").getBoundingClientRect(),s=e.getBoundingClientRect(),o=t.label.style.padding,a=o.left,l=o.right,c=o.top,h=o.bottom;if(t.label.orientation==="vertical"){var u=[a,l,c,h];c=u[0],h=u[1],a=u[2],l=u[3]}var d=s.left-r.left-a,f=s.top-r.top-c,g=this.annoCtx.graphics.drawRect(d-n.globals.barPadForNumericAxis,f,s.width+a+l,s.height+c+h,t.label.borderRadius,t.label.style.background,1,t.label.borderWidth,t.label.borderColor,0);return t.id&&g.node.classList.add(t.id),g}},{key:"annotationsBackground",value:function(){var e=this,t=this.w,n=function(r,s,o){var a=t.globals.dom.baseEl.querySelector(".apexcharts-".concat(o,"-annotations .apexcharts-").concat(o,"-annotation-label[rel='").concat(s,"']"));if(a){var l=a.parentNode,c=e.addBackgroundToAnno(a,r);c&&(l.insertBefore(c.node,a),r.label.mouseEnter&&c.node.addEventListener("mouseenter",r.label.mouseEnter.bind(e,r)),r.label.mouseLeave&&c.node.addEventListener("mouseleave",r.label.mouseLeave.bind(e,r)),r.label.click&&c.node.addEventListener("click",r.label.click.bind(e,r)))}};t.config.annotations.xaxis.forEach(function(r,s){return n(r,s,"xaxis")}),t.config.annotations.yaxis.forEach(function(r,s){return n(r,s,"yaxis")}),t.config.annotations.points.forEach(function(r,s){return n(r,s,"point")})}},{key:"getY1Y2",value:function(e,t){var n,r=this.w,s=e==="y1"?t.y:t.y2,o=!1;if(this.annoCtx.invertAxis){var a=r.config.xaxis.convertedCatToNumeric?r.globals.categoryLabels:r.globals.labels,l=a.indexOf(s),c=r.globals.dom.baseEl.querySelector(".apexcharts-yaxis-texts-g text:nth-child(".concat(l+1,")"));n=c?parseFloat(c.getAttribute("y")):(r.globals.gridHeight/a.length-1)*(l+1)-r.globals.barHeight,t.seriesIndex!==void 0&&r.globals.barHeight&&(n-=r.globals.barHeight/2*(r.globals.series.length-1)-r.globals.barHeight*t.seriesIndex)}else{var h,u=r.globals.seriesYAxisMap[t.yAxisIndex][0],d=r.config.yaxis[t.yAxisIndex].logarithmic?new Bt(this.annoCtx.ctx).getLogVal(r.config.yaxis[t.yAxisIndex].logBase,s,u)/r.globals.yLogRatio[u]:(s-r.globals.minYArr[u])/(r.globals.yRange[u]/r.globals.gridHeight);n=r.globals.gridHeight-Math.min(Math.max(d,0),r.globals.gridHeight),o=d>r.globals.gridHeight||d<0,!t.marker||t.y!==void 0&&t.y!==null||(n=0),(h=r.config.yaxis[t.yAxisIndex])!==null&&h!==void 0&&h.reversed&&(n=d)}return typeof s=="string"&&s.includes("px")&&(n=parseFloat(s)),{yP:n,clipped:o}}},{key:"getX1X2",value:function(e,t){var n=this.w,r=e==="x1"?t.x:t.x2,s=this.annoCtx.invertAxis?n.globals.minY:n.globals.minX,o=this.annoCtx.invertAxis?n.globals.maxY:n.globals.maxX,a=this.annoCtx.invertAxis?n.globals.yRange[0]:n.globals.xRange,l=!1,c=this.annoCtx.inversedReversedAxis?(o-r)/(a/n.globals.gridWidth):(r-s)/(a/n.globals.gridWidth);return n.config.xaxis.type!=="category"&&!n.config.xaxis.convertedCatToNumeric||this.annoCtx.invertAxis||n.globals.dataFormatXNumeric||n.config.chart.sparkline.enabled||(c=this.getStringX(r)),typeof r=="string"&&r.includes("px")&&(c=parseFloat(r)),r==null&&t.marker&&(c=n.globals.gridWidth),t.seriesIndex!==void 0&&n.globals.barWidth&&!this.annoCtx.invertAxis&&(c-=n.globals.barWidth/2*(n.globals.series.length-1)-n.globals.barWidth*t.seriesIndex),c>n.globals.gridWidth?(c=n.globals.gridWidth,l=!0):c<0&&(c=0,l=!0),{x:c,clipped:l}}},{key:"getStringX",value:function(e){var t=this.w,n=e;t.config.xaxis.convertedCatToNumeric&&t.globals.categoryLabels.length&&(e=t.globals.categoryLabels.indexOf(e)+1);var r=t.globals.labels.map(function(o){return Array.isArray(o)?o.join(" "):o}).indexOf(e),s=t.globals.dom.baseEl.querySelector(".apexcharts-xaxis-texts-g text:nth-child(".concat(r+1,")"));return s&&(n=parseFloat(s.getAttribute("x"))),n}}]),i}(),JI=function(){function i(e){Ee(this,i),this.w=e.w,this.annoCtx=e,this.invertAxis=this.annoCtx.invertAxis,this.helpers=new mh(this.annoCtx)}return Oe(i,[{key:"addXaxisAnnotation",value:function(e,t,n){var r,s=this.w,o=this.helpers.getX1X2("x1",e),a=o.x,l=o.clipped,c=!0,h=e.label.text,u=e.strokeDashArray;if(H.isNumber(a)){if(e.x2===null||e.x2===void 0){if(!l){var d=this.annoCtx.graphics.drawLine(a+e.offsetX,0+e.offsetY,a+e.offsetX,s.globals.gridHeight+e.offsetY,e.borderColor,u,e.borderWidth);t.appendChild(d.node),e.id&&d.node.classList.add(e.id)}}else{var f=this.helpers.getX1X2("x2",e);if(r=f.x,c=f.clipped,r<a){var g=a;a=r,r=g}var m=this.annoCtx.graphics.drawRect(a+e.offsetX,0+e.offsetY,r-a,s.globals.gridHeight+e.offsetY,0,e.fillColor,e.opacity,1,e.borderColor,u);m.node.classList.add("apexcharts-annotation-rect"),m.attr("clip-path","url(#gridRectMask".concat(s.globals.cuid,")")),t.appendChild(m.node),e.id&&m.node.classList.add(e.id)}if(!l||!c){var b=this.annoCtx.graphics.getTextRects(h,parseFloat(e.label.style.fontSize)),y=e.label.position==="top"?4:e.label.position==="center"?s.globals.gridHeight/2+(e.label.orientation==="vertical"?b.width/2:0):s.globals.gridHeight,w=this.annoCtx.graphics.drawText({x:a+e.label.offsetX,y:y+e.label.offsetY-(e.label.orientation==="vertical"?e.label.position==="top"?b.width/2-12:-b.width/2:0),text:h,textAnchor:e.label.textAnchor,fontSize:e.label.style.fontSize,fontFamily:e.label.style.fontFamily,fontWeight:e.label.style.fontWeight,foreColor:e.label.style.color,cssClass:"apexcharts-xaxis-annotation-label ".concat(e.label.style.cssClass," ").concat(e.id?e.id:"")});w.attr({rel:n}),t.appendChild(w.node),this.annoCtx.helpers.setOrientations(e,n)}}}},{key:"drawXAxisAnnotations",value:function(){var e=this,t=this.w,n=this.annoCtx.graphics.group({class:"apexcharts-xaxis-annotations"});return t.config.annotations.xaxis.map(function(r,s){e.addXaxisAnnotation(r,n.node,s)}),n}}]),i}(),dn=function(){function i(e){Ee(this,i),this.ctx=e,this.w=e.w,this.months31=[1,3,5,7,8,10,12],this.months30=[2,4,6,9,11],this.daysCntOfYear=[0,31,59,90,120,151,181,212,243,273,304,334]}return Oe(i,[{key:"isValidDate",value:function(e){return typeof e!="number"&&!isNaN(this.parseDate(e))}},{key:"getTimeStamp",value:function(e){return Date.parse(e)?this.w.config.xaxis.labels.datetimeUTC?new Date(new Date(e).toISOString().substr(0,25)).getTime():new Date(e).getTime():e}},{key:"getDate",value:function(e){return this.w.config.xaxis.labels.datetimeUTC?new Date(new Date(e).toUTCString()):new Date(e)}},{key:"parseDate",value:function(e){var t=Date.parse(e);if(!isNaN(t))return this.getTimeStamp(e);var n=Date.parse(e.replace(/-/g,"/").replace(/[a-z]+/gi," "));return n=this.getTimeStamp(n)}},{key:"parseDateWithTimezone",value:function(e){return Date.parse(e.replace(/-/g,"/").replace(/[a-z]+/gi," "))}},{key:"formatDate",value:function(e,t){var n=this.w.globals.locale,r=this.w.config.xaxis.labels.datetimeUTC,s=["\0"].concat(Gt(n.months)),o=[""].concat(Gt(n.shortMonths)),a=[""].concat(Gt(n.days)),l=[""].concat(Gt(n.shortDays));function c(I,R){var z=I+"";for(R=R||2;z.length<R;)z="0"+z;return z}var h=r?e.getUTCFullYear():e.getFullYear();t=(t=(t=t.replace(/(^|[^\\])yyyy+/g,"$1"+h)).replace(/(^|[^\\])yy/g,"$1"+h.toString().substr(2,2))).replace(/(^|[^\\])y/g,"$1"+h);var u=(r?e.getUTCMonth():e.getMonth())+1;t=(t=(t=(t=t.replace(/(^|[^\\])MMMM+/g,"$1"+s[0])).replace(/(^|[^\\])MMM/g,"$1"+o[0])).replace(/(^|[^\\])MM/g,"$1"+c(u))).replace(/(^|[^\\])M/g,"$1"+u);var d=r?e.getUTCDate():e.getDate();t=(t=(t=(t=t.replace(/(^|[^\\])dddd+/g,"$1"+a[0])).replace(/(^|[^\\])ddd/g,"$1"+l[0])).replace(/(^|[^\\])dd/g,"$1"+c(d))).replace(/(^|[^\\])d/g,"$1"+d);var f=r?e.getUTCHours():e.getHours(),g=f>12?f-12:f===0?12:f;t=(t=(t=(t=t.replace(/(^|[^\\])HH+/g,"$1"+c(f))).replace(/(^|[^\\])H/g,"$1"+f)).replace(/(^|[^\\])hh+/g,"$1"+c(g))).replace(/(^|[^\\])h/g,"$1"+g);var m=r?e.getUTCMinutes():e.getMinutes();t=(t=t.replace(/(^|[^\\])mm+/g,"$1"+c(m))).replace(/(^|[^\\])m/g,"$1"+m);var b=r?e.getUTCSeconds():e.getSeconds();t=(t=t.replace(/(^|[^\\])ss+/g,"$1"+c(b))).replace(/(^|[^\\])s/g,"$1"+b);var y=r?e.getUTCMilliseconds():e.getMilliseconds();t=t.replace(/(^|[^\\])fff+/g,"$1"+c(y,3)),y=Math.round(y/10),t=t.replace(/(^|[^\\])ff/g,"$1"+c(y)),y=Math.round(y/10);var w=f<12?"AM":"PM";t=(t=(t=t.replace(/(^|[^\\])f/g,"$1"+y)).replace(/(^|[^\\])TT+/g,"$1"+w)).replace(/(^|[^\\])T/g,"$1"+w.charAt(0));var C=w.toLowerCase();t=(t=t.replace(/(^|[^\\])tt+/g,"$1"+C)).replace(/(^|[^\\])t/g,"$1"+C.charAt(0));var M=-e.getTimezoneOffset(),S=r||!M?"Z":M>0?"+":"-";if(!r){var O=(M=Math.abs(M))%60;S+=c(Math.floor(M/60))+":"+c(O)}t=t.replace(/(^|[^\\])K/g,"$1"+S);var T=(r?e.getUTCDay():e.getDay())+1;return t=(t=(t=(t=(t=t.replace(new RegExp(a[0],"g"),a[T])).replace(new RegExp(l[0],"g"),l[T])).replace(new RegExp(s[0],"g"),s[u])).replace(new RegExp(o[0],"g"),o[u])).replace(/\\(.)/g,"$1")}},{key:"getTimeUnitsfromTimestamp",value:function(e,t,n){var r=this.w;r.config.xaxis.min!==void 0&&(e=r.config.xaxis.min),r.config.xaxis.max!==void 0&&(t=r.config.xaxis.max);var s=this.getDate(e),o=this.getDate(t),a=this.formatDate(s,"yyyy MM dd HH mm ss fff").split(" "),l=this.formatDate(o,"yyyy MM dd HH mm ss fff").split(" ");return{minMillisecond:parseInt(a[6],10),maxMillisecond:parseInt(l[6],10),minSecond:parseInt(a[5],10),maxSecond:parseInt(l[5],10),minMinute:parseInt(a[4],10),maxMinute:parseInt(l[4],10),minHour:parseInt(a[3],10),maxHour:parseInt(l[3],10),minDate:parseInt(a[2],10),maxDate:parseInt(l[2],10),minMonth:parseInt(a[1],10)-1,maxMonth:parseInt(l[1],10)-1,minYear:parseInt(a[0],10),maxYear:parseInt(l[0],10)}}},{key:"isLeapYear",value:function(e){return e%4==0&&e%100!=0||e%400==0}},{key:"calculcateLastDaysOfMonth",value:function(e,t,n){return this.determineDaysOfMonths(e,t)-n}},{key:"determineDaysOfYear",value:function(e){var t=365;return this.isLeapYear(e)&&(t=366),t}},{key:"determineRemainingDaysOfYear",value:function(e,t,n){var r=this.daysCntOfYear[t]+n;return t>1&&this.isLeapYear()&&r++,r}},{key:"determineDaysOfMonths",value:function(e,t){var n=30;switch(e=H.monthMod(e),!0){case this.months30.indexOf(e)>-1:e===2&&(n=this.isLeapYear(t)?29:28);break;case this.months31.indexOf(e)>-1:default:n=31}return n}}]),i}(),Ya=function(){function i(e){Ee(this,i),this.ctx=e,this.w=e.w,this.tooltipKeyFormat="dd MMM"}return Oe(i,[{key:"xLabelFormat",value:function(e,t,n,r){var s=this.w;if(s.config.xaxis.type==="datetime"&&s.config.xaxis.labels.formatter===void 0&&s.config.tooltip.x.formatter===void 0){var o=new dn(this.ctx);return o.formatDate(o.getDate(t),s.config.tooltip.x.format)}return e(t,n,r)}},{key:"defaultGeneralFormatter",value:function(e){return Array.isArray(e)?e.map(function(t){return t}):e}},{key:"defaultYFormatter",value:function(e,t,n){var r=this.w;if(H.isNumber(e))if(r.globals.yValueDecimal!==0)e=e.toFixed(t.decimalsInFloat!==void 0?t.decimalsInFloat:r.globals.yValueDecimal);else{var s=e.toFixed(0);e=e==s?s:e.toFixed(1)}return e}},{key:"setLabelFormatters",value:function(){var e=this,t=this.w;return t.globals.xaxisTooltipFormatter=function(n){return e.defaultGeneralFormatter(n)},t.globals.ttKeyFormatter=function(n){return e.defaultGeneralFormatter(n)},t.globals.ttZFormatter=function(n){return n},t.globals.legendFormatter=function(n){return e.defaultGeneralFormatter(n)},t.config.xaxis.labels.formatter!==void 0?t.globals.xLabelFormatter=t.config.xaxis.labels.formatter:t.globals.xLabelFormatter=function(n){if(H.isNumber(n)){if(!t.config.xaxis.convertedCatToNumeric&&t.config.xaxis.type==="numeric"){if(H.isNumber(t.config.xaxis.decimalsInFloat))return n.toFixed(t.config.xaxis.decimalsInFloat);var r=t.globals.maxX-t.globals.minX;return r>0&&r<100?n.toFixed(1):n.toFixed(0)}return t.globals.isBarHorizontal&&t.globals.maxY-t.globals.minYArr<4?n.toFixed(1):n.toFixed(0)}return n},typeof t.config.tooltip.x.formatter=="function"?t.globals.ttKeyFormatter=t.config.tooltip.x.formatter:t.globals.ttKeyFormatter=t.globals.xLabelFormatter,typeof t.config.xaxis.tooltip.formatter=="function"&&(t.globals.xaxisTooltipFormatter=t.config.xaxis.tooltip.formatter),(Array.isArray(t.config.tooltip.y)||t.config.tooltip.y.formatter!==void 0)&&(t.globals.ttVal=t.config.tooltip.y),t.config.tooltip.z.formatter!==void 0&&(t.globals.ttZFormatter=t.config.tooltip.z.formatter),t.config.legend.formatter!==void 0&&(t.globals.legendFormatter=t.config.legend.formatter),t.config.yaxis.forEach(function(n,r){n.labels.formatter!==void 0?t.globals.yLabelFormatters[r]=n.labels.formatter:t.globals.yLabelFormatters[r]=function(s){return t.globals.xyCharts?Array.isArray(s)?s.map(function(o){return e.defaultYFormatter(o,n,r)}):e.defaultYFormatter(s,n,r):s}}),t.globals}},{key:"heatmapLabelFormatters",value:function(){var e=this.w;if(e.config.chart.type==="heatmap"){e.globals.yAxisScale[0].result=e.globals.seriesNames.slice();var t=e.globals.seriesNames.reduce(function(n,r){return n.length>r.length?n:r},0);e.globals.yAxisScale[0].niceMax=t,e.globals.yAxisScale[0].niceMin=t}}}]),i}(),Br=function(){function i(e){Ee(this,i),this.ctx=e,this.w=e.w}return Oe(i,[{key:"getLabel",value:function(e,t,n,r){var s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:[],o=arguments.length>5&&arguments[5]!==void 0?arguments[5]:"12px",a=!(arguments.length>6&&arguments[6]!==void 0)||arguments[6],l=this.w,c=e[r]===void 0?"":e[r],h=c,u=l.globals.xLabelFormatter,d=l.config.xaxis.labels.formatter,f=!1,g=new Ya(this.ctx),m=c;a&&(h=g.xLabelFormat(u,c,m,{i:r,dateFormatter:new dn(this.ctx).formatDate,w:l}),d!==void 0&&(h=d(c,e[r],{i:r,dateFormatter:new dn(this.ctx).formatDate,w:l})));var b,y;t.length>0?(b=t[r].unit,y=null,t.forEach(function(S){S.unit==="month"?y="year":S.unit==="day"?y="month":S.unit==="hour"?y="day":S.unit==="minute"&&(y="hour")}),f=y===b,n=t[r].position,h=t[r].value):l.config.xaxis.type==="datetime"&&d===void 0&&(h=""),h===void 0&&(h=""),h=Array.isArray(h)?h:h.toString();var w=new oe(this.ctx),C={};C=l.globals.rotateXLabels&&a?w.getTextRects(h,parseInt(o,10),null,"rotate(".concat(l.config.xaxis.labels.rotate," 0 0)"),!1):w.getTextRects(h,parseInt(o,10));var M=!l.config.xaxis.labels.showDuplicates&&this.ctx.timeScale;return!Array.isArray(h)&&(String(h)==="NaN"||s.indexOf(h)>=0&&M)&&(h=""),{x:n,text:h,textRect:C,isBold:f}}},{key:"checkLabelBasedOnTickamount",value:function(e,t,n){var r=this.w,s=r.config.xaxis.tickAmount;return s==="dataPoints"&&(s=Math.round(r.globals.gridWidth/120)),s>n||e%Math.round(n/(s+1))==0||(t.text=""),t}},{key:"checkForOverflowingLabels",value:function(e,t,n,r,s){var o=this.w;if(e===0&&o.globals.skipFirstTimelinelabel&&(t.text=""),e===n-1&&o.globals.skipLastTimelinelabel&&(t.text=""),o.config.xaxis.labels.hideOverlappingLabels&&r.length>0){var a=s[s.length-1];t.x<a.textRect.width/(o.globals.rotateXLabels?Math.abs(o.config.xaxis.labels.rotate)/12:1.01)+a.x&&(t.text="")}return t}},{key:"checkForReversedLabels",value:function(e,t){var n=this.w;return n.config.yaxis[e]&&n.config.yaxis[e].reversed&&t.reverse(),t}},{key:"yAxisAllSeriesCollapsed",value:function(e){var t=this.w.globals;return!t.seriesYAxisMap[e].some(function(n){return t.collapsedSeriesIndices.indexOf(n)===-1})}},{key:"translateYAxisIndex",value:function(e){var t=this.w,n=t.globals,r=t.config.yaxis;return n.series.length>r.length||r.some(function(s){return Array.isArray(s.seriesName)})?e:n.seriesYAxisReverseMap[e]}},{key:"isYAxisHidden",value:function(e){var t=this.w,n=t.config.yaxis[e];if(!n.show||this.yAxisAllSeriesCollapsed(e))return!0;if(!n.showForNullSeries){var r=t.globals.seriesYAxisMap[e],s=new Bt(this.ctx);return r.every(function(o){return s.isSeriesNull(o)})}return!1}},{key:"getYAxisForeColor",value:function(e,t){var n=this.w;return Array.isArray(e)&&n.globals.yAxisScale[t]&&this.ctx.theme.pushExtraColors(e,n.globals.yAxisScale[t].result.length,!1),e}},{key:"drawYAxisTicks",value:function(e,t,n,r,s,o,a){var l=this.w,c=new oe(this.ctx),h=l.globals.translateY+l.config.yaxis[s].labels.offsetY;if(l.globals.isBarHorizontal?h=0:l.config.chart.type==="heatmap"&&(h+=o/2),r.show&&t>0){l.config.yaxis[s].opposite===!0&&(e+=r.width);for(var u=t;u>=0;u--){var d=c.drawLine(e+n.offsetX-r.width+r.offsetX,h+r.offsetY,e+n.offsetX+r.offsetX,h+r.offsetY,r.color);a.add(d),h+=o}}}}]),i}(),ZI=function(){function i(e){Ee(this,i),this.w=e.w,this.annoCtx=e,this.helpers=new mh(this.annoCtx),this.axesUtils=new Br(this.annoCtx)}return Oe(i,[{key:"addYaxisAnnotation",value:function(e,t,n){var r,s=this.w,o=e.strokeDashArray,a=this.helpers.getY1Y2("y1",e),l=a.yP,c=a.clipped,h=!0,u=!1,d=e.label.text;if(e.y2===null||e.y2===void 0){if(!c){u=!0;var f=this.annoCtx.graphics.drawLine(0+e.offsetX,l+e.offsetY,this._getYAxisAnnotationWidth(e),l+e.offsetY,e.borderColor,o,e.borderWidth);t.appendChild(f.node),e.id&&f.node.classList.add(e.id)}}else{if(r=(a=this.helpers.getY1Y2("y2",e)).yP,h=a.clipped,r>l){var g=l;l=r,r=g}if(!c||!h){u=!0;var m=this.annoCtx.graphics.drawRect(0+e.offsetX,r+e.offsetY,this._getYAxisAnnotationWidth(e),l-r,0,e.fillColor,e.opacity,1,e.borderColor,o);m.node.classList.add("apexcharts-annotation-rect"),m.attr("clip-path","url(#gridRectMask".concat(s.globals.cuid,")")),t.appendChild(m.node),e.id&&m.node.classList.add(e.id)}}if(u){var b=e.label.position==="right"?s.globals.gridWidth:e.label.position==="center"?s.globals.gridWidth/2:0,y=this.annoCtx.graphics.drawText({x:b+e.label.offsetX,y:(r??l)+e.label.offsetY-3,text:d,textAnchor:e.label.textAnchor,fontSize:e.label.style.fontSize,fontFamily:e.label.style.fontFamily,fontWeight:e.label.style.fontWeight,foreColor:e.label.style.color,cssClass:"apexcharts-yaxis-annotation-label ".concat(e.label.style.cssClass," ").concat(e.id?e.id:"")});y.attr({rel:n}),t.appendChild(y.node)}}},{key:"_getYAxisAnnotationWidth",value:function(e){var t=this.w;return t.globals.gridWidth,(e.width.indexOf("%")>-1?t.globals.gridWidth*parseInt(e.width,10)/100:parseInt(e.width,10))+e.offsetX}},{key:"drawYAxisAnnotations",value:function(){var e=this,t=this.w,n=this.annoCtx.graphics.group({class:"apexcharts-yaxis-annotations"});return t.config.annotations.yaxis.forEach(function(r,s){r.yAxisIndex=e.axesUtils.translateYAxisIndex(r.yAxisIndex),e.axesUtils.isYAxisHidden(r.yAxisIndex)&&e.axesUtils.yAxisAllSeriesCollapsed(r.yAxisIndex)||e.addYaxisAnnotation(r,n.node,s)}),n}}]),i}(),QI=function(){function i(e){Ee(this,i),this.w=e.w,this.annoCtx=e,this.helpers=new mh(this.annoCtx)}return Oe(i,[{key:"addPointAnnotation",value:function(e,t,n){if(!(this.w.globals.collapsedSeriesIndices.indexOf(e.seriesIndex)>-1)){var r=this.helpers.getX1X2("x1",e),s=r.x,o=r.clipped,a=(r=this.helpers.getY1Y2("y1",e)).yP,l=r.clipped;if(H.isNumber(s)&&!l&&!o){var c={pSize:e.marker.size,pointStrokeWidth:e.marker.strokeWidth,pointFillColor:e.marker.fillColor,pointStrokeColor:e.marker.strokeColor,shape:e.marker.shape,pRadius:e.marker.radius,class:"apexcharts-point-annotation-marker ".concat(e.marker.cssClass," ").concat(e.id?e.id:"")},h=this.annoCtx.graphics.drawMarker(s+e.marker.offsetX,a+e.marker.offsetY,c);t.appendChild(h.node);var u=e.label.text?e.label.text:"",d=this.annoCtx.graphics.drawText({x:s+e.label.offsetX,y:a+e.label.offsetY-e.marker.size-parseFloat(e.label.style.fontSize)/1.6,text:u,textAnchor:e.label.textAnchor,fontSize:e.label.style.fontSize,fontFamily:e.label.style.fontFamily,fontWeight:e.label.style.fontWeight,foreColor:e.label.style.color,cssClass:"apexcharts-point-annotation-label ".concat(e.label.style.cssClass," ").concat(e.id?e.id:"")});if(d.attr({rel:n}),t.appendChild(d.node),e.customSVG.SVG){var f=this.annoCtx.graphics.group({class:"apexcharts-point-annotations-custom-svg "+e.customSVG.cssClass});f.attr({transform:"translate(".concat(s+e.customSVG.offsetX,", ").concat(a+e.customSVG.offsetY,")")}),f.node.innerHTML=e.customSVG.SVG,t.appendChild(f.node)}if(e.image.path){var g=e.image.width?e.image.width:20,m=e.image.height?e.image.height:20;h=this.annoCtx.addImage({x:s+e.image.offsetX-g/2,y:a+e.image.offsetY-m/2,width:g,height:m,path:e.image.path,appendTo:".apexcharts-point-annotations"})}e.mouseEnter&&h.node.addEventListener("mouseenter",e.mouseEnter.bind(this,e)),e.mouseLeave&&h.node.addEventListener("mouseleave",e.mouseLeave.bind(this,e)),e.click&&h.node.addEventListener("click",e.click.bind(this,e))}}}},{key:"drawPointAnnotations",value:function(){var e=this,t=this.w,n=this.annoCtx.graphics.group({class:"apexcharts-point-annotations"});return t.config.annotations.points.map(function(r,s){e.addPointAnnotation(r,n.node,s)}),n}}]),i}(),a0={name:"en",options:{months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],toolbar:{exportToSVG:"Download SVG",exportToPNG:"Download PNG",exportToCSV:"Download CSV",menu:"Menu",selection:"Selection",selectionZoom:"Selection Zoom",zoomIn:"Zoom In",zoomOut:"Zoom Out",pan:"Panning",reset:"Reset Zoom"}}},Os=function(){function i(){Ee(this,i),this.yAxis={show:!0,showAlways:!1,showForNullSeries:!0,seriesName:void 0,opposite:!1,reversed:!1,logarithmic:!1,logBase:10,tickAmount:void 0,stepSize:void 0,forceNiceScale:!1,max:void 0,min:void 0,floating:!1,decimalsInFloat:void 0,labels:{show:!0,showDuplicates:!1,minWidth:0,maxWidth:160,offsetX:0,offsetY:0,align:void 0,rotate:0,padding:20,style:{colors:[],fontSize:"11px",fontWeight:400,fontFamily:void 0,cssClass:""},formatter:void 0},axisBorder:{show:!1,color:"#e0e0e0",width:1,offsetX:0,offsetY:0},axisTicks:{show:!1,color:"#e0e0e0",width:6,offsetX:0,offsetY:0},title:{text:void 0,rotate:-90,offsetY:0,offsetX:0,style:{color:void 0,fontSize:"11px",fontWeight:900,fontFamily:void 0,cssClass:""}},tooltip:{enabled:!1,offsetX:0},crosshairs:{show:!0,position:"front",stroke:{color:"#b6b6b6",width:1,dashArray:0}}},this.pointAnnotation={id:void 0,x:0,y:null,yAxisIndex:0,seriesIndex:void 0,mouseEnter:void 0,mouseLeave:void 0,click:void 0,marker:{size:4,fillColor:"#fff",strokeWidth:2,strokeColor:"#333",shape:"circle",offsetX:0,offsetY:0,cssClass:""},label:{borderColor:"#c2c2c2",borderWidth:1,borderRadius:2,text:void 0,textAnchor:"middle",offsetX:0,offsetY:0,mouseEnter:void 0,mouseLeave:void 0,click:void 0,style:{background:"#fff",color:void 0,fontSize:"11px",fontFamily:void 0,fontWeight:400,cssClass:"",padding:{left:5,right:5,top:2,bottom:2}}},customSVG:{SVG:void 0,cssClass:void 0,offsetX:0,offsetY:0},image:{path:void 0,width:20,height:20,offsetX:0,offsetY:0}},this.yAxisAnnotation={id:void 0,y:0,y2:null,strokeDashArray:1,fillColor:"#c2c2c2",borderColor:"#c2c2c2",borderWidth:1,opacity:.3,offsetX:0,offsetY:0,width:"100%",yAxisIndex:0,label:{borderColor:"#c2c2c2",borderWidth:1,borderRadius:2,text:void 0,textAnchor:"end",position:"right",offsetX:0,offsetY:-3,mouseEnter:void 0,mouseLeave:void 0,click:void 0,style:{background:"#fff",color:void 0,fontSize:"11px",fontFamily:void 0,fontWeight:400,cssClass:"",padding:{left:5,right:5,top:2,bottom:2}}}},this.xAxisAnnotation={id:void 0,x:0,x2:null,strokeDashArray:1,fillColor:"#c2c2c2",borderColor:"#c2c2c2",borderWidth:1,opacity:.3,offsetX:0,offsetY:0,label:{borderColor:"#c2c2c2",borderWidth:1,borderRadius:2,text:void 0,textAnchor:"middle",orientation:"vertical",position:"top",offsetX:0,offsetY:0,mouseEnter:void 0,mouseLeave:void 0,click:void 0,style:{background:"#fff",color:void 0,fontSize:"11px",fontFamily:void 0,fontWeight:400,cssClass:"",padding:{left:5,right:5,top:2,bottom:2}}}},this.text={x:0,y:0,text:"",textAnchor:"start",foreColor:void 0,fontSize:"13px",fontFamily:void 0,fontWeight:400,appendTo:".apexcharts-annotations",backgroundColor:"transparent",borderColor:"#c2c2c2",borderRadius:0,borderWidth:0,paddingLeft:4,paddingRight:4,paddingTop:2,paddingBottom:2}}return Oe(i,[{key:"init",value:function(){return{annotations:{yaxis:[this.yAxisAnnotation],xaxis:[this.xAxisAnnotation],points:[this.pointAnnotation],texts:[],images:[],shapes:[]},chart:{animations:{enabled:!0,speed:800,animateGradually:{delay:150,enabled:!0},dynamicAnimation:{enabled:!0,speed:350}},background:"",locales:[a0],defaultLocale:"en",dropShadow:{enabled:!1,enabledOnSeries:void 0,top:2,left:2,blur:4,color:"#000",opacity:.7},events:{animationEnd:void 0,beforeMount:void 0,mounted:void 0,updated:void 0,click:void 0,mouseMove:void 0,mouseLeave:void 0,xAxisLabelClick:void 0,legendClick:void 0,markerClick:void 0,selection:void 0,dataPointSelection:void 0,dataPointMouseEnter:void 0,dataPointMouseLeave:void 0,beforeZoom:void 0,beforeResetZoom:void 0,zoomed:void 0,scrolled:void 0,brushScrolled:void 0},foreColor:"#373d3f",fontFamily:"Helvetica, Arial, sans-serif",height:"auto",parentHeightOffset:15,redrawOnParentResize:!0,redrawOnWindowResize:!0,id:void 0,group:void 0,nonce:void 0,offsetX:0,offsetY:0,selection:{enabled:!1,type:"x",fill:{color:"#24292e",opacity:.1},stroke:{width:1,color:"#24292e",opacity:.4,dashArray:3},xaxis:{min:void 0,max:void 0},yaxis:{min:void 0,max:void 0}},sparkline:{enabled:!1},brush:{enabled:!1,autoScaleYaxis:!0,target:void 0,targets:void 0},stacked:!1,stackOnlyBar:!0,stackType:"normal",toolbar:{show:!0,offsetX:0,offsetY:0,tools:{download:!0,selection:!0,zoom:!0,zoomin:!0,zoomout:!0,pan:!0,reset:!0,customIcons:[]},export:{csv:{filename:void 0,columnDelimiter:",",headerCategory:"category",headerValue:"value",categoryFormatter:void 0,valueFormatter:void 0},png:{filename:void 0},svg:{filename:void 0},scale:void 0,width:void 0},autoSelected:"zoom"},type:"line",width:"100%",zoom:{enabled:!0,type:"x",autoScaleYaxis:!1,allowMouseWheelZoom:!0,zoomedArea:{fill:{color:"#90CAF9",opacity:.4},stroke:{color:"#0D47A1",opacity:.4,width:1}}}},plotOptions:{line:{isSlopeChart:!1,colors:{threshold:0,colorAboveThreshold:void 0,colorBelowThreshold:void 0}},area:{fillTo:"origin"},bar:{horizontal:!1,columnWidth:"70%",barHeight:"70%",distributed:!1,borderRadius:0,borderRadiusApplication:"around",borderRadiusWhenStacked:"last",rangeBarOverlap:!0,rangeBarGroupRows:!1,hideZeroBarsWhenGrouped:!1,isDumbbell:!1,dumbbellColors:void 0,isFunnel:!1,isFunnel3d:!0,colors:{ranges:[],backgroundBarColors:[],backgroundBarOpacity:1,backgroundBarRadius:0},dataLabels:{position:"top",maxItems:100,hideOverflowingLabels:!0,orientation:"horizontal",total:{enabled:!1,formatter:void 0,offsetX:0,offsetY:0,style:{color:"#373d3f",fontSize:"12px",fontFamily:void 0,fontWeight:600}}}},bubble:{zScaling:!0,minBubbleRadius:void 0,maxBubbleRadius:void 0},candlestick:{colors:{upward:"#00B746",downward:"#EF403C"},wick:{useFillColor:!0}},boxPlot:{colors:{upper:"#00E396",lower:"#008FFB"}},heatmap:{radius:2,enableShades:!0,shadeIntensity:.5,reverseNegativeShade:!1,distributed:!1,useFillColorAsStroke:!1,colorScale:{inverse:!1,ranges:[],min:void 0,max:void 0}},treemap:{enableShades:!0,shadeIntensity:.5,distributed:!1,reverseNegativeShade:!1,useFillColorAsStroke:!1,borderRadius:4,dataLabels:{format:"scale"},colorScale:{inverse:!1,ranges:[],min:void 0,max:void 0},seriesTitle:{show:!0,offsetY:1,offsetX:1,borderColor:"#000",borderWidth:1,borderRadius:2,style:{background:"rgba(0, 0, 0, 0.6)",color:"#fff",fontSize:"12px",fontFamily:void 0,fontWeight:400,cssClass:"",padding:{left:6,right:6,top:2,bottom:2}}}},radialBar:{inverseOrder:!1,startAngle:0,endAngle:360,offsetX:0,offsetY:0,hollow:{margin:5,size:"50%",background:"transparent",image:void 0,imageWidth:150,imageHeight:150,imageOffsetX:0,imageOffsetY:0,imageClipped:!0,position:"front",dropShadow:{enabled:!1,top:0,left:0,blur:3,color:"#000",opacity:.5}},track:{show:!0,startAngle:void 0,endAngle:void 0,background:"#f2f2f2",strokeWidth:"97%",opacity:1,margin:5,dropShadow:{enabled:!1,top:0,left:0,blur:3,color:"#000",opacity:.5}},dataLabels:{show:!0,name:{show:!0,fontSize:"16px",fontFamily:void 0,fontWeight:600,color:void 0,offsetY:0,formatter:function(e){return e}},value:{show:!0,fontSize:"14px",fontFamily:void 0,fontWeight:400,color:void 0,offsetY:16,formatter:function(e){return e+"%"}},total:{show:!1,label:"Total",fontSize:"16px",fontWeight:600,fontFamily:void 0,color:void 0,formatter:function(e){return e.globals.seriesTotals.reduce(function(t,n){return t+n},0)/e.globals.series.length+"%"}}},barLabels:{enabled:!1,offsetX:0,offsetY:0,useSeriesColors:!0,fontFamily:void 0,fontWeight:600,fontSize:"16px",formatter:function(e){return e},onClick:void 0}},pie:{customScale:1,offsetX:0,offsetY:0,startAngle:0,endAngle:360,expandOnClick:!0,dataLabels:{offset:0,minAngleToShowLabel:10},donut:{size:"65%",background:"transparent",labels:{show:!1,name:{show:!0,fontSize:"16px",fontFamily:void 0,fontWeight:600,color:void 0,offsetY:-10,formatter:function(e){return e}},value:{show:!0,fontSize:"20px",fontFamily:void 0,fontWeight:400,color:void 0,offsetY:10,formatter:function(e){return e}},total:{show:!1,showAlways:!1,label:"Total",fontSize:"16px",fontWeight:400,fontFamily:void 0,color:void 0,formatter:function(e){return e.globals.seriesTotals.reduce(function(t,n){return t+n},0)}}}}},polarArea:{rings:{strokeWidth:1,strokeColor:"#e8e8e8"},spokes:{strokeWidth:1,connectorColors:"#e8e8e8"}},radar:{size:void 0,offsetX:0,offsetY:0,polygons:{strokeWidth:1,strokeColors:"#e8e8e8",connectorColors:"#e8e8e8",fill:{colors:void 0}}}},colors:void 0,dataLabels:{enabled:!0,enabledOnSeries:void 0,formatter:function(e){return e!==null?e:""},textAnchor:"middle",distributed:!1,offsetX:0,offsetY:0,style:{fontSize:"12px",fontFamily:void 0,fontWeight:600,colors:void 0},background:{enabled:!0,foreColor:"#fff",borderRadius:2,padding:4,opacity:.9,borderWidth:1,borderColor:"#fff",dropShadow:{enabled:!1,top:1,left:1,blur:1,color:"#000",opacity:.8}},dropShadow:{enabled:!1,top:1,left:1,blur:1,color:"#000",opacity:.8}},fill:{type:"solid",colors:void 0,opacity:.85,gradient:{shade:"dark",type:"horizontal",shadeIntensity:.5,gradientToColors:void 0,inverseColors:!0,opacityFrom:1,opacityTo:1,stops:[0,50,100],colorStops:[]},image:{src:[],width:void 0,height:void 0},pattern:{style:"squares",width:6,height:6,strokeWidth:2}},forecastDataPoints:{count:0,fillOpacity:.5,strokeWidth:void 0,dashArray:4},grid:{show:!0,borderColor:"#e0e0e0",strokeDashArray:0,position:"back",xaxis:{lines:{show:!1}},yaxis:{lines:{show:!0}},row:{colors:void 0,opacity:.5},column:{colors:void 0,opacity:.5},padding:{top:0,right:10,bottom:0,left:12}},labels:[],legend:{show:!0,showForSingleSeries:!1,showForNullSeries:!0,showForZeroSeries:!0,floating:!1,position:"bottom",horizontalAlign:"center",inverseOrder:!1,fontSize:"12px",fontFamily:void 0,fontWeight:400,width:void 0,height:void 0,formatter:void 0,tooltipHoverFormatter:void 0,offsetX:-20,offsetY:4,customLegendItems:[],clusterGroupedSeries:!0,clusterGroupedSeriesOrientation:"vertical",labels:{colors:void 0,useSeriesColors:!1},markers:{size:7,fillColors:void 0,strokeWidth:1,shape:void 0,offsetX:0,offsetY:0,customHTML:void 0,onClick:void 0},itemMargin:{horizontal:5,vertical:4},onItemClick:{toggleDataSeries:!0},onItemHover:{highlightDataSeries:!0}},markers:{discrete:[],size:0,colors:void 0,strokeColors:"#fff",strokeWidth:2,strokeOpacity:.9,strokeDashArray:0,fillOpacity:1,shape:"circle",offsetX:0,offsetY:0,showNullDataPoints:!0,onClick:void 0,onDblClick:void 0,hover:{size:void 0,sizeOffset:3}},noData:{text:void 0,align:"center",verticalAlign:"middle",offsetX:0,offsetY:0,style:{color:void 0,fontSize:"14px",fontFamily:void 0}},responsive:[],series:void 0,states:{hover:{filter:{type:"lighten"}},active:{allowMultipleDataPointsSelection:!1,filter:{type:"darken"}}},title:{text:void 0,align:"left",margin:5,offsetX:0,offsetY:0,floating:!1,style:{fontSize:"14px",fontWeight:900,fontFamily:void 0,color:void 0}},subtitle:{text:void 0,align:"left",margin:5,offsetX:0,offsetY:30,floating:!1,style:{fontSize:"12px",fontWeight:400,fontFamily:void 0,color:void 0}},stroke:{show:!0,curve:"smooth",lineCap:"butt",width:2,colors:void 0,dashArray:0,fill:{type:"solid",colors:void 0,opacity:.85,gradient:{shade:"dark",type:"horizontal",shadeIntensity:.5,gradientToColors:void 0,inverseColors:!0,opacityFrom:1,opacityTo:1,stops:[0,50,100],colorStops:[]}}},tooltip:{enabled:!0,enabledOnSeries:void 0,shared:!0,hideEmptySeries:!1,followCursor:!1,intersect:!1,inverseOrder:!1,custom:void 0,fillSeriesColor:!1,theme:"light",cssClass:"",style:{fontSize:"12px",fontFamily:void 0},onDatasetHover:{highlightDataSeries:!1},x:{show:!0,format:"dd MMM",formatter:void 0},y:{formatter:void 0,title:{formatter:function(e){return e?e+": ":""}}},z:{formatter:void 0,title:"Size: "},marker:{show:!0,fillColors:void 0},items:{display:"flex"},fixed:{enabled:!1,position:"topRight",offsetX:0,offsetY:0}},xaxis:{type:"category",categories:[],convertedCatToNumeric:!1,offsetX:0,offsetY:0,overwriteCategories:void 0,labels:{show:!0,rotate:-45,rotateAlways:!1,hideOverlappingLabels:!0,trim:!1,minHeight:void 0,maxHeight:120,showDuplicates:!0,style:{colors:[],fontSize:"12px",fontWeight:400,fontFamily:void 0,cssClass:""},offsetX:0,offsetY:0,format:void 0,formatter:void 0,datetimeUTC:!0,datetimeFormatter:{year:"yyyy",month:"MMM 'yy",day:"dd MMM",hour:"HH:mm",minute:"HH:mm:ss",second:"HH:mm:ss"}},group:{groups:[],style:{colors:[],fontSize:"12px",fontWeight:400,fontFamily:void 0,cssClass:""}},axisBorder:{show:!0,color:"#e0e0e0",width:"100%",height:1,offsetX:0,offsetY:0},axisTicks:{show:!0,color:"#e0e0e0",height:6,offsetX:0,offsetY:0},stepSize:void 0,tickAmount:void 0,tickPlacement:"on",min:void 0,max:void 0,range:void 0,floating:!1,decimalsInFloat:void 0,position:"bottom",title:{text:void 0,offsetX:0,offsetY:0,style:{color:void 0,fontSize:"12px",fontWeight:900,fontFamily:void 0,cssClass:""}},crosshairs:{show:!0,width:1,position:"back",opacity:.9,stroke:{color:"#b6b6b6",width:1,dashArray:3},fill:{type:"solid",color:"#B1B9C4",gradient:{colorFrom:"#D8E3F0",colorTo:"#BED1E6",stops:[0,100],opacityFrom:.4,opacityTo:.5}},dropShadow:{enabled:!1,left:0,top:0,blur:1,opacity:.8}},tooltip:{enabled:!0,offsetY:0,formatter:void 0,style:{fontSize:"12px",fontFamily:void 0}}},yaxis:this.yAxis,theme:{mode:"",palette:"palette1",monochrome:{enabled:!1,color:"#008FFB",shadeTo:"light",shadeIntensity:.65}}}}}]),i}(),eP=function(){function i(e){Ee(this,i),this.ctx=e,this.w=e.w,this.graphics=new oe(this.ctx),this.w.globals.isBarHorizontal&&(this.invertAxis=!0),this.helpers=new mh(this),this.xAxisAnnotations=new JI(this),this.yAxisAnnotations=new ZI(this),this.pointsAnnotations=new QI(this),this.w.globals.isBarHorizontal&&this.w.config.yaxis[0].reversed&&(this.inversedReversedAxis=!0),this.xDivision=this.w.globals.gridWidth/this.w.globals.dataPoints}return Oe(i,[{key:"drawAxesAnnotations",value:function(){var e=this.w;if(e.globals.axisCharts&&e.globals.dataPoints){for(var t=this.yAxisAnnotations.drawYAxisAnnotations(),n=this.xAxisAnnotations.drawXAxisAnnotations(),r=this.pointsAnnotations.drawPointAnnotations(),s=e.config.chart.animations.enabled,o=[t,n,r],a=[n.node,t.node,r.node],l=0;l<3;l++)e.globals.dom.elGraphical.add(o[l]),!s||e.globals.resized||e.globals.dataChanged||e.config.chart.type!=="scatter"&&e.config.chart.type!=="bubble"&&e.globals.dataPoints>1&&a[l].classList.add("apexcharts-element-hidden"),e.globals.delayedElements.push({el:a[l],index:0});this.helpers.annotationsBackground()}}},{key:"drawImageAnnos",value:function(){var e=this;this.w.config.annotations.images.map(function(t,n){e.addImage(t,n)})}},{key:"drawTextAnnos",value:function(){var e=this;this.w.config.annotations.texts.map(function(t,n){e.addText(t,n)})}},{key:"addXaxisAnnotation",value:function(e,t,n){this.xAxisAnnotations.addXaxisAnnotation(e,t,n)}},{key:"addYaxisAnnotation",value:function(e,t,n){this.yAxisAnnotations.addYaxisAnnotation(e,t,n)}},{key:"addPointAnnotation",value:function(e,t,n){this.pointsAnnotations.addPointAnnotation(e,t,n)}},{key:"addText",value:function(e,t){var n=e.x,r=e.y,s=e.text,o=e.textAnchor,a=e.foreColor,l=e.fontSize,c=e.fontFamily,h=e.fontWeight,u=e.cssClass,d=e.backgroundColor,f=e.borderWidth,g=e.strokeDashArray,m=e.borderRadius,b=e.borderColor,y=e.appendTo,w=y===void 0?".apexcharts-svg":y,C=e.paddingLeft,M=C===void 0?4:C,S=e.paddingRight,O=S===void 0?4:S,T=e.paddingBottom,I=T===void 0?2:T,R=e.paddingTop,z=R===void 0?2:R,D=this.w,B=this.graphics.drawText({x:n,y:r,text:s,textAnchor:o||"start",fontSize:l||"12px",fontWeight:h||"regular",fontFamily:c||D.config.chart.fontFamily,foreColor:a||D.config.chart.foreColor,cssClass:u}),K=D.globals.dom.baseEl.querySelector(w);K&&K.appendChild(B.node);var J=B.bbox();if(s){var se=this.graphics.drawRect(J.x-M,J.y-z,J.width+M+O,J.height+I+z,m,d||"transparent",1,f,b,g);K.insertBefore(se.node,B.node)}}},{key:"addImage",value:function(e,t){var n=this.w,r=e.path,s=e.x,o=s===void 0?0:s,a=e.y,l=a===void 0?0:a,c=e.width,h=c===void 0?20:c,u=e.height,d=u===void 0?20:u,f=e.appendTo,g=f===void 0?".apexcharts-svg":f,m=n.globals.dom.Paper.image(r);m.size(h,d).move(o,l);var b=n.globals.dom.baseEl.querySelector(g);return b&&b.appendChild(m.node),m}},{key:"addXaxisAnnotationExternal",value:function(e,t,n){return this.addAnnotationExternal({params:e,pushToMemory:t,context:n,type:"xaxis",contextMethod:n.addXaxisAnnotation}),n}},{key:"addYaxisAnnotationExternal",value:function(e,t,n){return this.addAnnotationExternal({params:e,pushToMemory:t,context:n,type:"yaxis",contextMethod:n.addYaxisAnnotation}),n}},{key:"addPointAnnotationExternal",value:function(e,t,n){return this.invertAxis===void 0&&(this.invertAxis=n.w.globals.isBarHorizontal),this.addAnnotationExternal({params:e,pushToMemory:t,context:n,type:"point",contextMethod:n.addPointAnnotation}),n}},{key:"addAnnotationExternal",value:function(e){var t=e.params,n=e.pushToMemory,r=e.context,s=e.type,o=e.contextMethod,a=r,l=a.w,c=l.globals.dom.baseEl.querySelector(".apexcharts-".concat(s,"-annotations")),h=c.childNodes.length+1,u=new Os,d=Object.assign({},s==="xaxis"?u.xAxisAnnotation:s==="yaxis"?u.yAxisAnnotation:u.pointAnnotation),f=H.extend(d,t);switch(s){case"xaxis":this.addXaxisAnnotation(f,c,h);break;case"yaxis":this.addYaxisAnnotation(f,c,h);break;case"point":this.addPointAnnotation(f,c,h)}var g=l.globals.dom.baseEl.querySelector(".apexcharts-".concat(s,"-annotations .apexcharts-").concat(s,"-annotation-label[rel='").concat(h,"']")),m=this.helpers.addBackgroundToAnno(g,f);return m&&c.insertBefore(m.node,g),n&&l.globals.memory.methodsToExec.push({context:a,id:f.id?f.id:H.randomId(),method:o,label:"addAnnotation",params:t}),r}},{key:"clearAnnotations",value:function(e){for(var t=e.w,n=t.globals.dom.baseEl.querySelectorAll(".apexcharts-yaxis-annotations, .apexcharts-xaxis-annotations, .apexcharts-point-annotations"),r=t.globals.memory.methodsToExec.length-1;r>=0;r--)t.globals.memory.methodsToExec[r].label!=="addText"&&t.globals.memory.methodsToExec[r].label!=="addAnnotation"||t.globals.memory.methodsToExec.splice(r,1);n=H.listToArray(n),Array.prototype.forEach.call(n,function(s){for(;s.firstChild;)s.removeChild(s.firstChild)})}},{key:"removeAnnotation",value:function(e,t){var n=e.w,r=n.globals.dom.baseEl.querySelectorAll(".".concat(t));r&&(n.globals.memory.methodsToExec.map(function(s,o){s.id===t&&n.globals.memory.methodsToExec.splice(o,1)}),Array.prototype.forEach.call(r,function(s){s.parentElement.removeChild(s)}))}}]),i}(),ip=function(i){var e,t=i.isTimeline,n=i.ctx,r=i.seriesIndex,s=i.dataPointIndex,o=i.y1,a=i.y2,l=i.w,c=l.globals.seriesRangeStart[r][s],h=l.globals.seriesRangeEnd[r][s],u=l.globals.labels[s],d=l.config.series[r].name?l.config.series[r].name:"",f=l.globals.ttKeyFormatter,g=l.config.tooltip.y.title.formatter,m={w:l,seriesIndex:r,dataPointIndex:s,start:c,end:h};typeof g=="function"&&(d=g(d,m)),(e=l.config.series[r].data[s])!==null&&e!==void 0&&e.x&&(u=l.config.series[r].data[s].x),t||l.config.xaxis.type==="datetime"&&(u=new Ya(n).xLabelFormat(l.globals.ttKeyFormatter,u,u,{i:void 0,dateFormatter:new dn(n).formatDate,w:l})),typeof f=="function"&&(u=f(u,m)),Number.isFinite(o)&&Number.isFinite(a)&&(c=o,h=a);var b="",y="",w=l.globals.colors[r];if(l.config.tooltip.x.formatter===void 0)if(l.config.xaxis.type==="datetime"){var C=new dn(n);b=C.formatDate(C.getDate(c),l.config.tooltip.x.format),y=C.formatDate(C.getDate(h),l.config.tooltip.x.format)}else b=c,y=h;else b=l.config.tooltip.x.formatter(c),y=l.config.tooltip.x.formatter(h);return{start:c,end:h,startVal:b,endVal:y,ylabel:u,color:w,seriesName:d}},rp=function(i){var e=i.color,t=i.seriesName,n=i.ylabel,r=i.start,s=i.end,o=i.seriesIndex,a=i.dataPointIndex,l=i.ctx.tooltip.tooltipLabels.getFormatters(o);r=l.yLbFormatter(r),s=l.yLbFormatter(s);var c=l.yLbFormatter(i.w.globals.series[o][a]),h=`<span class="value start-value">
      `.concat(r,`
      </span> <span class="separator">-</span> <span class="value end-value">
      `).concat(s,`
      </span>`);return'<div class="apexcharts-tooltip-rangebar"><div> <span class="series-name" style="color: '+e+'">'+(t||"")+'</span></div><div> <span class="category">'+n+": </span> "+(i.w.globals.comboCharts?i.w.config.series[o].type==="rangeArea"||i.w.config.series[o].type==="rangeBar"?h:"<span>".concat(c,"</span>"):h)+" </div></div>"},ja=function(){function i(e){Ee(this,i),this.opts=e}return Oe(i,[{key:"hideYAxis",value:function(){this.opts.yaxis[0].show=!1,this.opts.yaxis[0].title.text="",this.opts.yaxis[0].axisBorder.show=!1,this.opts.yaxis[0].axisTicks.show=!1,this.opts.yaxis[0].floating=!0}},{key:"line",value:function(){return{dataLabels:{enabled:!1},stroke:{width:5,curve:"straight"},markers:{size:0,hover:{sizeOffset:6}},xaxis:{crosshairs:{width:1}}}}},{key:"sparkline",value:function(e){return this.hideYAxis(),H.extend(e,{grid:{show:!1,padding:{left:0,right:0,top:0,bottom:0}},legend:{show:!1},xaxis:{labels:{show:!1},tooltip:{enabled:!1},axisBorder:{show:!1},axisTicks:{show:!1}},chart:{toolbar:{show:!1},zoom:{enabled:!1}},dataLabels:{enabled:!1}})}},{key:"slope",value:function(){return this.hideYAxis(),{chart:{toolbar:{show:!1},zoom:{enabled:!1}},dataLabels:{enabled:!0,formatter:function(e,t){var n=t.w.config.series[t.seriesIndex].name;return e!==null?n+": "+e:""},background:{enabled:!1},offsetX:-5},grid:{xaxis:{lines:{show:!0}},yaxis:{lines:{show:!1}}},xaxis:{position:"top",labels:{style:{fontSize:14,fontWeight:900}},tooltip:{enabled:!1},crosshairs:{show:!1}},markers:{size:8,hover:{sizeOffset:1}},legend:{show:!1},tooltip:{shared:!1,intersect:!0,followCursor:!0},stroke:{width:5,curve:"straight"}}}},{key:"bar",value:function(){return{chart:{stacked:!1},plotOptions:{bar:{dataLabels:{position:"center"}}},dataLabels:{style:{colors:["#fff"]},background:{enabled:!1}},stroke:{width:0,lineCap:"square"},fill:{opacity:.85},legend:{markers:{shape:"square"}},tooltip:{shared:!1,intersect:!0},xaxis:{tooltip:{enabled:!1},tickPlacement:"between",crosshairs:{width:"barWidth",position:"back",fill:{type:"gradient"},dropShadow:{enabled:!1},stroke:{width:0}}}}}},{key:"funnel",value:function(){return this.hideYAxis(),xe(xe({},this.bar()),{},{chart:{animations:{speed:800,animateGradually:{enabled:!1}}},plotOptions:{bar:{horizontal:!0,borderRadiusApplication:"around",borderRadius:0,dataLabels:{position:"center"}}},grid:{show:!1,padding:{left:0,right:0}},xaxis:{labels:{show:!1},tooltip:{enabled:!1},axisBorder:{show:!1},axisTicks:{show:!1}}})}},{key:"candlestick",value:function(){var e=this;return{stroke:{width:1,colors:["#333"]},fill:{opacity:1},dataLabels:{enabled:!1},tooltip:{shared:!0,custom:function(t){var n=t.seriesIndex,r=t.dataPointIndex,s=t.w;return e._getBoxTooltip(s,n,r,["Open","High","","Low","Close"],"candlestick")}},states:{active:{filter:{type:"none"}}},xaxis:{crosshairs:{width:1}}}}},{key:"boxPlot",value:function(){var e=this;return{chart:{animations:{dynamicAnimation:{enabled:!1}}},stroke:{width:1,colors:["#24292e"]},dataLabels:{enabled:!1},tooltip:{shared:!0,custom:function(t){var n=t.seriesIndex,r=t.dataPointIndex,s=t.w;return e._getBoxTooltip(s,n,r,["Minimum","Q1","Median","Q3","Maximum"],"boxPlot")}},markers:{size:7,strokeWidth:1,strokeColors:"#111"},xaxis:{crosshairs:{width:1}}}}},{key:"rangeBar",value:function(){return{chart:{animations:{animateGradually:!1}},stroke:{width:0,lineCap:"square"},plotOptions:{bar:{borderRadius:0,dataLabels:{position:"center"}}},dataLabels:{enabled:!1,formatter:function(e,t){t.ctx;var n=t.seriesIndex,r=t.dataPointIndex,s=t.w,o=function(){var a=s.globals.seriesRangeStart[n][r];return s.globals.seriesRangeEnd[n][r]-a};return s.globals.comboCharts?s.config.series[n].type==="rangeBar"||s.config.series[n].type==="rangeArea"?o():e:o()},background:{enabled:!1},style:{colors:["#fff"]}},markers:{size:10},tooltip:{shared:!1,followCursor:!0,custom:function(e){return e.w.config.plotOptions&&e.w.config.plotOptions.bar&&e.w.config.plotOptions.bar.horizontal?function(t){var n=ip(xe(xe({},t),{},{isTimeline:!0})),r=n.color,s=n.seriesName,o=n.ylabel,a=n.startVal,l=n.endVal;return rp(xe(xe({},t),{},{color:r,seriesName:s,ylabel:o,start:a,end:l}))}(e):function(t){var n=ip(t),r=n.color,s=n.seriesName,o=n.ylabel,a=n.start,l=n.end;return rp(xe(xe({},t),{},{color:r,seriesName:s,ylabel:o,start:a,end:l}))}(e)}},xaxis:{tickPlacement:"between",tooltip:{enabled:!1},crosshairs:{stroke:{width:0}}}}}},{key:"dumbbell",value:function(e){var t,n;return(t=e.plotOptions.bar)!==null&&t!==void 0&&t.barHeight||(e.plotOptions.bar.barHeight=2),(n=e.plotOptions.bar)!==null&&n!==void 0&&n.columnWidth||(e.plotOptions.bar.columnWidth=2),e}},{key:"area",value:function(){return{stroke:{width:4,fill:{type:"solid",gradient:{inverseColors:!1,shade:"light",type:"vertical",opacityFrom:.65,opacityTo:.5,stops:[0,100,100]}}},fill:{type:"gradient",gradient:{inverseColors:!1,shade:"light",type:"vertical",opacityFrom:.65,opacityTo:.5,stops:[0,100,100]}},markers:{size:0,hover:{sizeOffset:6}},tooltip:{followCursor:!1}}}},{key:"rangeArea",value:function(){return{stroke:{curve:"straight",width:0},fill:{type:"solid",opacity:.6},markers:{size:0},states:{hover:{filter:{type:"none"}},active:{filter:{type:"none"}}},tooltip:{intersect:!1,shared:!0,followCursor:!0,custom:function(e){return function(t){var n=ip(t),r=n.color,s=n.seriesName,o=n.ylabel,a=n.start,l=n.end;return rp(xe(xe({},t),{},{color:r,seriesName:s,ylabel:o,start:a,end:l}))}(e)}}}}},{key:"brush",value:function(e){return H.extend(e,{chart:{toolbar:{autoSelected:"selection",show:!1},zoom:{enabled:!1}},dataLabels:{enabled:!1},stroke:{width:1},tooltip:{enabled:!1},xaxis:{tooltip:{enabled:!1}}})}},{key:"stacked100",value:function(e){e.dataLabels=e.dataLabels||{},e.dataLabels.formatter=e.dataLabels.formatter||void 0;var t=e.dataLabels.formatter;return e.yaxis.forEach(function(n,r){e.yaxis[r].min=0,e.yaxis[r].max=100}),e.chart.type==="bar"&&(e.dataLabels.formatter=t||function(n){return typeof n=="number"&&n?n.toFixed(0)+"%":n}),e}},{key:"stackedBars",value:function(){var e=this.bar();return xe(xe({},e),{},{plotOptions:xe(xe({},e.plotOptions),{},{bar:xe(xe({},e.plotOptions.bar),{},{borderRadiusApplication:"end",borderRadiusWhenStacked:"last"})})})}},{key:"convertCatToNumeric",value:function(e){return e.xaxis.convertedCatToNumeric=!0,e}},{key:"convertCatToNumericXaxis",value:function(e,t,n){e.xaxis.type="numeric",e.xaxis.labels=e.xaxis.labels||{},e.xaxis.labels.formatter=e.xaxis.labels.formatter||function(o){return H.isNumber(o)?Math.floor(o):o};var r=e.xaxis.labels.formatter,s=e.xaxis.categories&&e.xaxis.categories.length?e.xaxis.categories:e.labels;return n&&n.length&&(s=n.map(function(o){return Array.isArray(o)?o:String(o)})),s&&s.length&&(e.xaxis.labels.formatter=function(o){return H.isNumber(o)?r(s[Math.floor(o)-1]):r(o)}),e.xaxis.categories=[],e.labels=[],e.xaxis.tickAmount=e.xaxis.tickAmount||"dataPoints",e}},{key:"bubble",value:function(){return{dataLabels:{style:{colors:["#fff"]}},tooltip:{shared:!1,intersect:!0},xaxis:{crosshairs:{width:0}},fill:{type:"solid",gradient:{shade:"light",inverse:!0,shadeIntensity:.55,opacityFrom:.4,opacityTo:.8}}}}},{key:"scatter",value:function(){return{dataLabels:{enabled:!1},tooltip:{shared:!1,intersect:!0},markers:{size:6,strokeWidth:1,hover:{sizeOffset:2}}}}},{key:"heatmap",value:function(){return{chart:{stacked:!1},fill:{opacity:1},dataLabels:{style:{colors:["#fff"]}},stroke:{colors:["#fff"]},tooltip:{followCursor:!0,marker:{show:!1},x:{show:!1}},legend:{position:"top",markers:{shape:"square"}},grid:{padding:{right:20}}}}},{key:"treemap",value:function(){return{chart:{zoom:{enabled:!1}},dataLabels:{style:{fontSize:14,fontWeight:600,colors:["#fff"]}},stroke:{show:!0,width:2,colors:["#fff"]},legend:{show:!1},fill:{opacity:1,gradient:{stops:[0,100]}},tooltip:{followCursor:!0,x:{show:!1}},grid:{padding:{left:0,right:0}},xaxis:{crosshairs:{show:!1},tooltip:{enabled:!1}}}}},{key:"pie",value:function(){return{chart:{toolbar:{show:!1}},plotOptions:{pie:{donut:{labels:{show:!1}}}},dataLabels:{formatter:function(e){return e.toFixed(1)+"%"},style:{colors:["#fff"]},background:{enabled:!1},dropShadow:{enabled:!0}},stroke:{colors:["#fff"]},fill:{opacity:1,gradient:{shade:"light",stops:[0,100]}},tooltip:{theme:"dark",fillSeriesColor:!0},legend:{position:"right"},grid:{padding:{left:0,right:0,top:0,bottom:0}}}}},{key:"donut",value:function(){return{chart:{toolbar:{show:!1}},dataLabels:{formatter:function(e){return e.toFixed(1)+"%"},style:{colors:["#fff"]},background:{enabled:!1},dropShadow:{enabled:!0}},stroke:{colors:["#fff"]},fill:{opacity:1,gradient:{shade:"light",shadeIntensity:.35,stops:[80,100],opacityFrom:1,opacityTo:1}},tooltip:{theme:"dark",fillSeriesColor:!0},legend:{position:"right"},grid:{padding:{left:0,right:0,top:0,bottom:0}}}}},{key:"polarArea",value:function(){return{chart:{toolbar:{show:!1}},dataLabels:{formatter:function(e){return e.toFixed(1)+"%"},enabled:!1},stroke:{show:!0,width:2},fill:{opacity:.7},tooltip:{theme:"dark",fillSeriesColor:!0},legend:{position:"right"},grid:{padding:{left:0,right:0,top:0,bottom:0}}}}},{key:"radar",value:function(){return this.opts.yaxis[0].labels.offsetY=this.opts.yaxis[0].labels.offsetY?this.opts.yaxis[0].labels.offsetY:6,{dataLabels:{enabled:!1,style:{fontSize:"11px"}},stroke:{width:2},markers:{size:5,strokeWidth:1,strokeOpacity:1},fill:{opacity:.2},tooltip:{shared:!1,intersect:!0,followCursor:!0},grid:{show:!1,padding:{left:0,right:0,top:0,bottom:0}},xaxis:{labels:{formatter:function(e){return e},style:{colors:["#a8a8a8"],fontSize:"11px"}},tooltip:{enabled:!1},crosshairs:{show:!1}}}}},{key:"radialBar",value:function(){return{chart:{animations:{dynamicAnimation:{enabled:!0,speed:800}},toolbar:{show:!1}},fill:{gradient:{shade:"dark",shadeIntensity:.4,inverseColors:!1,type:"diagonal2",opacityFrom:1,opacityTo:1,stops:[70,98,100]}},legend:{show:!1,position:"right"},tooltip:{enabled:!1,fillSeriesColor:!0},grid:{padding:{left:0,right:0,top:0,bottom:0}}}}},{key:"_getBoxTooltip",value:function(e,t,n,r,s){var o=e.globals.seriesCandleO[t][n],a=e.globals.seriesCandleH[t][n],l=e.globals.seriesCandleM[t][n],c=e.globals.seriesCandleL[t][n],h=e.globals.seriesCandleC[t][n];return e.config.series[t].type&&e.config.series[t].type!==s?`<div class="apexcharts-custom-tooltip">
              `.concat(e.config.series[t].name?e.config.series[t].name:"series-"+(t+1),": <strong>").concat(e.globals.series[t][n],`</strong>
            </div>`):'<div class="apexcharts-tooltip-box apexcharts-tooltip-'.concat(e.config.chart.type,'">')+"<div>".concat(r[0],': <span class="value">')+o+"</span></div>"+"<div>".concat(r[1],': <span class="value">')+a+"</span></div>"+(l?"<div>".concat(r[2],': <span class="value">')+l+"</span></div>":"")+"<div>".concat(r[3],': <span class="value">')+c+"</span></div>"+"<div>".concat(r[4],': <span class="value">')+h+"</span></div></div>"}}]),i}(),Va=function(){function i(e){Ee(this,i),this.opts=e}return Oe(i,[{key:"init",value:function(e){var t=e.responsiveOverride,n=this.opts,r=new Os,s=new ja(n);this.chartType=n.chart.type,n=this.extendYAxis(n),n=this.extendAnnotations(n);var o=r.init(),a={};if(n&&uo(n)==="object"){var l,c,h,u,d,f,g,m,b,y,w={};w=["line","area","bar","candlestick","boxPlot","rangeBar","rangeArea","bubble","scatter","heatmap","treemap","pie","polarArea","donut","radar","radialBar"].indexOf(n.chart.type)!==-1?s[n.chart.type]():s.line(),(l=n.plotOptions)!==null&&l!==void 0&&(c=l.bar)!==null&&c!==void 0&&c.isFunnel&&(w=s.funnel()),n.chart.stacked&&n.chart.type==="bar"&&(w=s.stackedBars()),(h=n.chart.brush)!==null&&h!==void 0&&h.enabled&&(w=s.brush(w)),(u=n.plotOptions)!==null&&u!==void 0&&(d=u.line)!==null&&d!==void 0&&d.isSlopeChart&&(w=s.slope()),n.chart.stacked&&n.chart.stackType==="100%"&&(n=s.stacked100(n)),(f=n.plotOptions)!==null&&f!==void 0&&(g=f.bar)!==null&&g!==void 0&&g.isDumbbell&&(n=s.dumbbell(n)),this.checkForDarkTheme(window.Apex),this.checkForDarkTheme(n),n.xaxis=n.xaxis||window.Apex.xaxis||{},t||(n.xaxis.convertedCatToNumeric=!1),((m=(n=this.checkForCatToNumericXAxis(this.chartType,w,n)).chart.sparkline)!==null&&m!==void 0&&m.enabled||(b=window.Apex.chart)!==null&&b!==void 0&&(y=b.sparkline)!==null&&y!==void 0&&y.enabled)&&(w=s.sparkline(w)),a=H.extend(o,w)}var C=H.extend(a,window.Apex);return o=H.extend(C,n),o=this.handleUserInputErrors(o)}},{key:"checkForCatToNumericXAxis",value:function(e,t,n){var r,s,o=new ja(n),a=(e==="bar"||e==="boxPlot")&&((r=n.plotOptions)===null||r===void 0||(s=r.bar)===null||s===void 0?void 0:s.horizontal),l=e==="pie"||e==="polarArea"||e==="donut"||e==="radar"||e==="radialBar"||e==="heatmap",c=n.xaxis.type!=="datetime"&&n.xaxis.type!=="numeric",h=n.xaxis.tickPlacement?n.xaxis.tickPlacement:t.xaxis&&t.xaxis.tickPlacement;return a||l||!c||h==="between"||(n=o.convertCatToNumeric(n)),n}},{key:"extendYAxis",value:function(e,t){var n=new Os;(e.yaxis===void 0||!e.yaxis||Array.isArray(e.yaxis)&&e.yaxis.length===0)&&(e.yaxis={}),e.yaxis.constructor!==Array&&window.Apex.yaxis&&window.Apex.yaxis.constructor!==Array&&(e.yaxis=H.extend(e.yaxis,window.Apex.yaxis)),e.yaxis.constructor!==Array?e.yaxis=[H.extend(n.yAxis,e.yaxis)]:e.yaxis=H.extendArray(e.yaxis,n.yAxis);var r=!1;e.yaxis.forEach(function(o){o.logarithmic&&(r=!0)});var s=e.series;return t&&!s&&(s=t.config.series),r&&s.length!==e.yaxis.length&&s.length&&(e.yaxis=s.map(function(o,a){if(o.name||(s[a].name="series-".concat(a+1)),e.yaxis[a])return e.yaxis[a].seriesName=s[a].name,e.yaxis[a];var l=H.extend(n.yAxis,e.yaxis[0]);return l.show=!1,l})),r&&s.length>1&&s.length!==e.yaxis.length&&console.warn("A multi-series logarithmic chart should have equal number of series and y-axes"),e}},{key:"extendAnnotations",value:function(e){return e.annotations===void 0&&(e.annotations={},e.annotations.yaxis=[],e.annotations.xaxis=[],e.annotations.points=[]),e=this.extendYAxisAnnotations(e),e=this.extendXAxisAnnotations(e),e=this.extendPointAnnotations(e)}},{key:"extendYAxisAnnotations",value:function(e){var t=new Os;return e.annotations.yaxis=H.extendArray(e.annotations.yaxis!==void 0?e.annotations.yaxis:[],t.yAxisAnnotation),e}},{key:"extendXAxisAnnotations",value:function(e){var t=new Os;return e.annotations.xaxis=H.extendArray(e.annotations.xaxis!==void 0?e.annotations.xaxis:[],t.xAxisAnnotation),e}},{key:"extendPointAnnotations",value:function(e){var t=new Os;return e.annotations.points=H.extendArray(e.annotations.points!==void 0?e.annotations.points:[],t.pointAnnotation),e}},{key:"checkForDarkTheme",value:function(e){e.theme&&e.theme.mode==="dark"&&(e.tooltip||(e.tooltip={}),e.tooltip.theme!=="light"&&(e.tooltip.theme="dark"),e.chart.foreColor||(e.chart.foreColor="#f6f7f8"),e.theme.palette||(e.theme.palette="palette4"))}},{key:"handleUserInputErrors",value:function(e){var t=e;if(t.tooltip.shared&&t.tooltip.intersect)throw new Error("tooltip.shared cannot be enabled when tooltip.intersect is true. Turn off any other option by setting it to false.");if(t.chart.type==="bar"&&t.plotOptions.bar.horizontal){if(t.yaxis.length>1)throw new Error("Multiple Y Axis for bars are not supported. Switch to column chart by setting plotOptions.bar.horizontal=false");t.yaxis[0].reversed&&(t.yaxis[0].opposite=!0),t.xaxis.tooltip.enabled=!1,t.yaxis[0].tooltip.enabled=!1,t.chart.zoom.enabled=!1}return t.chart.type!=="bar"&&t.chart.type!=="rangeBar"||t.tooltip.shared&&t.xaxis.crosshairs.width==="barWidth"&&t.series.length>1&&(t.xaxis.crosshairs.width="tickWidth"),t.chart.type!=="candlestick"&&t.chart.type!=="boxPlot"||t.yaxis[0].reversed&&(console.warn("Reversed y-axis in ".concat(t.chart.type," chart is not supported.")),t.yaxis[0].reversed=!1),t}}]),i}(),l0=function(){function i(){Ee(this,i)}return Oe(i,[{key:"initGlobalVars",value:function(e){e.series=[],e.seriesCandleO=[],e.seriesCandleH=[],e.seriesCandleM=[],e.seriesCandleL=[],e.seriesCandleC=[],e.seriesRangeStart=[],e.seriesRangeEnd=[],e.seriesRange=[],e.seriesPercent=[],e.seriesGoals=[],e.seriesX=[],e.seriesZ=[],e.seriesNames=[],e.seriesTotals=[],e.seriesLog=[],e.seriesColors=[],e.stackedSeriesTotals=[],e.seriesXvalues=[],e.seriesYvalues=[],e.labels=[],e.hasXaxisGroups=!1,e.groups=[],e.barGroups=[],e.lineGroups=[],e.areaGroups=[],e.hasSeriesGroups=!1,e.seriesGroups=[],e.categoryLabels=[],e.timescaleLabels=[],e.noLabelsProvided=!1,e.resizeTimer=null,e.selectionResizeTimer=null,e.lastWheelExecution=0,e.delayedElements=[],e.pointsArray=[],e.dataLabelsRects=[],e.isXNumeric=!1,e.skipLastTimelinelabel=!1,e.skipFirstTimelinelabel=!1,e.isDataXYZ=!1,e.isMultiLineX=!1,e.isMultipleYAxis=!1,e.maxY=-Number.MAX_VALUE,e.minY=Number.MIN_VALUE,e.minYArr=[],e.maxYArr=[],e.maxX=-Number.MAX_VALUE,e.minX=Number.MAX_VALUE,e.initialMaxX=-Number.MAX_VALUE,e.initialMinX=Number.MAX_VALUE,e.maxDate=0,e.minDate=Number.MAX_VALUE,e.minZ=Number.MAX_VALUE,e.maxZ=-Number.MAX_VALUE,e.minXDiff=Number.MAX_VALUE,e.yAxisScale=[],e.xAxisScale=null,e.xAxisTicksPositions=[],e.yLabelsCoords=[],e.yTitleCoords=[],e.barPadForNumericAxis=0,e.padHorizontal=0,e.xRange=0,e.yRange=[],e.zRange=0,e.dataPoints=0,e.xTickAmount=0,e.multiAxisTickAmount=0}},{key:"globalVars",value:function(e){return{chartID:null,cuid:null,events:{beforeMount:[],mounted:[],updated:[],clicked:[],selection:[],dataPointSelection:[],zoomed:[],scrolled:[]},colors:[],clientX:null,clientY:null,fill:{colors:[]},stroke:{colors:[]},dataLabels:{style:{colors:[]}},radarPolygons:{fill:{colors:[]}},markers:{colors:[],size:e.markers.size,largestSize:0},animationEnded:!1,isTouchDevice:"ontouchstart"in window||navigator.msMaxTouchPoints,isDirty:!1,isExecCalled:!1,initialConfig:null,initialSeries:[],lastXAxis:[],lastYAxis:[],columnSeries:null,labels:[],timescaleLabels:[],noLabelsProvided:!1,allSeriesCollapsed:!1,collapsedSeries:[],collapsedSeriesIndices:[],ancillaryCollapsedSeries:[],ancillaryCollapsedSeriesIndices:[],risingSeries:[],dataFormatXNumeric:!1,capturedSeriesIndex:-1,capturedDataPointIndex:-1,selectedDataPoints:[],invalidLogScale:!1,ignoreYAxisIndexes:[],maxValsInArrayIndex:0,radialSize:0,selection:void 0,zoomEnabled:e.chart.toolbar.autoSelected==="zoom"&&e.chart.toolbar.tools.zoom&&e.chart.zoom.enabled,panEnabled:e.chart.toolbar.autoSelected==="pan"&&e.chart.toolbar.tools.pan,selectionEnabled:e.chart.toolbar.autoSelected==="selection"&&e.chart.toolbar.tools.selection,yaxis:null,mousedown:!1,lastClientPosition:{},visibleXRange:void 0,yValueDecimal:0,total:0,SVGNS:"http://www.w3.org/2000/svg",svgWidth:0,svgHeight:0,noData:!1,locale:{},dom:{},memory:{methodsToExec:[]},shouldAnimate:!0,skipLastTimelinelabel:!1,skipFirstTimelinelabel:!1,delayedElements:[],axisCharts:!0,isDataXYZ:!1,isSlopeChart:e.plotOptions.line.isSlopeChart,resized:!1,resizeTimer:null,comboCharts:!1,dataChanged:!1,previousPaths:[],allSeriesHasEqualX:!0,pointsArray:[],dataLabelsRects:[],lastDrawnDataLabelsIndexes:[],hasNullValues:!1,zoomed:!1,gridWidth:0,gridHeight:0,rotateXLabels:!1,defaultLabels:!1,xLabelFormatter:void 0,yLabelFormatters:[],xaxisTooltipFormatter:void 0,ttKeyFormatter:void 0,ttVal:void 0,ttZFormatter:void 0,LINE_HEIGHT_RATIO:1.618,xAxisLabelsHeight:0,xAxisGroupLabelsHeight:0,xAxisLabelsWidth:0,yAxisLabelsWidth:0,scaleX:1,scaleY:1,translateX:0,translateY:0,translateYAxisX:[],yAxisWidths:[],translateXAxisY:0,translateXAxisX:0,tooltip:null,niceScaleAllowedMagMsd:[[1,1,2,5,5,5,10,10,10,10,10],[1,1,2,5,5,5,10,10,10,10,10]],niceScaleDefaultTicks:[1,2,4,4,6,6,6,6,6,6,6,6,6,6,6,6,6,6,12,12,12,12,12,12,12,12,12,24],seriesYAxisMap:[],seriesYAxisReverseMap:[]}}},{key:"init",value:function(e){var t=this.globalVars(e);return this.initGlobalVars(t),t.initialConfig=H.extend({},e),t.initialSeries=H.clone(e.series),t.lastXAxis=H.clone(t.initialConfig.xaxis),t.lastYAxis=H.clone(t.initialConfig.yaxis),t}}]),i}(),tP=function(){function i(e){Ee(this,i),this.opts=e}return Oe(i,[{key:"init",value:function(){var e=new Va(this.opts).init({responsiveOverride:!1});return{config:e,globals:new l0().init(e)}}}]),i}(),ki=function(){function i(e){Ee(this,i),this.ctx=e,this.w=e.w,this.opts=null,this.seriesIndex=0,this.patternIDs=[]}return Oe(i,[{key:"clippedImgArea",value:function(e){var t=this.w,n=t.config,r=parseInt(t.globals.gridWidth,10),s=parseInt(t.globals.gridHeight,10),o=r>s?r:s,a=e.image,l=0,c=0;e.width===void 0&&e.height===void 0?n.fill.image.width!==void 0&&n.fill.image.height!==void 0?(l=n.fill.image.width+1,c=n.fill.image.height):(l=o+1,c=o):(l=e.width,c=e.height);var h=document.createElementNS(t.globals.SVGNS,"pattern");oe.setAttrs(h,{id:e.patternID,patternUnits:e.patternUnits?e.patternUnits:"userSpaceOnUse",width:l+"px",height:c+"px"});var u=document.createElementNS(t.globals.SVGNS,"image");h.appendChild(u),u.setAttributeNS(window.SVG.xlink,"href",a),oe.setAttrs(u,{x:0,y:0,preserveAspectRatio:"none",width:l+"px",height:c+"px"}),u.style.opacity=e.opacity,t.globals.dom.elDefs.node.appendChild(h)}},{key:"getSeriesIndex",value:function(e){var t=this.w,n=t.config.chart.type;return(n==="bar"||n==="rangeBar")&&t.config.plotOptions.bar.distributed||n==="heatmap"||n==="treemap"?this.seriesIndex=e.seriesNumber:this.seriesIndex=e.seriesNumber%t.globals.series.length,this.seriesIndex}},{key:"computeColorStops",value:function(e,t){var n,r=this.w,s=null,o=null,a=La(e);try{for(a.s();!(n=a.n()).done;){var l=n.value;l>=t.threshold?(s===null||l>s)&&(s=l):(o===null||l<o)&&(o=l)}}catch(u){a.e(u)}finally{a.f()}s===null&&(s=t.threshold),o===null&&(o=t.threshold);var c=s-t.threshold+(t.threshold-o);c===0&&(c=1);var h=100-(t.threshold-o)/c*100;return[{offset:h=Math.max(0,Math.min(h,100)),color:t.colorAboveThreshold,opacity:r.config.fill.opacity},{offset:0,color:t.colorBelowThreshold,opacity:r.config.fill.opacity}]}},{key:"fillPath",value:function(e){var t,n,r,s=this.w;this.opts=e;var o,a,l,c=this.w.config;this.seriesIndex=this.getSeriesIndex(e);var h=c.plotOptions.line.colors.colorAboveThreshold&&c.plotOptions.line.colors.colorBelowThreshold,u=this.getFillColors()[this.seriesIndex];s.globals.seriesColors[this.seriesIndex]!==void 0&&(u=s.globals.seriesColors[this.seriesIndex]),typeof u=="function"&&(u=u({seriesIndex:this.seriesIndex,dataPointIndex:e.dataPointIndex,value:e.value,w:s}));var d,f,g,m=e.fillType?e.fillType:this.getFillType(this.seriesIndex),b=Array.isArray(c.fill.opacity)?c.fill.opacity[this.seriesIndex]:c.fill.opacity,y=m==="gradient"||h;e.color&&(u=e.color),(t=s.config.series[this.seriesIndex])!==null&&t!==void 0&&(n=t.data)!==null&&n!==void 0&&(r=n[e.dataPointIndex])!==null&&r!==void 0&&r.fillColor&&(u=(d=s.config.series[this.seriesIndex])===null||d===void 0||(f=d.data)===null||f===void 0||(g=f[e.dataPointIndex])===null||g===void 0?void 0:g.fillColor),u||(u="#fff",console.warn("undefined color - ApexCharts"));var w=u;if(u.indexOf("rgb")===-1?u.indexOf("#")===-1?w=u:u.length<9&&(w=H.hexToRgba(u,b)):u.indexOf("rgba")>-1?b=H.getOpacityFromRGBA(u):w=H.hexToRgba(H.rgb2hex(u),b),e.opacity&&(b=e.opacity),m==="pattern"&&(a=this.handlePatternFill({fillConfig:e.fillConfig,patternFill:a,fillColor:u,fillOpacity:b,defaultColor:w})),y){var C=Gt(c.fill.gradient.colorStops)||[],M=c.fill.gradient.type;h&&(C[this.seriesIndex]=this.computeColorStops(s.globals.series[this.seriesIndex],c.plotOptions.line.colors),M="vertical"),l=this.handleGradientFill({type:M,fillConfig:e.fillConfig,fillColor:u,fillOpacity:b,colorStops:C,i:this.seriesIndex})}if(m==="image"){var S=c.fill.image.src,O=e.patternID?e.patternID:"",T="pattern".concat(s.globals.cuid).concat(e.seriesNumber+1).concat(O);this.patternIDs.indexOf(T)===-1&&(this.clippedImgArea({opacity:b,image:Array.isArray(S)?e.seriesNumber<S.length?S[e.seriesNumber]:S[0]:S,width:e.width?e.width:void 0,height:e.height?e.height:void 0,patternUnits:e.patternUnits,patternID:T}),this.patternIDs.push(T)),o="url(#".concat(T,")")}else o=y?l:m==="pattern"?a:w;return e.solid&&(o=w),o}},{key:"getFillType",value:function(e){var t=this.w;return Array.isArray(t.config.fill.type)?t.config.fill.type[e]:t.config.fill.type}},{key:"getFillColors",value:function(){var e=this.w,t=e.config,n=this.opts,r=[];return e.globals.comboCharts?e.config.series[this.seriesIndex].type==="line"?Array.isArray(e.globals.stroke.colors)?r=e.globals.stroke.colors:r.push(e.globals.stroke.colors):Array.isArray(e.globals.fill.colors)?r=e.globals.fill.colors:r.push(e.globals.fill.colors):t.chart.type==="line"?Array.isArray(e.globals.stroke.colors)?r=e.globals.stroke.colors:r.push(e.globals.stroke.colors):Array.isArray(e.globals.fill.colors)?r=e.globals.fill.colors:r.push(e.globals.fill.colors),n.fillColors!==void 0&&(r=[],Array.isArray(n.fillColors)?r=n.fillColors.slice():r.push(n.fillColors)),r}},{key:"handlePatternFill",value:function(e){var t=e.fillConfig,n=e.patternFill,r=e.fillColor,s=e.fillOpacity,o=e.defaultColor,a=this.w.config.fill;t&&(a=t);var l=this.opts,c=new oe(this.ctx),h=Array.isArray(a.pattern.strokeWidth)?a.pattern.strokeWidth[this.seriesIndex]:a.pattern.strokeWidth,u=r;return Array.isArray(a.pattern.style)?n=a.pattern.style[l.seriesNumber]!==void 0?c.drawPattern(a.pattern.style[l.seriesNumber],a.pattern.width,a.pattern.height,u,h,s):o:n=c.drawPattern(a.pattern.style,a.pattern.width,a.pattern.height,u,h,s),n}},{key:"handleGradientFill",value:function(e){var t=e.type,n=e.fillColor,r=e.fillOpacity,s=e.fillConfig,o=e.colorStops,a=e.i,l=this.w.config.fill;s&&(l=xe(xe({},l),s));var c=this.opts,h=new oe(this.ctx),u=new H;t=t||l.gradient.type;var d,f=n,g=l.gradient.opacityFrom===void 0?r:Array.isArray(l.gradient.opacityFrom)?l.gradient.opacityFrom[a]:l.gradient.opacityFrom;f.indexOf("rgba")>-1&&(g=H.getOpacityFromRGBA(f));var m=l.gradient.opacityTo===void 0?r:Array.isArray(l.gradient.opacityTo)?l.gradient.opacityTo[a]:l.gradient.opacityTo;if(l.gradient.gradientToColors===void 0||l.gradient.gradientToColors.length===0)d=l.gradient.shade==="dark"?u.shadeColor(-1*parseFloat(l.gradient.shadeIntensity),n.indexOf("rgb")>-1?H.rgb2hex(n):n):u.shadeColor(parseFloat(l.gradient.shadeIntensity),n.indexOf("rgb")>-1?H.rgb2hex(n):n);else if(l.gradient.gradientToColors[c.seriesNumber]){var b=l.gradient.gradientToColors[c.seriesNumber];d=b,b.indexOf("rgba")>-1&&(m=H.getOpacityFromRGBA(b))}else d=n;if(l.gradient.gradientFrom&&(f=l.gradient.gradientFrom),l.gradient.gradientTo&&(d=l.gradient.gradientTo),l.gradient.inverseColors){var y=f;f=d,d=y}return f.indexOf("rgb")>-1&&(f=H.rgb2hex(f)),d.indexOf("rgb")>-1&&(d=H.rgb2hex(d)),h.drawGradient(t,f,d,g,m,c.size,l.gradient.stops,o,a)}}]),i}(),wo=function(){function i(e,t){Ee(this,i),this.ctx=e,this.w=e.w}return Oe(i,[{key:"setGlobalMarkerSize",value:function(){var e=this.w;if(e.globals.markers.size=Array.isArray(e.config.markers.size)?e.config.markers.size:[e.config.markers.size],e.globals.markers.size.length>0){if(e.globals.markers.size.length<e.globals.series.length+1)for(var t=0;t<=e.globals.series.length;t++)e.globals.markers.size[t]===void 0&&e.globals.markers.size.push(e.globals.markers.size[0])}else e.globals.markers.size=e.config.series.map(function(n){return e.config.markers.size})}},{key:"plotChartMarkers",value:function(e){var t=e.pointsPos,n=e.seriesIndex,r=e.j,s=e.pSize,o=e.alwaysDrawMarker,a=o!==void 0&&o,l=e.isVirtualPoint,c=l!==void 0&&l,h=this.w,u=n,d=t,f=null,g=new oe(this.ctx),m=h.config.markers.discrete&&h.config.markers.discrete.length;if(Array.isArray(d.x))for(var b=0;b<d.x.length;b++){var y=void 0,w=r,C=!H.isNumber(d.y[b]);h.globals.markers.largestSize===0&&h.globals.hasNullValues&&h.globals.series[u][r+1]!==null&&!c&&(C=!0),r===1&&b===0&&(w=0),r===1&&b===1&&(w=1);var M="apexcharts-marker";if(h.config.chart.type!=="line"&&h.config.chart.type!=="area"||h.globals.comboCharts||h.config.tooltip.intersect||(M+=" no-pointer-events"),(Array.isArray(h.config.markers.size)?h.globals.markers.size[n]>0:h.config.markers.size>0)||a||m){C||(M+=" w".concat(H.randomId()));var S=this.getMarkerConfig({cssClass:M,seriesIndex:n,dataPointIndex:w});h.config.series[u].data[w]&&(h.config.series[u].data[w].fillColor&&(S.pointFillColor=h.config.series[u].data[w].fillColor),h.config.series[u].data[w].strokeColor&&(S.pointStrokeColor=h.config.series[u].data[w].strokeColor)),s!==void 0&&(S.pSize=s),(d.x[b]<-h.globals.markers.largestSize||d.x[b]>h.globals.gridWidth+h.globals.markers.largestSize||d.y[b]<-h.globals.markers.largestSize||d.y[b]>h.globals.gridHeight+h.globals.markers.largestSize)&&(S.pSize=0),!C&&((h.globals.markers.size[n]>0||a||m)&&!f&&(f=g.group({class:a||m?"":"apexcharts-series-markers"})).attr("clip-path","url(#gridRectMarkerMask".concat(h.globals.cuid,")")),(y=g.drawMarker(d.x[b],d.y[b],S)).attr("rel",w),y.attr("j",w),y.attr("index",n),y.node.setAttribute("default-marker-size",S.pSize),new un(this.ctx).setSelectionFilter(y,n,w),this.addEvents(y),f&&f.add(y))}else h.globals.pointsArray[n]===void 0&&(h.globals.pointsArray[n]=[]),h.globals.pointsArray[n].push([d.x[b],d.y[b]])}return f}},{key:"getMarkerConfig",value:function(e){var t=e.cssClass,n=e.seriesIndex,r=e.dataPointIndex,s=r===void 0?null:r,o=e.radius,a=o===void 0?null:o,l=e.size,c=l===void 0?null:l,h=e.strokeWidth,u=h===void 0?null:h,d=this.w,f=this.getMarkerStyle(n),g=c===null?d.globals.markers.size[n]:c,m=d.config.markers;return s!==null&&m.discrete.length&&m.discrete.map(function(b){b.seriesIndex===n&&b.dataPointIndex===s&&(f.pointStrokeColor=b.strokeColor,f.pointFillColor=b.fillColor,g=b.size,f.pointShape=b.shape)}),{pSize:a===null?g:a,pRadius:a!==null?a:m.radius,pointStrokeWidth:u!==null?u:Array.isArray(m.strokeWidth)?m.strokeWidth[n]:m.strokeWidth,pointStrokeColor:f.pointStrokeColor,pointFillColor:f.pointFillColor,shape:f.pointShape||(Array.isArray(m.shape)?m.shape[n]:m.shape),class:t,pointStrokeOpacity:Array.isArray(m.strokeOpacity)?m.strokeOpacity[n]:m.strokeOpacity,pointStrokeDashArray:Array.isArray(m.strokeDashArray)?m.strokeDashArray[n]:m.strokeDashArray,pointFillOpacity:Array.isArray(m.fillOpacity)?m.fillOpacity[n]:m.fillOpacity,seriesIndex:n}}},{key:"addEvents",value:function(e){var t=this.w,n=new oe(this.ctx);e.node.addEventListener("mouseenter",n.pathMouseEnter.bind(this.ctx,e)),e.node.addEventListener("mouseleave",n.pathMouseLeave.bind(this.ctx,e)),e.node.addEventListener("mousedown",n.pathMouseDown.bind(this.ctx,e)),e.node.addEventListener("click",t.config.markers.onClick),e.node.addEventListener("dblclick",t.config.markers.onDblClick),e.node.addEventListener("touchstart",n.pathMouseDown.bind(this.ctx,e),{passive:!0})}},{key:"getMarkerStyle",value:function(e){var t=this.w,n=t.globals.markers.colors,r=t.config.markers.strokeColor||t.config.markers.strokeColors;return{pointStrokeColor:Array.isArray(r)?r[e]:r,pointFillColor:Array.isArray(n)?n[e]:n}}}]),i}(),c0=function(){function i(e){Ee(this,i),this.ctx=e,this.w=e.w,this.initialAnim=this.w.config.chart.animations.enabled}return Oe(i,[{key:"draw",value:function(e,t,n){var r=this.w,s=new oe(this.ctx),o=n.realIndex,a=n.pointsPos,l=n.zRatio,c=n.elParent,h=s.group({class:"apexcharts-series-markers apexcharts-series-".concat(r.config.chart.type)});if(h.attr("clip-path","url(#gridRectMarkerMask".concat(r.globals.cuid,")")),Array.isArray(a.x))for(var u=0;u<a.x.length;u++){var d=t+1,f=!0;t===0&&u===0&&(d=0),t===0&&u===1&&(d=1);var g=r.globals.markers.size[o];if(l!==1/0){var m=r.config.plotOptions.bubble;g=r.globals.seriesZ[o][d],m.zScaling&&(g/=l),m.minBubbleRadius&&g<m.minBubbleRadius&&(g=m.minBubbleRadius),m.maxBubbleRadius&&g>m.maxBubbleRadius&&(g=m.maxBubbleRadius)}var b=a.x[u],y=a.y[u];if(g=g||0,y!==null&&r.globals.series[o][d]!==void 0||(f=!1),f){var w=this.drawPoint(b,y,g,o,d,t);h.add(w)}c.add(h)}}},{key:"drawPoint",value:function(e,t,n,r,s,o){var a=this.w,l=r,c=new fo(this.ctx),h=new un(this.ctx),u=new ki(this.ctx),d=new wo(this.ctx),f=new oe(this.ctx),g=d.getMarkerConfig({cssClass:"apexcharts-marker",seriesIndex:l,dataPointIndex:s,radius:a.config.chart.type==="bubble"||a.globals.comboCharts&&a.config.series[r]&&a.config.series[r].type==="bubble"?n:null}),m=u.fillPath({seriesNumber:r,dataPointIndex:s,color:g.pointFillColor,patternUnits:"objectBoundingBox",value:a.globals.series[r][o]}),b=f.drawMarker(e,t,g);if(a.config.series[l].data[s]&&a.config.series[l].data[s].fillColor&&(m=a.config.series[l].data[s].fillColor),b.attr({fill:m}),a.config.chart.dropShadow.enabled){var y=a.config.chart.dropShadow;h.dropShadow(b,y,r)}if(!this.initialAnim||a.globals.dataChanged||a.globals.resized)a.globals.animationEnded=!0;else{var w=a.config.chart.animations.speed;c.animateMarker(b,w,a.globals.easing,function(){window.setTimeout(function(){c.animationCompleted(b)},100)})}return b.attr({rel:s,j:s,index:r,"default-marker-size":g.pSize}),h.setSelectionFilter(b,r,s),d.addEvents(b),b.node.classList.add("apexcharts-marker"),b}},{key:"centerTextInBubble",value:function(e){var t=this.w;return{y:e+=parseInt(t.config.dataLabels.style.fontSize,10)/4}}}]),i}(),ko=function(){function i(e){Ee(this,i),this.ctx=e,this.w=e.w}return Oe(i,[{key:"dataLabelsCorrection",value:function(e,t,n,r,s,o,a){var l=this.w,c=!1,h=new oe(this.ctx).getTextRects(n,a),u=h.width,d=h.height;t<0&&(t=0),t>l.globals.gridHeight+d&&(t=l.globals.gridHeight+d/2),l.globals.dataLabelsRects[r]===void 0&&(l.globals.dataLabelsRects[r]=[]),l.globals.dataLabelsRects[r].push({x:e,y:t,width:u,height:d});var f=l.globals.dataLabelsRects[r].length-2,g=l.globals.lastDrawnDataLabelsIndexes[r]!==void 0?l.globals.lastDrawnDataLabelsIndexes[r][l.globals.lastDrawnDataLabelsIndexes[r].length-1]:0;if(l.globals.dataLabelsRects[r][f]!==void 0){var m=l.globals.dataLabelsRects[r][g];(e>m.x+m.width||t>m.y+m.height||t+d<m.y||e+u<m.x)&&(c=!0)}return(s===0||o)&&(c=!0),{x:e,y:t,textRects:h,drawnextLabel:c}}},{key:"drawDataLabel",value:function(e){var t=this,n=e.type,r=e.pos,s=e.i,o=e.j,a=e.isRangeStart,l=e.strokeWidth,c=l===void 0?2:l,h=this.w,u=new oe(this.ctx),d=h.config.dataLabels,f=0,g=0,m=o,b=null;if(h.globals.collapsedSeriesIndices.indexOf(s)!==-1||!d.enabled||!Array.isArray(r.x))return b;b=u.group({class:"apexcharts-data-labels"});for(var y=0;y<r.x.length;y++)if(f=r.x[y]+d.offsetX,g=r.y[y]+d.offsetY+c,!isNaN(f)){o===1&&y===0&&(m=0),o===1&&y===1&&(m=1);var w=h.globals.series[s][m];n==="rangeArea"&&(w=a?h.globals.seriesRangeStart[s][m]:h.globals.seriesRangeEnd[s][m]);var C="",M=function(O){return h.config.dataLabels.formatter(O,{ctx:t.ctx,seriesIndex:s,dataPointIndex:m,w:h})};h.config.chart.type==="bubble"?(C=M(w=h.globals.seriesZ[s][m]),g=r.y[y],g=new c0(this.ctx).centerTextInBubble(g,s,m).y):w!==void 0&&(C=M(w));var S=h.config.dataLabels.textAnchor;h.globals.isSlopeChart&&(S=m===0?"end":m===h.config.series[s].data.length-1?"start":"middle"),this.plotDataLabelsText({x:f,y:g,text:C,i:s,j:m,parent:b,offsetCorrection:!0,dataLabelsConfig:h.config.dataLabels,textAnchor:S})}return b}},{key:"plotDataLabelsText",value:function(e){var t=this.w,n=new oe(this.ctx),r=e.x,s=e.y,o=e.i,a=e.j,l=e.text,c=e.textAnchor,h=e.fontSize,u=e.parent,d=e.dataLabelsConfig,f=e.color,g=e.alwaysDrawDataLabel,m=e.offsetCorrection,b=e.className,y=null;if(Array.isArray(t.config.dataLabels.enabledOnSeries)&&t.config.dataLabels.enabledOnSeries.indexOf(o)<0)return y;var w={x:r,y:s,drawnextLabel:!0,textRects:null};m&&(w=this.dataLabelsCorrection(r,s,l,o,a,g,parseInt(d.style.fontSize,10))),t.globals.zoomed||(r=w.x,s=w.y),w.textRects&&(r<-20-w.textRects.width||r>t.globals.gridWidth+w.textRects.width+30)&&(l="");var C=t.globals.dataLabels.style.colors[o];((t.config.chart.type==="bar"||t.config.chart.type==="rangeBar")&&t.config.plotOptions.bar.distributed||t.config.dataLabels.distributed)&&(C=t.globals.dataLabels.style.colors[a]),typeof C=="function"&&(C=C({series:t.globals.series,seriesIndex:o,dataPointIndex:a,w:t})),f&&(C=f);var M=d.offsetX,S=d.offsetY;if(t.config.chart.type!=="bar"&&t.config.chart.type!=="rangeBar"||(M=0,S=0),t.globals.isSlopeChart&&(a!==0&&(M=-2*d.offsetX+5),a!==0&&a!==t.config.series[o].data.length-1&&(M=0)),w.drawnextLabel){if((y=n.drawText({width:100,height:parseInt(d.style.fontSize,10),x:r+M,y:s+S,foreColor:C,textAnchor:c||d.textAnchor,text:l,fontSize:h||d.style.fontSize,fontFamily:d.style.fontFamily,fontWeight:d.style.fontWeight||"normal"})).attr({class:b||"apexcharts-datalabel",cx:r,cy:s}),d.dropShadow.enabled){var O=d.dropShadow;new un(this.ctx).dropShadow(y,O)}u.add(y),t.globals.lastDrawnDataLabelsIndexes[o]===void 0&&(t.globals.lastDrawnDataLabelsIndexes[o]=[]),t.globals.lastDrawnDataLabelsIndexes[o].push(a)}return y}},{key:"addBackgroundToDataLabel",value:function(e,t){var n=this.w,r=n.config.dataLabels.background,s=r.padding,o=r.padding/2,a=t.width,l=t.height,c=new oe(this.ctx).drawRect(t.x-s,t.y-o/2,a+2*s,l+o,r.borderRadius,n.config.chart.background!=="transparent"&&n.config.chart.background?n.config.chart.background:"#fff",r.opacity,r.borderWidth,r.borderColor);return r.dropShadow.enabled&&new un(this.ctx).dropShadow(c,r.dropShadow),c}},{key:"dataLabelsBackground",value:function(){var e=this.w;if(e.config.chart.type!=="bubble")for(var t=e.globals.dom.baseEl.querySelectorAll(".apexcharts-datalabels text"),n=0;n<t.length;n++){var r=t[n],s=r.getBBox(),o=null;if(s.width&&s.height&&(o=this.addBackgroundToDataLabel(r,s)),o){r.parentNode.insertBefore(o.node,r);var a=r.getAttribute("fill");e.config.chart.animations.enabled&&!e.globals.resized&&!e.globals.dataChanged?o.animate().attr({fill:a}):o.attr({fill:a}),r.setAttribute("fill",e.config.dataLabels.background.foreColor)}}}},{key:"bringForward",value:function(){for(var e=this.w,t=e.globals.dom.baseEl.querySelectorAll(".apexcharts-datalabels"),n=e.globals.dom.baseEl.querySelector(".apexcharts-plot-series:last-child"),r=0;r<t.length;r++)n&&n.insertBefore(t[r],n.nextSibling)}}]),i}(),ci=function(){function i(e){Ee(this,i),this.ctx=e,this.w=e.w,this.legendInactiveClass="legend-mouseover-inactive"}return Oe(i,[{key:"getAllSeriesEls",value:function(){return this.w.globals.dom.baseEl.getElementsByClassName("apexcharts-series")}},{key:"getSeriesByName",value:function(e){return this.w.globals.dom.baseEl.querySelector(".apexcharts-inner .apexcharts-series[seriesName='".concat(H.escapeString(e),"']"))}},{key:"isSeriesHidden",value:function(e){var t=this.getSeriesByName(e),n=parseInt(t.getAttribute("data:realIndex"),10);return{isHidden:t.classList.contains("apexcharts-series-collapsed"),realIndex:n}}},{key:"addCollapsedClassToSeries",value:function(e,t){var n=this.w;function r(s){for(var o=0;o<s.length;o++)s[o].index===t&&e.node.classList.add("apexcharts-series-collapsed")}r(n.globals.collapsedSeries),r(n.globals.ancillaryCollapsedSeries)}},{key:"toggleSeries",value:function(e){var t=this.isSeriesHidden(e);return this.ctx.legend.legendHelpers.toggleDataSeries(t.realIndex,t.isHidden),t.isHidden}},{key:"showSeries",value:function(e){var t=this.isSeriesHidden(e);t.isHidden&&this.ctx.legend.legendHelpers.toggleDataSeries(t.realIndex,!0)}},{key:"hideSeries",value:function(e){var t=this.isSeriesHidden(e);t.isHidden||this.ctx.legend.legendHelpers.toggleDataSeries(t.realIndex,!1)}},{key:"resetSeries",value:function(){var e=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0],t=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1],n=!(arguments.length>2&&arguments[2]!==void 0)||arguments[2],r=this.w,s=H.clone(r.globals.initialSeries);r.globals.previousPaths=[],n?(r.globals.collapsedSeries=[],r.globals.ancillaryCollapsedSeries=[],r.globals.collapsedSeriesIndices=[],r.globals.ancillaryCollapsedSeriesIndices=[]):s=this.emptyCollapsedSeries(s),r.config.series=s,e&&(t&&(r.globals.zoomed=!1,this.ctx.updateHelpers.revertDefaultAxisMinMax()),this.ctx.updateHelpers._updateSeries(s,r.config.chart.animations.dynamicAnimation.enabled))}},{key:"emptyCollapsedSeries",value:function(e){for(var t=this.w,n=0;n<e.length;n++)t.globals.collapsedSeriesIndices.indexOf(n)>-1&&(e[n].data=[]);return e}},{key:"highlightSeries",value:function(e){var t=this.w,n=this.getSeriesByName(e),r=parseInt(n==null?void 0:n.getAttribute("data:realIndex"),10),s=t.globals.dom.baseEl.querySelectorAll(".apexcharts-series, .apexcharts-datalabels, .apexcharts-yaxis"),o=null,a=null,l=null;if(t.globals.axisCharts||t.config.chart.type==="radialBar")if(t.globals.axisCharts){o=t.globals.dom.baseEl.querySelector(".apexcharts-series[data\\:realIndex='".concat(r,"']")),a=t.globals.dom.baseEl.querySelector(".apexcharts-datalabels[data\\:realIndex='".concat(r,"']"));var c=t.globals.seriesYAxisReverseMap[r];l=t.globals.dom.baseEl.querySelector(".apexcharts-yaxis[rel='".concat(c,"']"))}else o=t.globals.dom.baseEl.querySelector(".apexcharts-series[rel='".concat(r+1,"']"));else o=t.globals.dom.baseEl.querySelector(".apexcharts-series[rel='".concat(r+1,"'] path"));for(var h=0;h<s.length;h++)s[h].classList.add(this.legendInactiveClass);if(o)t.globals.axisCharts||o.parentNode.classList.remove(this.legendInactiveClass),o.classList.remove(this.legendInactiveClass),a!==null&&a.classList.remove(this.legendInactiveClass),l!==null&&l.classList.remove(this.legendInactiveClass);else for(var u=0;u<s.length;u++)s[u].classList.remove(this.legendInactiveClass)}},{key:"toggleSeriesOnHover",value:function(e,t){var n=this.w;t||(t=e.target);var r=n.globals.dom.baseEl.querySelectorAll(".apexcharts-series, .apexcharts-datalabels, .apexcharts-yaxis");if(e.type==="mousemove"){var s=parseInt(t.getAttribute("rel"),10)-1;this.highlightSeries(n.globals.seriesNames[s])}else if(e.type==="mouseout")for(var o=0;o<r.length;o++)r[o].classList.remove(this.legendInactiveClass)}},{key:"highlightRangeInSeries",value:function(e,t){var n=this,r=this.w,s=r.globals.dom.baseEl.getElementsByClassName("apexcharts-heatmap-rect"),o=function(c){for(var h=0;h<s.length;h++)s[h].classList[c](n.legendInactiveClass)};if(e.type==="mousemove"){var a=parseInt(t.getAttribute("rel"),10)-1;o("add");var l=r.config.plotOptions.heatmap.colorScale.ranges;(function(c,h){for(var u=0;u<s.length;u++){var d=Number(s[u].getAttribute("val"));d>=c.from&&(d<c.to||c.to===h&&d===h)&&s[u].classList.remove(n.legendInactiveClass)}})(l[a],l.reduce(function(c,h){return Math.max(c,h.to)},0))}else e.type==="mouseout"&&o("remove")}},{key:"getActiveConfigSeriesIndex",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"asc",t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],n=this.w,r=0;if(n.config.series.length>1){for(var s=n.config.series.map(function(a,l){return a.data&&a.data.length>0&&n.globals.collapsedSeriesIndices.indexOf(l)===-1&&(!n.globals.comboCharts||t.length===0||t.length&&t.indexOf(n.config.series[l].type)>-1)?l:-1}),o=e==="asc"?0:s.length-1;e==="asc"?o<s.length:o>=0;e==="asc"?o++:o--)if(s[o]!==-1){r=s[o];break}}return r}},{key:"getBarSeriesIndices",value:function(){return this.w.globals.comboCharts?this.w.config.series.map(function(e,t){return e.type==="bar"||e.type==="column"?t:-1}).filter(function(e){return e!==-1}):this.w.config.series.map(function(e,t){return t})}},{key:"getPreviousPaths",value:function(){var e=this.w;function t(o,a,l){for(var c=o[a].childNodes,h={type:l,paths:[],realIndex:o[a].getAttribute("data:realIndex")},u=0;u<c.length;u++)if(c[u].hasAttribute("pathTo")){var d=c[u].getAttribute("pathTo");h.paths.push({d})}e.globals.previousPaths.push(h)}e.globals.previousPaths=[],["line","area","bar","rangebar","rangeArea","candlestick","radar"].forEach(function(o){for(var a,l=(a=o,e.globals.dom.baseEl.querySelectorAll(".apexcharts-".concat(a,"-series .apexcharts-series"))),c=0;c<l.length;c++)t(l,c,o)});var n=e.globals.dom.baseEl.querySelectorAll(".apexcharts-".concat(e.config.chart.type," .apexcharts-series"));if(n.length>0)for(var r=function(o){for(var a=e.globals.dom.baseEl.querySelectorAll(".apexcharts-".concat(e.config.chart.type," .apexcharts-series[data\\:realIndex='").concat(o,"'] rect")),l=[],c=function(u){var d=function(g){return a[u].getAttribute(g)},f={x:parseFloat(d("x")),y:parseFloat(d("y")),width:parseFloat(d("width")),height:parseFloat(d("height"))};l.push({rect:f,color:a[u].getAttribute("color")})},h=0;h<a.length;h++)c(h);e.globals.previousPaths.push(l)},s=0;s<n.length;s++)r(s);e.globals.axisCharts||(e.globals.previousPaths=e.globals.series)}},{key:"clearPreviousPaths",value:function(){var e=this.w;e.globals.previousPaths=[],e.globals.allSeriesCollapsed=!1}},{key:"handleNoData",value:function(){var e=this.w,t=e.config.noData,n=new oe(this.ctx),r=e.globals.svgWidth/2,s=e.globals.svgHeight/2,o="middle";if(e.globals.noData=!0,e.globals.animationEnded=!0,t.align==="left"?(r=10,o="start"):t.align==="right"&&(r=e.globals.svgWidth-10,o="end"),t.verticalAlign==="top"?s=50:t.verticalAlign==="bottom"&&(s=e.globals.svgHeight-50),r+=t.offsetX,s=s+parseInt(t.style.fontSize,10)+2+t.offsetY,t.text!==void 0&&t.text!==""){var a=n.drawText({x:r,y:s,text:t.text,textAnchor:o,fontSize:t.style.fontSize,fontFamily:t.style.fontFamily,foreColor:t.style.color,opacity:1,class:"apexcharts-text-nodata"});e.globals.dom.Paper.add(a)}}},{key:"setNullSeriesToZeroValues",value:function(e){for(var t=this.w,n=0;n<e.length;n++)if(e[n].length===0)for(var r=0;r<e[t.globals.maxValsInArrayIndex].length;r++)e[n].push(0);return e}},{key:"hasAllSeriesEqualX",value:function(){for(var e=!0,t=this.w,n=this.filteredSeriesX(),r=0;r<n.length-1;r++)if(n[r][0]!==n[r+1][0]){e=!1;break}return t.globals.allSeriesHasEqualX=e,e}},{key:"filteredSeriesX",value:function(){var e=this.w.globals.seriesX.map(function(t){return t.length>0?t:[]});return e}}]),i}(),sp=function(){function i(e){Ee(this,i),this.ctx=e,this.w=e.w,this.twoDSeries=[],this.threeDSeries=[],this.twoDSeriesX=[],this.seriesGoals=[],this.coreUtils=new Bt(this.ctx)}return Oe(i,[{key:"isMultiFormat",value:function(){return this.isFormatXY()||this.isFormat2DArray()}},{key:"isFormatXY",value:function(){var e=this.w.config.series.slice(),t=new ci(this.ctx);if(this.activeSeriesIndex=t.getActiveConfigSeriesIndex(),e[this.activeSeriesIndex].data!==void 0&&e[this.activeSeriesIndex].data.length>0&&e[this.activeSeriesIndex].data[0]!==null&&e[this.activeSeriesIndex].data[0].x!==void 0&&e[this.activeSeriesIndex].data[0]!==null)return!0}},{key:"isFormat2DArray",value:function(){var e=this.w.config.series.slice(),t=new ci(this.ctx);if(this.activeSeriesIndex=t.getActiveConfigSeriesIndex(),e[this.activeSeriesIndex].data!==void 0&&e[this.activeSeriesIndex].data.length>0&&e[this.activeSeriesIndex].data[0]!==void 0&&e[this.activeSeriesIndex].data[0]!==null&&e[this.activeSeriesIndex].data[0].constructor===Array)return!0}},{key:"handleFormat2DArray",value:function(e,t){for(var n=this.w.config,r=this.w.globals,s=n.chart.type==="boxPlot"||n.series[t].type==="boxPlot",o=0;o<e[t].data.length;o++)if(e[t].data[o][1]!==void 0&&(Array.isArray(e[t].data[o][1])&&e[t].data[o][1].length===4&&!s?this.twoDSeries.push(H.parseNumber(e[t].data[o][1][3])):e[t].data[o].length>=5?this.twoDSeries.push(H.parseNumber(e[t].data[o][4])):this.twoDSeries.push(H.parseNumber(e[t].data[o][1])),r.dataFormatXNumeric=!0),n.xaxis.type==="datetime"){var a=new Date(e[t].data[o][0]);a=new Date(a).getTime(),this.twoDSeriesX.push(a)}else this.twoDSeriesX.push(e[t].data[o][0]);for(var l=0;l<e[t].data.length;l++)e[t].data[l][2]!==void 0&&(this.threeDSeries.push(e[t].data[l][2]),r.isDataXYZ=!0)}},{key:"handleFormatXY",value:function(e,t){var n=this.w.config,r=this.w.globals,s=new dn(this.ctx),o=t;r.collapsedSeriesIndices.indexOf(t)>-1&&(o=this.activeSeriesIndex);for(var a=0;a<e[t].data.length;a++)e[t].data[a].y!==void 0&&(Array.isArray(e[t].data[a].y)?this.twoDSeries.push(H.parseNumber(e[t].data[a].y[e[t].data[a].y.length-1])):this.twoDSeries.push(H.parseNumber(e[t].data[a].y))),e[t].data[a].goals!==void 0&&Array.isArray(e[t].data[a].goals)?(this.seriesGoals[t]===void 0&&(this.seriesGoals[t]=[]),this.seriesGoals[t].push(e[t].data[a].goals)):(this.seriesGoals[t]===void 0&&(this.seriesGoals[t]=[]),this.seriesGoals[t].push(null));for(var l=0;l<e[o].data.length;l++){var c=typeof e[o].data[l].x=="string",h=Array.isArray(e[o].data[l].x),u=!h&&!!s.isValidDate(e[o].data[l].x);if(c||u)if(c||n.xaxis.convertedCatToNumeric){var d=r.isBarHorizontal&&r.isRangeData;n.xaxis.type!=="datetime"||d?(this.fallbackToCategory=!0,this.twoDSeriesX.push(e[o].data[l].x),isNaN(e[o].data[l].x)||this.w.config.xaxis.type==="category"||typeof e[o].data[l].x=="string"||(r.isXNumeric=!0)):this.twoDSeriesX.push(s.parseDate(e[o].data[l].x))}else n.xaxis.type==="datetime"?this.twoDSeriesX.push(s.parseDate(e[o].data[l].x.toString())):(r.dataFormatXNumeric=!0,r.isXNumeric=!0,this.twoDSeriesX.push(parseFloat(e[o].data[l].x)));else h?(this.fallbackToCategory=!0,this.twoDSeriesX.push(e[o].data[l].x)):(r.isXNumeric=!0,r.dataFormatXNumeric=!0,this.twoDSeriesX.push(e[o].data[l].x))}if(e[t].data[0]&&e[t].data[0].z!==void 0){for(var f=0;f<e[t].data.length;f++)this.threeDSeries.push(e[t].data[f].z);r.isDataXYZ=!0}}},{key:"handleRangeData",value:function(e,t){var n=this.w.globals,r={};return this.isFormat2DArray()?r=this.handleRangeDataFormat("array",e,t):this.isFormatXY()&&(r=this.handleRangeDataFormat("xy",e,t)),n.seriesRangeStart.push(r.start===void 0?[]:r.start),n.seriesRangeEnd.push(r.end===void 0?[]:r.end),n.seriesRange.push(r.rangeUniques),n.seriesRange.forEach(function(s,o){s&&s.forEach(function(a,l){a.y.forEach(function(c,h){for(var u=0;u<a.y.length;u++)if(h!==u){var d=c.y1,f=c.y2,g=a.y[u].y1;d<=a.y[u].y2&&g<=f&&(a.overlaps.indexOf(c.rangeName)<0&&a.overlaps.push(c.rangeName),a.overlaps.indexOf(a.y[u].rangeName)<0&&a.overlaps.push(a.y[u].rangeName))}})})}),r}},{key:"handleCandleStickBoxData",value:function(e,t){var n=this.w.globals,r={};return this.isFormat2DArray()?r=this.handleCandleStickBoxDataFormat("array",e,t):this.isFormatXY()&&(r=this.handleCandleStickBoxDataFormat("xy",e,t)),n.seriesCandleO[t]=r.o,n.seriesCandleH[t]=r.h,n.seriesCandleM[t]=r.m,n.seriesCandleL[t]=r.l,n.seriesCandleC[t]=r.c,r}},{key:"handleRangeDataFormat",value:function(e,t,n){var r=[],s=[],o=t[n].data.filter(function(h,u,d){return u===d.findIndex(function(f){return f.x===h.x})}).map(function(h,u){return{x:h.x,overlaps:[],y:[]}});if(e==="array")for(var a=0;a<t[n].data.length;a++)Array.isArray(t[n].data[a])?(r.push(t[n].data[a][1][0]),s.push(t[n].data[a][1][1])):(r.push(t[n].data[a]),s.push(t[n].data[a]));else if(e==="xy")for(var l=function(h){var u=Array.isArray(t[n].data[h].y),d=H.randomId(),f=t[n].data[h].x,g={y1:u?t[n].data[h].y[0]:t[n].data[h].y,y2:u?t[n].data[h].y[1]:t[n].data[h].y,rangeName:d};t[n].data[h].rangeName=d;var m=o.findIndex(function(b){return b.x===f});o[m].y.push(g),r.push(g.y1),s.push(g.y2)},c=0;c<t[n].data.length;c++)l(c);return{start:r,end:s,rangeUniques:o}}},{key:"handleCandleStickBoxDataFormat",value:function(e,t,n){var r=this.w,s=r.config.chart.type==="boxPlot"||r.config.series[n].type==="boxPlot",o=[],a=[],l=[],c=[],h=[];if(e==="array")if(s&&t[n].data[0].length===6||!s&&t[n].data[0].length===5)for(var u=0;u<t[n].data.length;u++)o.push(t[n].data[u][1]),a.push(t[n].data[u][2]),s?(l.push(t[n].data[u][3]),c.push(t[n].data[u][4]),h.push(t[n].data[u][5])):(c.push(t[n].data[u][3]),h.push(t[n].data[u][4]));else for(var d=0;d<t[n].data.length;d++)Array.isArray(t[n].data[d][1])&&(o.push(t[n].data[d][1][0]),a.push(t[n].data[d][1][1]),s?(l.push(t[n].data[d][1][2]),c.push(t[n].data[d][1][3]),h.push(t[n].data[d][1][4])):(c.push(t[n].data[d][1][2]),h.push(t[n].data[d][1][3])));else if(e==="xy")for(var f=0;f<t[n].data.length;f++)Array.isArray(t[n].data[f].y)&&(o.push(t[n].data[f].y[0]),a.push(t[n].data[f].y[1]),s?(l.push(t[n].data[f].y[2]),c.push(t[n].data[f].y[3]),h.push(t[n].data[f].y[4])):(c.push(t[n].data[f].y[2]),h.push(t[n].data[f].y[3])));return{o,h:a,m:l,l:c,c:h}}},{key:"parseDataAxisCharts",value:function(e){var t=this,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.ctx,r=this.w.config,s=this.w.globals,o=new dn(n),a=r.labels.length>0?r.labels.slice():r.xaxis.categories.slice();s.isRangeBar=r.chart.type==="rangeBar"&&s.isBarHorizontal,s.hasXaxisGroups=r.xaxis.type==="category"&&r.xaxis.group.groups.length>0,s.hasXaxisGroups&&(s.groups=r.xaxis.group.groups),e.forEach(function(f,g){f.name!==void 0?s.seriesNames.push(f.name):s.seriesNames.push("series-"+parseInt(g+1,10))}),this.coreUtils.setSeriesYAxisMappings();var l=[],c=Gt(new Set(r.series.map(function(f){return f.group})));r.series.forEach(function(f,g){var m=c.indexOf(f.group);l[m]||(l[m]=[]),l[m].push(s.seriesNames[g])}),s.seriesGroups=l;for(var h=function(){for(var f=0;f<a.length;f++)if(typeof a[f]=="string"){if(!o.isValidDate(a[f]))throw new Error("You have provided invalid Date format. Please provide a valid JavaScript Date");t.twoDSeriesX.push(o.parseDate(a[f]))}else t.twoDSeriesX.push(a[f])},u=0;u<e.length;u++){if(this.twoDSeries=[],this.twoDSeriesX=[],this.threeDSeries=[],e[u].data===void 0)return void console.error("It is a possibility that you may have not included 'data' property in series.");if(r.chart.type!=="rangeBar"&&r.chart.type!=="rangeArea"&&e[u].type!=="rangeBar"&&e[u].type!=="rangeArea"||(s.isRangeData=!0,r.chart.type!=="rangeBar"&&r.chart.type!=="rangeArea"||this.handleRangeData(e,u)),this.isMultiFormat())this.isFormat2DArray()?this.handleFormat2DArray(e,u):this.isFormatXY()&&this.handleFormatXY(e,u),r.chart.type!=="candlestick"&&e[u].type!=="candlestick"&&r.chart.type!=="boxPlot"&&e[u].type!=="boxPlot"||this.handleCandleStickBoxData(e,u),s.series.push(this.twoDSeries),s.labels.push(this.twoDSeriesX),s.seriesX.push(this.twoDSeriesX),s.seriesGoals=this.seriesGoals,u!==this.activeSeriesIndex||this.fallbackToCategory||(s.isXNumeric=!0);else{r.xaxis.type==="datetime"?(s.isXNumeric=!0,h(),s.seriesX.push(this.twoDSeriesX)):r.xaxis.type==="numeric"&&(s.isXNumeric=!0,a.length>0&&(this.twoDSeriesX=a,s.seriesX.push(this.twoDSeriesX))),s.labels.push(this.twoDSeriesX);var d=e[u].data.map(function(f){return H.parseNumber(f)});s.series.push(d)}s.seriesZ.push(this.threeDSeries),e[u].color!==void 0?s.seriesColors.push(e[u].color):s.seriesColors.push(void 0)}return this.w}},{key:"parseDataNonAxisCharts",value:function(e){var t=this.w.globals,n=this.w.config;t.series=e.slice(),t.seriesNames=n.labels.slice();for(var r=0;r<t.series.length;r++)t.seriesNames[r]===void 0&&t.seriesNames.push("series-"+(r+1));return this.w}},{key:"handleExternalLabelsData",value:function(e){var t=this.w.config,n=this.w.globals;t.xaxis.categories.length>0?n.labels=t.xaxis.categories:t.labels.length>0?n.labels=t.labels.slice():this.fallbackToCategory?(n.labels=n.labels[0],n.seriesRange.length&&(n.seriesRange.map(function(r){r.forEach(function(s){n.labels.indexOf(s.x)<0&&s.x&&n.labels.push(s.x)})}),n.labels=Array.from(new Set(n.labels.map(JSON.stringify)),JSON.parse)),t.xaxis.convertedCatToNumeric&&(new ja(t).convertCatToNumericXaxis(t,this.ctx,n.seriesX[0]),this._generateExternalLabels(e))):this._generateExternalLabels(e)}},{key:"_generateExternalLabels",value:function(e){var t=this.w.globals,n=this.w.config,r=[];if(t.axisCharts){if(t.series.length>0)if(this.isFormatXY())for(var s=n.series.map(function(u,d){return u.data.filter(function(f,g,m){return m.findIndex(function(b){return b.x===f.x})===g})}),o=s.reduce(function(u,d,f,g){return g[u].length>d.length?u:f},0),a=0;a<s[o].length;a++)r.push(a+1);else for(var l=0;l<t.series[t.maxValsInArrayIndex].length;l++)r.push(l+1);t.seriesX=[];for(var c=0;c<e.length;c++)t.seriesX.push(r);this.w.globals.isBarHorizontal||(t.isXNumeric=!0)}if(r.length===0){r=t.axisCharts?[]:t.series.map(function(u,d){return d+1});for(var h=0;h<e.length;h++)t.seriesX.push(r)}t.labels=r,n.xaxis.convertedCatToNumeric&&(t.categoryLabels=r.map(function(u){return n.xaxis.labels.formatter(u)})),t.noLabelsProvided=!0}},{key:"parseData",value:function(e){var t=this.w,n=t.config,r=t.globals;if(this.excludeCollapsedSeriesInYAxis(),this.fallbackToCategory=!1,this.ctx.core.resetGlobals(),this.ctx.core.isMultipleY(),r.axisCharts?(this.parseDataAxisCharts(e),this.coreUtils.getLargestSeries()):this.parseDataNonAxisCharts(e),n.chart.stacked){var s=new ci(this.ctx);r.series=s.setNullSeriesToZeroValues(r.series)}this.coreUtils.getSeriesTotals(),r.axisCharts&&(r.stackedSeriesTotals=this.coreUtils.getStackedSeriesTotals(),r.stackedSeriesTotalsByGroups=this.coreUtils.getStackedSeriesTotalsByGroups()),this.coreUtils.getPercentSeries(),r.dataFormatXNumeric||r.isXNumeric&&(n.xaxis.type!=="numeric"||n.labels.length!==0||n.xaxis.categories.length!==0)||this.handleExternalLabelsData(e);for(var o=this.coreUtils.getCategoryLabels(r.labels),a=0;a<o.length;a++)if(Array.isArray(o[a])){r.isMultiLineX=!0;break}}},{key:"excludeCollapsedSeriesInYAxis",value:function(){var e=this.w,t=[];e.globals.seriesYAxisMap.forEach(function(n,r){var s=0;n.forEach(function(o){e.globals.collapsedSeriesIndices.indexOf(o)!==-1&&s++}),s>0&&s==n.length&&t.push(r)}),e.globals.ignoreYAxisIndexes=t.map(function(n){return n})}}]),i}(),$a=function(){function i(e){Ee(this,i),this.ctx=e,this.w=e.w}return Oe(i,[{key:"svgStringToNode",value:function(e){return new DOMParser().parseFromString(e,"image/svg+xml").documentElement}},{key:"scaleSvgNode",value:function(e,t){var n=parseFloat(e.getAttributeNS(null,"width")),r=parseFloat(e.getAttributeNS(null,"height"));e.setAttributeNS(null,"width",n*t),e.setAttributeNS(null,"height",r*t),e.setAttributeNS(null,"viewBox","0 0 "+n+" "+r)}},{key:"getSvgString",value:function(e){var t=this;return new Promise(function(n){var r=t.w,s=e||r.config.chart.toolbar.export.scale||r.config.chart.toolbar.export.width/r.globals.svgWidth;s||(s=1);var o=r.globals.svgWidth*s,a=r.globals.svgHeight*s,l=r.globals.dom.elWrap.cloneNode(!0);l.style.width=o+"px",l.style.height=a+"px";var c=new XMLSerializer().serializeToString(l),h=`
            <svg xmlns="http://www.w3.org/2000/svg"
              version="1.1"
              xmlns:xlink="http://www.w3.org/1999/xlink"
              class="apexcharts-svg"
              xmlns:data="ApexChartsNS"
              transform="translate(0, 0)"
              width="`.concat(r.globals.svgWidth,'px" height="').concat(r.globals.svgHeight,`px">
              <foreignObject width="100%" height="100%">
                <div xmlns="http://www.w3.org/1999/xhtml" style="width:`).concat(o,"px; height:").concat(a,`px;">
                <style type="text/css">
                  .apexcharts-tooltip, .apexcharts-toolbar, .apexcharts-xaxistooltip, .apexcharts-yaxistooltip, .apexcharts-xcrosshairs, .apexcharts-ycrosshairs, .apexcharts-zoom-rect, .apexcharts-selection-rect {
                    display: none;
                  }
                </style>
                  `).concat(c,`
                </div>
              </foreignObject>
            </svg>
          `),u=t.svgStringToNode(h);s!==1&&t.scaleSvgNode(u,s),t.convertImagesToBase64(u).then(function(){h=new XMLSerializer().serializeToString(u),n(h.replace(/&nbsp;/g,"&#160;"))})})}},{key:"convertImagesToBase64",value:function(e){var t=this,n=e.getElementsByTagName("image"),r=Array.from(n).map(function(s){var o=s.getAttributeNS("http://www.w3.org/1999/xlink","href");return o&&!o.startsWith("data:")?t.getBase64FromUrl(o).then(function(a){s.setAttributeNS("http://www.w3.org/1999/xlink","href",a)}).catch(function(a){console.error("Error converting image to base64:",a)}):Promise.resolve()});return Promise.all(r)}},{key:"getBase64FromUrl",value:function(e){return new Promise(function(t,n){var r=new Image;r.crossOrigin="Anonymous",r.onload=function(){var s=document.createElement("canvas");s.width=r.width,s.height=r.height,s.getContext("2d").drawImage(r,0,0),t(s.toDataURL())},r.onerror=n,r.src=e})}},{key:"svgUrl",value:function(){var e=this;return new Promise(function(t){e.getSvgString().then(function(n){var r=new Blob([n],{type:"image/svg+xml;charset=utf-8"});t(URL.createObjectURL(r))})})}},{key:"dataURI",value:function(e){var t=this;return new Promise(function(n){var r=t.w,s=e?e.scale||e.width/r.globals.svgWidth:1,o=document.createElement("canvas");o.width=r.globals.svgWidth*s,o.height=parseInt(r.globals.dom.elWrap.style.height,10)*s;var a=r.config.chart.background!=="transparent"&&r.config.chart.background?r.config.chart.background:"#fff",l=o.getContext("2d");l.fillStyle=a,l.fillRect(0,0,o.width*s,o.height*s),t.getSvgString(s).then(function(c){var h="data:image/svg+xml,"+encodeURIComponent(c),u=new Image;u.crossOrigin="anonymous",u.onload=function(){if(l.drawImage(u,0,0),o.msToBlob){var d=o.msToBlob();n({blob:d})}else{var f=o.toDataURL("image/png");n({imgURI:f})}},u.src=h})})}},{key:"exportToSVG",value:function(){var e=this;this.svgUrl().then(function(t){e.triggerDownload(t,e.w.config.chart.toolbar.export.svg.filename,".svg")})}},{key:"exportToPng",value:function(){var e=this,t=this.w.config.chart.toolbar.export.scale,n=this.w.config.chart.toolbar.export.width,r=t?{scale:t}:n?{width:n}:void 0;this.dataURI(r).then(function(s){var o=s.imgURI,a=s.blob;a?navigator.msSaveOrOpenBlob(a,e.w.globals.chartID+".png"):e.triggerDownload(o,e.w.config.chart.toolbar.export.png.filename,".png")})}},{key:"exportToCSV",value:function(e){var t=this,n=e.series,r=e.fileName,s=e.columnDelimiter,o=s===void 0?",":s,a=e.lineDelimiter,l=a===void 0?`
    `:a,c=this.w;n||(n=c.config.series);var h=[],u=[],d="",f=c.globals.series.map(function(S,O){return c.globals.collapsedSeriesIndices.indexOf(O)===-1?S:[]}),g=function(S){return typeof c.config.chart.toolbar.export.csv.categoryFormatter=="function"?c.config.chart.toolbar.export.csv.categoryFormatter(S):c.config.xaxis.type==="datetime"&&String(S).length>=10?new Date(S).toDateString():H.isNumber(S)?S:S.split(o).join("")},m=function(S){return typeof c.config.chart.toolbar.export.csv.valueFormatter=="function"?c.config.chart.toolbar.export.csv.valueFormatter(S):S},b=Math.max.apply(Math,Gt(n.map(function(S){return S.data?S.data.length:0}))),y=new sp(this.ctx),w=new Br(this.ctx),C=function(S){var O="";if(c.globals.axisCharts){if(c.config.xaxis.type==="category"||c.config.xaxis.convertedCatToNumeric)if(c.globals.isBarHorizontal){var T=c.globals.yLabelFormatters[0],I=new ci(t.ctx).getActiveConfigSeriesIndex();O=T(c.globals.labels[S],{seriesIndex:I,dataPointIndex:S,w:c})}else O=w.getLabel(c.globals.labels,c.globals.timescaleLabels,0,S).text;c.config.xaxis.type==="datetime"&&(c.config.xaxis.categories.length?O=c.config.xaxis.categories[S]:c.config.labels.length&&(O=c.config.labels[S]))}else O=c.config.labels[S];return O===null?"nullvalue":(Array.isArray(O)&&(O=O.join(" ")),H.isNumber(O)?O:O.split(o).join(""))},M=function(S,O){if(h.length&&O===0&&u.push(h.join(o)),S.data){S.data=S.data.length&&S.data||Gt(Array(b)).map(function(){return""});for(var T=0;T<S.data.length;T++){h=[];var I=C(T);if(I!=="nullvalue"){if(I||(y.isFormatXY()?I=n[O].data[T].x:y.isFormat2DArray()&&(I=n[O].data[T]?n[O].data[T][0]:"")),O===0){h.push(g(I));for(var R=0;R<c.globals.series.length;R++){var z,D=y.isFormatXY()?(z=n[R].data[T])===null||z===void 0?void 0:z.y:f[R][T];h.push(m(D))}}(c.config.chart.type==="candlestick"||S.type&&S.type==="candlestick")&&(h.pop(),h.push(c.globals.seriesCandleO[O][T]),h.push(c.globals.seriesCandleH[O][T]),h.push(c.globals.seriesCandleL[O][T]),h.push(c.globals.seriesCandleC[O][T])),(c.config.chart.type==="boxPlot"||S.type&&S.type==="boxPlot")&&(h.pop(),h.push(c.globals.seriesCandleO[O][T]),h.push(c.globals.seriesCandleH[O][T]),h.push(c.globals.seriesCandleM[O][T]),h.push(c.globals.seriesCandleL[O][T]),h.push(c.globals.seriesCandleC[O][T])),c.config.chart.type==="rangeBar"&&(h.pop(),h.push(c.globals.seriesRangeStart[O][T]),h.push(c.globals.seriesRangeEnd[O][T])),h.length&&u.push(h.join(o))}}}};h.push(c.config.chart.toolbar.export.csv.headerCategory),c.config.chart.type==="boxPlot"?(h.push("minimum"),h.push("q1"),h.push("median"),h.push("q3"),h.push("maximum")):c.config.chart.type==="candlestick"?(h.push("open"),h.push("high"),h.push("low"),h.push("close")):c.config.chart.type==="rangeBar"?(h.push("minimum"),h.push("maximum")):n.map(function(S,O){var T=(S.name?S.name:"series-".concat(O))+"";c.globals.axisCharts&&h.push(T.split(o).join("")?T.split(o).join(""):"series-".concat(O))}),c.globals.axisCharts||(h.push(c.config.chart.toolbar.export.csv.headerValue),u.push(h.join(o))),c.globals.allSeriesHasEqualX||!c.globals.axisCharts||c.config.xaxis.categories.length||c.config.labels.length?n.map(function(S,O){c.globals.axisCharts?M(S,O):((h=[]).push(g(c.globals.labels[O])),h.push(m(f[O])),u.push(h.join(o)))}):function(){var S=new Set,O={};n.forEach(function(T,I){T==null||T.data.forEach(function(R){var z,D;if(y.isFormatXY())z=R.x,D=R.y;else{if(!y.isFormat2DArray())return;z=R[0],D=R[1]}O[z]||(O[z]=Array(n.length).fill("")),O[z][I]=m(D),S.add(z)})}),h.length&&u.push(h.join(o)),Array.from(S).sort().forEach(function(T){u.push([g(T),O[T].join(o)])})}(),d+=u.join(l),this.triggerDownload("data:text/csv; charset=utf-8,"+encodeURIComponent("\uFEFF"+d),r||c.config.chart.toolbar.export.csv.filename,".csv")}},{key:"triggerDownload",value:function(e,t,n){var r=document.createElement("a");r.href=e,r.download=(t||this.w.globals.chartID)+n,document.body.appendChild(r),r.click(),document.body.removeChild(r)}}]),i}(),Ga=function(){function i(e,t){Ee(this,i),this.ctx=e,this.elgrid=t,this.w=e.w;var n=this.w;this.axesUtils=new Br(e),this.xaxisLabels=n.globals.labels.slice(),n.globals.timescaleLabels.length>0&&!n.globals.isBarHorizontal&&(this.xaxisLabels=n.globals.timescaleLabels.slice()),n.config.xaxis.overwriteCategories&&(this.xaxisLabels=n.config.xaxis.overwriteCategories),this.drawnLabels=[],this.drawnLabelsRects=[],n.config.xaxis.position==="top"?this.offY=0:this.offY=n.globals.gridHeight,this.offY=this.offY+n.config.xaxis.axisBorder.offsetY,this.isCategoryBarHorizontal=n.config.chart.type==="bar"&&n.config.plotOptions.bar.horizontal,this.xaxisFontSize=n.config.xaxis.labels.style.fontSize,this.xaxisFontFamily=n.config.xaxis.labels.style.fontFamily,this.xaxisForeColors=n.config.xaxis.labels.style.colors,this.xaxisBorderWidth=n.config.xaxis.axisBorder.width,this.isCategoryBarHorizontal&&(this.xaxisBorderWidth=n.config.yaxis[0].axisBorder.width.toString()),this.xaxisBorderWidth.indexOf("%")>-1?this.xaxisBorderWidth=n.globals.gridWidth*parseInt(this.xaxisBorderWidth,10)/100:this.xaxisBorderWidth=parseInt(this.xaxisBorderWidth,10),this.xaxisBorderHeight=n.config.xaxis.axisBorder.height,this.yaxis=n.config.yaxis[0]}return Oe(i,[{key:"drawXaxis",value:function(){var e=this.w,t=new oe(this.ctx),n=t.group({class:"apexcharts-xaxis",transform:"translate(".concat(e.config.xaxis.offsetX,", ").concat(e.config.xaxis.offsetY,")")}),r=t.group({class:"apexcharts-xaxis-texts-g",transform:"translate(".concat(e.globals.translateXAxisX,", ").concat(e.globals.translateXAxisY,")")});n.add(r);for(var s=[],o=0;o<this.xaxisLabels.length;o++)s.push(this.xaxisLabels[o]);if(this.drawXAxisLabelAndGroup(!0,t,r,s,e.globals.isXNumeric,function(g,m){return m}),e.globals.hasXaxisGroups){var a=e.globals.groups;s=[];for(var l=0;l<a.length;l++)s.push(a[l].title);var c={};e.config.xaxis.group.style&&(c.xaxisFontSize=e.config.xaxis.group.style.fontSize,c.xaxisFontFamily=e.config.xaxis.group.style.fontFamily,c.xaxisForeColors=e.config.xaxis.group.style.colors,c.fontWeight=e.config.xaxis.group.style.fontWeight,c.cssClass=e.config.xaxis.group.style.cssClass),this.drawXAxisLabelAndGroup(!1,t,r,s,!1,function(g,m){return a[g].cols*m},c)}if(e.config.xaxis.title.text!==void 0){var h=t.group({class:"apexcharts-xaxis-title"}),u=t.drawText({x:e.globals.gridWidth/2+e.config.xaxis.title.offsetX,y:this.offY+parseFloat(this.xaxisFontSize)+(e.config.xaxis.position==="bottom"?e.globals.xAxisLabelsHeight:-e.globals.xAxisLabelsHeight-10)+e.config.xaxis.title.offsetY,text:e.config.xaxis.title.text,textAnchor:"middle",fontSize:e.config.xaxis.title.style.fontSize,fontFamily:e.config.xaxis.title.style.fontFamily,fontWeight:e.config.xaxis.title.style.fontWeight,foreColor:e.config.xaxis.title.style.color,cssClass:"apexcharts-xaxis-title-text "+e.config.xaxis.title.style.cssClass});h.add(u),n.add(h)}if(e.config.xaxis.axisBorder.show){var d=e.globals.barPadForNumericAxis,f=t.drawLine(e.globals.padHorizontal+e.config.xaxis.axisBorder.offsetX-d,this.offY,this.xaxisBorderWidth+d,this.offY,e.config.xaxis.axisBorder.color,0,this.xaxisBorderHeight);this.elgrid&&this.elgrid.elGridBorders&&e.config.grid.show?this.elgrid.elGridBorders.add(f):n.add(f)}return n}},{key:"drawXAxisLabelAndGroup",value:function(e,t,n,r,s,o){var a,l=this,c=arguments.length>6&&arguments[6]!==void 0?arguments[6]:{},h=[],u=[],d=this.w,f=c.xaxisFontSize||this.xaxisFontSize,g=c.xaxisFontFamily||this.xaxisFontFamily,m=c.xaxisForeColors||this.xaxisForeColors,b=c.fontWeight||d.config.xaxis.labels.style.fontWeight,y=c.cssClass||d.config.xaxis.labels.style.cssClass,w=d.globals.padHorizontal,C=r.length,M=d.config.xaxis.type==="category"?d.globals.dataPoints:C;if(M===0&&C>M&&(M=C),s){var S=Math.max(Number(d.config.xaxis.tickAmount)||1,M>1?M-1:M);a=d.globals.gridWidth/Math.min(S,C-1),w=w+o(0,a)/2+d.config.xaxis.labels.offsetX}else a=d.globals.gridWidth/M,w=w+o(0,a)+d.config.xaxis.labels.offsetX;for(var O=function(I){var R=w-o(I,a)/2+d.config.xaxis.labels.offsetX;I===0&&C===1&&a/2===w&&M===1&&(R=d.globals.gridWidth/2);var z=l.axesUtils.getLabel(r,d.globals.timescaleLabels,R,I,h,f,e),D=28;if(d.globals.rotateXLabels&&e&&(D=22),d.config.xaxis.title.text&&d.config.xaxis.position==="top"&&(D+=parseFloat(d.config.xaxis.title.style.fontSize)+2),e||(D=D+parseFloat(f)+(d.globals.xAxisLabelsHeight-d.globals.xAxisGroupLabelsHeight)+(d.globals.rotateXLabels?10:0)),z=d.config.xaxis.tickAmount!==void 0&&d.config.xaxis.tickAmount!=="dataPoints"&&d.config.xaxis.type!=="datetime"?l.axesUtils.checkLabelBasedOnTickamount(I,z,C):l.axesUtils.checkForOverflowingLabels(I,z,C,h,u),d.config.xaxis.labels.show){var B=t.drawText({x:z.x,y:l.offY+d.config.xaxis.labels.offsetY+D-(d.config.xaxis.position==="top"?d.globals.xAxisHeight+d.config.xaxis.axisTicks.height-2:0),text:z.text,textAnchor:"middle",fontWeight:z.isBold?600:b,fontSize:f,fontFamily:g,foreColor:Array.isArray(m)?e&&d.config.xaxis.convertedCatToNumeric?m[d.globals.minX+I-1]:m[I]:m,isPlainText:!1,cssClass:(e?"apexcharts-xaxis-label ":"apexcharts-xaxis-group-label ")+y});if(n.add(B),B.on("click",function(J){if(typeof d.config.chart.events.xAxisLabelClick=="function"){var se=Object.assign({},d,{labelIndex:I});d.config.chart.events.xAxisLabelClick(J,l.ctx,se)}}),e){var K=document.createElementNS(d.globals.SVGNS,"title");K.textContent=Array.isArray(z.text)?z.text.join(" "):z.text,B.node.appendChild(K),z.text!==""&&(h.push(z.text),u.push(z))}}I<C-1&&(w+=o(I+1,a))},T=0;T<=C-1;T++)O(T)}},{key:"drawXaxisInversed",value:function(e){var t,n,r=this,s=this.w,o=new oe(this.ctx),a=s.config.yaxis[0].opposite?s.globals.translateYAxisX[e]:0,l=o.group({class:"apexcharts-yaxis apexcharts-xaxis-inversed",rel:e}),c=o.group({class:"apexcharts-yaxis-texts-g apexcharts-xaxis-inversed-texts-g",transform:"translate("+a+", 0)"});l.add(c);var h=[];if(s.config.yaxis[e].show)for(var u=0;u<this.xaxisLabels.length;u++)h.push(this.xaxisLabels[u]);t=s.globals.gridHeight/h.length,n=-t/2.2;var d=s.globals.yLabelFormatters[0],f=s.config.yaxis[0].labels;if(f.show)for(var g=function(S){var O=h[S]===void 0?"":h[S];O=d(O,{seriesIndex:e,dataPointIndex:S,w:s});var T=r.axesUtils.getYAxisForeColor(f.style.colors,e),I=0;Array.isArray(O)&&(I=O.length/2*parseInt(f.style.fontSize,10));var R=f.offsetX-15,z="end";r.yaxis.opposite&&(z="start"),s.config.yaxis[0].labels.align==="left"?(R=f.offsetX,z="start"):s.config.yaxis[0].labels.align==="center"?(R=f.offsetX,z="middle"):s.config.yaxis[0].labels.align==="right"&&(z="end");var D=o.drawText({x:R,y:n+t+f.offsetY-I,text:O,textAnchor:z,foreColor:Array.isArray(T)?T[S]:T,fontSize:f.style.fontSize,fontFamily:f.style.fontFamily,fontWeight:f.style.fontWeight,isPlainText:!1,cssClass:"apexcharts-yaxis-label "+f.style.cssClass,maxWidth:f.maxWidth});c.add(D),D.on("click",function(J){if(typeof s.config.chart.events.xAxisLabelClick=="function"){var se=Object.assign({},s,{labelIndex:S});s.config.chart.events.xAxisLabelClick(J,r.ctx,se)}});var B=document.createElementNS(s.globals.SVGNS,"title");if(B.textContent=Array.isArray(O)?O.join(" "):O,D.node.appendChild(B),s.config.yaxis[e].labels.rotate!==0){var K=o.rotateAroundCenter(D.node);D.node.setAttribute("transform","rotate(".concat(s.config.yaxis[e].labels.rotate," 0 ").concat(K.y,")"))}n+=t},m=0;m<=h.length-1;m++)g(m);if(s.config.yaxis[0].title.text!==void 0){var b=o.group({class:"apexcharts-yaxis-title apexcharts-xaxis-title-inversed",transform:"translate("+a+", 0)"}),y=o.drawText({x:s.config.yaxis[0].title.offsetX,y:s.globals.gridHeight/2+s.config.yaxis[0].title.offsetY,text:s.config.yaxis[0].title.text,textAnchor:"middle",foreColor:s.config.yaxis[0].title.style.color,fontSize:s.config.yaxis[0].title.style.fontSize,fontWeight:s.config.yaxis[0].title.style.fontWeight,fontFamily:s.config.yaxis[0].title.style.fontFamily,cssClass:"apexcharts-yaxis-title-text "+s.config.yaxis[0].title.style.cssClass});b.add(y),l.add(b)}var w=0;this.isCategoryBarHorizontal&&s.config.yaxis[0].opposite&&(w=s.globals.gridWidth);var C=s.config.xaxis.axisBorder;if(C.show){var M=o.drawLine(s.globals.padHorizontal+C.offsetX+w,1+C.offsetY,s.globals.padHorizontal+C.offsetX+w,s.globals.gridHeight+C.offsetY,C.color,0);this.elgrid&&this.elgrid.elGridBorders&&s.config.grid.show?this.elgrid.elGridBorders.add(M):l.add(M)}return s.config.yaxis[0].axisTicks.show&&this.axesUtils.drawYAxisTicks(w,h.length,s.config.yaxis[0].axisBorder,s.config.yaxis[0].axisTicks,0,t,l),l}},{key:"drawXaxisTicks",value:function(e,t,n){var r=this.w,s=e;if(!(e<0||e-2>r.globals.gridWidth)){var o=this.offY+r.config.xaxis.axisTicks.offsetY;if(t=t+o+r.config.xaxis.axisTicks.height,r.config.xaxis.position==="top"&&(t=o-r.config.xaxis.axisTicks.height),r.config.xaxis.axisTicks.show){var a=new oe(this.ctx).drawLine(e+r.config.xaxis.axisTicks.offsetX,o+r.config.xaxis.offsetY,s+r.config.xaxis.axisTicks.offsetX,t+r.config.xaxis.offsetY,r.config.xaxis.axisTicks.color);n.add(a),a.node.classList.add("apexcharts-xaxis-tick")}}}},{key:"getXAxisTicksPositions",value:function(){var e=this.w,t=[],n=this.xaxisLabels.length,r=e.globals.padHorizontal;if(e.globals.timescaleLabels.length>0)for(var s=0;s<n;s++)r=this.xaxisLabels[s].position,t.push(r);else for(var o=n,a=0;a<o;a++){var l=o;e.globals.isXNumeric&&e.config.chart.type!=="bar"&&(l-=1),r+=e.globals.gridWidth/l,t.push(r)}return t}},{key:"xAxisLabelCorrections",value:function(){var e=this.w,t=new oe(this.ctx),n=e.globals.dom.baseEl.querySelector(".apexcharts-xaxis-texts-g"),r=e.globals.dom.baseEl.querySelectorAll(".apexcharts-xaxis-texts-g text:not(.apexcharts-xaxis-group-label)"),s=e.globals.dom.baseEl.querySelectorAll(".apexcharts-yaxis-inversed text"),o=e.globals.dom.baseEl.querySelectorAll(".apexcharts-xaxis-inversed-texts-g text tspan");if(e.globals.rotateXLabels||e.config.xaxis.labels.rotateAlways)for(var a=0;a<r.length;a++){var l=t.rotateAroundCenter(r[a]);l.y=l.y-1,l.x=l.x+1,r[a].setAttribute("transform","rotate(".concat(e.config.xaxis.labels.rotate," ").concat(l.x," ").concat(l.y,")")),r[a].setAttribute("text-anchor","end"),n.setAttribute("transform","translate(0, ".concat(-10,")"));var c=r[a].childNodes;e.config.xaxis.labels.trim&&Array.prototype.forEach.call(c,function(f){t.placeTextWithEllipsis(f,f.textContent,e.globals.xAxisLabelsHeight-(e.config.legend.position==="bottom"?20:10))})}else(function(){for(var f=e.globals.gridWidth/(e.globals.labels.length+1),g=0;g<r.length;g++){var m=r[g].childNodes;e.config.xaxis.labels.trim&&e.config.xaxis.type!=="datetime"&&Array.prototype.forEach.call(m,function(b){t.placeTextWithEllipsis(b,b.textContent,f)})}})();if(s.length>0){var h=s[s.length-1].getBBox(),u=s[0].getBBox();h.x<-20&&s[s.length-1].parentNode.removeChild(s[s.length-1]),u.x+u.width>e.globals.gridWidth&&!e.globals.isBarHorizontal&&s[0].parentNode.removeChild(s[0]);for(var d=0;d<o.length;d++)t.placeTextWithEllipsis(o[d],o[d].textContent,e.config.yaxis[0].labels.maxWidth-(e.config.yaxis[0].title.text?2*parseFloat(e.config.yaxis[0].title.style.fontSize):0)-15)}}}]),i}(),h0=function(){function i(e){Ee(this,i),this.ctx=e,this.w=e.w;var t=this.w;this.xaxisLabels=t.globals.labels.slice(),this.axesUtils=new Br(e),this.isRangeBar=t.globals.seriesRange.length&&t.globals.isBarHorizontal,t.globals.timescaleLabels.length>0&&(this.xaxisLabels=t.globals.timescaleLabels.slice())}return Oe(i,[{key:"drawGridArea",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,t=this.w,n=new oe(this.ctx);e||(e=n.group({class:"apexcharts-grid"}));var r=n.drawLine(t.globals.padHorizontal,1,t.globals.padHorizontal,t.globals.gridHeight,"transparent"),s=n.drawLine(t.globals.padHorizontal,t.globals.gridHeight,t.globals.gridWidth,t.globals.gridHeight,"transparent");return e.add(s),e.add(r),e}},{key:"drawGrid",value:function(){if(this.w.globals.axisCharts){var e=this.renderGrid();return this.drawGridArea(e.el),e}return null}},{key:"createGridMask",value:function(){var e=this.w,t=e.globals,n=new oe(this.ctx),r=Array.isArray(e.config.stroke.width)?Math.max.apply(Math,Gt(e.config.stroke.width)):e.config.stroke.width,s=function(h){var u=document.createElementNS(t.SVGNS,"clipPath");return u.setAttribute("id",h),u};t.dom.elGridRectMask=s("gridRectMask".concat(t.cuid)),t.dom.elGridRectBarMask=s("gridRectBarMask".concat(t.cuid)),t.dom.elGridRectMarkerMask=s("gridRectMarkerMask".concat(t.cuid)),t.dom.elForecastMask=s("forecastMask".concat(t.cuid)),t.dom.elNonForecastMask=s("nonForecastMask".concat(t.cuid));var o=0,a=0;(["bar","rangeBar","candlestick","boxPlot"].includes(e.config.chart.type)||e.globals.comboBarCount>0)&&e.globals.isXNumeric&&!e.globals.isBarHorizontal&&(o=Math.max(e.config.grid.padding.left,t.barPadForNumericAxis),a=Math.max(e.config.grid.padding.right,t.barPadForNumericAxis)),t.dom.elGridRect=n.drawRect(-r/2-2,-r/2-2,t.gridWidth+r+4,t.gridHeight+r+4,0,"#fff"),t.dom.elGridRectBar=n.drawRect(-r/2-o-2,-r/2-2,t.gridWidth+r+a+o+4,t.gridHeight+r+4,0,"#fff");var l=e.globals.markers.largestSize;t.dom.elGridRectMarker=n.drawRect(-l,-l,t.gridWidth+2*l,t.gridHeight+2*l,0,"#fff"),t.dom.elGridRectMask.appendChild(t.dom.elGridRect.node),t.dom.elGridRectBarMask.appendChild(t.dom.elGridRectBar.node),t.dom.elGridRectMarkerMask.appendChild(t.dom.elGridRectMarker.node);var c=t.dom.baseEl.querySelector("defs");c.appendChild(t.dom.elGridRectMask),c.appendChild(t.dom.elGridRectBarMask),c.appendChild(t.dom.elGridRectMarkerMask),c.appendChild(t.dom.elForecastMask),c.appendChild(t.dom.elNonForecastMask)}},{key:"_drawGridLines",value:function(e){var t=e.i,n=e.x1,r=e.y1,s=e.x2,o=e.y2,a=e.xCount,l=e.parent,c=this.w;if(!(t===0&&c.globals.skipFirstTimelinelabel||t===a-1&&c.globals.skipLastTimelinelabel&&!c.config.xaxis.labels.formatter||c.config.chart.type==="radar")){c.config.grid.xaxis.lines.show&&this._drawGridLine({i:t,x1:n,y1:r,x2:s,y2:o,xCount:a,parent:l});var h=0;if(c.globals.hasXaxisGroups&&c.config.xaxis.tickPlacement==="between"){var u=c.globals.groups;if(u){for(var d=0,f=0;d<t&&f<u.length;f++)d+=u[f].cols;d===t&&(h=.6*c.globals.xAxisLabelsHeight)}}new Ga(this.ctx).drawXaxisTicks(n,h,c.globals.dom.elGraphical)}}},{key:"_drawGridLine",value:function(e){var t=e.i,n=e.x1,r=e.y1,s=e.x2,o=e.y2,a=e.xCount,l=e.parent,c=this.w,h=l.node.classList.contains("apexcharts-gridlines-horizontal"),u=c.globals.barPadForNumericAxis,d=r===0&&o===0||n===0&&s===0||r===c.globals.gridHeight&&o===c.globals.gridHeight||c.globals.isBarHorizontal&&(t===0||t===a-1),f=new oe(this).drawLine(n-(h?u:0),r,s+(h?u:0),o,c.config.grid.borderColor,c.config.grid.strokeDashArray);f.node.classList.add("apexcharts-gridline"),d&&c.config.grid.show?this.elGridBorders.add(f):l.add(f)}},{key:"_drawGridBandRect",value:function(e){var t=e.c,n=e.x1,r=e.y1,s=e.x2,o=e.y2,a=e.type,l=this.w,c=new oe(this.ctx),h=l.globals.barPadForNumericAxis,u=l.config.grid[a].colors[t],d=c.drawRect(n-(a==="row"?h:0),r,s+(a==="row"?2*h:0),o,0,u,l.config.grid[a].opacity);this.elg.add(d),d.attr("clip-path","url(#gridRectMask".concat(l.globals.cuid,")")),d.node.classList.add("apexcharts-grid-".concat(a))}},{key:"_drawXYLines",value:function(e){var t=this,n=e.xCount,r=e.tickAmount,s=this.w;if(s.config.grid.xaxis.lines.show||s.config.xaxis.axisTicks.show){var o,a=s.globals.padHorizontal,l=s.globals.gridHeight;s.globals.timescaleLabels.length?function(g){for(var m=g.xC,b=g.x1,y=g.y1,w=g.x2,C=g.y2,M=0;M<m;M++)b=t.xaxisLabels[M].position,w=t.xaxisLabels[M].position,t._drawGridLines({i:M,x1:b,y1:y,x2:w,y2:C,xCount:n,parent:t.elgridLinesV})}({xC:n,x1:a,y1:0,x2:o,y2:l}):(s.globals.isXNumeric&&(n=s.globals.xAxisScale.result.length),function(g){for(var m=g.xC,b=g.x1,y=g.y1,w=g.x2,C=g.y2,M=0;M<m+(s.globals.isXNumeric?0:1);M++)M===0&&m===1&&s.globals.dataPoints===1&&(w=b=s.globals.gridWidth/2),t._drawGridLines({i:M,x1:b,y1:y,x2:w,y2:C,xCount:n,parent:t.elgridLinesV}),w=b+=s.globals.gridWidth/(s.globals.isXNumeric?m-1:m)}({xC:n,x1:a,y1:0,x2:o,y2:l}))}if(s.config.grid.yaxis.lines.show){var c=0,h=0,u=s.globals.gridWidth,d=r+1;this.isRangeBar&&(d=s.globals.labels.length);for(var f=0;f<d+(this.isRangeBar?1:0);f++)this._drawGridLine({i:f,xCount:d+(this.isRangeBar?1:0),x1:0,y1:c,x2:u,y2:h,parent:this.elgridLinesH}),h=c+=s.globals.gridHeight/(this.isRangeBar?d:r)}}},{key:"_drawInvertedXYLines",value:function(e){var t=e.xCount,n=this.w;if(n.config.grid.xaxis.lines.show||n.config.xaxis.axisTicks.show)for(var r,s=n.globals.padHorizontal,o=n.globals.gridHeight,a=0;a<t+1;a++)n.config.grid.xaxis.lines.show&&this._drawGridLine({i:a,xCount:t+1,x1:s,y1:0,x2:r,y2:o,parent:this.elgridLinesV}),new Ga(this.ctx).drawXaxisTicks(s,0,n.globals.dom.elGraphical),r=s+=n.globals.gridWidth/t;if(n.config.grid.yaxis.lines.show)for(var l=0,c=0,h=n.globals.gridWidth,u=0;u<n.globals.dataPoints+1;u++)this._drawGridLine({i:u,xCount:n.globals.dataPoints+1,x1:0,y1:l,x2:h,y2:c,parent:this.elgridLinesH}),c=l+=n.globals.gridHeight/n.globals.dataPoints}},{key:"renderGrid",value:function(){var e=this.w,t=e.globals,n=new oe(this.ctx);this.elg=n.group({class:"apexcharts-grid"}),this.elgridLinesH=n.group({class:"apexcharts-gridlines-horizontal"}),this.elgridLinesV=n.group({class:"apexcharts-gridlines-vertical"}),this.elGridBorders=n.group({class:"apexcharts-grid-borders"}),this.elg.add(this.elgridLinesH),this.elg.add(this.elgridLinesV),e.config.grid.show||(this.elgridLinesV.hide(),this.elgridLinesH.hide(),this.elGridBorders.hide());for(var r=0;r<t.seriesYAxisMap.length&&t.ignoreYAxisIndexes.includes(r);)r++;r===t.seriesYAxisMap.length&&(r=0);var s,o=t.yAxisScale[r].result.length-1;if(!t.isBarHorizontal||this.isRangeBar){var a,l,c;s=this.xaxisLabels.length,this.isRangeBar&&(o=t.labels.length,e.config.xaxis.tickAmount&&e.config.xaxis.labels.formatter&&(s=e.config.xaxis.tickAmount),((a=t.yAxisScale)===null||a===void 0||(l=a[r])===null||l===void 0||(c=l.result)===null||c===void 0?void 0:c.length)>0&&e.config.xaxis.type!=="datetime"&&(s=t.yAxisScale[r].result.length-1)),this._drawXYLines({xCount:s,tickAmount:o})}else s=o,o=t.xTickAmount,this._drawInvertedXYLines({xCount:s,tickAmount:o});return this.drawGridBands(s,o),{el:this.elg,elGridBorders:this.elGridBorders,xAxisTickWidth:t.gridWidth/s}}},{key:"drawGridBands",value:function(e,t){var n,r,s=this,o=this.w;if(((n=o.config.grid.row.colors)===null||n===void 0?void 0:n.length)>0&&function(g,m,b,y,w,C){for(var M=0,S=0;M<m;M++,S++)S>=o.config.grid[g].colors.length&&(S=0),s._drawGridBandRect({c:S,x1:b,y1:y,x2:w,y2:C,type:g}),y+=o.globals.gridHeight/t}("row",t,0,0,o.globals.gridWidth,o.globals.gridHeight/t),((r=o.config.grid.column.colors)===null||r===void 0?void 0:r.length)>0){var a=o.globals.isBarHorizontal||o.config.xaxis.tickPlacement!=="on"||o.config.xaxis.type!=="category"&&!o.config.xaxis.convertedCatToNumeric?e:e-1;o.globals.isXNumeric&&(a=o.globals.xAxisScale.result.length-1);for(var l=o.globals.padHorizontal,c=o.globals.padHorizontal+o.globals.gridWidth/a,h=o.globals.gridHeight,u=0,d=0;u<e;u++,d++){var f;d>=o.config.grid.column.colors.length&&(d=0),o.config.xaxis.type==="datetime"&&(l=this.xaxisLabels[u].position,c=(((f=this.xaxisLabels[u+1])===null||f===void 0?void 0:f.position)||o.globals.gridWidth)-this.xaxisLabels[u].position),this._drawGridBandRect({c:d,x1:l,y1:0,x2:c,y2:h,type:"column"}),l+=o.globals.gridWidth/a}}}}]),i}(),u0=function(){function i(e){Ee(this,i),this.ctx=e,this.w=e.w,this.coreUtils=new Bt(this.ctx)}return Oe(i,[{key:"niceScale",value:function(e,t){var n,r,s,o,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,l=1e-11,c=this.w,h=c.globals;h.isBarHorizontal?(n=c.config.xaxis,r=Math.max((h.svgWidth-100)/25,2)):(n=c.config.yaxis[a],r=Math.max((h.svgHeight-100)/15,2)),H.isNumber(r)||(r=10),s=n.min!==void 0&&n.min!==null,o=n.max!==void 0&&n.min!==null;var u=n.stepSize!==void 0&&n.stepSize!==null,d=n.tickAmount!==void 0&&n.tickAmount!==null,f=d?n.tickAmount:h.niceScaleDefaultTicks[Math.min(Math.round(r/2),h.niceScaleDefaultTicks.length-1)];if(h.isMultipleYAxis&&!d&&h.multiAxisTickAmount>0&&(f=h.multiAxisTickAmount,d=!0),f=f==="dataPoints"?h.dataPoints-1:Math.abs(Math.round(f)),(e===Number.MIN_VALUE&&t===0||!H.isNumber(e)&&!H.isNumber(t)||e===Number.MIN_VALUE&&t===-Number.MAX_VALUE)&&(e=H.isNumber(n.min)?n.min:0,t=H.isNumber(n.max)?n.max:e+f,h.allSeriesCollapsed=!1),e>t){console.warn("axis.min cannot be greater than axis.max: swapping min and max");var g=t;t=e,e=g}else e===t&&(e=e===0?0:e-1,t=t===0?2:t+1);var m=[];f<1&&(f=1);var b=f,y=Math.abs(t-e);!s&&e>0&&e/y<.15&&(e=0,s=!0),!o&&t<0&&-t/y<.15&&(t=0,o=!0);var w=(y=Math.abs(t-e))/b,C=w,M=Math.floor(Math.log10(C)),S=Math.pow(10,M),O=Math.ceil(C/S);if(w=C=(O=h.niceScaleAllowedMagMsd[h.yValueDecimal===0?0:1][O])*S,h.isBarHorizontal&&n.stepSize&&n.type!=="datetime"?(w=n.stepSize,u=!0):u&&(w=n.stepSize),u&&n.forceNiceScale){var T=Math.floor(Math.log10(w));w*=Math.pow(10,M-T)}if(s&&o){var I=y/b;if(d)if(u)if(H.mod(y,w)!=0){var R=H.getGCD(w,I);w=I/R<10?R:I}else H.mod(w,I)==0?w=I:(I=w,d=!1);else w=I;else if(u)H.mod(y,w)==0?I=w:w=I;else if(H.mod(y,w)==0)I=w;else{I=y/(b=Math.ceil(y/w));var z=H.getGCD(y,w);y/z<r&&(I=z),w=I}b=Math.round(y/w)}else{if(s||o){if(o)if(d)e=t-w*b;else{var D=e;e=w*Math.floor(e/w),Math.abs(t-e)/H.getGCD(y,w)>r&&(e=t-w*f,e+=w*Math.floor((D-e)/w))}else if(s)if(d)t=e+w*b;else{var B=t;t=w*Math.ceil(t/w),Math.abs(t-e)/H.getGCD(y,w)>r&&(t=e+w*f,t+=w*Math.ceil((B-t)/w))}}else if(h.isMultipleYAxis&&d){var K=w*Math.floor(e/w),J=K+w*b;J<t&&(w*=2),J=t,t=(e=K)+w*b,y=Math.abs(t-e),e>0&&e<Math.abs(J-t)&&(e=0,t=w*b),t<0&&-t<Math.abs(K-e)&&(t=0,e=-w*b)}else e=w*Math.floor(e/w),t=w*Math.ceil(t/w);y=Math.abs(t-e),w=H.getGCD(y,w),b=Math.round(y/w)}if(d||s||o||(b=Math.ceil((y-l)/(w+l)))>16&&H.getPrimeFactors(b).length<2&&b++,!d&&n.forceNiceScale&&h.yValueDecimal===0&&b>y&&(b=y,w=Math.round(y/b)),b>r&&(!d&&!u||n.forceNiceScale)){var se=H.getPrimeFactors(b),ne=se.length-1,ie=b;e:for(var ae=0;ae<ne;ae++)for(var Me=0;Me<=ne-ae;Me++){for(var Re=Math.min(Me+ae,ne),_e=ie,Je=1,rt=Me;rt<=Re;rt++)Je*=se[rt];if((_e/=Je)<r){ie=_e;break e}}w=ie===b?y:y/ie,b=Math.round(y/w)}h.isMultipleYAxis&&h.multiAxisTickAmount==0&&h.ignoreYAxisIndexes.indexOf(a)<0&&(h.multiAxisTickAmount=b);var Ge=e-w,Mt=w*l;do Ge+=w,m.push(H.stripNumber(Ge,7));while(t-Ge>Mt);return{result:m,niceMin:m[0],niceMax:m[m.length-1]}}},{key:"linearScale",value:function(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:10,r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0,s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:void 0,o=Math.abs(t-e),a=[];if(e===t)return{result:a=[e],niceMin:a[0],niceMax:a[a.length-1]};(n=this._adjustTicksForSmallRange(n,r,o))==="dataPoints"&&(n=this.w.globals.dataPoints-1),s||(s=o/n),s=Math.round(100*(s+Number.EPSILON))/100,n===Number.MAX_VALUE&&(n=5,s=1);for(var l=e;n>=0;)a.push(l),l=H.preciseAddition(l,s),n-=1;return{result:a,niceMin:a[0],niceMax:a[a.length-1]}}},{key:"logarithmicScaleNice",value:function(e,t,n){t<=0&&(t=Math.max(e,n)),e<=0&&(e=Math.min(t,n));for(var r=[],s=Math.ceil(Math.log(t)/Math.log(n)+1),o=Math.floor(Math.log(e)/Math.log(n));o<s;o++)r.push(Math.pow(n,o));return{result:r,niceMin:r[0],niceMax:r[r.length-1]}}},{key:"logarithmicScale",value:function(e,t,n){t<=0&&(t=Math.max(e,n)),e<=0&&(e=Math.min(t,n));for(var r=[],s=Math.log(t)/Math.log(n),o=Math.log(e)/Math.log(n),a=s-o,l=Math.round(a),c=a/l,h=0,u=o;h<l;h++,u+=c)r.push(Math.pow(n,u));return r.push(Math.pow(n,s)),{result:r,niceMin:e,niceMax:t}}},{key:"_adjustTicksForSmallRange",value:function(e,t,n){var r=e;if(t!==void 0&&this.w.config.yaxis[t].labels.formatter&&this.w.config.yaxis[t].tickAmount===void 0){var s=Number(this.w.config.yaxis[t].labels.formatter(1));H.isNumber(s)&&this.w.globals.yValueDecimal===0&&(r=Math.ceil(n))}return r<e?r:e}},{key:"setYScaleForIndex",value:function(e,t,n){var r=this.w.globals,s=this.w.config,o=r.isBarHorizontal?s.xaxis:s.yaxis[e];r.yAxisScale[e]===void 0&&(r.yAxisScale[e]=[]);var a=Math.abs(n-t);o.logarithmic&&a<=5&&(r.invalidLogScale=!0),o.logarithmic&&a>5?(r.allSeriesCollapsed=!1,r.yAxisScale[e]=o.forceNiceScale?this.logarithmicScaleNice(t,n,o.logBase):this.logarithmicScale(t,n,o.logBase)):n!==-Number.MAX_VALUE&&H.isNumber(n)&&t!==Number.MAX_VALUE&&H.isNumber(t)?(r.allSeriesCollapsed=!1,r.yAxisScale[e]=this.niceScale(t,n,e)):r.yAxisScale[e]=this.niceScale(Number.MIN_VALUE,0,e)}},{key:"setXScale",value:function(e,t){var n=this.w,r=n.globals;if(t!==-Number.MAX_VALUE&&H.isNumber(t)){var s=r.xTickAmount;r.xAxisScale=this.linearScale(e,t,s,0,n.config.xaxis.stepSize)}else r.xAxisScale=this.linearScale(0,10,10);return r.xAxisScale}},{key:"scaleMultipleYAxes",value:function(){var e=this,t=this.w.config,n=this.w.globals;this.coreUtils.setSeriesYAxisMappings();var r=n.seriesYAxisMap,s=n.minYArr,o=n.maxYArr;n.allSeriesCollapsed=!0,n.barGroups=[],r.forEach(function(a,l){var c=[];a.forEach(function(h){var u,d=(u=t.series[h])===null||u===void 0?void 0:u.group;c.indexOf(d)<0&&c.push(d)}),a.length>0?function(){var h,u,d=Number.MAX_VALUE,f=-Number.MAX_VALUE,g=d,m=f;if(t.chart.stacked)(function(){var w=new Array(n.dataPoints).fill(0),C=[],M=[],S=[];c.forEach(function(){C.push(w.map(function(){return Number.MIN_VALUE})),M.push(w.map(function(){return Number.MIN_VALUE})),S.push(w.map(function(){return Number.MIN_VALUE}))});for(var O=function(I){!h&&t.series[a[I]].type&&(h=t.series[a[I]].type);var R=a[I];u=t.series[R].group?t.series[R].group:"axis-".concat(l),!(n.collapsedSeriesIndices.indexOf(R)<0&&n.ancillaryCollapsedSeriesIndices.indexOf(R)<0)||(n.allSeriesCollapsed=!1,c.forEach(function(z,D){if(t.series[R].group===z)for(var B=0;B<n.series[R].length;B++){var K=n.series[R][B];K>=0?M[D][B]+=K:S[D][B]+=K,C[D][B]+=K,g=Math.min(g,K),m=Math.max(m,K)}})),h!=="bar"&&h!=="column"||n.barGroups.push(u)},T=0;T<a.length;T++)O(T);h||(h=t.chart.type),h==="bar"||h==="column"?c.forEach(function(I,R){d=Math.min(d,Math.min.apply(null,S[R])),f=Math.max(f,Math.max.apply(null,M[R]))}):(c.forEach(function(I,R){g=Math.min(g,Math.min.apply(null,C[R])),m=Math.max(m,Math.max.apply(null,C[R]))}),d=g,f=m),d===Number.MIN_VALUE&&f===Number.MIN_VALUE&&(f=-Number.MAX_VALUE)})();else for(var b=0;b<a.length;b++){var y=a[b];d=Math.min(d,s[y]),f=Math.max(f,o[y]),!(n.collapsedSeriesIndices.indexOf(y)<0&&n.ancillaryCollapsedSeriesIndices.indexOf(y)<0)||(n.allSeriesCollapsed=!1)}t.yaxis[l].min!==void 0&&(d=typeof t.yaxis[l].min=="function"?t.yaxis[l].min(d):t.yaxis[l].min),t.yaxis[l].max!==void 0&&(f=typeof t.yaxis[l].max=="function"?t.yaxis[l].max(f):t.yaxis[l].max),n.barGroups=n.barGroups.filter(function(w,C,M){return M.indexOf(w)===C}),e.setYScaleForIndex(l,d,f),a.forEach(function(w){s[w]=n.yAxisScale[l].niceMin,o[w]=n.yAxisScale[l].niceMax})}():e.setYScaleForIndex(l,0,-Number.MAX_VALUE)})}}]),i}(),op=function(){function i(e){Ee(this,i),this.ctx=e,this.w=e.w,this.scales=new u0(e)}return Oe(i,[{key:"init",value:function(){this.setYRange(),this.setXRange(),this.setZRange()}},{key:"getMinYMaxY",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Number.MAX_VALUE,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:-Number.MAX_VALUE,r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null,s=this.w.config,o=this.w.globals,a=-Number.MAX_VALUE,l=Number.MIN_VALUE;r===null&&(r=e+1);var c=o.series,h=c,u=c;s.chart.type==="candlestick"?(h=o.seriesCandleL,u=o.seriesCandleH):s.chart.type==="boxPlot"?(h=o.seriesCandleO,u=o.seriesCandleC):o.isRangeData&&(h=o.seriesRangeStart,u=o.seriesRangeEnd);var d=!1;if(o.seriesX.length>=r){var f,g=(f=o.brushSource)===null||f===void 0?void 0:f.w.config.chart.brush;(s.chart.zoom.enabled&&s.chart.zoom.autoScaleYaxis||g!=null&&g.enabled&&g!=null&&g.autoScaleYaxis)&&(d=!0)}for(var m=e;m<r;m++){o.dataPoints=Math.max(o.dataPoints,c[m].length);var b=s.series[m].type;o.categoryLabels.length&&(o.dataPoints=o.categoryLabels.filter(function(S){return S!==void 0}).length),o.labels.length&&s.xaxis.type!=="datetime"&&o.series.reduce(function(S,O){return S+O.length},0)!==0&&(o.dataPoints=Math.max(o.dataPoints,o.labels.length));var y=0,w=c[m].length-1;if(d){if(s.xaxis.min)for(;y<w&&o.seriesX[m][y]<s.xaxis.min;y++);if(s.xaxis.max)for(;w>y&&o.seriesX[m][w]>s.xaxis.max;w--);}for(var C=y;C<=w&&C<o.series[m].length;C++){var M=c[m][C];if(M!==null&&H.isNumber(M)){switch(u[m][C]!==void 0&&(a=Math.max(a,u[m][C]),t=Math.min(t,u[m][C])),h[m][C]!==void 0&&(t=Math.min(t,h[m][C]),n=Math.max(n,h[m][C])),b){case"candlestick":o.seriesCandleC[m][C]!==void 0&&(a=Math.max(a,o.seriesCandleH[m][C]),t=Math.min(t,o.seriesCandleL[m][C]));break;case"boxPlot":o.seriesCandleC[m][C]!==void 0&&(a=Math.max(a,o.seriesCandleC[m][C]),t=Math.min(t,o.seriesCandleO[m][C]))}b&&b!=="candlestick"&&b!=="boxPlot"&&b!=="rangeArea"&&b!=="rangeBar"&&(a=Math.max(a,o.series[m][C]),t=Math.min(t,o.series[m][C])),o.seriesGoals[m]&&o.seriesGoals[m][C]&&Array.isArray(o.seriesGoals[m][C])&&o.seriesGoals[m][C].forEach(function(S){a=Math.max(a,S.value),t=Math.min(t,S.value)}),n=a,M=H.noExponents(M),H.isFloat(M)&&(o.yValueDecimal=Math.max(o.yValueDecimal,M.toString().split(".")[1].length)),l>h[m][C]&&h[m][C]<0&&(l=h[m][C])}else o.hasNullValues=!0}b!=="bar"&&b!=="column"||(l<0&&a<0&&(a=0,n=Math.max(n,0)),l===Number.MIN_VALUE&&(l=0,t=Math.min(t,0)))}return s.chart.type==="rangeBar"&&o.seriesRangeStart.length&&o.isBarHorizontal&&(l=t),s.chart.type==="bar"&&(l<0&&a<0&&(a=0),l===Number.MIN_VALUE&&(l=0)),{minY:l,maxY:a,lowestY:t,highestY:n}}},{key:"setYRange",value:function(){var e=this.w.globals,t=this.w.config;e.maxY=-Number.MAX_VALUE,e.minY=Number.MIN_VALUE;var n,r=Number.MAX_VALUE;if(e.isMultipleYAxis){r=Number.MAX_VALUE;for(var s=0;s<e.series.length;s++)n=this.getMinYMaxY(s),e.minYArr[s]=n.lowestY,e.maxYArr[s]=n.highestY,r=Math.min(r,n.lowestY)}return n=this.getMinYMaxY(0,r,null,e.series.length),t.chart.type==="bar"?(e.minY=n.minY,e.maxY=n.maxY):(e.minY=n.lowestY,e.maxY=n.highestY),r=n.lowestY,t.chart.stacked&&this._setStackedMinMax(),t.chart.type==="line"||t.chart.type==="area"||t.chart.type==="scatter"||t.chart.type==="candlestick"||t.chart.type==="boxPlot"||t.chart.type==="rangeBar"&&!e.isBarHorizontal?e.minY===Number.MIN_VALUE&&r!==-Number.MAX_VALUE&&r!==e.maxY&&(e.minY=r):e.minY=e.minY!==Number.MIN_VALUE?Math.min(n.minY,e.minY):n.minY,t.yaxis.forEach(function(o,a){o.max!==void 0&&(typeof o.max=="number"?e.maxYArr[a]=o.max:typeof o.max=="function"&&(e.maxYArr[a]=o.max(e.isMultipleYAxis?e.maxYArr[a]:e.maxY)),e.maxY=e.maxYArr[a]),o.min!==void 0&&(typeof o.min=="number"?e.minYArr[a]=o.min:typeof o.min=="function"&&(e.minYArr[a]=o.min(e.isMultipleYAxis?e.minYArr[a]===Number.MIN_VALUE?0:e.minYArr[a]:e.minY)),e.minY=e.minYArr[a])}),e.isBarHorizontal&&["min","max"].forEach(function(o){t.xaxis[o]!==void 0&&typeof t.xaxis[o]=="number"&&(o==="min"?e.minY=t.xaxis[o]:e.maxY=t.xaxis[o])}),e.isMultipleYAxis?(this.scales.scaleMultipleYAxes(),e.minY=r):(this.scales.setYScaleForIndex(0,e.minY,e.maxY),e.minY=e.yAxisScale[0].niceMin,e.maxY=e.yAxisScale[0].niceMax,e.minYArr[0]=e.minY,e.maxYArr[0]=e.maxY),e.barGroups=[],e.lineGroups=[],e.areaGroups=[],t.series.forEach(function(o){switch(o.type||t.chart.type){case"bar":case"column":e.barGroups.push(o.group);break;case"line":e.lineGroups.push(o.group);break;case"area":e.areaGroups.push(o.group)}}),e.barGroups=e.barGroups.filter(function(o,a,l){return l.indexOf(o)===a}),e.lineGroups=e.lineGroups.filter(function(o,a,l){return l.indexOf(o)===a}),e.areaGroups=e.areaGroups.filter(function(o,a,l){return l.indexOf(o)===a}),{minY:e.minY,maxY:e.maxY,minYArr:e.minYArr,maxYArr:e.maxYArr,yAxisScale:e.yAxisScale}}},{key:"setXRange",value:function(){var e=this.w.globals,t=this.w.config,n=t.xaxis.type==="numeric"||t.xaxis.type==="datetime"||t.xaxis.type==="category"&&!e.noLabelsProvided||e.noLabelsProvided||e.isXNumeric;if(e.isXNumeric&&function(){for(var l=0;l<e.series.length;l++)if(e.labels[l])for(var c=0;c<e.labels[l].length;c++)e.labels[l][c]!==null&&H.isNumber(e.labels[l][c])&&(e.maxX=Math.max(e.maxX,e.labels[l][c]),e.initialMaxX=Math.max(e.maxX,e.labels[l][c]),e.minX=Math.min(e.minX,e.labels[l][c]),e.initialMinX=Math.min(e.minX,e.labels[l][c]))}(),e.noLabelsProvided&&t.xaxis.categories.length===0&&(e.maxX=e.labels[e.labels.length-1],e.initialMaxX=e.labels[e.labels.length-1],e.minX=1,e.initialMinX=1),e.isXNumeric||e.noLabelsProvided||e.dataFormatXNumeric){var r=10;if(t.xaxis.tickAmount===void 0)r=Math.round(e.svgWidth/150),t.xaxis.type==="numeric"&&e.dataPoints<30&&(r=e.dataPoints-1),r>e.dataPoints&&e.dataPoints!==0&&(r=e.dataPoints-1);else if(t.xaxis.tickAmount==="dataPoints"){if(e.series.length>1&&(r=e.series[e.maxValsInArrayIndex].length-1),e.isXNumeric){var s=Math.round(e.maxX-e.minX);s<30&&(r=s-1)}}else r=t.xaxis.tickAmount;if(e.xTickAmount=r,t.xaxis.max!==void 0&&typeof t.xaxis.max=="number"&&(e.maxX=t.xaxis.max),t.xaxis.min!==void 0&&typeof t.xaxis.min=="number"&&(e.minX=t.xaxis.min),t.xaxis.range!==void 0&&(e.minX=e.maxX-t.xaxis.range),e.minX!==Number.MAX_VALUE&&e.maxX!==-Number.MAX_VALUE)if(t.xaxis.convertedCatToNumeric&&!e.dataFormatXNumeric){for(var o=[],a=e.minX-1;a<e.maxX;a++)o.push(a+1);e.xAxisScale={result:o,niceMin:o[0],niceMax:o[o.length-1]}}else e.xAxisScale=this.scales.setXScale(e.minX,e.maxX);else e.xAxisScale=this.scales.linearScale(0,r,r,0,t.xaxis.stepSize),e.noLabelsProvided&&e.labels.length>0&&(e.xAxisScale=this.scales.linearScale(1,e.labels.length,r-1,0,t.xaxis.stepSize),e.seriesX=e.labels.slice());n&&(e.labels=e.xAxisScale.result.slice())}return e.isBarHorizontal&&e.labels.length&&(e.xTickAmount=e.labels.length),this._handleSingleDataPoint(),this._getMinXDiff(),{minX:e.minX,maxX:e.maxX}}},{key:"setZRange",value:function(){var e=this.w.globals;if(e.isDataXYZ){for(var t=0;t<e.series.length;t++)if(e.seriesZ[t]!==void 0)for(var n=0;n<e.seriesZ[t].length;n++)e.seriesZ[t][n]!==null&&H.isNumber(e.seriesZ[t][n])&&(e.maxZ=Math.max(e.maxZ,e.seriesZ[t][n]),e.minZ=Math.min(e.minZ,e.seriesZ[t][n]))}}},{key:"_handleSingleDataPoint",value:function(){var e=this.w.globals,t=this.w.config;if(e.minX===e.maxX){var n=new dn(this.ctx);if(t.xaxis.type==="datetime"){var r=n.getDate(e.minX);t.xaxis.labels.datetimeUTC?r.setUTCDate(r.getUTCDate()-2):r.setDate(r.getDate()-2),e.minX=new Date(r).getTime();var s=n.getDate(e.maxX);t.xaxis.labels.datetimeUTC?s.setUTCDate(s.getUTCDate()+2):s.setDate(s.getDate()+2),e.maxX=new Date(s).getTime()}else(t.xaxis.type==="numeric"||t.xaxis.type==="category"&&!e.noLabelsProvided)&&(e.minX=e.minX-2,e.initialMinX=e.minX,e.maxX=e.maxX+2,e.initialMaxX=e.maxX)}}},{key:"_getMinXDiff",value:function(){var e=this.w.globals;e.isXNumeric&&e.seriesX.forEach(function(t,n){if(t.length){t.length===1&&t.push(e.seriesX[e.maxValsInArrayIndex][e.seriesX[e.maxValsInArrayIndex].length-1]);var r=t.slice();r.sort(function(s,o){return s-o}),r.forEach(function(s,o){if(o>0){var a=s-r[o-1];a>0&&(e.minXDiff=Math.min(a,e.minXDiff))}}),e.dataPoints!==1&&e.minXDiff!==Number.MAX_VALUE||(e.minXDiff=.5)}})}},{key:"_setStackedMinMax",value:function(){var e=this,t=this.w.globals;if(t.series.length){var n=t.seriesGroups;n.length||(n=[this.w.globals.seriesNames.map(function(o){return o})]);var r={},s={};n.forEach(function(o){r[o]=[],s[o]=[],e.w.config.series.map(function(a,l){return o.indexOf(t.seriesNames[l])>-1?l:null}).filter(function(a){return a!==null}).forEach(function(a){for(var l=0;l<t.series[t.maxValsInArrayIndex].length;l++){var c,h,u,d;r[o][l]===void 0&&(r[o][l]=0,s[o][l]=0),(e.w.config.chart.stacked&&!t.comboCharts||e.w.config.chart.stacked&&t.comboCharts&&(!e.w.config.chart.stackOnlyBar||((c=e.w.config.series)===null||c===void 0||(h=c[a])===null||h===void 0?void 0:h.type)==="bar"||((u=e.w.config.series)===null||u===void 0||(d=u[a])===null||d===void 0?void 0:d.type)==="column"))&&t.series[a][l]!==null&&H.isNumber(t.series[a][l])&&(t.series[a][l]>0?r[o][l]+=parseFloat(t.series[a][l])+1e-4:s[o][l]+=parseFloat(t.series[a][l]))}})}),Object.entries(r).forEach(function(o){var a=kv(o,1)[0];r[a].forEach(function(l,c){t.maxY=Math.max(t.maxY,r[a][c]),t.minY=Math.min(t.minY,s[a][c])})})}}}]),i}(),ap=function(){function i(e,t){Ee(this,i),this.ctx=e,this.elgrid=t,this.w=e.w;var n=this.w;this.xaxisFontSize=n.config.xaxis.labels.style.fontSize,this.axisFontFamily=n.config.xaxis.labels.style.fontFamily,this.xaxisForeColors=n.config.xaxis.labels.style.colors,this.isCategoryBarHorizontal=n.config.chart.type==="bar"&&n.config.plotOptions.bar.horizontal,this.xAxisoffX=n.config.xaxis.position==="bottom"?n.globals.gridHeight:0,this.drawnLabels=[],this.axesUtils=new Br(e)}return Oe(i,[{key:"drawYaxis",value:function(e){var t=this.w,n=new oe(this.ctx),r=t.config.yaxis[e].labels.style,s=r.fontSize,o=r.fontFamily,a=r.fontWeight,l=n.group({class:"apexcharts-yaxis",rel:e,transform:"translate(".concat(t.globals.translateYAxisX[e],", 0)")});if(this.axesUtils.isYAxisHidden(e))return l;var c=n.group({class:"apexcharts-yaxis-texts-g"});l.add(c);var h=t.globals.yAxisScale[e].result.length-1,u=t.globals.gridHeight/h,d=t.globals.yLabelFormatters[e],f=this.axesUtils.checkForReversedLabels(e,t.globals.yAxisScale[e].result.slice());if(t.config.yaxis[e].labels.show){var g=t.globals.translateY+t.config.yaxis[e].labels.offsetY;t.globals.isBarHorizontal?g=0:t.config.chart.type==="heatmap"&&(g-=u/2),g+=parseInt(s,10)/3;for(var m=h;m>=0;m--){var b=d(f[m],m,t),y=t.config.yaxis[e].labels.padding;t.config.yaxis[e].opposite&&t.config.yaxis.length!==0&&(y*=-1);var w=this.getTextAnchor(t.config.yaxis[e].labels.align,t.config.yaxis[e].opposite),C=this.axesUtils.getYAxisForeColor(r.colors,e),M=Array.isArray(C)?C[m]:C,S=H.listToArray(t.globals.dom.baseEl.querySelectorAll(".apexcharts-yaxis[rel='".concat(e,"'] .apexcharts-yaxis-label tspan"))).map(function(T){return T.textContent}),O=n.drawText({x:y,y:g,text:S.includes(b)&&!t.config.yaxis[e].labels.showDuplicates?"":b,textAnchor:w,fontSize:s,fontFamily:o,fontWeight:a,maxWidth:t.config.yaxis[e].labels.maxWidth,foreColor:M,isPlainText:!1,cssClass:"apexcharts-yaxis-label ".concat(r.cssClass)});c.add(O),this.addTooltip(O,b),t.config.yaxis[e].labels.rotate!==0&&this.rotateLabel(n,O,firstLabel,t.config.yaxis[e].labels.rotate),g+=u}}return this.addYAxisTitle(n,l,e),this.addAxisBorder(n,l,e,h,u),l}},{key:"getTextAnchor",value:function(e,t){return e==="left"?"start":e==="center"?"middle":e==="right"?"end":t?"start":"end"}},{key:"addTooltip",value:function(e,t){var n=document.createElementNS(this.w.globals.SVGNS,"title");n.textContent=Array.isArray(t)?t.join(" "):t,e.node.appendChild(n)}},{key:"rotateLabel",value:function(e,t,n,r){var s=e.rotateAroundCenter(n.node),o=e.rotateAroundCenter(t.node);t.node.setAttribute("transform","rotate(".concat(r," ").concat(s.x," ").concat(o.y,")"))}},{key:"addYAxisTitle",value:function(e,t,n){var r=this.w;if(r.config.yaxis[n].title.text!==void 0){var s=e.group({class:"apexcharts-yaxis-title"}),o=r.config.yaxis[n].opposite?r.globals.translateYAxisX[n]:0,a=e.drawText({x:o,y:r.globals.gridHeight/2+r.globals.translateY+r.config.yaxis[n].title.offsetY,text:r.config.yaxis[n].title.text,textAnchor:"end",foreColor:r.config.yaxis[n].title.style.color,fontSize:r.config.yaxis[n].title.style.fontSize,fontWeight:r.config.yaxis[n].title.style.fontWeight,fontFamily:r.config.yaxis[n].title.style.fontFamily,cssClass:"apexcharts-yaxis-title-text ".concat(r.config.yaxis[n].title.style.cssClass)});s.add(a),t.add(s)}}},{key:"addAxisBorder",value:function(e,t,n,r,s){var o=this.w,a=o.config.yaxis[n].axisBorder,l=31+a.offsetX;if(o.config.yaxis[n].opposite&&(l=-31-a.offsetX),a.show){var c=e.drawLine(l,o.globals.translateY+a.offsetY-2,l,o.globals.gridHeight+o.globals.translateY+a.offsetY+2,a.color,0,a.width);t.add(c)}o.config.yaxis[n].axisTicks.show&&this.axesUtils.drawYAxisTicks(l,r,a,o.config.yaxis[n].axisTicks,n,s,t)}},{key:"drawYaxisInversed",value:function(e){var t=this.w,n=new oe(this.ctx),r=n.group({class:"apexcharts-xaxis apexcharts-yaxis-inversed"}),s=n.group({class:"apexcharts-xaxis-texts-g",transform:"translate(".concat(t.globals.translateXAxisX,", ").concat(t.globals.translateXAxisY,")")});r.add(s);var o=t.globals.yAxisScale[e].result.length-1,a=t.globals.gridWidth/o+.1,l=a+t.config.xaxis.labels.offsetX,c=t.globals.xLabelFormatter,h=this.axesUtils.checkForReversedLabels(e,t.globals.yAxisScale[e].result.slice()),u=t.globals.timescaleLabels;if(u.length>0&&(this.xaxisLabels=u.slice(),o=(h=u.slice()).length),t.config.xaxis.labels.show)for(var d=u.length?0:o;u.length?d<u.length:d>=0;u.length?d++:d--){var f=c(h[d],d,t),g=t.globals.gridWidth+t.globals.padHorizontal-(l-a+t.config.xaxis.labels.offsetX);if(u.length){var m=this.axesUtils.getLabel(h,u,g,d,this.drawnLabels,this.xaxisFontSize);g=m.x,f=m.text,this.drawnLabels.push(m.text),d===0&&t.globals.skipFirstTimelinelabel&&(f=""),d===h.length-1&&t.globals.skipLastTimelinelabel&&(f="")}var b=n.drawText({x:g,y:this.xAxisoffX+t.config.xaxis.labels.offsetY+30-(t.config.xaxis.position==="top"?t.globals.xAxisHeight+t.config.xaxis.axisTicks.height-2:0),text:f,textAnchor:"middle",foreColor:Array.isArray(this.xaxisForeColors)?this.xaxisForeColors[e]:this.xaxisForeColors,fontSize:this.xaxisFontSize,fontFamily:this.xaxisFontFamily,fontWeight:t.config.xaxis.labels.style.fontWeight,isPlainText:!1,cssClass:"apexcharts-xaxis-label ".concat(t.config.xaxis.labels.style.cssClass)});s.add(b),b.tspan(f),this.addTooltip(b,f),l+=a}return this.inversedYAxisTitleText(r),this.inversedYAxisBorder(r),r}},{key:"inversedYAxisBorder",value:function(e){var t=this.w,n=new oe(this.ctx),r=t.config.xaxis.axisBorder;if(r.show){var s=0;t.config.chart.type==="bar"&&t.globals.isXNumeric&&(s-=15);var o=n.drawLine(t.globals.padHorizontal+s+r.offsetX,this.xAxisoffX,t.globals.gridWidth,this.xAxisoffX,r.color,0,r.height);this.elgrid&&this.elgrid.elGridBorders&&t.config.grid.show?this.elgrid.elGridBorders.add(o):e.add(o)}}},{key:"inversedYAxisTitleText",value:function(e){var t=this.w,n=new oe(this.ctx);if(t.config.xaxis.title.text!==void 0){var r=n.group({class:"apexcharts-xaxis-title apexcharts-yaxis-title-inversed"}),s=n.drawText({x:t.globals.gridWidth/2+t.config.xaxis.title.offsetX,y:this.xAxisoffX+parseFloat(this.xaxisFontSize)+parseFloat(t.config.xaxis.title.style.fontSize)+t.config.xaxis.title.offsetY+20,text:t.config.xaxis.title.text,textAnchor:"middle",fontSize:t.config.xaxis.title.style.fontSize,fontFamily:t.config.xaxis.title.style.fontFamily,fontWeight:t.config.xaxis.title.style.fontWeight,foreColor:t.config.xaxis.title.style.color,cssClass:"apexcharts-xaxis-title-text ".concat(t.config.xaxis.title.style.cssClass)});r.add(s),e.add(r)}}},{key:"yAxisTitleRotate",value:function(e,t){var n=this.w,r=new oe(this.ctx),s=n.globals.dom.baseEl.querySelector(".apexcharts-yaxis[rel='".concat(e,"'] .apexcharts-yaxis-texts-g")),o=s?s.getBoundingClientRect():{width:0,height:0},a=n.globals.dom.baseEl.querySelector(".apexcharts-yaxis[rel='".concat(e,"'] .apexcharts-yaxis-title text")),l=a?a.getBoundingClientRect():{width:0,height:0};if(a){var c=this.xPaddingForYAxisTitle(e,o,l,t);a.setAttribute("x",c.xPos-(t?10:0));var h=r.rotateAroundCenter(a);a.setAttribute("transform","rotate(".concat(t?-1*n.config.yaxis[e].title.rotate:n.config.yaxis[e].title.rotate," ").concat(h.x," ").concat(h.y,")"))}}},{key:"xPaddingForYAxisTitle",value:function(e,t,n,r){var s=this.w,o=0,a=10;return s.config.yaxis[e].title.text===void 0||e<0?{xPos:o,padd:0}:(r?o=t.width+s.config.yaxis[e].title.offsetX+n.width/2+a/2:(o=-1*t.width+s.config.yaxis[e].title.offsetX+a/2+n.width/2,s.globals.isBarHorizontal&&(a=25,o=-1*t.width-s.config.yaxis[e].title.offsetX-a)),{xPos:o,padd:a})}},{key:"setYAxisXPosition",value:function(e,t){var n=this.w,r=0,s=0,o=18,a=1;n.config.yaxis.length>1&&(this.multipleYs=!0),n.config.yaxis.forEach(function(l,c){var h=n.globals.ignoreYAxisIndexes.includes(c)||!l.show||l.floating||e[c].width===0,u=e[c].width+t[c].width;l.opposite?n.globals.isBarHorizontal?(s=n.globals.gridWidth+n.globals.translateX-1,n.globals.translateYAxisX[c]=s-l.labels.offsetX):(s=n.globals.gridWidth+n.globals.translateX+a,h||(a+=u+20),n.globals.translateYAxisX[c]=s-l.labels.offsetX+20):(r=n.globals.translateX-o,h||(o+=u+20),n.globals.translateYAxisX[c]=r+l.labels.offsetX)})}},{key:"setYAxisTextAlignments",value:function(){var e=this.w;H.listToArray(e.globals.dom.baseEl.getElementsByClassName("apexcharts-yaxis")).forEach(function(t,n){var r=e.config.yaxis[n];if(r&&!r.floating&&r.labels.align!==void 0){var s=e.globals.dom.baseEl.querySelector(".apexcharts-yaxis[rel='".concat(n,"'] .apexcharts-yaxis-texts-g")),o=H.listToArray(e.globals.dom.baseEl.querySelectorAll(".apexcharts-yaxis[rel='".concat(n,"'] .apexcharts-yaxis-label"))),a=s.getBoundingClientRect();o.forEach(function(l){l.setAttribute("text-anchor",r.labels.align)}),r.labels.align!=="left"||r.opposite?r.labels.align==="center"?s.setAttribute("transform","translate(".concat(a.width/2*(r.opposite?1:-1),", 0)")):r.labels.align==="right"&&r.opposite&&s.setAttribute("transform","translate(".concat(a.width,", 0)")):s.setAttribute("transform","translate(-".concat(a.width,", 0)"))}})}}]),i}(),nP=function(){function i(e){Ee(this,i),this.ctx=e,this.w=e.w,this.documentEvent=H.bind(this.documentEvent,this)}return Oe(i,[{key:"addEventListener",value:function(e,t){var n=this.w;n.globals.events.hasOwnProperty(e)?n.globals.events[e].push(t):n.globals.events[e]=[t]}},{key:"removeEventListener",value:function(e,t){var n=this.w;if(n.globals.events.hasOwnProperty(e)){var r=n.globals.events[e].indexOf(t);r!==-1&&n.globals.events[e].splice(r,1)}}},{key:"fireEvent",value:function(e,t){var n=this.w;if(n.globals.events.hasOwnProperty(e)){t&&t.length||(t=[]);for(var r=n.globals.events[e],s=r.length,o=0;o<s;o++)r[o].apply(null,t)}}},{key:"setupEventHandlers",value:function(){var e=this,t=this.w,n=this.ctx,r=t.globals.dom.baseEl.querySelector(t.globals.chartClass);this.ctx.eventList.forEach(function(s){r.addEventListener(s,function(o){var a=Object.assign({},t,{seriesIndex:t.globals.axisCharts?t.globals.capturedSeriesIndex:0,dataPointIndex:t.globals.capturedDataPointIndex});o.type==="mousemove"||o.type==="touchmove"?typeof t.config.chart.events.mouseMove=="function"&&t.config.chart.events.mouseMove(o,n,a):o.type==="mouseleave"||o.type==="touchleave"?typeof t.config.chart.events.mouseLeave=="function"&&t.config.chart.events.mouseLeave(o,n,a):(o.type==="mouseup"&&o.which===1||o.type==="touchend")&&(typeof t.config.chart.events.click=="function"&&t.config.chart.events.click(o,n,a),n.ctx.events.fireEvent("click",[o,n,a]))},{capture:!1,passive:!0})}),this.ctx.eventList.forEach(function(s){t.globals.dom.baseEl.addEventListener(s,e.documentEvent,{passive:!0})}),this.ctx.core.setupBrushHandler()}},{key:"documentEvent",value:function(e){var t=this.w,n=e.target.className;if(e.type==="click"){var r=t.globals.dom.baseEl.querySelector(".apexcharts-menu");r&&r.classList.contains("apexcharts-menu-open")&&n!=="apexcharts-menu-icon"&&r.classList.remove("apexcharts-menu-open")}t.globals.clientX=e.type==="touchmove"?e.touches[0].clientX:e.clientX,t.globals.clientY=e.type==="touchmove"?e.touches[0].clientY:e.clientY}}]),i}(),iP=function(){function i(e){Ee(this,i),this.ctx=e,this.w=e.w}return Oe(i,[{key:"setCurrentLocaleValues",value:function(e){var t=this.w.config.chart.locales;window.Apex.chart&&window.Apex.chart.locales&&window.Apex.chart.locales.length>0&&(t=this.w.config.chart.locales.concat(window.Apex.chart.locales));var n=t.filter(function(s){return s.name===e})[0];if(!n)throw new Error("Wrong locale name provided. Please make sure you set the correct locale name in options");var r=H.extend(a0,n);this.w.globals.locale=r.options}}]),i}(),rP=function(){function i(e){Ee(this,i),this.ctx=e,this.w=e.w}return Oe(i,[{key:"drawAxis",value:function(e,t){var n,r,s=this,o=this.w.globals,a=this.w.config,l=new Ga(this.ctx,t),c=new ap(this.ctx,t);o.axisCharts&&e!=="radar"&&(o.isBarHorizontal?(r=c.drawYaxisInversed(0),n=l.drawXaxisInversed(0),o.dom.elGraphical.add(n),o.dom.elGraphical.add(r)):(n=l.drawXaxis(),o.dom.elGraphical.add(n),a.yaxis.map(function(h,u){if(o.ignoreYAxisIndexes.indexOf(u)===-1&&(r=c.drawYaxis(u),o.dom.Paper.add(r),s.w.config.grid.position==="back")){var d=o.dom.Paper.children()[1];d.remove(),o.dom.Paper.add(d)}})))}}]),i}(),lp=function(){function i(e){Ee(this,i),this.ctx=e,this.w=e.w}return Oe(i,[{key:"drawXCrosshairs",value:function(){var e=this.w,t=new oe(this.ctx),n=new un(this.ctx),r=e.config.xaxis.crosshairs.fill.gradient,s=e.config.xaxis.crosshairs.dropShadow,o=e.config.xaxis.crosshairs.fill.type,a=r.colorFrom,l=r.colorTo,c=r.opacityFrom,h=r.opacityTo,u=r.stops,d=s.enabled,f=s.left,g=s.top,m=s.blur,b=s.color,y=s.opacity,w=e.config.xaxis.crosshairs.fill.color;if(e.config.xaxis.crosshairs.show){o==="gradient"&&(w=t.drawGradient("vertical",a,l,c,h,null,u,null));var C=t.drawRect();e.config.xaxis.crosshairs.width===1&&(C=t.drawLine());var M=e.globals.gridHeight;(!H.isNumber(M)||M<0)&&(M=0);var S=e.config.xaxis.crosshairs.width;(!H.isNumber(S)||S<0)&&(S=0),C.attr({class:"apexcharts-xcrosshairs",x:0,y:0,y2:M,width:S,height:M,fill:w,filter:"none","fill-opacity":e.config.xaxis.crosshairs.opacity,stroke:e.config.xaxis.crosshairs.stroke.color,"stroke-width":e.config.xaxis.crosshairs.stroke.width,"stroke-dasharray":e.config.xaxis.crosshairs.stroke.dashArray}),d&&(C=n.dropShadow(C,{left:f,top:g,blur:m,color:b,opacity:y})),e.globals.dom.elGraphical.add(C)}}},{key:"drawYCrosshairs",value:function(){var e=this.w,t=new oe(this.ctx),n=e.config.yaxis[0].crosshairs,r=e.globals.barPadForNumericAxis;if(e.config.yaxis[0].crosshairs.show){var s=t.drawLine(-r,0,e.globals.gridWidth+r,0,n.stroke.color,n.stroke.dashArray,n.stroke.width);s.attr({class:"apexcharts-ycrosshairs"}),e.globals.dom.elGraphical.add(s)}var o=t.drawLine(-r,0,e.globals.gridWidth+r,0,n.stroke.color,0,0);o.attr({class:"apexcharts-ycrosshairs-hidden"}),e.globals.dom.elGraphical.add(o)}}]),i}(),sP=function(){function i(e){Ee(this,i),this.ctx=e,this.w=e.w}return Oe(i,[{key:"checkResponsiveConfig",value:function(e){var t=this,n=this.w,r=n.config;if(r.responsive.length!==0){var s=r.responsive.slice();s.sort(function(c,h){return c.breakpoint>h.breakpoint?1:h.breakpoint>c.breakpoint?-1:0}).reverse();var o=new Va({}),a=function(){var c=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},h=s[0].breakpoint,u=window.innerWidth>0?window.innerWidth:screen.width;if(u>h){var d=H.clone(n.globals.initialConfig);d.series=H.clone(n.config.series);var f=Bt.extendArrayProps(o,d,n);c=H.extend(f,c),c=H.extend(n.config,c),t.overrideResponsiveOptions(c)}else for(var g=0;g<s.length;g++)u<s[g].breakpoint&&(c=Bt.extendArrayProps(o,s[g].options,n),c=H.extend(n.config,c),t.overrideResponsiveOptions(c))};if(e){var l=Bt.extendArrayProps(o,e,n);l=H.extend(n.config,l),a(l=H.extend(l,e))}else a({})}}},{key:"overrideResponsiveOptions",value:function(e){var t=new Va(e).init({responsiveOverride:!0});this.w.config=t}}]),i}(),oP=function(){function i(e){Ee(this,i),this.ctx=e,this.w=e.w,this.colors=[],this.isColorFn=!1,this.isHeatmapDistributed=this.checkHeatmapDistributed(),this.isBarDistributed=this.checkBarDistributed()}return Oe(i,[{key:"checkHeatmapDistributed",value:function(){var e=this.w.config,t=e.chart,n=e.plotOptions;return t.type==="treemap"&&n.treemap&&n.treemap.distributed||t.type==="heatmap"&&n.heatmap&&n.heatmap.distributed}},{key:"checkBarDistributed",value:function(){var e=this.w.config,t=e.chart,n=e.plotOptions;return n.bar&&n.bar.distributed&&(t.type==="bar"||t.type==="rangeBar")}},{key:"init",value:function(){this.setDefaultColors()}},{key:"setDefaultColors",value:function(){var e=this.w,t=new H;e.globals.dom.elWrap.classList.add("apexcharts-theme-".concat(e.config.theme.mode));var n=Gt(e.config.colors||e.config.fill.colors||[]);e.globals.colors=this.getColors(n),this.applySeriesColors(e.globals.seriesColors,e.globals.colors),e.config.theme.monochrome.enabled&&(e.globals.colors=this.getMonochromeColors(e.config.theme.monochrome,e.globals.series,t));var r=e.globals.colors.slice();this.pushExtraColors(e.globals.colors),this.applyColorTypes(["fill","stroke"],r),this.applyDataLabelsColors(r),this.applyRadarPolygonsColors(),this.applyMarkersColors(r)}},{key:"getColors",value:function(e){var t=this,n=this.w;return e&&e.length!==0?Array.isArray(e)&&e.length>0&&typeof e[0]=="function"?(this.isColorFn=!0,n.config.series.map(function(r,s){var o=e[s]||e[0];return typeof o=="function"?o({value:n.globals.axisCharts?n.globals.series[s][0]||0:n.globals.series[s],seriesIndex:s,dataPointIndex:s,w:t.w}):o})):e:this.predefined()}},{key:"applySeriesColors",value:function(e,t){e.forEach(function(n,r){n&&(t[r]=n)})}},{key:"getMonochromeColors",value:function(e,t,n){var r=e.color,s=e.shadeIntensity,o=e.shadeTo,a=this.isBarDistributed||this.isHeatmapDistributed?t[0].length*t.length:t.length,l=1/(a/s),c=0;return Array.from({length:a},function(){var h=o==="dark"?n.shadeColor(-1*c,r):n.shadeColor(c,r);return c+=l,h})}},{key:"applyColorTypes",value:function(e,t){var n=this,r=this.w;e.forEach(function(s){r.globals[s].colors=r.config[s].colors===void 0?n.isColorFn?r.config.colors:t:r.config[s].colors.slice(),n.pushExtraColors(r.globals[s].colors)})}},{key:"applyDataLabelsColors",value:function(e){var t=this.w;t.globals.dataLabels.style.colors=t.config.dataLabels.style.colors===void 0?e:t.config.dataLabels.style.colors.slice(),this.pushExtraColors(t.globals.dataLabels.style.colors,50)}},{key:"applyRadarPolygonsColors",value:function(){var e=this.w;e.globals.radarPolygons.fill.colors=e.config.plotOptions.radar.polygons.fill.colors===void 0?[e.config.theme.mode==="dark"?"#424242":"none"]:e.config.plotOptions.radar.polygons.fill.colors.slice(),this.pushExtraColors(e.globals.radarPolygons.fill.colors,20)}},{key:"applyMarkersColors",value:function(e){var t=this.w;t.globals.markers.colors=t.config.markers.colors===void 0?e:t.config.markers.colors.slice(),this.pushExtraColors(t.globals.markers.colors)}},{key:"pushExtraColors",value:function(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,r=this.w,s=t||r.globals.series.length;if(n===null&&(n=this.isBarDistributed||this.isHeatmapDistributed||r.config.chart.type==="heatmap"&&r.config.plotOptions.heatmap&&r.config.plotOptions.heatmap.colorScale.inverse),n&&r.globals.series.length&&(s=r.globals.series[r.globals.maxValsInArrayIndex].length*r.globals.series.length),e.length<s)for(var o=s-e.length,a=0;a<o;a++)e.push(e[a])}},{key:"updateThemeOptions",value:function(e){e.chart=e.chart||{},e.tooltip=e.tooltip||{};var t=e.theme.mode,n=t==="dark"?"palette4":t==="light"?"palette1":e.theme.palette||"palette1",r=t==="dark"?"#f6f7f8":t==="light"?"#373d3f":e.chart.foreColor||"#373d3f";return e.tooltip.theme=t||"light",e.chart.foreColor=r,e.theme.palette=n,e}},{key:"predefined",value:function(){var e={palette1:["#008FFB","#00E396","#FEB019","#FF4560","#775DD0"],palette2:["#3f51b5","#03a9f4","#4caf50","#f9ce1d","#FF9800"],palette3:["#33b2df","#546E7A","#d4526e","#13d8aa","#A5978B"],palette4:["#4ecdc4","#c7f464","#81D4FA","#fd6a6a","#546E7A"],palette5:["#2b908f","#f9a3a4","#90ee7e","#fa4443","#69d2e7"],palette6:["#449DD1","#F86624","#EA3546","#662E9B","#C5D86D"],palette7:["#D7263D","#1B998B","#2E294E","#F46036","#E2C044"],palette8:["#662E9B","#F86624","#F9C80E","#EA3546","#43BCCD"],palette9:["#5C4742","#A5978B","#8D5B4C","#5A2A27","#C4BBAF"],palette10:["#A300D6","#7D02EB","#5653FE","#2983FF","#00B1F2"],default:["#008FFB","#00E396","#FEB019","#FF4560","#775DD0"]};return e[this.w.config.theme.palette]||e.default}}]),i}(),aP=function(){function i(e){Ee(this,i),this.ctx=e,this.w=e.w}return Oe(i,[{key:"draw",value:function(){this.drawTitleSubtitle("title"),this.drawTitleSubtitle("subtitle")}},{key:"drawTitleSubtitle",value:function(e){var t=this.w,n=e==="title"?t.config.title:t.config.subtitle,r=t.globals.svgWidth/2,s=n.offsetY,o="middle";if(n.align==="left"?(r=10,o="start"):n.align==="right"&&(r=t.globals.svgWidth-10,o="end"),r+=n.offsetX,s=s+parseInt(n.style.fontSize,10)+n.margin/2,n.text!==void 0){var a=new oe(this.ctx).drawText({x:r,y:s,text:n.text,textAnchor:o,fontSize:n.style.fontSize,fontFamily:n.style.fontFamily,fontWeight:n.style.fontWeight,foreColor:n.style.color,opacity:1});a.node.setAttribute("class","apexcharts-".concat(e,"-text")),t.globals.dom.Paper.add(a)}}}]),i}(),lP=function(){function i(e){Ee(this,i),this.w=e.w,this.dCtx=e}return Oe(i,[{key:"getTitleSubtitleCoords",value:function(e){var t=this.w,n=0,r=0,s=e==="title"?t.config.title.floating:t.config.subtitle.floating,o=t.globals.dom.baseEl.querySelector(".apexcharts-".concat(e,"-text"));if(o!==null&&!s){var a=o.getBoundingClientRect();n=a.width,r=t.globals.axisCharts?a.height+5:a.height}return{width:n,height:r}}},{key:"getLegendsRect",value:function(){var e=this.w,t=e.globals.dom.elLegendWrap;e.config.legend.height||e.config.legend.position!=="top"&&e.config.legend.position!=="bottom"||(t.style.maxHeight=e.globals.svgHeight/2+"px");var n=Object.assign({},H.getBoundingClientRect(t));return t!==null&&!e.config.legend.floating&&e.config.legend.show?this.dCtx.lgRect={x:n.x,y:n.y,height:n.height,width:n.height===0?0:n.width}:this.dCtx.lgRect={x:0,y:0,height:0,width:0},e.config.legend.position!=="left"&&e.config.legend.position!=="right"||1.5*this.dCtx.lgRect.width>e.globals.svgWidth&&(this.dCtx.lgRect.width=e.globals.svgWidth/1.5),this.dCtx.lgRect}},{key:"getDatalabelsRect",value:function(){var e=this,t=this.w,n=[];t.config.series.forEach(function(l,c){l.data.forEach(function(h,u){var d;d=t.globals.series[c][u],r=t.config.dataLabels.formatter(d,{ctx:e.dCtx.ctx,seriesIndex:c,dataPointIndex:u,w:t}),n.push(r)})});var r=H.getLargestStringFromArr(n),s=new oe(this.dCtx.ctx),o=t.config.dataLabels.style,a=s.getTextRects(r,parseInt(o.fontSize),o.fontFamily);return{width:1.05*a.width,height:a.height}}},{key:"getLargestStringFromMultiArr",value:function(e,t){var n=e;if(this.w.globals.isMultiLineX){var r=t.map(function(o,a){return Array.isArray(o)?o.length:1}),s=Math.max.apply(Math,Gt(r));n=t[r.indexOf(s)]}return n}}]),i}(),cP=function(){function i(e){Ee(this,i),this.w=e.w,this.dCtx=e}return Oe(i,[{key:"getxAxisLabelsCoords",value:function(){var e,t=this.w,n=t.globals.labels.slice();if(t.config.xaxis.convertedCatToNumeric&&n.length===0&&(n=t.globals.categoryLabels),t.globals.timescaleLabels.length>0){var r=this.getxAxisTimeScaleLabelsCoords();e={width:r.width,height:r.height},t.globals.rotateXLabels=!1}else{this.dCtx.lgWidthForSideLegends=t.config.legend.position!=="left"&&t.config.legend.position!=="right"||t.config.legend.floating?0:this.dCtx.lgRect.width;var s=t.globals.xLabelFormatter,o=H.getLargestStringFromArr(n),a=this.dCtx.dimHelpers.getLargestStringFromMultiArr(o,n);t.globals.isBarHorizontal&&(a=o=t.globals.yAxisScale[0].result.reduce(function(g,m){return g.length>m.length?g:m},0));var l=new Ya(this.dCtx.ctx),c=o;o=l.xLabelFormat(s,o,c,{i:void 0,dateFormatter:new dn(this.dCtx.ctx).formatDate,w:t}),a=l.xLabelFormat(s,a,c,{i:void 0,dateFormatter:new dn(this.dCtx.ctx).formatDate,w:t}),(t.config.xaxis.convertedCatToNumeric&&o===void 0||String(o).trim()==="")&&(a=o="1");var h=new oe(this.dCtx.ctx),u=h.getTextRects(o,t.config.xaxis.labels.style.fontSize),d=u;if(o!==a&&(d=h.getTextRects(a,t.config.xaxis.labels.style.fontSize)),(e={width:u.width>=d.width?u.width:d.width,height:u.height>=d.height?u.height:d.height}).width*n.length>t.globals.svgWidth-this.dCtx.lgWidthForSideLegends-this.dCtx.yAxisWidth-this.dCtx.gridPad.left-this.dCtx.gridPad.right&&t.config.xaxis.labels.rotate!==0||t.config.xaxis.labels.rotateAlways){if(!t.globals.isBarHorizontal){t.globals.rotateXLabels=!0;var f=function(g){return h.getTextRects(g,t.config.xaxis.labels.style.fontSize,t.config.xaxis.labels.style.fontFamily,"rotate(".concat(t.config.xaxis.labels.rotate," 0 0)"),!1)};u=f(o),o!==a&&(d=f(a)),e.height=(u.height>d.height?u.height:d.height)/1.5,e.width=u.width>d.width?u.width:d.width}}else t.globals.rotateXLabels=!1}return t.config.xaxis.labels.show||(e={width:0,height:0}),{width:e.width,height:e.height}}},{key:"getxAxisGroupLabelsCoords",value:function(){var e,t=this.w;if(!t.globals.hasXaxisGroups)return{width:0,height:0};var n,r=((e=t.config.xaxis.group.style)===null||e===void 0?void 0:e.fontSize)||t.config.xaxis.labels.style.fontSize,s=t.globals.groups.map(function(u){return u.title}),o=H.getLargestStringFromArr(s),a=this.dCtx.dimHelpers.getLargestStringFromMultiArr(o,s),l=new oe(this.dCtx.ctx),c=l.getTextRects(o,r),h=c;return o!==a&&(h=l.getTextRects(a,r)),n={width:c.width>=h.width?c.width:h.width,height:c.height>=h.height?c.height:h.height},t.config.xaxis.labels.show||(n={width:0,height:0}),{width:n.width,height:n.height}}},{key:"getxAxisTitleCoords",value:function(){var e=this.w,t=0,n=0;if(e.config.xaxis.title.text!==void 0){var r=new oe(this.dCtx.ctx).getTextRects(e.config.xaxis.title.text,e.config.xaxis.title.style.fontSize);t=r.width,n=r.height}return{width:t,height:n}}},{key:"getxAxisTimeScaleLabelsCoords",value:function(){var e,t=this.w;this.dCtx.timescaleLabels=t.globals.timescaleLabels.slice();var n=this.dCtx.timescaleLabels.map(function(s){return s.value}),r=n.reduce(function(s,o){return s===void 0?(console.error("You have possibly supplied invalid Date format. Please supply a valid JavaScript Date"),0):s.length>o.length?s:o},0);return 1.05*(e=new oe(this.dCtx.ctx).getTextRects(r,t.config.xaxis.labels.style.fontSize)).width*n.length>t.globals.gridWidth&&t.config.xaxis.labels.rotate!==0&&(t.globals.overlappingXLabels=!0),e}},{key:"additionalPaddingXLabels",value:function(e){var t=this,n=this.w,r=n.globals,s=n.config,o=s.xaxis.type,a=e.width;r.skipLastTimelinelabel=!1,r.skipFirstTimelinelabel=!1;var l=n.config.yaxis[0].opposite&&n.globals.isBarHorizontal,c=function(h,u){s.yaxis.length>1&&function(d){return r.collapsedSeriesIndices.indexOf(d)!==-1}(u)||function(d){if(t.dCtx.timescaleLabels&&t.dCtx.timescaleLabels.length){var f=t.dCtx.timescaleLabels[0],g=t.dCtx.timescaleLabels[t.dCtx.timescaleLabels.length-1].position+a/1.75-t.dCtx.yAxisWidthRight,m=f.position-a/1.75+t.dCtx.yAxisWidthLeft,b=n.config.legend.position==="right"&&t.dCtx.lgRect.width>0?t.dCtx.lgRect.width:0;g>r.svgWidth-r.translateX-b&&(r.skipLastTimelinelabel=!0),m<-(d.show&&!d.floating||s.chart.type!=="bar"&&s.chart.type!=="candlestick"&&s.chart.type!=="rangeBar"&&s.chart.type!=="boxPlot"?10:a/1.75)&&(r.skipFirstTimelinelabel=!0)}else o==="datetime"?t.dCtx.gridPad.right<a&&!r.rotateXLabels&&(r.skipLastTimelinelabel=!0):o!=="datetime"&&t.dCtx.gridPad.right<a/2-t.dCtx.yAxisWidthRight&&!r.rotateXLabels&&!n.config.xaxis.labels.trim&&(t.dCtx.xPadRight=a/2+1)}(h)};s.yaxis.forEach(function(h,u){l?(t.dCtx.gridPad.left<a&&(t.dCtx.xPadLeft=a/2+1),t.dCtx.xPadRight=a/2+1):c(h,u)})}}]),i}(),hP=function(){function i(e){Ee(this,i),this.w=e.w,this.dCtx=e}return Oe(i,[{key:"getyAxisLabelsCoords",value:function(){var e=this,t=this.w,n=[],r=10,s=new Br(this.dCtx.ctx);return t.config.yaxis.map(function(o,a){var l={seriesIndex:a,dataPointIndex:-1,w:t},c=t.globals.yAxisScale[a],h=0;if(!s.isYAxisHidden(a)&&o.labels.show&&o.labels.minWidth!==void 0&&(h=o.labels.minWidth),!s.isYAxisHidden(a)&&o.labels.show&&c.result.length){var u=t.globals.yLabelFormatters[a],d=c.niceMin===Number.MIN_VALUE?0:c.niceMin,f=c.result.reduce(function(M,S){var O,T;return((O=String(u(M,l)))===null||O===void 0?void 0:O.length)>((T=String(u(S,l)))===null||T===void 0?void 0:T.length)?M:S},d),g=f=u(f,l);if(f!==void 0&&f.length!==0||(f=c.niceMax),t.globals.isBarHorizontal){r=0;var m=t.globals.labels.slice();f=H.getLargestStringFromArr(m),f=u(f,{seriesIndex:a,dataPointIndex:-1,w:t}),g=e.dCtx.dimHelpers.getLargestStringFromMultiArr(f,m)}var b=new oe(e.dCtx.ctx),y="rotate(".concat(o.labels.rotate," 0 0)"),w=b.getTextRects(f,o.labels.style.fontSize,o.labels.style.fontFamily,y,!1),C=w;f!==g&&(C=b.getTextRects(g,o.labels.style.fontSize,o.labels.style.fontFamily,y,!1)),n.push({width:(h>C.width||h>w.width?h:C.width>w.width?C.width:w.width)+r,height:C.height>w.height?C.height:w.height})}else n.push({width:0,height:0})}),n}},{key:"getyAxisTitleCoords",value:function(){var e=this,t=this.w,n=[];return t.config.yaxis.map(function(r,s){if(r.show&&r.title.text!==void 0){var o=new oe(e.dCtx.ctx),a="rotate(".concat(r.title.rotate," 0 0)"),l=o.getTextRects(r.title.text,r.title.style.fontSize,r.title.style.fontFamily,a,!1);n.push({width:l.width,height:l.height})}else n.push({width:0,height:0})}),n}},{key:"getTotalYAxisWidth",value:function(){var e=this.w,t=0,n=0,r=0,s=e.globals.yAxisScale.length>1?10:0,o=new Br(this.dCtx.ctx),a=function(l,c){var h=e.config.yaxis[c].floating,u=0;l.width>0&&!h?(u=l.width+s,function(d){return e.globals.ignoreYAxisIndexes.indexOf(d)>-1}(c)&&(u=u-l.width-s)):u=h||o.isYAxisHidden(c)?0:5,e.config.yaxis[c].opposite?r+=u:n+=u,t+=u};return e.globals.yLabelsCoords.map(function(l,c){a(l,c)}),e.globals.yTitleCoords.map(function(l,c){a(l,c)}),e.globals.isBarHorizontal&&!e.config.yaxis[0].floating&&(t=e.globals.yLabelsCoords[0].width+e.globals.yTitleCoords[0].width+15),this.dCtx.yAxisWidthLeft=n,this.dCtx.yAxisWidthRight=r,t}}]),i}(),uP=function(){function i(e){Ee(this,i),this.w=e.w,this.dCtx=e}return Oe(i,[{key:"gridPadForColumnsInNumericAxis",value:function(e){var t=this.w,n=t.config,r=t.globals;if(r.noData||r.collapsedSeries.length+r.ancillaryCollapsedSeries.length===n.series.length)return 0;var s=function(f){return["bar","rangeBar","candlestick","boxPlot"].includes(f)},o=n.chart.type,a=0,l=s(o)?n.series.length:1;r.comboBarCount>0&&(l=r.comboBarCount),r.collapsedSeries.forEach(function(f){s(f.type)&&(l-=1)}),n.chart.stacked&&(l=1);var c=s(o)||r.comboBarCount>0,h=Math.abs(r.initialMaxX-r.initialMinX);if(c&&r.isXNumeric&&!r.isBarHorizontal&&l>0&&h!==0){h<=3&&(h=r.dataPoints);var u=h/e,d=r.minXDiff&&r.minXDiff/u>0?r.minXDiff/u:0;d>e/2&&(d/=2),(a=d*parseInt(n.plotOptions.bar.columnWidth,10)/100)<1&&(a=1),r.barPadForNumericAxis=a}return a}},{key:"gridPadFortitleSubtitle",value:function(){var e=this,t=this.w,n=t.globals,r=this.dCtx.isSparkline||!n.axisCharts?0:10;["title","subtitle"].forEach(function(a){t.config[a].text!==void 0?r+=t.config[a].margin:r+=e.dCtx.isSparkline||!n.axisCharts?0:5}),!t.config.legend.show||t.config.legend.position!=="bottom"||t.config.legend.floating||n.axisCharts||(r+=10);var s=this.dCtx.dimHelpers.getTitleSubtitleCoords("title"),o=this.dCtx.dimHelpers.getTitleSubtitleCoords("subtitle");n.gridHeight-=s.height+o.height+r,n.translateY+=s.height+o.height+r}},{key:"setGridXPosForDualYAxis",value:function(e,t){var n=this.w,r=new Br(this.dCtx.ctx);n.config.yaxis.forEach(function(s,o){n.globals.ignoreYAxisIndexes.indexOf(o)!==-1||s.floating||r.isYAxisHidden(o)||(s.opposite&&(n.globals.translateX-=t[o].width+e[o].width+parseInt(s.labels.style.fontSize,10)/1.2+12),n.globals.translateX<2&&(n.globals.translateX=2))})}}]),i}(),xh=function(){function i(e){Ee(this,i),this.ctx=e,this.w=e.w,this.lgRect={},this.yAxisWidth=0,this.yAxisWidthLeft=0,this.yAxisWidthRight=0,this.xAxisHeight=0,this.isSparkline=this.w.config.chart.sparkline.enabled,this.dimHelpers=new lP(this),this.dimYAxis=new hP(this),this.dimXAxis=new cP(this),this.dimGrid=new uP(this),this.lgWidthForSideLegends=0,this.gridPad=this.w.config.grid.padding,this.xPadRight=0,this.xPadLeft=0}return Oe(i,[{key:"plotCoords",value:function(){var e=this,t=this.w,n=t.globals;this.lgRect=this.dimHelpers.getLegendsRect(),this.datalabelsCoords={width:0,height:0};var r=Array.isArray(t.config.stroke.width)?Math.max.apply(Math,Gt(t.config.stroke.width)):t.config.stroke.width;this.isSparkline&&((t.config.markers.discrete.length>0||t.config.markers.size>0)&&Object.entries(this.gridPad).forEach(function(o){var a=kv(o,2),l=a[0],c=a[1];e.gridPad[l]=Math.max(c,e.w.globals.markers.largestSize/1.5)}),this.gridPad.top=Math.max(r/2,this.gridPad.top),this.gridPad.bottom=Math.max(r/2,this.gridPad.bottom)),n.axisCharts?this.setDimensionsForAxisCharts():this.setDimensionsForNonAxisCharts(),this.dimGrid.gridPadFortitleSubtitle(),n.gridHeight=n.gridHeight-this.gridPad.top-this.gridPad.bottom,n.gridWidth=n.gridWidth-this.gridPad.left-this.gridPad.right-this.xPadRight-this.xPadLeft;var s=this.dimGrid.gridPadForColumnsInNumericAxis(n.gridWidth);n.gridWidth=n.gridWidth-2*s,n.translateX=n.translateX+this.gridPad.left+this.xPadLeft+(s>0?s:0),n.translateY=n.translateY+this.gridPad.top}},{key:"setDimensionsForAxisCharts",value:function(){var e=this,t=this.w,n=t.globals,r=this.dimYAxis.getyAxisLabelsCoords(),s=this.dimYAxis.getyAxisTitleCoords();n.isSlopeChart&&(this.datalabelsCoords=this.dimHelpers.getDatalabelsRect()),t.globals.yLabelsCoords=[],t.globals.yTitleCoords=[],t.config.yaxis.map(function(f,g){t.globals.yLabelsCoords.push({width:r[g].width,index:g}),t.globals.yTitleCoords.push({width:s[g].width,index:g})}),this.yAxisWidth=this.dimYAxis.getTotalYAxisWidth();var o=this.dimXAxis.getxAxisLabelsCoords(),a=this.dimXAxis.getxAxisGroupLabelsCoords(),l=this.dimXAxis.getxAxisTitleCoords();this.conditionalChecksForAxisCoords(o,l,a),n.translateXAxisY=t.globals.rotateXLabels?this.xAxisHeight/8:-4,n.translateXAxisX=t.globals.rotateXLabels&&t.globals.isXNumeric&&t.config.xaxis.labels.rotate<=-45?-this.xAxisWidth/4:0,t.globals.isBarHorizontal&&(n.rotateXLabels=!1,n.translateXAxisY=parseInt(t.config.xaxis.labels.style.fontSize,10)/1.5*-1),n.translateXAxisY=n.translateXAxisY+t.config.xaxis.labels.offsetY,n.translateXAxisX=n.translateXAxisX+t.config.xaxis.labels.offsetX;var c=this.yAxisWidth,h=this.xAxisHeight;n.xAxisLabelsHeight=this.xAxisHeight-l.height,n.xAxisGroupLabelsHeight=n.xAxisLabelsHeight-o.height,n.xAxisLabelsWidth=this.xAxisWidth,n.xAxisHeight=this.xAxisHeight;var u=10;(t.config.chart.type==="radar"||this.isSparkline)&&(c=0,h=0),this.isSparkline&&(this.lgRect={height:0,width:0}),(this.isSparkline||t.config.chart.type==="treemap")&&(c=0,h=0,u=0),this.isSparkline||t.config.chart.type==="treemap"||this.dimXAxis.additionalPaddingXLabels(o);var d=function(){n.translateX=c+e.datalabelsCoords.width,n.gridHeight=n.svgHeight-e.lgRect.height-h-(e.isSparkline||t.config.chart.type==="treemap"?0:t.globals.rotateXLabels?10:15),n.gridWidth=n.svgWidth-c-2*e.datalabelsCoords.width};switch(t.config.xaxis.position==="top"&&(u=n.xAxisHeight-t.config.xaxis.axisTicks.height-5),t.config.legend.position){case"bottom":n.translateY=u,d();break;case"top":n.translateY=this.lgRect.height+u,d();break;case"left":n.translateY=u,n.translateX=this.lgRect.width+c+this.datalabelsCoords.width,n.gridHeight=n.svgHeight-h-12,n.gridWidth=n.svgWidth-this.lgRect.width-c-2*this.datalabelsCoords.width;break;case"right":n.translateY=u,n.translateX=c+this.datalabelsCoords.width,n.gridHeight=n.svgHeight-h-12,n.gridWidth=n.svgWidth-this.lgRect.width-c-2*this.datalabelsCoords.width-5;break;default:throw new Error("Legend position not supported")}this.dimGrid.setGridXPosForDualYAxis(s,r),new ap(this.ctx).setYAxisXPosition(r,s)}},{key:"setDimensionsForNonAxisCharts",value:function(){var e=this.w,t=e.globals,n=e.config,r=0;e.config.legend.show&&!e.config.legend.floating&&(r=20);var s=n.chart.type==="pie"||n.chart.type==="polarArea"||n.chart.type==="donut"?"pie":"radialBar",o=n.plotOptions[s].offsetY,a=n.plotOptions[s].offsetX;if(!n.legend.show||n.legend.floating){t.gridHeight=t.svgHeight;var l=t.dom.elWrap.getBoundingClientRect().width;return t.gridWidth=Math.min(l,t.gridHeight),t.translateY=o,void(t.translateX=a+(t.svgWidth-t.gridWidth)/2)}switch(n.legend.position){case"bottom":t.gridHeight=t.svgHeight-this.lgRect.height,t.gridWidth=t.svgWidth,t.translateY=o-10,t.translateX=a+(t.svgWidth-t.gridWidth)/2;break;case"top":t.gridHeight=t.svgHeight-this.lgRect.height,t.gridWidth=t.svgWidth,t.translateY=this.lgRect.height+o+10,t.translateX=a+(t.svgWidth-t.gridWidth)/2;break;case"left":t.gridWidth=t.svgWidth-this.lgRect.width-r,t.gridHeight=n.chart.height!=="auto"?t.svgHeight:t.gridWidth,t.translateY=o,t.translateX=a+this.lgRect.width+r;break;case"right":t.gridWidth=t.svgWidth-this.lgRect.width-r-5,t.gridHeight=n.chart.height!=="auto"?t.svgHeight:t.gridWidth,t.translateY=o,t.translateX=a+10;break;default:throw new Error("Legend position not supported")}}},{key:"conditionalChecksForAxisCoords",value:function(e,t,n){var r=this.w,s=r.globals.hasXaxisGroups?2:1,o=n.height+e.height+t.height,a=r.globals.isMultiLineX?1.2:r.globals.LINE_HEIGHT_RATIO,l=r.globals.rotateXLabels?22:10,c=r.globals.rotateXLabels&&r.config.legend.position==="bottom"?10:0;this.xAxisHeight=o*a+s*l+c,this.xAxisWidth=e.width,this.xAxisHeight-t.height>r.config.xaxis.labels.maxHeight&&(this.xAxisHeight=r.config.xaxis.labels.maxHeight),r.config.xaxis.labels.minHeight&&this.xAxisHeight<r.config.xaxis.labels.minHeight&&(this.xAxisHeight=r.config.xaxis.labels.minHeight),r.config.xaxis.floating&&(this.xAxisHeight=0);var h=0,u=0;r.config.yaxis.forEach(function(d){h+=d.labels.minWidth,u+=d.labels.maxWidth}),this.yAxisWidth<h&&(this.yAxisWidth=h),this.yAxisWidth>u&&(this.yAxisWidth=u)}}]),i}(),dP=function(){function i(e){Ee(this,i),this.w=e.w,this.lgCtx=e}return Oe(i,[{key:"getLegendStyles",value:function(){var e,t,n,r=document.createElement("style");r.setAttribute("type","text/css");var s=((e=this.lgCtx.ctx)===null||e===void 0||(t=e.opts)===null||t===void 0||(n=t.chart)===null||n===void 0?void 0:n.nonce)||this.w.config.chart.nonce;s&&r.setAttribute("nonce",s);var o=document.createTextNode(`
          .apexcharts-flip-y {
            transform: scaleY(-1) translateY(-100%);
            transform-origin: top;
            transform-box: fill-box;
          }
          .apexcharts-flip-x {
            transform: scaleX(-1);
            transform-origin: center;
            transform-box: fill-box;
          }
          .apexcharts-legend {
            display: flex;
            overflow: auto;
            padding: 0 10px;
          }
          .apexcharts-legend.apexcharts-legend-group-horizontal {
            flex-direction: column;
          }
          .apexcharts-legend-group {
            display: flex;
          }
          .apexcharts-legend-group-vertical {
            flex-direction: column-reverse;
          }
          .apexcharts-legend.apx-legend-position-bottom, .apexcharts-legend.apx-legend-position-top {
            flex-wrap: wrap
          }
          .apexcharts-legend.apx-legend-position-right, .apexcharts-legend.apx-legend-position-left {
            flex-direction: column;
            bottom: 0;
          }
          .apexcharts-legend.apx-legend-position-bottom.apexcharts-align-left, .apexcharts-legend.apx-legend-position-top.apexcharts-align-left, .apexcharts-legend.apx-legend-position-right, .apexcharts-legend.apx-legend-position-left {
            justify-content: flex-start;
            align-items: flex-start;
          }
          .apexcharts-legend.apx-legend-position-bottom.apexcharts-align-center, .apexcharts-legend.apx-legend-position-top.apexcharts-align-center {
            justify-content: center;
            align-items: center;
          }
          .apexcharts-legend.apx-legend-position-bottom.apexcharts-align-right, .apexcharts-legend.apx-legend-position-top.apexcharts-align-right {
            justify-content: flex-end;
            align-items: flex-end;
          }
          .apexcharts-legend-series {
            cursor: pointer;
            line-height: normal;
            display: flex;
            align-items: center;
          }
          .apexcharts-legend-text {
            position: relative;
            font-size: 14px;
          }
          .apexcharts-legend-text *, .apexcharts-legend-marker * {
            pointer-events: none;
          }
          .apexcharts-legend-marker {
            position: relative;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            margin-right: 1px;
          }
    
          .apexcharts-legend-series.apexcharts-no-click {
            cursor: auto;
          }
          .apexcharts-legend .apexcharts-hidden-zero-series, .apexcharts-legend .apexcharts-hidden-null-series {
            display: none !important;
          }
          .apexcharts-inactive-legend {
            opacity: 0.45;
          }
    
        `);return r.appendChild(o),r}},{key:"getLegendDimensions",value:function(){var e=this.w.globals.dom.baseEl.querySelector(".apexcharts-legend").getBoundingClientRect(),t=e.width;return{clwh:e.height,clww:t}}},{key:"appendToForeignObject",value:function(){this.w.globals.dom.elLegendForeign.appendChild(this.getLegendStyles())}},{key:"toggleDataSeries",value:function(e,t){var n=this,r=this.w;if(r.globals.axisCharts||r.config.chart.type==="radialBar"){r.globals.resized=!0;var s=null,o=null;r.globals.risingSeries=[],r.globals.axisCharts?(s=r.globals.dom.baseEl.querySelector(".apexcharts-series[data\\:realIndex='".concat(e,"']")),o=parseInt(s.getAttribute("data:realIndex"),10)):(s=r.globals.dom.baseEl.querySelector(".apexcharts-series[rel='".concat(e+1,"']")),o=parseInt(s.getAttribute("rel"),10)-1),t?[{cs:r.globals.collapsedSeries,csi:r.globals.collapsedSeriesIndices},{cs:r.globals.ancillaryCollapsedSeries,csi:r.globals.ancillaryCollapsedSeriesIndices}].forEach(function(h){n.riseCollapsedSeries(h.cs,h.csi,o)}):this.hideSeries({seriesEl:s,realIndex:o})}else{var a=r.globals.dom.Paper.findOne(" .apexcharts-series[rel='".concat(e+1,"'] path")),l=r.config.chart.type;if(l==="pie"||l==="polarArea"||l==="donut"){var c=r.config.plotOptions.pie.donut.labels;new oe(this.lgCtx.ctx).pathMouseDown(a,null),this.lgCtx.ctx.pie.printDataLabelsInner(a.node,c)}a.fire("click")}}},{key:"getSeriesAfterCollapsing",value:function(e){var t=e.realIndex,n=this.w,r=n.globals,s=H.clone(n.config.series);if(r.axisCharts){var o=n.config.yaxis[r.seriesYAxisReverseMap[t]],a={index:t,data:s[t].data.slice(),type:s[t].type||n.config.chart.type};if(o&&o.show&&o.showAlways)r.ancillaryCollapsedSeriesIndices.indexOf(t)<0&&(r.ancillaryCollapsedSeries.push(a),r.ancillaryCollapsedSeriesIndices.push(t));else if(r.collapsedSeriesIndices.indexOf(t)<0){r.collapsedSeries.push(a),r.collapsedSeriesIndices.push(t);var l=r.risingSeries.indexOf(t);r.risingSeries.splice(l,1)}}else r.collapsedSeries.push({index:t,data:s[t]}),r.collapsedSeriesIndices.push(t);return r.allSeriesCollapsed=r.collapsedSeries.length+r.ancillaryCollapsedSeries.length===n.config.series.length,this._getSeriesBasedOnCollapsedState(s)}},{key:"hideSeries",value:function(e){for(var t=e.seriesEl,n=e.realIndex,r=this.w,s=this.getSeriesAfterCollapsing({realIndex:n}),o=t.childNodes,a=0;a<o.length;a++)o[a].classList.contains("apexcharts-series-markers-wrap")&&(o[a].classList.contains("apexcharts-hide")?o[a].classList.remove("apexcharts-hide"):o[a].classList.add("apexcharts-hide"));this.lgCtx.ctx.updateHelpers._updateSeries(s,r.config.chart.animations.dynamicAnimation.enabled)}},{key:"riseCollapsedSeries",value:function(e,t,n){var r=this.w,s=H.clone(r.config.series);if(e.length>0){for(var o=0;o<e.length;o++)e[o].index===n&&(r.globals.axisCharts?s[n].data=e[o].data.slice():s[n]=e[o].data,typeof s[n]!="number"&&(s[n].hidden=!1),e.splice(o,1),t.splice(o,1),r.globals.risingSeries.push(n));s=this._getSeriesBasedOnCollapsedState(s),this.lgCtx.ctx.updateHelpers._updateSeries(s,r.config.chart.animations.dynamicAnimation.enabled)}}},{key:"_getSeriesBasedOnCollapsedState",value:function(e){var t=this.w,n=0;return t.globals.axisCharts?e.forEach(function(r,s){t.globals.collapsedSeriesIndices.indexOf(s)<0&&t.globals.ancillaryCollapsedSeriesIndices.indexOf(s)<0||(e[s].data=[],n++)}):e.forEach(function(r,s){!t.globals.collapsedSeriesIndices.indexOf(s)<0&&(e[s]=0,n++)}),t.globals.allSeriesCollapsed=n===e.length,e}}]),i}(),d0=function(){function i(e){Ee(this,i),this.ctx=e,this.w=e.w,this.onLegendClick=this.onLegendClick.bind(this),this.onLegendHovered=this.onLegendHovered.bind(this),this.isBarsDistributed=this.w.config.chart.type==="bar"&&this.w.config.plotOptions.bar.distributed&&this.w.config.series.length===1,this.legendHelpers=new dP(this)}return Oe(i,[{key:"init",value:function(){var e=this.w,t=e.globals,n=e.config,r=n.legend.showForSingleSeries&&t.series.length===1||this.isBarsDistributed||t.series.length>1;if(this.legendHelpers.appendToForeignObject(),(r||!t.axisCharts)&&n.legend.show){for(;t.dom.elLegendWrap.firstChild;)t.dom.elLegendWrap.removeChild(t.dom.elLegendWrap.firstChild);this.drawLegends(),n.legend.position==="bottom"||n.legend.position==="top"?this.legendAlignHorizontal():n.legend.position!=="right"&&n.legend.position!=="left"||this.legendAlignVertical()}}},{key:"createLegendMarker",value:function(e){var t=e.i,n=e.fillcolor,r=this.w,s=document.createElement("span");s.classList.add("apexcharts-legend-marker");var o=r.config.legend.markers.shape||r.config.markers.shape,a=o;Array.isArray(o)&&(a=o[t]);var l=Array.isArray(r.config.legend.markers.size)?parseFloat(r.config.legend.markers.size[t]):parseFloat(r.config.legend.markers.size),c=Array.isArray(r.config.legend.markers.offsetX)?parseFloat(r.config.legend.markers.offsetX[t]):parseFloat(r.config.legend.markers.offsetX),h=Array.isArray(r.config.legend.markers.offsetY)?parseFloat(r.config.legend.markers.offsetY[t]):parseFloat(r.config.legend.markers.offsetY),u=Array.isArray(r.config.legend.markers.strokeWidth)?parseFloat(r.config.legend.markers.strokeWidth[t]):parseFloat(r.config.legend.markers.strokeWidth),d=s.style;if(d.height=2*(l+u)+"px",d.width=2*(l+u)+"px",d.left=c+"px",d.top=h+"px",r.config.legend.markers.customHTML)d.background="transparent",d.color=n[t],Array.isArray(r.config.legend.markers.customHTML)?r.config.legend.markers.customHTML[t]&&(s.innerHTML=r.config.legend.markers.customHTML[t]()):s.innerHTML=r.config.legend.markers.customHTML();else{var f=new wo(this.ctx).getMarkerConfig({cssClass:"apexcharts-legend-marker apexcharts-marker apexcharts-marker-".concat(a),seriesIndex:t,strokeWidth:u,size:l}),g=window.SVG().addTo(s).size("100%","100%"),m=new oe(this.ctx).drawMarker(0,0,xe(xe({},f),{},{pointFillColor:Array.isArray(n)?n[t]:f.pointFillColor,shape:a}));r.globals.dom.Paper.find(".apexcharts-legend-marker.apexcharts-marker").forEach(function(b){b.node.classList.contains("apexcharts-marker-triangle")?b.node.style.transform="translate(50%, 45%)":b.node.style.transform="translate(50%, 50%)"}),g.add(m)}return s}},{key:"drawLegends",value:function(){var e=this,t=this,n=this.w,r=n.config.legend.fontFamily,s=n.globals.seriesNames,o=n.config.legend.markers.fillColors?n.config.legend.markers.fillColors.slice():n.globals.colors.slice();if(n.config.chart.type==="heatmap"){var a=n.config.plotOptions.heatmap.colorScale.ranges;s=a.map(function(f){return f.name?f.name:f.from+" - "+f.to}),o=a.map(function(f){return f.color})}else this.isBarsDistributed&&(s=n.globals.labels.slice());n.config.legend.customLegendItems.length&&(s=n.config.legend.customLegendItems);var l=n.globals.legendFormatter,c=n.config.legend.inverseOrder,h=[];n.globals.seriesGroups.length>1&&n.config.legend.clusterGroupedSeries&&n.globals.seriesGroups.forEach(function(f,g){h[g]=document.createElement("div"),h[g].classList.add("apexcharts-legend-group","apexcharts-legend-group-".concat(g)),n.config.legend.clusterGroupedSeriesOrientation==="horizontal"?n.globals.dom.elLegendWrap.classList.add("apexcharts-legend-group-horizontal"):h[g].classList.add("apexcharts-legend-group-vertical")});for(var u=function(f){var g,m=l(s[f],{seriesIndex:f,w:n}),b=!1,y=!1;if(n.globals.collapsedSeries.length>0)for(var w=0;w<n.globals.collapsedSeries.length;w++)n.globals.collapsedSeries[w].index===f&&(b=!0);if(n.globals.ancillaryCollapsedSeriesIndices.length>0)for(var C=0;C<n.globals.ancillaryCollapsedSeriesIndices.length;C++)n.globals.ancillaryCollapsedSeriesIndices[C]===f&&(y=!0);var M=e.createLegendMarker({i:f,fillcolor:o});oe.setAttrs(M,{rel:f+1,"data:collapsed":b||y}),(b||y)&&M.classList.add("apexcharts-inactive-legend");var S=document.createElement("div"),O=document.createElement("span");O.classList.add("apexcharts-legend-text"),O.innerHTML=Array.isArray(m)?m.join(" "):m;var T=n.config.legend.labels.useSeriesColors?n.globals.colors[f]:Array.isArray(n.config.legend.labels.colors)?(g=n.config.legend.labels.colors)===null||g===void 0?void 0:g[f]:n.config.legend.labels.colors;T||(T=n.config.chart.foreColor),O.style.color=T,O.style.fontSize=parseFloat(n.config.legend.fontSize)+"px",O.style.fontWeight=n.config.legend.fontWeight,O.style.fontFamily=r||n.config.chart.fontFamily,oe.setAttrs(O,{rel:f+1,i:f,"data:default-text":encodeURIComponent(m),"data:collapsed":b||y}),S.appendChild(M),S.appendChild(O);var I=new Bt(e.ctx);n.config.legend.showForZeroSeries||I.getSeriesTotalByIndex(f)===0&&I.seriesHaveSameValues(f)&&!I.isSeriesNull(f)&&n.globals.collapsedSeriesIndices.indexOf(f)===-1&&n.globals.ancillaryCollapsedSeriesIndices.indexOf(f)===-1&&S.classList.add("apexcharts-hidden-zero-series"),n.config.legend.showForNullSeries||I.isSeriesNull(f)&&n.globals.collapsedSeriesIndices.indexOf(f)===-1&&n.globals.ancillaryCollapsedSeriesIndices.indexOf(f)===-1&&S.classList.add("apexcharts-hidden-null-series"),h.length?n.globals.seriesGroups.forEach(function(R,z){var D;R.includes((D=n.config.series[f])===null||D===void 0?void 0:D.name)&&(n.globals.dom.elLegendWrap.appendChild(h[z]),h[z].appendChild(S))}):n.globals.dom.elLegendWrap.appendChild(S),n.globals.dom.elLegendWrap.classList.add("apexcharts-align-".concat(n.config.legend.horizontalAlign)),n.globals.dom.elLegendWrap.classList.add("apx-legend-position-"+n.config.legend.position),S.classList.add("apexcharts-legend-series"),S.style.margin="".concat(n.config.legend.itemMargin.vertical,"px ").concat(n.config.legend.itemMargin.horizontal,"px"),n.globals.dom.elLegendWrap.style.width=n.config.legend.width?n.config.legend.width+"px":"",n.globals.dom.elLegendWrap.style.height=n.config.legend.height?n.config.legend.height+"px":"",oe.setAttrs(S,{rel:f+1,seriesName:H.escapeString(s[f]),"data:collapsed":b||y}),(b||y)&&S.classList.add("apexcharts-inactive-legend"),n.config.legend.onItemClick.toggleDataSeries||S.classList.add("apexcharts-no-click")},d=c?s.length-1:0;c?d>=0:d<=s.length-1;c?d--:d++)u(d);n.globals.dom.elWrap.addEventListener("click",t.onLegendClick,!0),n.config.legend.onItemHover.highlightDataSeries&&n.config.legend.customLegendItems.length===0&&(n.globals.dom.elWrap.addEventListener("mousemove",t.onLegendHovered,!0),n.globals.dom.elWrap.addEventListener("mouseout",t.onLegendHovered,!0))}},{key:"setLegendWrapXY",value:function(e,t){var n=this.w,r=n.globals.dom.elLegendWrap,s=r.clientHeight,o=0,a=0;if(n.config.legend.position==="bottom")a=n.globals.svgHeight-Math.min(s,n.globals.svgHeight/2)-5;else if(n.config.legend.position==="top"){var l=new xh(this.ctx),c=l.dimHelpers.getTitleSubtitleCoords("title").height,h=l.dimHelpers.getTitleSubtitleCoords("subtitle").height;a=(c>0?c-10:0)+(h>0?h-10:0)}r.style.position="absolute",o=o+e+n.config.legend.offsetX,a=a+t+n.config.legend.offsetY,r.style.left=o+"px",r.style.top=a+"px",n.config.legend.position==="right"&&(r.style.left="auto",r.style.right=25+n.config.legend.offsetX+"px"),["width","height"].forEach(function(u){r.style[u]&&(r.style[u]=parseInt(n.config.legend[u],10)+"px")})}},{key:"legendAlignHorizontal",value:function(){var e=this.w;e.globals.dom.elLegendWrap.style.right=0;var t=new xh(this.ctx),n=t.dimHelpers.getTitleSubtitleCoords("title"),r=t.dimHelpers.getTitleSubtitleCoords("subtitle"),s=0;e.config.legend.position==="top"&&(s=n.height+r.height+e.config.title.margin+e.config.subtitle.margin-10),this.setLegendWrapXY(20,s)}},{key:"legendAlignVertical",value:function(){var e=this.w,t=this.legendHelpers.getLegendDimensions(),n=0;e.config.legend.position==="left"&&(n=20),e.config.legend.position==="right"&&(n=e.globals.svgWidth-t.clww-10),this.setLegendWrapXY(n,20)}},{key:"onLegendHovered",value:function(e){var t=this.w,n=e.target.classList.contains("apexcharts-legend-series")||e.target.classList.contains("apexcharts-legend-text")||e.target.classList.contains("apexcharts-legend-marker");if(t.config.chart.type==="heatmap"||this.isBarsDistributed){if(n){var r=parseInt(e.target.getAttribute("rel"),10)-1;this.ctx.events.fireEvent("legendHover",[this.ctx,r,this.w]),new ci(this.ctx).highlightRangeInSeries(e,e.target)}}else!e.target.classList.contains("apexcharts-inactive-legend")&&n&&new ci(this.ctx).toggleSeriesOnHover(e,e.target)}},{key:"onLegendClick",value:function(e){var t=this.w;if(!t.config.legend.customLegendItems.length&&(e.target.classList.contains("apexcharts-legend-series")||e.target.classList.contains("apexcharts-legend-text")||e.target.classList.contains("apexcharts-legend-marker"))){var n=parseInt(e.target.getAttribute("rel"),10)-1,r=e.target.getAttribute("data:collapsed")==="true",s=this.w.config.chart.events.legendClick;typeof s=="function"&&s(this.ctx,n,this.w),this.ctx.events.fireEvent("legendClick",[this.ctx,n,this.w]);var o=this.w.config.legend.markers.onClick;typeof o=="function"&&e.target.classList.contains("apexcharts-legend-marker")&&(o(this.ctx,n,this.w),this.ctx.events.fireEvent("legendMarkerClick",[this.ctx,n,this.w])),t.config.chart.type!=="treemap"&&t.config.chart.type!=="heatmap"&&!this.isBarsDistributed&&t.config.legend.onItemClick.toggleDataSeries&&this.legendHelpers.toggleDataSeries(n,r)}}}]),i}(),f0=function(){function i(e){Ee(this,i),this.ctx=e,this.w=e.w;var t=this.w;this.ev=this.w.config.chart.events,this.selectedClass="apexcharts-selected",this.localeValues=this.w.globals.locale.toolbar,this.minX=t.globals.minX,this.maxX=t.globals.maxX}return Oe(i,[{key:"createToolbar",value:function(){var e=this,t=this.w,n=function(){return document.createElement("div")},r=n();if(r.setAttribute("class","apexcharts-toolbar"),r.style.top=t.config.chart.toolbar.offsetY+"px",r.style.right=3-t.config.chart.toolbar.offsetX+"px",t.globals.dom.elWrap.appendChild(r),this.elZoom=n(),this.elZoomIn=n(),this.elZoomOut=n(),this.elPan=n(),this.elSelection=n(),this.elZoomReset=n(),this.elMenuIcon=n(),this.elMenu=n(),this.elCustomIcons=[],this.t=t.config.chart.toolbar.tools,Array.isArray(this.t.customIcons))for(var s=0;s<this.t.customIcons.length;s++)this.elCustomIcons.push(n());var o=[],a=function(u,d,f){var g=u.toLowerCase();e.t[g]&&t.config.chart.zoom.enabled&&o.push({el:d,icon:typeof e.t[g]=="string"?e.t[g]:f,title:e.localeValues[u],class:"apexcharts-".concat(g,"-icon")})};a("zoomIn",this.elZoomIn,`<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">
        <path d="M0 0h24v24H0z" fill="none"/>
        <path d="M13 7h-2v4H7v2h4v4h2v-4h4v-2h-4V7zm-1-5C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z"/>
    </svg>
    `),a("zoomOut",this.elZoomOut,`<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">
        <path d="M0 0h24v24H0z" fill="none"/>
        <path d="M7 11v2h10v-2H7zm5-9C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z"/>
    </svg>
    `);var l=function(u){e.t[u]&&t.config.chart[u].enabled&&o.push({el:u==="zoom"?e.elZoom:e.elSelection,icon:typeof e.t[u]=="string"?e.t[u]:u==="zoom"?`<svg xmlns="http://www.w3.org/2000/svg" fill="#000000" height="24" viewBox="0 0 24 24" width="24">
        <path d="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"/>
        <path d="M0 0h24v24H0V0z" fill="none"/>
        <path d="M12 10h-2v2H9v-2H7V9h2V7h1v2h2v1z"/>
    </svg>`:`<svg fill="#6E8192" height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg">
        <path d="M0 0h24v24H0z" fill="none"/>
        <path d="M3 5h2V3c-1.1 0-2 .9-2 2zm0 8h2v-2H3v2zm4 8h2v-2H7v2zM3 9h2V7H3v2zm10-6h-2v2h2V3zm6 0v2h2c0-1.1-.9-2-2-2zM5 21v-2H3c0 1.1.9 2 2 2zm-2-4h2v-2H3v2zM9 3H7v2h2V3zm2 18h2v-2h-2v2zm8-8h2v-2h-2v2zm0 8c1.1 0 2-.9 2-2h-2v2zm0-12h2V7h-2v2zm0 8h2v-2h-2v2zm-4 4h2v-2h-2v2zm0-16h2V3h-2v2z"/>
    </svg>`,title:e.localeValues[u==="zoom"?"selectionZoom":"selection"],class:t.globals.isTouchDevice?"apexcharts-element-hidden":"apexcharts-".concat(u,"-icon")})};l("zoom"),l("selection"),this.t.pan&&t.config.chart.zoom.enabled&&o.push({el:this.elPan,icon:typeof this.t.pan=="string"?this.t.pan:`<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" fill="#000000" height="24" viewBox="0 0 24 24" width="24">
        <defs>
            <path d="M0 0h24v24H0z" id="a"/>
        </defs>
        <clipPath id="b">
            <use overflow="visible" xlink:href="#a"/>
        </clipPath>
        <path clip-path="url(#b)" d="M23 5.5V20c0 2.2-1.8 4-4 4h-7.3c-1.08 0-2.1-.43-2.85-1.19L1 14.83s1.26-1.23 1.3-1.25c.22-.19.49-.29.79-.29.22 0 .42.06.6.16.04.01 4.31 2.46 4.31 2.46V4c0-.83.67-1.5 1.5-1.5S11 3.17 11 4v7h1V1.5c0-.83.67-1.5 1.5-1.5S15 .67 15 1.5V11h1V2.5c0-.83.67-1.5 1.5-1.5s1.5.67 1.5 1.5V11h1V5.5c0-.83.67-1.5 1.5-1.5s1.5.67 1.5 1.5z"/>
    </svg>`,title:this.localeValues.pan,class:t.globals.isTouchDevice?"apexcharts-element-hidden":"apexcharts-pan-icon"}),a("reset",this.elZoomReset,`<svg fill="#000000" height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg">
        <path d="M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"/>
        <path d="M0 0h24v24H0z" fill="none"/>
    </svg>`),this.t.download&&o.push({el:this.elMenuIcon,icon:typeof this.t.download=="string"?this.t.download:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"/></svg>',title:this.localeValues.menu,class:"apexcharts-menu-icon"});for(var c=0;c<this.elCustomIcons.length;c++)o.push({el:this.elCustomIcons[c],icon:this.t.customIcons[c].icon,title:this.t.customIcons[c].title,index:this.t.customIcons[c].index,class:"apexcharts-toolbar-custom-icon "+this.t.customIcons[c].class});o.forEach(function(u,d){u.index&&H.moveIndexInArray(o,d,u.index)});for(var h=0;h<o.length;h++)oe.setAttrs(o[h].el,{class:o[h].class,title:o[h].title}),o[h].el.innerHTML=o[h].icon,r.appendChild(o[h].el);this._createHamburgerMenu(r),t.globals.zoomEnabled?this.elZoom.classList.add(this.selectedClass):t.globals.panEnabled?this.elPan.classList.add(this.selectedClass):t.globals.selectionEnabled&&this.elSelection.classList.add(this.selectedClass),this.addToolbarEventListeners()}},{key:"_createHamburgerMenu",value:function(e){this.elMenuItems=[],e.appendChild(this.elMenu),oe.setAttrs(this.elMenu,{class:"apexcharts-menu"});for(var t=[{name:"exportSVG",title:this.localeValues.exportToSVG},{name:"exportPNG",title:this.localeValues.exportToPNG},{name:"exportCSV",title:this.localeValues.exportToCSV}],n=0;n<t.length;n++)this.elMenuItems.push(document.createElement("div")),this.elMenuItems[n].innerHTML=t[n].title,oe.setAttrs(this.elMenuItems[n],{class:"apexcharts-menu-item ".concat(t[n].name),title:t[n].title}),this.elMenu.appendChild(this.elMenuItems[n])}},{key:"addToolbarEventListeners",value:function(){var e=this;this.elZoomReset.addEventListener("click",this.handleZoomReset.bind(this)),this.elSelection.addEventListener("click",this.toggleZoomSelection.bind(this,"selection")),this.elZoom.addEventListener("click",this.toggleZoomSelection.bind(this,"zoom")),this.elZoomIn.addEventListener("click",this.handleZoomIn.bind(this)),this.elZoomOut.addEventListener("click",this.handleZoomOut.bind(this)),this.elPan.addEventListener("click",this.togglePanning.bind(this)),this.elMenuIcon.addEventListener("click",this.toggleMenu.bind(this)),this.elMenuItems.forEach(function(n){n.classList.contains("exportSVG")?n.addEventListener("click",e.handleDownload.bind(e,"svg")):n.classList.contains("exportPNG")?n.addEventListener("click",e.handleDownload.bind(e,"png")):n.classList.contains("exportCSV")&&n.addEventListener("click",e.handleDownload.bind(e,"csv"))});for(var t=0;t<this.t.customIcons.length;t++)this.elCustomIcons[t].addEventListener("click",this.t.customIcons[t].click.bind(this,this.ctx,this.ctx.w))}},{key:"toggleZoomSelection",value:function(e){this.ctx.getSyncedCharts().forEach(function(t){t.ctx.toolbar.toggleOtherControls();var n=e==="selection"?t.ctx.toolbar.elSelection:t.ctx.toolbar.elZoom,r=e==="selection"?"selectionEnabled":"zoomEnabled";t.w.globals[r]=!t.w.globals[r],n.classList.contains(t.ctx.toolbar.selectedClass)?n.classList.remove(t.ctx.toolbar.selectedClass):n.classList.add(t.ctx.toolbar.selectedClass)})}},{key:"getToolbarIconsReference",value:function(){var e=this.w;this.elZoom||(this.elZoom=e.globals.dom.baseEl.querySelector(".apexcharts-zoom-icon")),this.elPan||(this.elPan=e.globals.dom.baseEl.querySelector(".apexcharts-pan-icon")),this.elSelection||(this.elSelection=e.globals.dom.baseEl.querySelector(".apexcharts-selection-icon"))}},{key:"enableZoomPanFromToolbar",value:function(e){this.toggleOtherControls(),e==="pan"?this.w.globals.panEnabled=!0:this.w.globals.zoomEnabled=!0;var t=e==="pan"?this.elPan:this.elZoom,n=e==="pan"?this.elZoom:this.elPan;t&&t.classList.add(this.selectedClass),n&&n.classList.remove(this.selectedClass)}},{key:"togglePanning",value:function(){this.ctx.getSyncedCharts().forEach(function(e){e.ctx.toolbar.toggleOtherControls(),e.w.globals.panEnabled=!e.w.globals.panEnabled,e.ctx.toolbar.elPan.classList.contains(e.ctx.toolbar.selectedClass)?e.ctx.toolbar.elPan.classList.remove(e.ctx.toolbar.selectedClass):e.ctx.toolbar.elPan.classList.add(e.ctx.toolbar.selectedClass)})}},{key:"toggleOtherControls",value:function(){var e=this,t=this.w;t.globals.panEnabled=!1,t.globals.zoomEnabled=!1,t.globals.selectionEnabled=!1,this.getToolbarIconsReference(),[this.elPan,this.elSelection,this.elZoom].forEach(function(n){n&&n.classList.remove(e.selectedClass)})}},{key:"handleZoomIn",value:function(){var e=this.w;e.globals.isRangeBar&&(this.minX=e.globals.minY,this.maxX=e.globals.maxY);var t=(this.minX+this.maxX)/2,n=(this.minX+t)/2,r=(this.maxX+t)/2,s=this._getNewMinXMaxX(n,r);e.globals.disableZoomIn||this.zoomUpdateOptions(s.minX,s.maxX)}},{key:"handleZoomOut",value:function(){var e=this.w;if(e.globals.isRangeBar&&(this.minX=e.globals.minY,this.maxX=e.globals.maxY),!(e.config.xaxis.type==="datetime"&&new Date(this.minX).getUTCFullYear()<1e3)){var t=(this.minX+this.maxX)/2,n=this.minX-(t-this.minX),r=this.maxX-(t-this.maxX),s=this._getNewMinXMaxX(n,r);e.globals.disableZoomOut||this.zoomUpdateOptions(s.minX,s.maxX)}}},{key:"_getNewMinXMaxX",value:function(e,t){var n=this.w.config.xaxis.convertedCatToNumeric;return{minX:n?Math.floor(e):e,maxX:n?Math.floor(t):t}}},{key:"zoomUpdateOptions",value:function(e,t){var n=this.w;if(e!==void 0||t!==void 0){if(!(n.config.xaxis.convertedCatToNumeric&&(e<1&&(e=1,t=n.globals.dataPoints),t-e<2))){var r={min:e,max:t},s=this.getBeforeZoomRange(r);s&&(r=s.xaxis);var o={xaxis:r},a=H.clone(n.globals.initialConfig.yaxis);n.config.chart.group||(o.yaxis=a),this.w.globals.zoomed=!0,this.ctx.updateHelpers._updateOptions(o,!1,this.w.config.chart.animations.dynamicAnimation.enabled),this.zoomCallback(r,a)}}else this.handleZoomReset()}},{key:"zoomCallback",value:function(e,t){typeof this.ev.zoomed=="function"&&this.ev.zoomed(this.ctx,{xaxis:e,yaxis:t})}},{key:"getBeforeZoomRange",value:function(e,t){var n=null;return typeof this.ev.beforeZoom=="function"&&(n=this.ev.beforeZoom(this,{xaxis:e,yaxis:t})),n}},{key:"toggleMenu",value:function(){var e=this;window.setTimeout(function(){e.elMenu.classList.contains("apexcharts-menu-open")?e.elMenu.classList.remove("apexcharts-menu-open"):e.elMenu.classList.add("apexcharts-menu-open")},0)}},{key:"handleDownload",value:function(e){var t=this.w,n=new $a(this.ctx);switch(e){case"svg":n.exportToSVG(this.ctx);break;case"png":n.exportToPng(this.ctx);break;case"csv":n.exportToCSV({series:t.config.series,columnDelimiter:t.config.chart.toolbar.export.csv.columnDelimiter})}}},{key:"handleZoomReset",value:function(e){this.ctx.getSyncedCharts().forEach(function(t){var n=t.w;if(n.globals.lastXAxis.min=n.globals.initialConfig.xaxis.min,n.globals.lastXAxis.max=n.globals.initialConfig.xaxis.max,t.updateHelpers.revertDefaultAxisMinMax(),typeof n.config.chart.events.beforeResetZoom=="function"){var r=n.config.chart.events.beforeResetZoom(t,n);r&&t.updateHelpers.revertDefaultAxisMinMax(r)}typeof n.config.chart.events.zoomed=="function"&&t.ctx.toolbar.zoomCallback({min:n.config.xaxis.min,max:n.config.xaxis.max}),n.globals.zoomed=!1;var s=t.ctx.series.emptyCollapsedSeries(H.clone(n.globals.initialSeries));t.updateHelpers._updateSeries(s,n.config.chart.animations.dynamicAnimation.enabled)})}},{key:"destroy",value:function(){this.elZoom=null,this.elZoomIn=null,this.elZoomOut=null,this.elPan=null,this.elSelection=null,this.elZoomReset=null,this.elMenuIcon=null}}]),i}(),fP=function(i){Da(t,f0);var e=Ra(t);function t(n){var r;return Ee(this,t),(r=e.call(this,n)).ctx=n,r.w=n.w,r.dragged=!1,r.graphics=new oe(r.ctx),r.eventList=["mousedown","mouseleave","mousemove","touchstart","touchmove","mouseup","touchend","wheel"],r.clientX=0,r.clientY=0,r.startX=0,r.endX=0,r.dragX=0,r.startY=0,r.endY=0,r.dragY=0,r.moveDirection="none",r.debounceTimer=null,r.debounceDelay=100,r.wheelDelay=400,r}return Oe(t,[{key:"init",value:function(n){var r=this,s=n.xyRatios,o=this.w,a=this;this.xyRatios=s,this.zoomRect=this.graphics.drawRect(0,0,0,0),this.selectionRect=this.graphics.drawRect(0,0,0,0),this.gridRect=o.globals.dom.baseEl.querySelector(".apexcharts-grid"),this.constraints=new Ft(0,0,o.globals.gridWidth,o.globals.gridHeight),this.zoomRect.node.classList.add("apexcharts-zoom-rect"),this.selectionRect.node.classList.add("apexcharts-selection-rect"),o.globals.dom.Paper.add(this.zoomRect),o.globals.dom.Paper.add(this.selectionRect),o.config.chart.selection.type==="x"?this.slDraggableRect=this.selectionRect.draggable({minX:0,minY:0,maxX:o.globals.gridWidth,maxY:o.globals.gridHeight}).on("dragmove.namespace",this.selectionDragging.bind(this,"dragging")):o.config.chart.selection.type==="y"?this.slDraggableRect=this.selectionRect.draggable({minX:0,maxX:o.globals.gridWidth}).on("dragmove.namespace",this.selectionDragging.bind(this,"dragging")):this.slDraggableRect=this.selectionRect.draggable().on("dragmove.namespace",this.selectionDragging.bind(this,"dragging")),this.preselectedSelection(),this.hoverArea=o.globals.dom.baseEl.querySelector("".concat(o.globals.chartClass," .apexcharts-svg")),this.hoverArea.classList.add("apexcharts-zoomable"),this.eventList.forEach(function(l){r.hoverArea.addEventListener(l,a.svgMouseEvents.bind(a,s),{capture:!1,passive:!0})}),o.config.chart.zoom.enabled&&o.config.chart.zoom.allowMouseWheelZoom&&this.hoverArea.addEventListener("wheel",a.mouseWheelEvent.bind(a),{capture:!1,passive:!1})}},{key:"destroy",value:function(){this.slDraggableRect&&(this.slDraggableRect.draggable(!1),this.slDraggableRect.off(),this.selectionRect.off()),this.selectionRect=null,this.zoomRect=null,this.gridRect=null}},{key:"svgMouseEvents",value:function(n,r){var s=this.w,o=this.ctx.toolbar,a=s.globals.zoomEnabled?s.config.chart.zoom.type:s.config.chart.selection.type,l=s.config.chart.toolbar.autoSelected;if(r.shiftKey?(this.shiftWasPressed=!0,o.enableZoomPanFromToolbar(l==="pan"?"zoom":"pan")):this.shiftWasPressed&&(o.enableZoomPanFromToolbar(l),this.shiftWasPressed=!1),r.target){var c,h=r.target.classList;if(r.target.parentNode&&r.target.parentNode!==null&&(c=r.target.parentNode.classList),!(h.contains("apexcharts-legend-marker")||h.contains("apexcharts-legend-text")||c&&c.contains("apexcharts-toolbar"))){if(this.clientX=r.type==="touchmove"||r.type==="touchstart"?r.touches[0].clientX:r.type==="touchend"?r.changedTouches[0].clientX:r.clientX,this.clientY=r.type==="touchmove"||r.type==="touchstart"?r.touches[0].clientY:r.type==="touchend"?r.changedTouches[0].clientY:r.clientY,r.type==="mousedown"&&r.which===1||r.type==="touchstart"){var u=this.gridRect.getBoundingClientRect();this.startX=this.clientX-u.left-s.globals.barPadForNumericAxis,this.startY=this.clientY-u.top,this.dragged=!1,this.w.globals.mousedown=!0}(r.type==="mousemove"&&r.which===1||r.type==="touchmove")&&(this.dragged=!0,s.globals.panEnabled?(s.globals.selection=null,this.w.globals.mousedown&&this.panDragging({context:this,zoomtype:a,xyRatios:n})):(this.w.globals.mousedown&&s.globals.zoomEnabled||this.w.globals.mousedown&&s.globals.selectionEnabled)&&(this.selection=this.selectionDrawing({context:this,zoomtype:a}))),r.type!=="mouseup"&&r.type!=="touchend"&&r.type!=="mouseleave"||this.handleMouseUp({zoomtype:a}),this.makeSelectionRectDraggable()}}}},{key:"handleMouseUp",value:function(n){var r,s=n.zoomtype,o=n.isResized,a=this.w,l=(r=this.gridRect)===null||r===void 0?void 0:r.getBoundingClientRect();l&&(this.w.globals.mousedown||o)&&(this.endX=this.clientX-l.left-a.globals.barPadForNumericAxis,this.endY=this.clientY-l.top,this.dragX=Math.abs(this.endX-this.startX),this.dragY=Math.abs(this.endY-this.startY),(a.globals.zoomEnabled||a.globals.selectionEnabled)&&this.selectionDrawn({context:this,zoomtype:s}),a.globals.panEnabled&&a.config.xaxis.convertedCatToNumeric&&this.delayedPanScrolled()),a.globals.zoomEnabled&&this.hideSelectionRect(this.selectionRect),this.dragged=!1,this.w.globals.mousedown=!1}},{key:"mouseWheelEvent",value:function(n){var r=this,s=this.w;n.preventDefault();var o=Date.now();o-s.globals.lastWheelExecution>this.wheelDelay&&(this.executeMouseWheelZoom(n),s.globals.lastWheelExecution=o),this.debounceTimer&&clearTimeout(this.debounceTimer),this.debounceTimer=setTimeout(function(){o-s.globals.lastWheelExecution>r.wheelDelay&&(r.executeMouseWheelZoom(n),s.globals.lastWheelExecution=o)},this.debounceDelay)}},{key:"executeMouseWheelZoom",value:function(n){var r,s=this.w;this.minX=s.globals.isRangeBar?s.globals.minY:s.globals.minX,this.maxX=s.globals.isRangeBar?s.globals.maxY:s.globals.maxX;var o=(r=this.gridRect)===null||r===void 0?void 0:r.getBoundingClientRect();if(o){var a,l,c,h=(n.clientX-o.left)/o.width,u=this.minX,d=this.maxX,f=d-u;if(n.deltaY<0){var g=u+h*f;l=g-(a=.5*f)/2,c=g+a/2}else l=u-(a=1.5*f)/2,c=d+a/2;if(!s.globals.isRangeBar){l=Math.max(l,s.globals.initialMinX),c=Math.min(c,s.globals.initialMaxX);var m=.01*(s.globals.initialMaxX-s.globals.initialMinX);if(c-l<m){var b=(l+c)/2;l=b-m/2,c=b+m/2}}var y=this._getNewMinXMaxX(l,c);isNaN(y.minX)||isNaN(y.maxX)||this.zoomUpdateOptions(y.minX,y.maxX)}}},{key:"makeSelectionRectDraggable",value:function(){var n=this,r=this.w;if(this.selectionRect){var s=this.selectionRect.node.getBoundingClientRect();s.width>0&&s.height>0&&(this.selectionRect.select(!1).resize(!1),this.selectionRect.select({createRot:function(){},updateRot:function(){},createHandle:function(o,a,l,c,h){return h==="l"||h==="r"?o.circle(8).css({"stroke-width":1,stroke:"#333",fill:"#fff"}):o.circle(0)},updateHandle:function(o,a){return o.center(a[0],a[1])}}).resize().on("resize",function(){var o=r.globals.zoomEnabled?r.config.chart.zoom.type:r.config.chart.selection.type;n.handleMouseUp({zoomtype:o,isResized:!0})}))}}},{key:"preselectedSelection",value:function(){var n=this.w,r=this.xyRatios;if(!n.globals.zoomEnabled){if(n.globals.selection!==void 0&&n.globals.selection!==null)this.drawSelectionRect(xe(xe({},n.globals.selection),{},{translateX:n.globals.translateX,translateY:n.globals.translateY}));else if(n.config.chart.selection.xaxis.min!==void 0&&n.config.chart.selection.xaxis.max!==void 0){var s=(n.config.chart.selection.xaxis.min-n.globals.minX)/r.xRatio,o=n.globals.gridWidth-(n.globals.maxX-n.config.chart.selection.xaxis.max)/r.xRatio-s;n.globals.isRangeBar&&(s=(n.config.chart.selection.xaxis.min-n.globals.yAxisScale[0].niceMin)/r.invertedYRatio,o=(n.config.chart.selection.xaxis.max-n.config.chart.selection.xaxis.min)/r.invertedYRatio);var a={x:s,y:0,width:o,height:n.globals.gridHeight,translateX:n.globals.translateX,translateY:n.globals.translateY,selectionEnabled:!0};this.drawSelectionRect(a),this.makeSelectionRectDraggable(),typeof n.config.chart.events.selection=="function"&&n.config.chart.events.selection(this.ctx,{xaxis:{min:n.config.chart.selection.xaxis.min,max:n.config.chart.selection.xaxis.max},yaxis:{}})}}}},{key:"drawSelectionRect",value:function(n){var r=n.x,s=n.y,o=n.width,a=n.height,l=n.translateX,c=l===void 0?0:l,h=n.translateY,u=h===void 0?0:h,d=this.w,f=this.zoomRect,g=this.selectionRect;if(this.dragged||d.globals.selection!==null){var m={transform:"translate("+c+", "+u+")"};d.globals.zoomEnabled&&this.dragged&&(o<0&&(o=1),f.attr({x:r,y:s,width:o,height:a,fill:d.config.chart.zoom.zoomedArea.fill.color,"fill-opacity":d.config.chart.zoom.zoomedArea.fill.opacity,stroke:d.config.chart.zoom.zoomedArea.stroke.color,"stroke-width":d.config.chart.zoom.zoomedArea.stroke.width,"stroke-opacity":d.config.chart.zoom.zoomedArea.stroke.opacity}),oe.setAttrs(f.node,m)),d.globals.selectionEnabled&&(g.attr({x:r,y:s,width:o>0?o:0,height:a>0?a:0,fill:d.config.chart.selection.fill.color,"fill-opacity":d.config.chart.selection.fill.opacity,stroke:d.config.chart.selection.stroke.color,"stroke-width":d.config.chart.selection.stroke.width,"stroke-dasharray":d.config.chart.selection.stroke.dashArray,"stroke-opacity":d.config.chart.selection.stroke.opacity}),oe.setAttrs(g.node,m))}}},{key:"hideSelectionRect",value:function(n){n&&n.attr({x:0,y:0,width:0,height:0})}},{key:"selectionDrawing",value:function(n){var r=n.context,s=n.zoomtype,o=this.w,a=r,l=this.gridRect.getBoundingClientRect(),c=a.startX-1,h=a.startY,u=!1,d=!1,f=a.clientX-l.left-o.globals.barPadForNumericAxis,g=a.clientY-l.top,m=f-c,b=g-h,y={translateX:o.globals.translateX,translateY:o.globals.translateY};return Math.abs(m+c)>o.globals.gridWidth?m=o.globals.gridWidth-c:f<0&&(m=c),c>f&&(u=!0,m=Math.abs(m)),h>g&&(d=!0,b=Math.abs(b)),y=xe(xe({},y=s==="x"?{x:u?c-m:c,y:0,width:m,height:o.globals.gridHeight}:s==="y"?{x:0,y:d?h-b:h,width:o.globals.gridWidth,height:b}:{x:u?c-m:c,y:d?h-b:h,width:m,height:b}),{},{translateX:o.globals.translateX,translateY:o.globals.translateY}),a.drawSelectionRect(y),a.selectionDragging("resizing"),y}},{key:"selectionDragging",value:function(n,r){var s=this,o=this.w;if(r){r.preventDefault();var a=r.detail,l=a.handler,c=a.box,h=c.x,u=c.y;h<this.constraints.x&&(h=this.constraints.x),u<this.constraints.y&&(u=this.constraints.y),c.x2>this.constraints.x2&&(h=this.constraints.x2-c.w),c.y2>this.constraints.y2&&(u=this.constraints.y2-c.h),l.move(h,u);var d=this.xyRatios,f=this.selectionRect,g=0;n==="resizing"&&(g=30);var m=function(y){return parseFloat(f.node.getAttribute(y))},b={x:m("x"),y:m("y"),width:m("width"),height:m("height")};o.globals.selection=b,typeof o.config.chart.events.selection=="function"&&o.globals.selectionEnabled&&(clearTimeout(this.w.globals.selectionResizeTimer),this.w.globals.selectionResizeTimer=window.setTimeout(function(){var y,w,C,M,S=s.gridRect.getBoundingClientRect(),O=f.node.getBoundingClientRect();o.globals.isRangeBar?(y=o.globals.yAxisScale[0].niceMin+(O.left-S.left)*d.invertedYRatio,w=o.globals.yAxisScale[0].niceMin+(O.right-S.left)*d.invertedYRatio,C=0,M=1):(y=o.globals.xAxisScale.niceMin+(O.left-S.left)*d.xRatio,w=o.globals.xAxisScale.niceMin+(O.right-S.left)*d.xRatio,C=o.globals.yAxisScale[0].niceMin+(S.bottom-O.bottom)*d.yRatio[0],M=o.globals.yAxisScale[0].niceMax-(O.top-S.top)*d.yRatio[0]);var T={xaxis:{min:y,max:w},yaxis:{min:C,max:M}};o.config.chart.events.selection(s.ctx,T),o.config.chart.brush.enabled&&o.config.chart.events.brushScrolled!==void 0&&o.config.chart.events.brushScrolled(s.ctx,T)},g))}}},{key:"selectionDrawn",value:function(n){var r,s,o=n.context,a=n.zoomtype,l=this.w,c=o,h=this.xyRatios,u=this.ctx.toolbar,d=l.globals.zoomEnabled?c.zoomRect.node.getBoundingClientRect():c.selectionRect.node.getBoundingClientRect(),f=c.gridRect.getBoundingClientRect(),g=d.left-f.left-l.globals.barPadForNumericAxis,m=d.right-f.left-l.globals.barPadForNumericAxis,b=d.top-f.top,y=d.bottom-f.top;l.globals.isRangeBar?(r=l.globals.yAxisScale[0].niceMin+g*h.invertedYRatio,s=l.globals.yAxisScale[0].niceMin+m*h.invertedYRatio):(r=l.globals.xAxisScale.niceMin+g*h.xRatio,s=l.globals.xAxisScale.niceMin+m*h.xRatio);var w=[],C=[];if(l.config.yaxis.forEach(function(z,D){var B=l.globals.seriesYAxisMap[D][0],K=l.globals.yAxisScale[D].niceMax-h.yRatio[B]*b,J=l.globals.yAxisScale[D].niceMax-h.yRatio[B]*y;w.push(K),C.push(J)}),c.dragged&&(c.dragX>10||c.dragY>10)&&r!==s){if(l.globals.zoomEnabled){var M=H.clone(l.globals.initialConfig.yaxis),S=H.clone(l.globals.initialConfig.xaxis);if(l.globals.zoomed=!0,l.config.xaxis.convertedCatToNumeric&&(r=Math.floor(r),s=Math.floor(s),r<1&&(r=1,s=l.globals.dataPoints),s-r<2&&(s=r+1)),a!=="xy"&&a!=="x"||(S={min:r,max:s}),a!=="xy"&&a!=="y"||M.forEach(function(z,D){M[D].min=C[D],M[D].max=w[D]}),u){var O=u.getBeforeZoomRange(S,M);O&&(S=O.xaxis?O.xaxis:S,M=O.yaxis?O.yaxis:M)}var T={xaxis:S};l.config.chart.group||(T.yaxis=M),c.ctx.updateHelpers._updateOptions(T,!1,c.w.config.chart.animations.dynamicAnimation.enabled),typeof l.config.chart.events.zoomed=="function"&&u.zoomCallback(S,M)}else if(l.globals.selectionEnabled){var I,R=null;I={min:r,max:s},a!=="xy"&&a!=="y"||(R=H.clone(l.config.yaxis)).forEach(function(z,D){R[D].min=C[D],R[D].max=w[D]}),l.globals.selection=c.selection,typeof l.config.chart.events.selection=="function"&&l.config.chart.events.selection(c.ctx,{xaxis:I,yaxis:R})}}}},{key:"panDragging",value:function(n){var r=n.context,s=this.w,o=r;if(s.globals.lastClientPosition.x!==void 0){var a=s.globals.lastClientPosition.x-o.clientX,l=s.globals.lastClientPosition.y-o.clientY;Math.abs(a)>Math.abs(l)&&a>0?this.moveDirection="left":Math.abs(a)>Math.abs(l)&&a<0?this.moveDirection="right":Math.abs(l)>Math.abs(a)&&l>0?this.moveDirection="up":Math.abs(l)>Math.abs(a)&&l<0&&(this.moveDirection="down")}s.globals.lastClientPosition={x:o.clientX,y:o.clientY};var c=s.globals.isRangeBar?s.globals.minY:s.globals.minX,h=s.globals.isRangeBar?s.globals.maxY:s.globals.maxX;s.config.xaxis.convertedCatToNumeric||o.panScrolled(c,h)}},{key:"delayedPanScrolled",value:function(){var n=this.w,r=n.globals.minX,s=n.globals.maxX,o=(n.globals.maxX-n.globals.minX)/2;this.moveDirection==="left"?(r=n.globals.minX+o,s=n.globals.maxX+o):this.moveDirection==="right"&&(r=n.globals.minX-o,s=n.globals.maxX-o),r=Math.floor(r),s=Math.floor(s),this.updateScrolledChart({xaxis:{min:r,max:s}},r,s)}},{key:"panScrolled",value:function(n,r){var s=this.w,o=this.xyRatios,a=H.clone(s.globals.initialConfig.yaxis),l=o.xRatio,c=s.globals.minX,h=s.globals.maxX;s.globals.isRangeBar&&(l=o.invertedYRatio,c=s.globals.minY,h=s.globals.maxY),this.moveDirection==="left"?(n=c+s.globals.gridWidth/15*l,r=h+s.globals.gridWidth/15*l):this.moveDirection==="right"&&(n=c-s.globals.gridWidth/15*l,r=h-s.globals.gridWidth/15*l),s.globals.isRangeBar||(n<s.globals.initialMinX||r>s.globals.initialMaxX)&&(n=c,r=h);var u={xaxis:{min:n,max:r}};s.config.chart.group||(u.yaxis=a),this.updateScrolledChart(u,n,r)}},{key:"updateScrolledChart",value:function(n,r,s){var o=this.w;this.ctx.updateHelpers._updateOptions(n,!1,!1),typeof o.config.chart.events.scrolled=="function"&&o.config.chart.events.scrolled(this.ctx,{xaxis:{min:r,max:s}})}}]),t}(),p0=function(){function i(e){Ee(this,i),this.w=e.w,this.ttCtx=e,this.ctx=e.ctx}return Oe(i,[{key:"getNearestValues",value:function(e){var t=e.hoverArea,n=e.elGrid,r=e.clientX,s=e.clientY,o=this.w,a=n.getBoundingClientRect(),l=a.width,c=a.height,h=l/(o.globals.dataPoints-1),u=c/o.globals.dataPoints,d=this.hasBars();!o.globals.comboCharts&&!d||o.config.xaxis.convertedCatToNumeric||(h=l/o.globals.dataPoints);var f=r-a.left-o.globals.barPadForNumericAxis,g=s-a.top;f<0||g<0||f>l||g>c?(t.classList.remove("hovering-zoom"),t.classList.remove("hovering-pan")):o.globals.zoomEnabled?(t.classList.remove("hovering-pan"),t.classList.add("hovering-zoom")):o.globals.panEnabled&&(t.classList.remove("hovering-zoom"),t.classList.add("hovering-pan"));var m=Math.round(f/h),b=Math.floor(g/u);d&&!o.config.xaxis.convertedCatToNumeric&&(m=Math.ceil(f/h),m-=1);var y=null,w=null,C=o.globals.seriesXvalues.map(function(I){return I.filter(function(R){return H.isNumber(R)})}),M=o.globals.seriesYvalues.map(function(I){return I.filter(function(R){return H.isNumber(R)})});if(o.globals.isXNumeric){var S=this.ttCtx.getElGrid().getBoundingClientRect(),O=f*(S.width/l),T=g*(S.height/c);y=(w=this.closestInMultiArray(O,T,C,M)).index,m=w.j,y!==null&&o.globals.hasNullValues&&(C=o.globals.seriesXvalues[y],m=(w=this.closestInArray(O,C)).j)}return o.globals.capturedSeriesIndex=y===null?-1:y,(!m||m<1)&&(m=0),o.globals.isBarHorizontal?o.globals.capturedDataPointIndex=b:o.globals.capturedDataPointIndex=m,{capturedSeries:y,j:o.globals.isBarHorizontal?b:m,hoverX:f,hoverY:g}}},{key:"getFirstActiveXArray",value:function(e){for(var t=this.w,n=0,r=e.map(function(o,a){return o.length>0?a:-1}),s=0;s<r.length;s++)if(r[s]!==-1&&t.globals.collapsedSeriesIndices.indexOf(s)===-1&&t.globals.ancillaryCollapsedSeriesIndices.indexOf(s)===-1){n=r[s];break}return n}},{key:"closestInMultiArray",value:function(e,t,n,r){for(var s,o=this.w,a=1/0,l=null,c=null,h=0;h<n.length;h++)if(s=h,o.globals.collapsedSeriesIndices.indexOf(s)===-1&&o.globals.ancillaryCollapsedSeriesIndices.indexOf(s)===-1)for(var u=n[h],d=r[h],f=Math.min(u.length,d.length),g=0;g<f;g++){var m=e-u[g],b=Math.sqrt(m*m);if(!o.globals.allSeriesHasEqualX){var y=t-d[g];b=Math.sqrt(m*m+y*y)}b<a&&(a=b,l=h,c=g)}return{index:l,j:c}}},{key:"closestInArray",value:function(e,t){for(var n=t[0],r=null,s=Math.abs(e-n),o=0;o<t.length;o++){var a=Math.abs(e-t[o]);a<s&&(s=a,r=o)}return{j:r}}},{key:"isXoverlap",value:function(e){var t=[],n=this.w.globals.seriesX.filter(function(s){return s[0]!==void 0});if(n.length>0)for(var r=0;r<n.length-1;r++)n[r][e]!==void 0&&n[r+1][e]!==void 0&&n[r][e]!==n[r+1][e]&&t.push("unEqual");return t.length===0}},{key:"isInitialSeriesSameLen",value:function(){for(var e=!0,t=this.w.globals.initialSeries,n=0;n<t.length-1;n++)if(t[n].data.length!==t[n+1].data.length){e=!1;break}return e}},{key:"getBarsHeight",value:function(e){return Gt(e).reduce(function(t,n){return t+n.getBBox().height},0)}},{key:"getElMarkers",value:function(e){return typeof e=="number"?this.w.globals.dom.baseEl.querySelectorAll(".apexcharts-series[data\\:realIndex='".concat(e,"'] .apexcharts-series-markers-wrap > *")):this.w.globals.dom.baseEl.querySelectorAll(".apexcharts-series-markers-wrap > *")}},{key:"getAllMarkers",value:function(){var e=this,t=arguments.length>0&&arguments[0]!==void 0&&arguments[0],n=this.w.globals.dom.baseEl.querySelectorAll(".apexcharts-series-markers-wrap");n=Gt(n),t&&(n=n.filter(function(s){var o=Number(s.getAttribute("data:realIndex"));return e.w.globals.collapsedSeriesIndices.indexOf(o)===-1})),n.sort(function(s,o){var a=Number(s.getAttribute("data:realIndex")),l=Number(o.getAttribute("data:realIndex"));return l<a?1:l>a?-1:0});var r=[];return n.forEach(function(s){r.push(s.querySelector(".apexcharts-marker"))}),r}},{key:"hasMarkers",value:function(e){return this.getElMarkers(e).length>0}},{key:"getPathFromPoint",value:function(e,t){var n=Number(e.getAttribute("cx")),r=Number(e.getAttribute("cy")),s=e.getAttribute("shape");return new oe(this.ctx).getMarkerPath(n,r,s,t)}},{key:"getElBars",value:function(){return this.w.globals.dom.baseEl.querySelectorAll(".apexcharts-bar-series,  .apexcharts-candlestick-series, .apexcharts-boxPlot-series, .apexcharts-rangebar-series")}},{key:"hasBars",value:function(){return this.getElBars().length>0}},{key:"getHoverMarkerSize",value:function(e){var t=this.w,n=t.config.markers.hover.size;return n===void 0&&(n=t.globals.markers.size[e]+t.config.markers.hover.sizeOffset),n}},{key:"toggleAllTooltipSeriesGroups",value:function(e){var t=this.w,n=this.ttCtx;n.allTooltipSeriesGroups.length===0&&(n.allTooltipSeriesGroups=t.globals.dom.baseEl.querySelectorAll(".apexcharts-tooltip-series-group"));for(var r=n.allTooltipSeriesGroups,s=0;s<r.length;s++)e==="enable"?(r[s].classList.add("apexcharts-active"),r[s].style.display=t.config.tooltip.items.display):(r[s].classList.remove("apexcharts-active"),r[s].style.display="none")}}]),i}(),pP=function(){function i(e){Ee(this,i),this.w=e.w,this.ctx=e.ctx,this.ttCtx=e,this.tooltipUtil=new p0(e)}return Oe(i,[{key:"drawSeriesTexts",value:function(e){var t=e.shared,n=t===void 0||t,r=e.ttItems,s=e.i,o=s===void 0?0:s,a=e.j,l=a===void 0?null:a,c=e.y1,h=e.y2,u=e.e,d=this.w;d.config.tooltip.custom!==void 0?this.handleCustomTooltip({i:o,j:l,y1:c,y2:h,w:d}):this.toggleActiveInactiveSeries(n,o);var f=this.getValuesToPrint({i:o,j:l});this.printLabels({i:o,j:l,values:f,ttItems:r,shared:n,e:u});var g=this.ttCtx.getElTooltip();this.ttCtx.tooltipRect.ttWidth=g.getBoundingClientRect().width,this.ttCtx.tooltipRect.ttHeight=g.getBoundingClientRect().height}},{key:"printLabels",value:function(e){var t,n=this,r=e.i,s=e.j,o=e.values,a=e.ttItems,l=e.shared,c=e.e,h=this.w,u=[],d=function(S){return h.globals.seriesGoals[S]&&h.globals.seriesGoals[S][s]&&Array.isArray(h.globals.seriesGoals[S][s])},f=o.xVal,g=o.zVal,m=o.xAxisTTVal,b="",y=h.globals.colors[r];s!==null&&h.config.plotOptions.bar.distributed&&(y=h.globals.colors[s]);for(var w=function(S,O){var T=n.getFormatters(r);b=n.getSeriesName({fn:T.yLbTitleFormatter,index:r,seriesIndex:r,j:s}),h.config.chart.type==="treemap"&&(b=T.yLbTitleFormatter(String(h.config.series[r].data[s].x),{series:h.globals.series,seriesIndex:r,dataPointIndex:s,w:h}));var I=h.config.tooltip.inverseOrder?O:S;if(h.globals.axisCharts){var R=function(B){var K,J,se,ne;return h.globals.isRangeData?T.yLbFormatter((K=h.globals.seriesRangeStart)===null||K===void 0||(J=K[B])===null||J===void 0?void 0:J[s],{series:h.globals.seriesRangeStart,seriesIndex:B,dataPointIndex:s,w:h})+" - "+T.yLbFormatter((se=h.globals.seriesRangeEnd)===null||se===void 0||(ne=se[B])===null||ne===void 0?void 0:ne[s],{series:h.globals.seriesRangeEnd,seriesIndex:B,dataPointIndex:s,w:h}):T.yLbFormatter(h.globals.series[B][s],{series:h.globals.series,seriesIndex:B,dataPointIndex:s,w:h})};if(l)T=n.getFormatters(I),b=n.getSeriesName({fn:T.yLbTitleFormatter,index:I,seriesIndex:r,j:s}),y=h.globals.colors[I],t=R(I),d(I)&&(u=h.globals.seriesGoals[I][s].map(function(B){return{attrs:B,val:T.yLbFormatter(B.value,{seriesIndex:I,dataPointIndex:s,w:h})}}));else{var z,D=c==null||(z=c.target)===null||z===void 0?void 0:z.getAttribute("fill");D&&(D.indexOf("url")!==-1?D.indexOf("Pattern")!==-1&&(y=h.globals.dom.baseEl.querySelector(D.substr(4).slice(0,-1)).childNodes[0].getAttribute("stroke")):y=D),t=R(r),d(r)&&Array.isArray(h.globals.seriesGoals[r][s])&&(u=h.globals.seriesGoals[r][s].map(function(B){return{attrs:B,val:T.yLbFormatter(B.value,{seriesIndex:r,dataPointIndex:s,w:h})}}))}}s===null&&(t=T.yLbFormatter(h.globals.series[r],xe(xe({},h),{},{seriesIndex:r,dataPointIndex:r}))),n.DOMHandling({i:r,t:I,j:s,ttItems:a,values:{val:t,goalVals:u,xVal:f,xAxisTTVal:m,zVal:g},seriesName:b,shared:l,pColor:y})},C=0,M=h.globals.series.length-1;C<h.globals.series.length;C++,M--)w(C,M)}},{key:"getFormatters",value:function(e){var t,n=this.w,r=n.globals.yLabelFormatters[e];return n.globals.ttVal!==void 0?Array.isArray(n.globals.ttVal)?(r=n.globals.ttVal[e]&&n.globals.ttVal[e].formatter,t=n.globals.ttVal[e]&&n.globals.ttVal[e].title&&n.globals.ttVal[e].title.formatter):(r=n.globals.ttVal.formatter,typeof n.globals.ttVal.title.formatter=="function"&&(t=n.globals.ttVal.title.formatter)):t=n.config.tooltip.y.title.formatter,typeof r!="function"&&(r=n.globals.yLabelFormatters[0]?n.globals.yLabelFormatters[0]:function(s){return s}),typeof t!="function"&&(t=function(s){return s?s+": ":""}),{yLbFormatter:r,yLbTitleFormatter:t}}},{key:"getSeriesName",value:function(e){var t=e.fn,n=e.index,r=e.seriesIndex,s=e.j,o=this.w;return t(String(o.globals.seriesNames[n]),{series:o.globals.series,seriesIndex:r,dataPointIndex:s,w:o})}},{key:"DOMHandling",value:function(e){e.i;var t=e.t,n=e.j,r=e.ttItems,s=e.values,o=e.seriesName,a=e.shared,l=e.pColor,c=this.w,h=this.ttCtx,u=s.val,d=s.goalVals,f=s.xVal,g=s.xAxisTTVal,m=s.zVal,b=null;b=r[t].children,c.config.tooltip.fillSeriesColor&&(r[t].style.backgroundColor=l,b[0].style.display="none"),h.showTooltipTitle&&(h.tooltipTitle===null&&(h.tooltipTitle=c.globals.dom.baseEl.querySelector(".apexcharts-tooltip-title")),h.tooltipTitle.innerHTML=f),h.isXAxisTooltipEnabled&&(h.xaxisTooltipText.innerHTML=g!==""?g:f);var y=r[t].querySelector(".apexcharts-tooltip-text-y-label");y&&(y.innerHTML=o||"");var w=r[t].querySelector(".apexcharts-tooltip-text-y-value");w&&(w.innerHTML=u!==void 0?u:""),b[0]&&b[0].classList.contains("apexcharts-tooltip-marker")&&(c.config.tooltip.marker.fillColors&&Array.isArray(c.config.tooltip.marker.fillColors)&&(l=c.config.tooltip.marker.fillColors[t]),c.config.tooltip.fillSeriesColor?b[0].style.backgroundColor=l:b[0].style.color=l),c.config.tooltip.marker.show||(b[0].style.display="none");var C=r[t].querySelector(".apexcharts-tooltip-text-goals-label"),M=r[t].querySelector(".apexcharts-tooltip-text-goals-value");if(d.length&&c.globals.seriesGoals[t]){var S=function(){var I="<div>",R="<div>";d.forEach(function(z,D){I+=' <div style="display: flex"><span class="apexcharts-tooltip-marker" style="background-color: '.concat(z.attrs.strokeColor,'; height: 3px; border-radius: 0; top: 5px;"></span> ').concat(z.attrs.name,"</div>"),R+="<div>".concat(z.val,"</div>")}),C.innerHTML=I+"</div>",M.innerHTML=R+"</div>"};a?c.globals.seriesGoals[t][n]&&Array.isArray(c.globals.seriesGoals[t][n])?S():(C.innerHTML="",M.innerHTML=""):S()}else C.innerHTML="",M.innerHTML="";if(m!==null&&(r[t].querySelector(".apexcharts-tooltip-text-z-label").innerHTML=c.config.tooltip.z.title,r[t].querySelector(".apexcharts-tooltip-text-z-value").innerHTML=m!==void 0?m:""),a&&b[0]){if(c.config.tooltip.hideEmptySeries){var O=r[t].querySelector(".apexcharts-tooltip-marker"),T=r[t].querySelector(".apexcharts-tooltip-text");parseFloat(u)==0?(O.style.display="none",T.style.display="none"):(O.style.display="block",T.style.display="block")}u==null||c.globals.ancillaryCollapsedSeriesIndices.indexOf(t)>-1||c.globals.collapsedSeriesIndices.indexOf(t)>-1||Array.isArray(h.tConfig.enabledOnSeries)&&h.tConfig.enabledOnSeries.indexOf(t)===-1?b[0].parentNode.style.display="none":b[0].parentNode.style.display=c.config.tooltip.items.display}else Array.isArray(h.tConfig.enabledOnSeries)&&h.tConfig.enabledOnSeries.indexOf(t)===-1&&(b[0].parentNode.style.display="none")}},{key:"toggleActiveInactiveSeries",value:function(e,t){var n=this.w;if(e)this.tooltipUtil.toggleAllTooltipSeriesGroups("enable");else{this.tooltipUtil.toggleAllTooltipSeriesGroups("disable");var r=n.globals.dom.baseEl.querySelector(".apexcharts-tooltip-series-group-".concat(t));r&&(r.classList.add("apexcharts-active"),r.style.display=n.config.tooltip.items.display)}}},{key:"getValuesToPrint",value:function(e){var t=e.i,n=e.j,r=this.w,s=this.ctx.series.filteredSeriesX(),o="",a="",l=null,c=null,h={series:r.globals.series,seriesIndex:t,dataPointIndex:n,w:r},u=r.globals.ttZFormatter;n===null?c=r.globals.series[t]:r.globals.isXNumeric&&r.config.chart.type!=="treemap"?(o=s[t][n],s[t].length===0&&(o=s[this.tooltipUtil.getFirstActiveXArray(s)][n])):o=new sp(this.ctx).isFormatXY()?r.config.series[t].data[n]!==void 0?r.config.series[t].data[n].x:"":r.globals.labels[n]!==void 0?r.globals.labels[n]:"";var d=o;return r.globals.isXNumeric&&r.config.xaxis.type==="datetime"?o=new Ya(this.ctx).xLabelFormat(r.globals.ttKeyFormatter,d,d,{i:void 0,dateFormatter:new dn(this.ctx).formatDate,w:this.w}):o=r.globals.isBarHorizontal?r.globals.yLabelFormatters[0](d,h):r.globals.xLabelFormatter(d,h),r.config.tooltip.x.formatter!==void 0&&(o=r.globals.ttKeyFormatter(d,h)),r.globals.seriesZ.length>0&&r.globals.seriesZ[t].length>0&&(l=u(r.globals.seriesZ[t][n],r)),a=typeof r.config.xaxis.tooltip.formatter=="function"?r.globals.xaxisTooltipFormatter(d,h):o,{val:Array.isArray(c)?c.join(" "):c,xVal:Array.isArray(o)?o.join(" "):o,xAxisTTVal:Array.isArray(a)?a.join(" "):a,zVal:l}}},{key:"handleCustomTooltip",value:function(e){var t=e.i,n=e.j,r=e.y1,s=e.y2,o=e.w,a=this.ttCtx.getElTooltip(),l=o.config.tooltip.custom;Array.isArray(l)&&l[t]&&(l=l[t]);var c=l({ctx:this.ctx,series:o.globals.series,seriesIndex:t,dataPointIndex:n,y1:r,y2:s,w:o});typeof c=="string"?a.innerHTML=c:(c instanceof Element||typeof c.nodeName=="string")&&(a.innerHTML="",a.appendChild(c.cloneNode(!0)))}}]),i}(),g0=function(){function i(e){Ee(this,i),this.ttCtx=e,this.ctx=e.ctx,this.w=e.w}return Oe(i,[{key:"moveXCrosshairs",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,n=this.ttCtx,r=this.w,s=n.getElXCrosshairs(),o=e-n.xcrosshairsWidth/2,a=r.globals.labels.slice().length;if(t!==null&&(o=r.globals.gridWidth/a*t),s===null||r.globals.isBarHorizontal||(s.setAttribute("x",o),s.setAttribute("x1",o),s.setAttribute("x2",o),s.setAttribute("y2",r.globals.gridHeight),s.classList.add("apexcharts-active")),o<0&&(o=0),o>r.globals.gridWidth&&(o=r.globals.gridWidth),n.isXAxisTooltipEnabled){var l=o;r.config.xaxis.crosshairs.width!=="tickWidth"&&r.config.xaxis.crosshairs.width!=="barWidth"||(l=o+n.xcrosshairsWidth/2),this.moveXAxisTooltip(l)}}},{key:"moveYCrosshairs",value:function(e){var t=this.ttCtx;t.ycrosshairs!==null&&oe.setAttrs(t.ycrosshairs,{y1:e,y2:e}),t.ycrosshairsHidden!==null&&oe.setAttrs(t.ycrosshairsHidden,{y1:e,y2:e})}},{key:"moveXAxisTooltip",value:function(e){var t=this.w,n=this.ttCtx;if(n.xaxisTooltip!==null&&n.xcrosshairsWidth!==0){n.xaxisTooltip.classList.add("apexcharts-active");var r=n.xaxisOffY+t.config.xaxis.tooltip.offsetY+t.globals.translateY+1+t.config.xaxis.offsetY;if(e-=n.xaxisTooltip.getBoundingClientRect().width/2,!isNaN(e)){e+=t.globals.translateX;var s;s=new oe(this.ctx).getTextRects(n.xaxisTooltipText.innerHTML),n.xaxisTooltipText.style.minWidth=s.width+"px",n.xaxisTooltip.style.left=e+"px",n.xaxisTooltip.style.top=r+"px"}}}},{key:"moveYAxisTooltip",value:function(e){var t=this.w,n=this.ttCtx;n.yaxisTTEls===null&&(n.yaxisTTEls=t.globals.dom.baseEl.querySelectorAll(".apexcharts-yaxistooltip"));var r=parseInt(n.ycrosshairsHidden.getAttribute("y1"),10),s=t.globals.translateY+r,o=n.yaxisTTEls[e].getBoundingClientRect().height,a=t.globals.translateYAxisX[e]-2;t.config.yaxis[e].opposite&&(a-=26),s-=o/2,t.globals.ignoreYAxisIndexes.indexOf(e)===-1?(n.yaxisTTEls[e].classList.add("apexcharts-active"),n.yaxisTTEls[e].style.top=s+"px",n.yaxisTTEls[e].style.left=a+t.config.yaxis[e].tooltip.offsetX+"px"):n.yaxisTTEls[e].classList.remove("apexcharts-active")}},{key:"moveTooltip",value:function(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,r=this.w,s=this.ttCtx,o=s.getElTooltip(),a=s.tooltipRect,l=n!==null?parseFloat(n):1,c=parseFloat(e)+l+5,h=parseFloat(t)+l/2;if(c>r.globals.gridWidth/2&&(c=c-a.ttWidth-l-10),c>r.globals.gridWidth-a.ttWidth-10&&(c=r.globals.gridWidth-a.ttWidth),c<-20&&(c=-20),r.config.tooltip.followCursor){var u=s.getElGrid().getBoundingClientRect();(c=s.e.clientX-u.left)>r.globals.gridWidth/2&&(c-=s.tooltipRect.ttWidth),(h=s.e.clientY+r.globals.translateY-u.top)>r.globals.gridHeight/2&&(h-=s.tooltipRect.ttHeight)}else r.globals.isBarHorizontal||a.ttHeight/2+h>r.globals.gridHeight&&(h=r.globals.gridHeight-a.ttHeight+r.globals.translateY);isNaN(c)||(c+=r.globals.translateX,o.style.left=c+"px",o.style.top=h+"px")}},{key:"moveMarkers",value:function(e,t){var n=this.w,r=this.ttCtx;if(n.globals.markers.size[e]>0)for(var s=n.globals.dom.baseEl.querySelectorAll(" .apexcharts-series[data\\:realIndex='".concat(e,"'] .apexcharts-marker")),o=0;o<s.length;o++)parseInt(s[o].getAttribute("rel"),10)===t&&(r.marker.resetPointsSize(),r.marker.enlargeCurrentPoint(t,s[o]));else r.marker.resetPointsSize(),this.moveDynamicPointOnHover(t,e)}},{key:"moveDynamicPointOnHover",value:function(e,t){var n,r,s,o,a=this.w,l=this.ttCtx,c=new oe(this.ctx),h=a.globals.pointsArray,u=l.tooltipUtil.getHoverMarkerSize(t),d=a.config.series[t].type;if(!d||d!=="column"&&d!=="candlestick"&&d!=="boxPlot"){s=(n=h[t][e])===null||n===void 0?void 0:n[0],o=((r=h[t][e])===null||r===void 0?void 0:r[1])||0;var f=a.globals.dom.baseEl.querySelector(".apexcharts-series[data\\:realIndex='".concat(t,"'] .apexcharts-series-markers path"));if(f&&o<a.globals.gridHeight&&o>0){var g=f.getAttribute("shape"),m=c.getMarkerPath(s,o,g,1.5*u);f.setAttribute("d",m)}this.moveXCrosshairs(s),l.fixedTooltip||this.moveTooltip(s,o,u)}}},{key:"moveDynamicPointsOnHover",value:function(e){var t,n=this.ttCtx,r=n.w,s=0,o=0,a=r.globals.pointsArray,l=new ci(this.ctx),c=new oe(this.ctx);t=l.getActiveConfigSeriesIndex("asc",["line","area","scatter","bubble"]);var h=n.tooltipUtil.getHoverMarkerSize(t);if(a[t]&&(s=a[t][e][0],o=a[t][e][1]),!isNaN(s)){var u=n.tooltipUtil.getAllMarkers();if(u.length)for(var d=0;d<r.globals.series.length;d++){var f=a[d];if(r.globals.comboCharts&&f===void 0&&u.splice(d,0,null),f&&f.length){var g=a[d][e][1],m=void 0;u[d].setAttribute("cx",s);var b=u[d].getAttribute("shape");if(r.config.chart.type==="rangeArea"&&!r.globals.comboCharts){var y=e+r.globals.series[d].length;m=a[d][y][1],g-=Math.abs(g-m)/2}if(g!==null&&!isNaN(g)&&g<r.globals.gridHeight+h&&g+h>0){var w=c.getMarkerPath(s,g,b,h);u[d].setAttribute("d",w)}else u[d].setAttribute("d","")}}this.moveXCrosshairs(s),n.fixedTooltip||this.moveTooltip(s,o||r.globals.gridHeight,h)}}},{key:"moveStickyTooltipOverBars",value:function(e,t){var n=this.w,r=this.ttCtx,s=n.globals.columnSeries?n.globals.columnSeries.length:n.globals.series.length;n.config.chart.stacked&&(s=n.globals.barGroups.length);var o=s>=2&&s%2==0?Math.floor(s/2):Math.floor(s/2)+1;n.globals.isBarHorizontal&&(o=new ci(this.ctx).getActiveConfigSeriesIndex("desc")+1);var a=n.globals.dom.baseEl.querySelector(".apexcharts-bar-series .apexcharts-series[rel='".concat(o,"'] path[j='").concat(e,"'], .apexcharts-candlestick-series .apexcharts-series[rel='").concat(o,"'] path[j='").concat(e,"'], .apexcharts-boxPlot-series .apexcharts-series[rel='").concat(o,"'] path[j='").concat(e,"'], .apexcharts-rangebar-series .apexcharts-series[rel='").concat(o,"'] path[j='").concat(e,"']"));a||typeof t!="number"||(a=n.globals.dom.baseEl.querySelector(".apexcharts-bar-series .apexcharts-series[data\\:realIndex='".concat(t,"'] path[j='").concat(e,`'],
            .apexcharts-candlestick-series .apexcharts-series[data\\:realIndex='`).concat(t,"'] path[j='").concat(e,`'],
            .apexcharts-boxPlot-series .apexcharts-series[data\\:realIndex='`).concat(t,"'] path[j='").concat(e,`'],
            .apexcharts-rangebar-series .apexcharts-series[data\\:realIndex='`).concat(t,"'] path[j='").concat(e,"']")));var l=a?parseFloat(a.getAttribute("cx")):0,c=a?parseFloat(a.getAttribute("cy")):0,h=a?parseFloat(a.getAttribute("barWidth")):0,u=r.getElGrid().getBoundingClientRect(),d=a&&(a.classList.contains("apexcharts-candlestick-area")||a.classList.contains("apexcharts-boxPlot-area"));n.globals.isXNumeric?(a&&!d&&(l-=s%2!=0?h/2:0),a&&d&&(l-=h/2)):n.globals.isBarHorizontal||(l=r.xAxisTicksPositions[e-1]+r.dataPointsDividedWidth/2,isNaN(l)&&(l=r.xAxisTicksPositions[e]-r.dataPointsDividedWidth/2)),n.globals.isBarHorizontal?c-=r.tooltipRect.ttHeight:n.config.tooltip.followCursor?c=r.e.clientY-u.top-r.tooltipRect.ttHeight/2:c+r.tooltipRect.ttHeight+15>n.globals.gridHeight&&(c=n.globals.gridHeight),n.globals.isBarHorizontal||this.moveXCrosshairs(l),r.fixedTooltip||this.moveTooltip(l,c||n.globals.gridHeight)}}]),i}(),gP=function(){function i(e){Ee(this,i),this.w=e.w,this.ttCtx=e,this.ctx=e.ctx,this.tooltipPosition=new g0(e)}return Oe(i,[{key:"drawDynamicPoints",value:function(){var e=this.w,t=new oe(this.ctx),n=new wo(this.ctx),r=e.globals.dom.baseEl.querySelectorAll(".apexcharts-series");r=Gt(r),e.config.chart.stacked&&r.sort(function(u,d){return parseFloat(u.getAttribute("data:realIndex"))-parseFloat(d.getAttribute("data:realIndex"))});for(var s=0;s<r.length;s++){var o=r[s].querySelector(".apexcharts-series-markers-wrap");if(o!==null){var a=void 0,l="apexcharts-marker w".concat((Math.random()+1).toString(36).substring(4));e.config.chart.type!=="line"&&e.config.chart.type!=="area"||e.globals.comboCharts||e.config.tooltip.intersect||(l+=" no-pointer-events");var c=n.getMarkerConfig({cssClass:l,seriesIndex:Number(o.getAttribute("data:realIndex"))});(a=t.drawMarker(0,0,c)).node.setAttribute("default-marker-size",0);var h=document.createElementNS(e.globals.SVGNS,"g");h.classList.add("apexcharts-series-markers"),h.appendChild(a.node),o.appendChild(h)}}}},{key:"enlargeCurrentPoint",value:function(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null,s=this.w;s.config.chart.type!=="bubble"&&this.newPointSize(e,t);var o=t.getAttribute("cx"),a=t.getAttribute("cy");if(n!==null&&r!==null&&(o=n,a=r),this.tooltipPosition.moveXCrosshairs(o),!this.fixedTooltip){if(s.config.chart.type==="radar"){var l=this.ttCtx.getElGrid().getBoundingClientRect();o=this.ttCtx.e.clientX-l.left}this.tooltipPosition.moveTooltip(o,a,s.config.markers.hover.size)}}},{key:"enlargePoints",value:function(e){for(var t=this.w,n=this,r=this.ttCtx,s=e,o=t.globals.dom.baseEl.querySelectorAll(".apexcharts-series:not(.apexcharts-series-collapsed) .apexcharts-marker"),a=t.config.markers.hover.size,l=0;l<o.length;l++){var c=o[l].getAttribute("rel"),h=o[l].getAttribute("index");if(a===void 0&&(a=t.globals.markers.size[h]+t.config.markers.hover.sizeOffset),s===parseInt(c,10)){n.newPointSize(s,o[l]);var u=o[l].getAttribute("cx"),d=o[l].getAttribute("cy");n.tooltipPosition.moveXCrosshairs(u),r.fixedTooltip||n.tooltipPosition.moveTooltip(u,d,a)}else n.oldPointSize(o[l])}}},{key:"newPointSize",value:function(e,t){var n=this.w,r=n.config.markers.hover.size,s=e===0?t.parentNode.firstChild:t.parentNode.lastChild;if(s.getAttribute("default-marker-size")!=="0"){var o=parseInt(s.getAttribute("index"),10);r===void 0&&(r=n.globals.markers.size[o]+n.config.markers.hover.sizeOffset),r<0&&(r=0);var a=this.ttCtx.tooltipUtil.getPathFromPoint(t,r);t.setAttribute("d",a)}}},{key:"oldPointSize",value:function(e){var t=parseFloat(e.getAttribute("default-marker-size")),n=this.ttCtx.tooltipUtil.getPathFromPoint(e,t);e.setAttribute("d",n)}},{key:"resetPointsSize",value:function(){for(var e=this.w.globals.dom.baseEl.querySelectorAll(".apexcharts-series:not(.apexcharts-series-collapsed) .apexcharts-marker"),t=0;t<e.length;t++){var n=parseFloat(e[t].getAttribute("default-marker-size"));if(H.isNumber(n)&&n>0){var r=this.ttCtx.tooltipUtil.getPathFromPoint(e[t],n);e[t].setAttribute("d",r)}else e[t].setAttribute("d","M0,0")}}}]),i}(),mP=function(){function i(e){Ee(this,i),this.w=e.w;var t=this.w;this.ttCtx=e,this.isVerticalGroupedRangeBar=!t.globals.isBarHorizontal&&t.config.chart.type==="rangeBar"&&t.config.plotOptions.bar.rangeBarGroupRows}return Oe(i,[{key:"getAttr",value:function(e,t){return parseFloat(e.target.getAttribute(t))}},{key:"handleHeatTreeTooltip",value:function(e){var t=e.e,n=e.opt,r=e.x,s=e.y,o=e.type,a=this.ttCtx,l=this.w;if(t.target.classList.contains("apexcharts-".concat(o,"-rect"))){var c=this.getAttr(t,"i"),h=this.getAttr(t,"j"),u=this.getAttr(t,"cx"),d=this.getAttr(t,"cy"),f=this.getAttr(t,"width"),g=this.getAttr(t,"height");if(a.tooltipLabels.drawSeriesTexts({ttItems:n.ttItems,i:c,j:h,shared:!1,e:t}),l.globals.capturedSeriesIndex=c,l.globals.capturedDataPointIndex=h,r=u+a.tooltipRect.ttWidth/2+f,s=d+a.tooltipRect.ttHeight/2-g/2,a.tooltipPosition.moveXCrosshairs(u+f/2),r>l.globals.gridWidth/2&&(r=u-a.tooltipRect.ttWidth/2+f),a.w.config.tooltip.followCursor){var m=l.globals.dom.elWrap.getBoundingClientRect();r=l.globals.clientX-m.left-(r>l.globals.gridWidth/2?a.tooltipRect.ttWidth:0),s=l.globals.clientY-m.top-(s>l.globals.gridHeight/2?a.tooltipRect.ttHeight:0)}}return{x:r,y:s}}},{key:"handleMarkerTooltip",value:function(e){var t,n,r=e.e,s=e.opt,o=e.x,a=e.y,l=this.w,c=this.ttCtx;if(r.target.classList.contains("apexcharts-marker")){var h=parseInt(s.paths.getAttribute("cx"),10),u=parseInt(s.paths.getAttribute("cy"),10),d=parseFloat(s.paths.getAttribute("val"));if(n=parseInt(s.paths.getAttribute("rel"),10),t=parseInt(s.paths.parentNode.parentNode.parentNode.getAttribute("rel"),10)-1,c.intersect){var f=H.findAncestor(s.paths,"apexcharts-series");f&&(t=parseInt(f.getAttribute("data:realIndex"),10))}if(c.tooltipLabels.drawSeriesTexts({ttItems:s.ttItems,i:t,j:n,shared:!c.showOnIntersect&&l.config.tooltip.shared,e:r}),r.type==="mouseup"&&c.markerClick(r,t,n),l.globals.capturedSeriesIndex=t,l.globals.capturedDataPointIndex=n,o=h,a=u+l.globals.translateY-1.4*c.tooltipRect.ttHeight,c.w.config.tooltip.followCursor){var g=c.getElGrid().getBoundingClientRect();a=c.e.clientY+l.globals.translateY-g.top}d<0&&(a=u),c.marker.enlargeCurrentPoint(n,s.paths,o,a)}return{x:o,y:a}}},{key:"handleBarTooltip",value:function(e){var t,n,r=e.e,s=e.opt,o=this.w,a=this.ttCtx,l=a.getElTooltip(),c=0,h=0,u=0,d=this.getBarTooltipXY({e:r,opt:s});if(d.j!==null||d.barHeight!==0||d.barWidth!==0){t=d.i;var f=d.j;if(o.globals.capturedSeriesIndex=t,o.globals.capturedDataPointIndex=f,o.globals.isBarHorizontal&&a.tooltipUtil.hasBars()||!o.config.tooltip.shared?(h=d.x,u=d.y,n=Array.isArray(o.config.stroke.width)?o.config.stroke.width[t]:o.config.stroke.width,c=h):o.globals.comboCharts||o.config.tooltip.shared||(c/=2),isNaN(u)&&(u=o.globals.svgHeight-a.tooltipRect.ttHeight),parseInt(s.paths.parentNode.getAttribute("data:realIndex"),10),h+a.tooltipRect.ttWidth>o.globals.gridWidth?h-=a.tooltipRect.ttWidth:h<0&&(h=0),a.w.config.tooltip.followCursor){var g=a.getElGrid().getBoundingClientRect();u=a.e.clientY-g.top}a.tooltip===null&&(a.tooltip=o.globals.dom.baseEl.querySelector(".apexcharts-tooltip")),o.config.tooltip.shared||(o.globals.comboBarCount>0?a.tooltipPosition.moveXCrosshairs(c+n/2):a.tooltipPosition.moveXCrosshairs(c)),!a.fixedTooltip&&(!o.config.tooltip.shared||o.globals.isBarHorizontal&&a.tooltipUtil.hasBars())&&(u=u+o.globals.translateY-a.tooltipRect.ttHeight/2,l.style.left=h+o.globals.translateX+"px",l.style.top=u+"px")}}},{key:"getBarTooltipXY",value:function(e){var t=this,n=e.e,r=e.opt,s=this.w,o=null,a=this.ttCtx,l=0,c=0,h=0,u=0,d=0,f=n.target.classList;if(f.contains("apexcharts-bar-area")||f.contains("apexcharts-candlestick-area")||f.contains("apexcharts-boxPlot-area")||f.contains("apexcharts-rangebar-area")){var g=n.target,m=g.getBoundingClientRect(),b=r.elGrid.getBoundingClientRect(),y=m.height;d=m.height;var w=m.width,C=parseInt(g.getAttribute("cx"),10),M=parseInt(g.getAttribute("cy"),10);u=parseFloat(g.getAttribute("barWidth"));var S=n.type==="touchmove"?n.touches[0].clientX:n.clientX;o=parseInt(g.getAttribute("j"),10),l=parseInt(g.parentNode.getAttribute("rel"),10)-1;var O=g.getAttribute("data-range-y1"),T=g.getAttribute("data-range-y2");s.globals.comboCharts&&(l=parseInt(g.parentNode.getAttribute("data:realIndex"),10));var I=function(z){return s.globals.isXNumeric?C-w/2:t.isVerticalGroupedRangeBar?C+w/2:C-a.dataPointsDividedWidth+w/2},R=function(){return M-a.dataPointsDividedHeight+y/2-a.tooltipRect.ttHeight/2};a.tooltipLabels.drawSeriesTexts({ttItems:r.ttItems,i:l,j:o,y1:O?parseInt(O,10):null,y2:T?parseInt(T,10):null,shared:!a.showOnIntersect&&s.config.tooltip.shared,e:n}),s.config.tooltip.followCursor?s.globals.isBarHorizontal?(c=S-b.left+15,h=R()):(c=I(),h=n.clientY-b.top-a.tooltipRect.ttHeight/2-15):s.globals.isBarHorizontal?((c=C)<a.xyRatios.baseLineInvertedY&&(c=C-a.tooltipRect.ttWidth),h=R()):(c=I(),h=M)}return{x:c,y:h,barHeight:d,barWidth:u,i:l,j:o}}}]),i}(),xP=function(){function i(e){Ee(this,i),this.w=e.w,this.ttCtx=e}return Oe(i,[{key:"drawXaxisTooltip",value:function(){var e=this.w,t=this.ttCtx,n=e.config.xaxis.position==="bottom";t.xaxisOffY=n?e.globals.gridHeight+1:-e.globals.xAxisHeight-e.config.xaxis.axisTicks.height+3;var r=n?"apexcharts-xaxistooltip apexcharts-xaxistooltip-bottom":"apexcharts-xaxistooltip apexcharts-xaxistooltip-top",s=e.globals.dom.elWrap;t.isXAxisTooltipEnabled&&e.globals.dom.baseEl.querySelector(".apexcharts-xaxistooltip")===null&&(t.xaxisTooltip=document.createElement("div"),t.xaxisTooltip.setAttribute("class",r+" apexcharts-theme-"+e.config.tooltip.theme),s.appendChild(t.xaxisTooltip),t.xaxisTooltipText=document.createElement("div"),t.xaxisTooltipText.classList.add("apexcharts-xaxistooltip-text"),t.xaxisTooltipText.style.fontFamily=e.config.xaxis.tooltip.style.fontFamily||e.config.chart.fontFamily,t.xaxisTooltipText.style.fontSize=e.config.xaxis.tooltip.style.fontSize,t.xaxisTooltip.appendChild(t.xaxisTooltipText))}},{key:"drawYaxisTooltip",value:function(){for(var e=this.w,t=this.ttCtx,n=0;n<e.config.yaxis.length;n++){var r=e.config.yaxis[n].opposite||e.config.yaxis[n].crosshairs.opposite;t.yaxisOffX=r?e.globals.gridWidth+1:1;var s="apexcharts-yaxistooltip apexcharts-yaxistooltip-".concat(n,r?" apexcharts-yaxistooltip-right":" apexcharts-yaxistooltip-left"),o=e.globals.dom.elWrap;e.globals.dom.baseEl.querySelector(".apexcharts-yaxistooltip apexcharts-yaxistooltip-".concat(n))===null&&(t.yaxisTooltip=document.createElement("div"),t.yaxisTooltip.setAttribute("class",s+" apexcharts-theme-"+e.config.tooltip.theme),o.appendChild(t.yaxisTooltip),n===0&&(t.yaxisTooltipText=[]),t.yaxisTooltipText[n]=document.createElement("div"),t.yaxisTooltipText[n].classList.add("apexcharts-yaxistooltip-text"),t.yaxisTooltip.appendChild(t.yaxisTooltipText[n]))}}},{key:"setXCrosshairWidth",value:function(){var e=this.w,t=this.ttCtx,n=t.getElXCrosshairs();if(t.xcrosshairsWidth=parseInt(e.config.xaxis.crosshairs.width,10),e.globals.comboCharts){var r=e.globals.dom.baseEl.querySelector(".apexcharts-bar-area");if(r!==null&&e.config.xaxis.crosshairs.width==="barWidth"){var s=parseFloat(r.getAttribute("barWidth"));t.xcrosshairsWidth=s}else if(e.config.xaxis.crosshairs.width==="tickWidth"){var o=e.globals.labels.length;t.xcrosshairsWidth=e.globals.gridWidth/o}}else if(e.config.xaxis.crosshairs.width==="tickWidth"){var a=e.globals.labels.length;t.xcrosshairsWidth=e.globals.gridWidth/a}else if(e.config.xaxis.crosshairs.width==="barWidth"){var l=e.globals.dom.baseEl.querySelector(".apexcharts-bar-area");if(l!==null){var c=parseFloat(l.getAttribute("barWidth"));t.xcrosshairsWidth=c}else t.xcrosshairsWidth=1}e.globals.isBarHorizontal&&(t.xcrosshairsWidth=0),n!==null&&t.xcrosshairsWidth>0&&n.setAttribute("width",t.xcrosshairsWidth)}},{key:"handleYCrosshair",value:function(){var e=this.w,t=this.ttCtx;t.ycrosshairs=e.globals.dom.baseEl.querySelector(".apexcharts-ycrosshairs"),t.ycrosshairsHidden=e.globals.dom.baseEl.querySelector(".apexcharts-ycrosshairs-hidden")}},{key:"drawYaxisTooltipText",value:function(e,t,n){var r=this.ttCtx,s=this.w,o=s.globals,a=o.seriesYAxisMap[e];if(r.yaxisTooltips[e]&&a.length>0){var l=o.yLabelFormatters[e],c=r.getElGrid().getBoundingClientRect(),h=a[0],u=0;n.yRatio.length>1&&(u=h);var d=(t-c.top)*n.yRatio[u],f=o.maxYArr[h]-o.minYArr[h],g=o.minYArr[h]+(f-d);s.config.yaxis[e].reversed&&(g=o.maxYArr[h]-(f-d)),r.tooltipPosition.moveYCrosshairs(t-c.top),r.yaxisTooltipText[e].innerHTML=l(g),r.tooltipPosition.moveYAxisTooltip(e)}}}]),i}(),m0=function(){function i(e){Ee(this,i),this.ctx=e,this.w=e.w;var t=this.w;this.tConfig=t.config.tooltip,this.tooltipUtil=new p0(this),this.tooltipLabels=new pP(this),this.tooltipPosition=new g0(this),this.marker=new gP(this),this.intersect=new mP(this),this.axesTooltip=new xP(this),this.showOnIntersect=this.tConfig.intersect,this.showTooltipTitle=this.tConfig.x.show,this.fixedTooltip=this.tConfig.fixed.enabled,this.xaxisTooltip=null,this.yaxisTTEls=null,this.isBarShared=!t.globals.isBarHorizontal&&this.tConfig.shared,this.lastHoverTime=Date.now()}return Oe(i,[{key:"getElTooltip",value:function(e){return e||(e=this),e.w.globals.dom.baseEl?e.w.globals.dom.baseEl.querySelector(".apexcharts-tooltip"):null}},{key:"getElXCrosshairs",value:function(){return this.w.globals.dom.baseEl.querySelector(".apexcharts-xcrosshairs")}},{key:"getElGrid",value:function(){return this.w.globals.dom.baseEl.querySelector(".apexcharts-grid")}},{key:"drawTooltip",value:function(e){var t=this.w;this.xyRatios=e,this.isXAxisTooltipEnabled=t.config.xaxis.tooltip.enabled&&t.globals.axisCharts,this.yaxisTooltips=t.config.yaxis.map(function(o,a){return!!(o.show&&o.tooltip.enabled&&t.globals.axisCharts)}),this.allTooltipSeriesGroups=[],t.globals.axisCharts||(this.showTooltipTitle=!1);var n=document.createElement("div");if(n.classList.add("apexcharts-tooltip"),t.config.tooltip.cssClass&&n.classList.add(t.config.tooltip.cssClass),n.classList.add("apexcharts-theme-".concat(this.tConfig.theme)),t.globals.dom.elWrap.appendChild(n),t.globals.axisCharts){this.axesTooltip.drawXaxisTooltip(),this.axesTooltip.drawYaxisTooltip(),this.axesTooltip.setXCrosshairWidth(),this.axesTooltip.handleYCrosshair();var r=new Ga(this.ctx);this.xAxisTicksPositions=r.getXAxisTicksPositions()}if(!t.globals.comboCharts&&!this.tConfig.intersect&&t.config.chart.type!=="rangeBar"||this.tConfig.shared||(this.showOnIntersect=!0),t.config.markers.size!==0&&t.globals.markers.largestSize!==0||this.marker.drawDynamicPoints(this),t.globals.collapsedSeries.length!==t.globals.series.length){this.dataPointsDividedHeight=t.globals.gridHeight/t.globals.dataPoints,this.dataPointsDividedWidth=t.globals.gridWidth/t.globals.dataPoints,this.showTooltipTitle&&(this.tooltipTitle=document.createElement("div"),this.tooltipTitle.classList.add("apexcharts-tooltip-title"),this.tooltipTitle.style.fontFamily=this.tConfig.style.fontFamily||t.config.chart.fontFamily,this.tooltipTitle.style.fontSize=this.tConfig.style.fontSize,n.appendChild(this.tooltipTitle));var s=t.globals.series.length;(t.globals.xyCharts||t.globals.comboCharts)&&this.tConfig.shared&&(s=this.showOnIntersect?1:t.globals.series.length),this.legendLabels=t.globals.dom.baseEl.querySelectorAll(".apexcharts-legend-text"),this.ttItems=this.createTTElements(s),this.addSVGEvents()}}},{key:"createTTElements",value:function(e){for(var t=this,n=this.w,r=[],s=this.getElTooltip(),o=function(l){var c=document.createElement("div");c.classList.add("apexcharts-tooltip-series-group","apexcharts-tooltip-series-group-".concat(l)),c.style.order=n.config.tooltip.inverseOrder?e-l:l+1;var h=document.createElement("span");h.classList.add("apexcharts-tooltip-marker"),n.config.tooltip.fillSeriesColor?h.style.backgroundColor=n.globals.colors[l]:h.style.color=n.globals.colors[l];var u=n.config.markers.shape,d=u;Array.isArray(u)&&(d=u[l]),h.setAttribute("shape",d),c.appendChild(h);var f=document.createElement("div");f.classList.add("apexcharts-tooltip-text"),f.style.fontFamily=t.tConfig.style.fontFamily||n.config.chart.fontFamily,f.style.fontSize=t.tConfig.style.fontSize,["y","goals","z"].forEach(function(g){var m=document.createElement("div");m.classList.add("apexcharts-tooltip-".concat(g,"-group"));var b=document.createElement("span");b.classList.add("apexcharts-tooltip-text-".concat(g,"-label")),m.appendChild(b);var y=document.createElement("span");y.classList.add("apexcharts-tooltip-text-".concat(g,"-value")),m.appendChild(y),f.appendChild(m)}),c.appendChild(f),s.appendChild(c),r.push(c)},a=0;a<e;a++)o(a);return r}},{key:"addSVGEvents",value:function(){var e=this.w,t=e.config.chart.type,n=this.getElTooltip(),r=!(t!=="bar"&&t!=="candlestick"&&t!=="boxPlot"&&t!=="rangeBar"),s=t==="area"||t==="line"||t==="scatter"||t==="bubble"||t==="radar",o=e.globals.dom.Paper.node,a=this.getElGrid();a&&(this.seriesBound=a.getBoundingClientRect());var l,c=[],h=[],u={hoverArea:o,elGrid:a,tooltipEl:n,tooltipY:c,tooltipX:h,ttItems:this.ttItems};if(e.globals.axisCharts&&(s?l=e.globals.dom.baseEl.querySelectorAll(".apexcharts-series[data\\:longestSeries='true'] .apexcharts-marker"):r?l=e.globals.dom.baseEl.querySelectorAll(".apexcharts-series .apexcharts-bar-area, .apexcharts-series .apexcharts-candlestick-area, .apexcharts-series .apexcharts-boxPlot-area, .apexcharts-series .apexcharts-rangebar-area"):t!=="heatmap"&&t!=="treemap"||(l=e.globals.dom.baseEl.querySelectorAll(".apexcharts-series .apexcharts-heatmap, .apexcharts-series .apexcharts-treemap")),l&&l.length))for(var d=0;d<l.length;d++)c.push(l[d].getAttribute("cy")),h.push(l[d].getAttribute("cx"));if(e.globals.xyCharts&&!this.showOnIntersect||e.globals.comboCharts&&!this.showOnIntersect||r&&this.tooltipUtil.hasBars()&&this.tConfig.shared)this.addPathsEventListeners([o],u);else if(r&&!e.globals.comboCharts||s&&this.showOnIntersect)this.addDatapointEventsListeners(u);else if(!e.globals.axisCharts||t==="heatmap"||t==="treemap"){var f=e.globals.dom.baseEl.querySelectorAll(".apexcharts-series");this.addPathsEventListeners(f,u)}if(this.showOnIntersect){var g=e.globals.dom.baseEl.querySelectorAll(".apexcharts-line-series .apexcharts-marker, .apexcharts-area-series .apexcharts-marker");g.length>0&&this.addPathsEventListeners(g,u),this.tooltipUtil.hasBars()&&!this.tConfig.shared&&this.addDatapointEventsListeners(u)}}},{key:"drawFixedTooltipRect",value:function(){var e=this.w,t=this.getElTooltip(),n=t.getBoundingClientRect(),r=n.width+10,s=n.height+10,o=this.tConfig.fixed.offsetX,a=this.tConfig.fixed.offsetY,l=this.tConfig.fixed.position.toLowerCase();return l.indexOf("right")>-1&&(o=o+e.globals.svgWidth-r+10),l.indexOf("bottom")>-1&&(a=a+e.globals.svgHeight-s-10),t.style.left=o+"px",t.style.top=a+"px",{x:o,y:a,ttWidth:r,ttHeight:s}}},{key:"addDatapointEventsListeners",value:function(e){var t=this.w.globals.dom.baseEl.querySelectorAll(".apexcharts-series-markers .apexcharts-marker, .apexcharts-bar-area, .apexcharts-candlestick-area, .apexcharts-boxPlot-area, .apexcharts-rangebar-area");this.addPathsEventListeners(t,e)}},{key:"addPathsEventListeners",value:function(e,t){for(var n=this,r=function(o){var a={paths:e[o],tooltipEl:t.tooltipEl,tooltipY:t.tooltipY,tooltipX:t.tooltipX,elGrid:t.elGrid,hoverArea:t.hoverArea,ttItems:t.ttItems};["mousemove","mouseup","touchmove","mouseout","touchend"].map(function(l){return e[o].addEventListener(l,n.onSeriesHover.bind(n,a),{capture:!1,passive:!0})})},s=0;s<e.length;s++)r(s)}},{key:"onSeriesHover",value:function(e,t){var n=this,r=Date.now()-this.lastHoverTime;r>=20?this.seriesHover(e,t):(clearTimeout(this.seriesHoverTimeout),this.seriesHoverTimeout=setTimeout(function(){n.seriesHover(e,t)},20-r))}},{key:"seriesHover",value:function(e,t){var n=this;this.lastHoverTime=Date.now();var r=[],s=this.w;s.config.chart.group&&(r=this.ctx.getGroupedCharts()),s.globals.axisCharts&&(s.globals.minX===-1/0&&s.globals.maxX===1/0||s.globals.dataPoints===0)||(r.length?r.forEach(function(o){var a=n.getElTooltip(o),l={paths:e.paths,tooltipEl:a,tooltipY:e.tooltipY,tooltipX:e.tooltipX,elGrid:e.elGrid,hoverArea:e.hoverArea,ttItems:o.w.globals.tooltip.ttItems};o.w.globals.minX===n.w.globals.minX&&o.w.globals.maxX===n.w.globals.maxX&&o.w.globals.tooltip.seriesHoverByContext({chartCtx:o,ttCtx:o.w.globals.tooltip,opt:l,e:t})}):this.seriesHoverByContext({chartCtx:this.ctx,ttCtx:this.w.globals.tooltip,opt:e,e:t}))}},{key:"seriesHoverByContext",value:function(e){var t=e.chartCtx,n=e.ttCtx,r=e.opt,s=e.e,o=t.w,a=this.getElTooltip(t);a&&(n.tooltipRect={x:0,y:0,ttWidth:a.getBoundingClientRect().width,ttHeight:a.getBoundingClientRect().height},n.e=s,n.tooltipUtil.hasBars()&&!o.globals.comboCharts&&!n.isBarShared&&this.tConfig.onDatasetHover.highlightDataSeries&&new ci(t).toggleSeriesOnHover(s,s.target.parentNode),n.fixedTooltip&&n.drawFixedTooltipRect(),o.globals.axisCharts?n.axisChartsTooltips({e:s,opt:r,tooltipRect:n.tooltipRect}):n.nonAxisChartsTooltips({e:s,opt:r,tooltipRect:n.tooltipRect}))}},{key:"axisChartsTooltips",value:function(e){var t,n,r=e.e,s=e.opt,o=this.w,a=s.elGrid.getBoundingClientRect(),l=r.type==="touchmove"?r.touches[0].clientX:r.clientX,c=r.type==="touchmove"?r.touches[0].clientY:r.clientY;if(this.clientY=c,this.clientX=l,o.globals.capturedSeriesIndex=-1,o.globals.capturedDataPointIndex=-1,c<a.top||c>a.top+a.height)this.handleMouseOut(s);else{if(Array.isArray(this.tConfig.enabledOnSeries)&&!o.config.tooltip.shared){var h=parseInt(s.paths.getAttribute("index"),10);if(this.tConfig.enabledOnSeries.indexOf(h)<0)return void this.handleMouseOut(s)}var u=this.getElTooltip(),d=this.getElXCrosshairs(),f=[];o.config.chart.group&&(f=this.ctx.getSyncedCharts());var g=o.globals.xyCharts||o.config.chart.type==="bar"&&!o.globals.isBarHorizontal&&this.tooltipUtil.hasBars()&&this.tConfig.shared||o.globals.comboCharts&&this.tooltipUtil.hasBars();if(r.type==="mousemove"||r.type==="touchmove"||r.type==="mouseup"){if(o.globals.collapsedSeries.length+o.globals.ancillaryCollapsedSeries.length===o.globals.series.length)return;d!==null&&d.classList.add("apexcharts-active");var m=this.yaxisTooltips.filter(function(w){return w===!0});if(this.ycrosshairs!==null&&m.length&&this.ycrosshairs.classList.add("apexcharts-active"),g&&!this.showOnIntersect||f.length>1)this.handleStickyTooltip(r,l,c,s);else if(o.config.chart.type==="heatmap"||o.config.chart.type==="treemap"){var b=this.intersect.handleHeatTreeTooltip({e:r,opt:s,x:t,y:n,type:o.config.chart.type});t=b.x,n=b.y,u.style.left=t+"px",u.style.top=n+"px"}else this.tooltipUtil.hasBars()&&this.intersect.handleBarTooltip({e:r,opt:s}),this.tooltipUtil.hasMarkers()&&this.intersect.handleMarkerTooltip({e:r,opt:s,x:t,y:n});if(this.yaxisTooltips.length)for(var y=0;y<o.config.yaxis.length;y++)this.axesTooltip.drawYaxisTooltipText(y,c,this.xyRatios);o.globals.dom.baseEl.classList.add("apexcharts-tooltip-active"),s.tooltipEl.classList.add("apexcharts-active")}else r.type!=="mouseout"&&r.type!=="touchend"||this.handleMouseOut(s)}}},{key:"nonAxisChartsTooltips",value:function(e){var t=e.e,n=e.opt,r=e.tooltipRect,s=this.w,o=n.paths.getAttribute("rel"),a=this.getElTooltip(),l=s.globals.dom.elWrap.getBoundingClientRect();if(t.type==="mousemove"||t.type==="touchmove"){s.globals.dom.baseEl.classList.add("apexcharts-tooltip-active"),a.classList.add("apexcharts-active"),this.tooltipLabels.drawSeriesTexts({ttItems:n.ttItems,i:parseInt(o,10)-1,shared:!1});var c=s.globals.clientX-l.left-r.ttWidth/2,h=s.globals.clientY-l.top-r.ttHeight-10;if(a.style.left=c+"px",a.style.top=h+"px",s.config.legend.tooltipHoverFormatter){var u=o-1,d=(0,s.config.legend.tooltipHoverFormatter)(this.legendLabels[u].getAttribute("data:default-text"),{seriesIndex:u,dataPointIndex:u,w:s});this.legendLabels[u].innerHTML=d}}else t.type!=="mouseout"&&t.type!=="touchend"||(a.classList.remove("apexcharts-active"),s.globals.dom.baseEl.classList.remove("apexcharts-tooltip-active"),s.config.legend.tooltipHoverFormatter&&this.legendLabels.forEach(function(f){var g=f.getAttribute("data:default-text");f.innerHTML=decodeURIComponent(g)}))}},{key:"handleStickyTooltip",value:function(e,t,n,r){var s=this.w,o=this.tooltipUtil.getNearestValues({context:this,hoverArea:r.hoverArea,elGrid:r.elGrid,clientX:t,clientY:n}),a=o.j,l=o.capturedSeries;s.globals.collapsedSeriesIndices.includes(l)&&(l=null);var c=r.elGrid.getBoundingClientRect();if(o.hoverX<0||o.hoverX>c.width)this.handleMouseOut(r);else if(l!==null)this.handleStickyCapturedSeries(e,l,r,a);else if(this.tooltipUtil.isXoverlap(a)||s.globals.isBarHorizontal){var h=s.globals.series.findIndex(function(u,d){return!s.globals.collapsedSeriesIndices.includes(d)});this.create(e,this,h,a,r.ttItems)}}},{key:"handleStickyCapturedSeries",value:function(e,t,n,r){var s=this.w;if(!this.tConfig.shared&&s.globals.series[t][r]===null)return void this.handleMouseOut(n);if(s.globals.series[t][r]!==void 0)this.tConfig.shared&&this.tooltipUtil.isXoverlap(r)&&this.tooltipUtil.isInitialSeriesSameLen()?this.create(e,this,t,r,n.ttItems):this.create(e,this,t,r,n.ttItems,!1);else if(this.tooltipUtil.isXoverlap(r)){var o=s.globals.series.findIndex(function(a,l){return!s.globals.collapsedSeriesIndices.includes(l)});this.create(e,this,o,r,n.ttItems)}}},{key:"deactivateHoverFilter",value:function(){for(var e=this.w,t=new oe(this.ctx),n=e.globals.dom.Paper.find(".apexcharts-bar-area"),r=0;r<n.length;r++)t.pathMouseLeave(n[r])}},{key:"handleMouseOut",value:function(e){var t=this.w,n=this.getElXCrosshairs();if(t.globals.dom.baseEl.classList.remove("apexcharts-tooltip-active"),e.tooltipEl.classList.remove("apexcharts-active"),this.deactivateHoverFilter(),t.config.chart.type!=="bubble"&&this.marker.resetPointsSize(),n!==null&&n.classList.remove("apexcharts-active"),this.ycrosshairs!==null&&this.ycrosshairs.classList.remove("apexcharts-active"),this.isXAxisTooltipEnabled&&this.xaxisTooltip.classList.remove("apexcharts-active"),this.yaxisTooltips.length){this.yaxisTTEls===null&&(this.yaxisTTEls=t.globals.dom.baseEl.querySelectorAll(".apexcharts-yaxistooltip"));for(var r=0;r<this.yaxisTTEls.length;r++)this.yaxisTTEls[r].classList.remove("apexcharts-active")}t.config.legend.tooltipHoverFormatter&&this.legendLabels.forEach(function(s){var o=s.getAttribute("data:default-text");s.innerHTML=decodeURIComponent(o)})}},{key:"markerClick",value:function(e,t,n){var r=this.w;typeof r.config.chart.events.markerClick=="function"&&r.config.chart.events.markerClick(e,this.ctx,{seriesIndex:t,dataPointIndex:n,w:r}),this.ctx.events.fireEvent("markerClick",[e,this.ctx,{seriesIndex:t,dataPointIndex:n,w:r}])}},{key:"create",value:function(e,t,n,r,s){var o,a,l,c,h,u,d,f,g,m,b,y,w,C,M,S,O=arguments.length>5&&arguments[5]!==void 0?arguments[5]:null,T=this.w,I=t;e.type==="mouseup"&&this.markerClick(e,n,r),O===null&&(O=this.tConfig.shared);var R=this.tooltipUtil.hasMarkers(n),z=this.tooltipUtil.getElBars(),D=function(){T.globals.markers.largestSize>0?I.marker.enlargePoints(r):I.tooltipPosition.moveDynamicPointsOnHover(r)};if(T.config.legend.tooltipHoverFormatter){var B=T.config.legend.tooltipHoverFormatter,K=Array.from(this.legendLabels);K.forEach(function(rt){var Ge=rt.getAttribute("data:default-text");rt.innerHTML=decodeURIComponent(Ge)});for(var J=0;J<K.length;J++){var se=K[J],ne=parseInt(se.getAttribute("i"),10),ie=decodeURIComponent(se.getAttribute("data:default-text")),ae=B(ie,{seriesIndex:O?ne:n,dataPointIndex:r,w:T});if(O)se.innerHTML=T.globals.collapsedSeriesIndices.indexOf(ne)<0?ae:ie;else if(se.innerHTML=ne===n?ae:ie,n===ne)break}}var Me=xe(xe({ttItems:s,i:n,j:r},((o=T.globals.seriesRange)===null||o===void 0||(a=o[n])===null||a===void 0||(l=a[r])===null||l===void 0||(c=l.y[0])===null||c===void 0?void 0:c.y1)!==void 0&&{y1:(h=T.globals.seriesRange)===null||h===void 0||(u=h[n])===null||u===void 0||(d=u[r])===null||d===void 0||(f=d.y[0])===null||f===void 0?void 0:f.y1}),((g=T.globals.seriesRange)===null||g===void 0||(m=g[n])===null||m===void 0||(b=m[r])===null||b===void 0||(y=b.y[0])===null||y===void 0?void 0:y.y2)!==void 0&&{y2:(w=T.globals.seriesRange)===null||w===void 0||(C=w[n])===null||C===void 0||(M=C[r])===null||M===void 0||(S=M.y[0])===null||S===void 0?void 0:S.y2});if(O){if(I.tooltipLabels.drawSeriesTexts(xe(xe({},Me),{},{shared:!this.showOnIntersect&&this.tConfig.shared})),R)D();else if(this.tooltipUtil.hasBars()&&(this.barSeriesHeight=this.tooltipUtil.getBarsHeight(z),this.barSeriesHeight>0)){var Re=new oe(this.ctx),_e=T.globals.dom.Paper.find(".apexcharts-bar-area[j='".concat(r,"']"));this.deactivateHoverFilter(),I.tooltipPosition.moveStickyTooltipOverBars(r,n),I.tooltipUtil.getAllMarkers(!0).length&&D();for(var Je=0;Je<_e.length;Je++)Re.pathMouseEnter(_e[Je])}}else I.tooltipLabels.drawSeriesTexts(xe({shared:!1},Me)),this.tooltipUtil.hasBars()&&I.tooltipPosition.moveStickyTooltipOverBars(r,n),R&&I.tooltipPosition.moveMarkers(n,r)}}]),i}(),bP=function(){function i(e){Ee(this,i),this.w=e.w,this.barCtx=e,this.totalFormatter=this.w.config.plotOptions.bar.dataLabels.total.formatter,this.totalFormatter||(this.totalFormatter=this.w.config.dataLabels.formatter)}return Oe(i,[{key:"handleBarDataLabels",value:function(e){var t,n,r=e.x,s=e.y,o=e.y1,a=e.y2,l=e.i,c=e.j,h=e.realIndex,u=e.columnGroupIndex,d=e.series,f=e.barHeight,g=e.barWidth,m=e.barXPosition,b=e.barYPosition,y=e.visibleSeries,w=e.renderedPath,C=this.w,M=new oe(this.barCtx.ctx),S=Array.isArray(this.barCtx.strokeWidth)?this.barCtx.strokeWidth[h]:this.barCtx.strokeWidth;C.globals.isXNumeric&&!C.globals.isBarHorizontal?(t=r+parseFloat(g*(y+1)),n=s+parseFloat(f*(y+1))-S):(t=r+parseFloat(g*y),n=s+parseFloat(f*y));var O,T=null,I=r,R=s,z={},D=C.config.dataLabels,B=this.barCtx.barOptions.dataLabels,K=this.barCtx.barOptions.dataLabels.total;b!==void 0&&this.barCtx.isRangeBar&&(n=b,R=b),m!==void 0&&this.barCtx.isVerticalGroupedRangeBar&&(t=m,I=m);var J=D.offsetX,se=D.offsetY,ne={width:0,height:0};if(C.config.dataLabels.enabled){var ie=C.globals.series[l][c];ne=M.getTextRects(C.config.dataLabels.formatter?C.config.dataLabels.formatter(ie,xe(xe({},C),{},{seriesIndex:l,dataPointIndex:c,w:C})):C.globals.yLabelFormatters[0](ie),parseFloat(D.style.fontSize))}var ae={x:r,y:s,i:l,j:c,realIndex:h,columnGroupIndex:u,renderedPath:w,bcx:t,bcy:n,barHeight:f,barWidth:g,textRects:ne,strokeWidth:S,dataLabelsX:I,dataLabelsY:R,dataLabelsConfig:D,barDataLabelsConfig:B,barTotalDataLabelsConfig:K,offX:J,offY:se};return z=this.barCtx.isHorizontal?this.calculateBarsDataLabelsPosition(ae):this.calculateColumnsDataLabelsPosition(ae),w.attr({cy:z.bcy,cx:z.bcx,j:c,val:C.globals.series[l][c],barHeight:f,barWidth:g}),O=this.drawCalculatedDataLabels({x:z.dataLabelsX,y:z.dataLabelsY,val:this.barCtx.isRangeBar?[o,a]:C.config.chart.stackType==="100%"?d[h][c]:C.globals.series[h][c],i:h,j:c,barWidth:g,barHeight:f,textRects:ne,dataLabelsConfig:D}),C.config.chart.stacked&&K.enabled&&(T=this.drawTotalDataLabels({x:z.totalDataLabelsX,y:z.totalDataLabelsY,barWidth:g,barHeight:f,realIndex:h,textAnchor:z.totalDataLabelsAnchor,val:this.getStackedTotalDataLabel({realIndex:h,j:c}),dataLabelsConfig:D,barTotalDataLabelsConfig:K})),{dataLabels:O,totalDataLabels:T}}},{key:"getStackedTotalDataLabel",value:function(e){var t=e.realIndex,n=e.j,r=this.w,s=this.barCtx.stackedSeriesTotals[n];return this.totalFormatter&&(s=this.totalFormatter(s,xe(xe({},r),{},{seriesIndex:t,dataPointIndex:n,w:r}))),s}},{key:"calculateColumnsDataLabelsPosition",value:function(e){var t=this,n=this.w,r=e.i,s=e.j,o=e.realIndex;e.columnGroupIndex;var a,l,c=e.y,h=e.bcx,u=e.barWidth,d=e.barHeight,f=e.textRects,g=e.dataLabelsX,m=e.dataLabelsY,b=e.dataLabelsConfig,y=e.barDataLabelsConfig,w=e.barTotalDataLabelsConfig,C=e.strokeWidth,M=e.offX,S=e.offY,O=h;d=Math.abs(d);var T=n.config.plotOptions.bar.dataLabels.orientation==="vertical",I=this.barCtx.barHelpers.getZeroValueEncounters({i:r,j:s}).zeroEncounters;h-=C/2;var R=n.globals.gridWidth/n.globals.dataPoints;this.barCtx.isVerticalGroupedRangeBar?g+=u/2:(g=n.globals.isXNumeric?h-u/2+M:h-R+u/2+M,!n.config.chart.stacked&&I>0&&n.config.plotOptions.bar.hideZeroBarsWhenGrouped&&(g-=u*I)),T&&(g=g+f.height/2-C/2-2);var z=n.globals.series[r][s]<0,D=c;switch(this.barCtx.isReversed&&(D=c+(z?d:-d)),y.position){case"center":m=T?z?D-d/2+S:D+d/2-S:z?D-d/2+f.height/2+S:D+d/2+f.height/2-S;break;case"bottom":m=T?z?D-d+S:D+d-S:z?D-d+f.height+C+S:D+d-f.height/2+C-S;break;case"top":m=T?z?D+S:D-S:z?D-f.height/2-S:D+f.height+S}var B=D;if(n.globals.seriesGroups.forEach(function(se){var ne;(ne=t.barCtx[se.join(",")])===null||ne===void 0||ne.prevY.forEach(function(ie){B=z?Math.max(ie[s],B):Math.min(ie[s],B)})}),this.barCtx.lastActiveBarSerieIndex===o&&w.enabled){var K=new oe(this.barCtx.ctx).getTextRects(this.getStackedTotalDataLabel({realIndex:o,j:s}),b.fontSize);a=z?B-K.height/2-S-w.offsetY+18:B+K.height+S+w.offsetY-18;var J=R;l=O+(n.globals.isXNumeric?-u*n.globals.barGroups.length/2:n.globals.barGroups.length*u/2-(n.globals.barGroups.length-1)*u-J)+w.offsetX}return n.config.chart.stacked||(m<0?m=0+C:m+f.height/3>n.globals.gridHeight&&(m=n.globals.gridHeight-C)),{bcx:h,bcy:c,dataLabelsX:g,dataLabelsY:m,totalDataLabelsX:l,totalDataLabelsY:a,totalDataLabelsAnchor:"middle"}}},{key:"calculateBarsDataLabelsPosition",value:function(e){var t=this,n=this.w,r=e.x,s=e.i,o=e.j,a=e.realIndex,l=e.bcy,c=e.barHeight,h=e.barWidth,u=e.textRects,d=e.dataLabelsX,f=e.strokeWidth,g=e.dataLabelsConfig,m=e.barDataLabelsConfig,b=e.barTotalDataLabelsConfig,y=e.offX,w=e.offY,C=n.globals.gridHeight/n.globals.dataPoints,M=this.barCtx.barHelpers.getZeroValueEncounters({i:s,j:o}).zeroEncounters;h=Math.abs(h);var S,O,T=l-(this.barCtx.isRangeBar?0:C)+c/2+u.height/2+w-3;!n.config.chart.stacked&&M>0&&n.config.plotOptions.bar.hideZeroBarsWhenGrouped&&(T-=c*M);var I="start",R=n.globals.series[s][o]<0,z=r;switch(this.barCtx.isReversed&&(z=r+(R?-h:h),I=R?"start":"end"),m.position){case"center":d=R?z+h/2-y:Math.max(u.width/2,z-h/2)+y;break;case"bottom":d=R?z+h-f-y:z-h+f+y;break;case"top":d=R?z-f-y:z-f+y}var D=z;if(n.globals.seriesGroups.forEach(function(K){var J;(J=t.barCtx[K.join(",")])===null||J===void 0||J.prevX.forEach(function(se){D=R?Math.min(se[o],D):Math.max(se[o],D)})}),this.barCtx.lastActiveBarSerieIndex===a&&b.enabled){var B=new oe(this.barCtx.ctx).getTextRects(this.getStackedTotalDataLabel({realIndex:a,j:o}),g.fontSize);R?(S=D-f-y-b.offsetX,I="end"):S=D+y+b.offsetX+(this.barCtx.isReversed?-(h+f):f),O=T-u.height/2+B.height/2+b.offsetY+f,n.globals.barGroups.length>1&&(O-=n.globals.barGroups.length/2*(c/2))}return n.config.chart.stacked||(g.textAnchor==="start"?d-u.width<0?d=R?u.width+f:f:d+u.width>n.globals.gridWidth&&(d=R?n.globals.gridWidth-f:n.globals.gridWidth-u.width-f):g.textAnchor==="middle"?d-u.width/2<0?d=u.width/2+f:d+u.width/2>n.globals.gridWidth&&(d=n.globals.gridWidth-u.width/2-f):g.textAnchor==="end"&&(d<1?d=u.width+f:d+1>n.globals.gridWidth&&(d=n.globals.gridWidth-u.width-f))),{bcx:r,bcy:l,dataLabelsX:d,dataLabelsY:T,totalDataLabelsX:S,totalDataLabelsY:O,totalDataLabelsAnchor:I}}},{key:"drawCalculatedDataLabels",value:function(e){var t=e.x,n=e.y,r=e.val,s=e.i,o=e.j,a=e.textRects,l=e.barHeight,c=e.barWidth,h=e.dataLabelsConfig,u=this.w,d="rotate(0)";u.config.plotOptions.bar.dataLabels.orientation==="vertical"&&(d="rotate(-90, ".concat(t,", ").concat(n,")"));var f=new ko(this.barCtx.ctx),g=new oe(this.barCtx.ctx),m=h.formatter,b=null,y=u.globals.collapsedSeriesIndices.indexOf(s)>-1;if(h.enabled&&!y){b=g.group({class:"apexcharts-data-labels",transform:d});var w="";r!==void 0&&(w=m(r,xe(xe({},u),{},{seriesIndex:s,dataPointIndex:o,w:u}))),!r&&u.config.plotOptions.bar.hideZeroBarsWhenGrouped&&(w="");var C=u.globals.series[s][o]<0,M=u.config.plotOptions.bar.dataLabels.position;u.config.plotOptions.bar.dataLabels.orientation==="vertical"&&(M==="top"&&(h.textAnchor=C?"end":"start"),M==="center"&&(h.textAnchor="middle"),M==="bottom"&&(h.textAnchor=C?"end":"start")),this.barCtx.isRangeBar&&this.barCtx.barOptions.dataLabels.hideOverflowingLabels&&c<g.getTextRects(w,parseFloat(h.style.fontSize)).width&&(w=""),u.config.chart.stacked&&this.barCtx.barOptions.dataLabels.hideOverflowingLabels&&(this.barCtx.isHorizontal?a.width/1.6>Math.abs(c)&&(w=""):a.height/1.6>Math.abs(l)&&(w=""));var S=xe({},h);this.barCtx.isHorizontal&&r<0&&(h.textAnchor==="start"?S.textAnchor="end":h.textAnchor==="end"&&(S.textAnchor="start")),f.plotDataLabelsText({x:t,y:n,text:w,i:s,j:o,parent:b,dataLabelsConfig:S,alwaysDrawDataLabel:!0,offsetCorrection:!0})}return b}},{key:"drawTotalDataLabels",value:function(e){var t=e.x,n=e.y,r=e.val,s=e.realIndex,o=e.textAnchor,a=e.barTotalDataLabelsConfig;this.w;var l,c=new oe(this.barCtx.ctx);return a.enabled&&t!==void 0&&n!==void 0&&this.barCtx.lastActiveBarSerieIndex===s&&(l=c.drawText({x:t,y:n,foreColor:a.style.color,text:r,textAnchor:o,fontFamily:a.style.fontFamily,fontSize:a.style.fontSize,fontWeight:a.style.fontWeight})),l}}]),i}(),yP=function(){function i(e){Ee(this,i),this.w=e.w,this.barCtx=e}return Oe(i,[{key:"initVariables",value:function(e){var t=this.w;this.barCtx.series=e,this.barCtx.totalItems=0,this.barCtx.seriesLen=0,this.barCtx.visibleI=-1,this.barCtx.visibleItems=1;for(var n=0;n<e.length;n++)if(e[n].length>0&&(this.barCtx.seriesLen=this.barCtx.seriesLen+1,this.barCtx.totalItems+=e[n].length),t.globals.isXNumeric)for(var r=0;r<e[n].length;r++)t.globals.seriesX[n][r]>t.globals.minX&&t.globals.seriesX[n][r]<t.globals.maxX&&this.barCtx.visibleItems++;else this.barCtx.visibleItems=t.globals.dataPoints;this.arrBorderRadius=this.createBorderRadiusArr(t.globals.series),this.barCtx.seriesLen===0&&(this.barCtx.seriesLen=1),this.barCtx.zeroSerieses=[],t.globals.comboCharts||this.checkZeroSeries({series:e})}},{key:"initialPositions",value:function(e){var t,n,r,s,o,a,l,c,h=this.w,u=h.globals.dataPoints;this.barCtx.isRangeBar&&(u=h.globals.labels.length);var d=this.barCtx.seriesLen;if(h.config.plotOptions.bar.rangeBarGroupRows&&(d=1),this.barCtx.isHorizontal)o=(r=h.globals.gridHeight/u)/d,h.globals.isXNumeric&&(o=(r=h.globals.gridHeight/this.barCtx.totalItems)/this.barCtx.seriesLen),o=o*parseInt(this.barCtx.barOptions.barHeight,10)/100,String(this.barCtx.barOptions.barHeight).indexOf("%")===-1&&(o=parseInt(this.barCtx.barOptions.barHeight,10)),c=this.barCtx.baseLineInvertedY+h.globals.padHorizontal+(this.barCtx.isReversed?h.globals.gridWidth:0)-(this.barCtx.isReversed?2*this.barCtx.baseLineInvertedY:0),this.barCtx.isFunnel&&(c=h.globals.gridWidth/2),n=(r-o*this.barCtx.seriesLen)/2;else{if(s=h.globals.gridWidth/this.barCtx.visibleItems,h.config.xaxis.convertedCatToNumeric&&(s=h.globals.gridWidth/h.globals.dataPoints),a=s/d*parseInt(this.barCtx.barOptions.columnWidth,10)/100,h.globals.isXNumeric){var f=this.barCtx.xRatio;h.globals.minXDiff&&h.globals.minXDiff!==.5&&h.globals.minXDiff/f>0&&(s=h.globals.minXDiff/f),(a=s/d*parseInt(this.barCtx.barOptions.columnWidth,10)/100)<1&&(a=1)}String(this.barCtx.barOptions.columnWidth).indexOf("%")===-1&&(a=parseInt(this.barCtx.barOptions.columnWidth,10)),l=h.globals.gridHeight-this.barCtx.baseLineY[this.barCtx.translationsIndex]-(this.barCtx.isReversed?h.globals.gridHeight:0)+(this.barCtx.isReversed?2*this.barCtx.baseLineY[this.barCtx.translationsIndex]:0),h.globals.isXNumeric?t=this.barCtx.getBarXForNumericXAxis({x:t,j:0,realIndex:e,barWidth:a}).x:t=h.globals.padHorizontal+H.noExponents(s-a*this.barCtx.seriesLen)/2}return h.globals.barHeight=o,h.globals.barWidth=a,{x:t,y:n,yDivision:r,xDivision:s,barHeight:o,barWidth:a,zeroH:l,zeroW:c}}},{key:"initializeStackedPrevVars",value:function(e){e.w.globals.seriesGroups.forEach(function(t){e[t]||(e[t]={}),e[t].prevY=[],e[t].prevX=[],e[t].prevYF=[],e[t].prevXF=[],e[t].prevYVal=[],e[t].prevXVal=[]})}},{key:"initializeStackedXYVars",value:function(e){e.w.globals.seriesGroups.forEach(function(t){e[t]||(e[t]={}),e[t].xArrj=[],e[t].xArrjF=[],e[t].xArrjVal=[],e[t].yArrj=[],e[t].yArrjF=[],e[t].yArrjVal=[]})}},{key:"getPathFillColor",value:function(e,t,n,r){var s,o,a,l,c=this.w,h=this.barCtx.ctx.fill,u=null,d=this.barCtx.barOptions.distributed?n:t,f=!1;return this.barCtx.barOptions.colors.ranges.length>0&&this.barCtx.barOptions.colors.ranges.map(function(g){e[t][n]>=g.from&&e[t][n]<=g.to&&(u=g.color,f=!0)}),{color:h.fillPath({seriesNumber:this.barCtx.barOptions.distributed?d:r,dataPointIndex:n,color:u,value:e[t][n],fillConfig:(s=c.config.series[t].data[n])===null||s===void 0?void 0:s.fill,fillType:(o=c.config.series[t].data[n])!==null&&o!==void 0&&(a=o.fill)!==null&&a!==void 0&&a.type?(l=c.config.series[t].data[n])===null||l===void 0?void 0:l.fill.type:Array.isArray(c.config.fill.type)?c.config.fill.type[r]:c.config.fill.type}),useRangeColor:f}}},{key:"getStrokeWidth",value:function(e,t,n){var r=0,s=this.w;return this.barCtx.series[e][t]?this.barCtx.isNullValue=!1:this.barCtx.isNullValue=!0,s.config.stroke.show&&(this.barCtx.isNullValue||(r=Array.isArray(this.barCtx.strokeWidth)?this.barCtx.strokeWidth[n]:this.barCtx.strokeWidth)),r}},{key:"createBorderRadiusArr",value:function(e){var t,n=this.w,r=!this.w.config.chart.stacked||n.config.plotOptions.bar.borderRadius<=0,s=e.length,o=0|((t=e[0])===null||t===void 0?void 0:t.length),a=Array.from({length:s},function(){return Array(o).fill(r?"top":"none")});if(r)return a;for(var l=0;l<o;l++){for(var c=[],h=[],u=0,d=0;d<s;d++){var f=e[d][l];f>0?(c.push(d),u++):f<0&&(h.push(d),u++)}if(c.length>0&&h.length===0)if(c.length===1)a[c[0]][l]="both";else{var g,m=c[0],b=c[c.length-1],y=La(c);try{for(y.s();!(g=y.n()).done;){var w=g.value;a[w][l]=w===m?"bottom":w===b?"top":"none"}}catch(ne){y.e(ne)}finally{y.f()}}else if(h.length>0&&c.length===0)if(h.length===1)a[h[0]][l]="both";else{var C,M=Math.max.apply(Math,h),S=Math.min.apply(Math,h),O=La(h);try{for(O.s();!(C=O.n()).done;){var T=C.value;a[T][l]=T===M?"bottom":T===S?"top":"none"}}catch(ne){O.e(ne)}finally{O.f()}}else if(c.length>0&&h.length>0){var I,R=c[c.length-1],z=La(c);try{for(z.s();!(I=z.n()).done;){var D=I.value;a[D][l]=D===R?"top":"none"}}catch(ne){z.e(ne)}finally{z.f()}var B,K=Math.max.apply(Math,h),J=La(h);try{for(J.s();!(B=J.n()).done;){var se=B.value;a[se][l]=se===K?"bottom":"none"}}catch(ne){J.e(ne)}finally{J.f()}}else u===1&&(a[c[0]||h[0]][l]="both")}return a}},{key:"barBackground",value:function(e){var t=e.j,n=e.i,r=e.x1,s=e.x2,o=e.y1,a=e.y2,l=e.elSeries,c=this.w,h=new oe(this.barCtx.ctx),u=new ci(this.barCtx.ctx).getActiveConfigSeriesIndex();if(this.barCtx.barOptions.colors.backgroundBarColors.length>0&&u===n){t>=this.barCtx.barOptions.colors.backgroundBarColors.length&&(t%=this.barCtx.barOptions.colors.backgroundBarColors.length);var d=this.barCtx.barOptions.colors.backgroundBarColors[t],f=h.drawRect(r!==void 0?r:0,o!==void 0?o:0,s!==void 0?s:c.globals.gridWidth,a!==void 0?a:c.globals.gridHeight,this.barCtx.barOptions.colors.backgroundBarRadius,d,this.barCtx.barOptions.colors.backgroundBarOpacity);l.add(f),f.node.classList.add("apexcharts-backgroundBar")}}},{key:"getColumnPaths",value:function(e){var t,n=e.barWidth,r=e.barXPosition,s=e.y1,o=e.y2,a=e.strokeWidth,l=e.isReversed,c=e.series,h=e.seriesGroup,u=e.realIndex,d=e.i,f=e.j,g=e.w,m=new oe(this.barCtx.ctx);(a=Array.isArray(a)?a[u]:a)||(a=0);var b=n,y=r;(t=g.config.series[u].data[f])!==null&&t!==void 0&&t.columnWidthOffset&&(y=r-g.config.series[u].data[f].columnWidthOffset/2,b=n+g.config.series[u].data[f].columnWidthOffset);var w=a/2,C=y+w,M=y+b-w,S=(c[d][f]>=0?1:-1)*(l?-1:1);s+=.001-w*S,o+=.001+w*S;var O=m.move(C,s),T=m.move(C,s),I=m.line(M,s);if(g.globals.previousPaths.length>0&&(T=this.barCtx.getPreviousPath(u,f,!1)),O=O+m.line(C,o)+m.line(M,o)+I+(g.config.plotOptions.bar.borderRadiusApplication==="around"||this.arrBorderRadius[u][f]==="both"?" Z":" z"),T=T+m.line(C,s)+I+I+I+I+I+m.line(C,s)+(g.config.plotOptions.bar.borderRadiusApplication==="around"||this.arrBorderRadius[u][f]==="both"?" Z":" z"),this.arrBorderRadius[u][f]!=="none"&&(O=m.roundPathCorners(O,g.config.plotOptions.bar.borderRadius)),g.config.chart.stacked){var R=this.barCtx;(R=this.barCtx[h]).yArrj.push(o-w*S),R.yArrjF.push(Math.abs(s-o+a*S)),R.yArrjVal.push(this.barCtx.series[d][f])}return{pathTo:O,pathFrom:T}}},{key:"getBarpaths",value:function(e){var t,n=e.barYPosition,r=e.barHeight,s=e.x1,o=e.x2,a=e.strokeWidth,l=e.isReversed,c=e.series,h=e.seriesGroup,u=e.realIndex,d=e.i,f=e.j,g=e.w,m=new oe(this.barCtx.ctx);(a=Array.isArray(a)?a[u]:a)||(a=0);var b=n,y=r;(t=g.config.series[u].data[f])!==null&&t!==void 0&&t.barHeightOffset&&(b=n-g.config.series[u].data[f].barHeightOffset/2,y=r+g.config.series[u].data[f].barHeightOffset);var w=a/2,C=b+w,M=b+y-w,S=(c[d][f]>=0?1:-1)*(l?-1:1);s+=.001+w*S,o+=.001-w*S;var O=m.move(s,C),T=m.move(s,C);g.globals.previousPaths.length>0&&(T=this.barCtx.getPreviousPath(u,f,!1));var I=m.line(s,M);if(O=O+m.line(o,C)+m.line(o,M)+I+(g.config.plotOptions.bar.borderRadiusApplication==="around"||this.arrBorderRadius[u][f]==="both"?" Z":" z"),T=T+m.line(s,C)+I+I+I+I+I+m.line(s,C)+(g.config.plotOptions.bar.borderRadiusApplication==="around"||this.arrBorderRadius[u][f]==="both"?" Z":" z"),this.arrBorderRadius[u][f]!=="none"&&(O=m.roundPathCorners(O,g.config.plotOptions.bar.borderRadius)),g.config.chart.stacked){var R=this.barCtx;(R=this.barCtx[h]).xArrj.push(o+w*S),R.xArrjF.push(Math.abs(s-o-a*S)),R.xArrjVal.push(this.barCtx.series[d][f])}return{pathTo:O,pathFrom:T}}},{key:"checkZeroSeries",value:function(e){for(var t=e.series,n=this.w,r=0;r<t.length;r++){for(var s=0,o=0;o<t[n.globals.maxValsInArrayIndex].length;o++)s+=t[r][o];s===0&&this.barCtx.zeroSerieses.push(r)}}},{key:"getXForValue",value:function(e,t){var n=!(arguments.length>2&&arguments[2]!==void 0)||arguments[2]?t:null;return e!=null&&(n=t+e/this.barCtx.invertedYRatio-2*(this.barCtx.isReversed?e/this.barCtx.invertedYRatio:0)),n}},{key:"getYForValue",value:function(e,t,n){var r=!(arguments.length>3&&arguments[3]!==void 0)||arguments[3]?t:null;return e!=null&&(r=t-e/this.barCtx.yRatio[n]+2*(this.barCtx.isReversed?e/this.barCtx.yRatio[n]:0)),r}},{key:"getGoalValues",value:function(e,t,n,r,s,o){var a=this,l=this.w,c=[],h=function(f,g){var m;c.push((sh(m={},e,e==="x"?a.getXForValue(f,t,!1):a.getYForValue(f,n,o,!1)),sh(m,"attrs",g),m))};if(l.globals.seriesGoals[r]&&l.globals.seriesGoals[r][s]&&Array.isArray(l.globals.seriesGoals[r][s])&&l.globals.seriesGoals[r][s].forEach(function(f){h(f.value,f)}),this.barCtx.barOptions.isDumbbell&&l.globals.seriesRange.length){var u=this.barCtx.barOptions.dumbbellColors?this.barCtx.barOptions.dumbbellColors:l.globals.colors,d={strokeHeight:e==="x"?0:l.globals.markers.size[r],strokeWidth:e==="x"?l.globals.markers.size[r]:0,strokeDashArray:0,strokeLineCap:"round",strokeColor:Array.isArray(u[r])?u[r][0]:u[r]};h(l.globals.seriesRangeStart[r][s],d),h(l.globals.seriesRangeEnd[r][s],xe(xe({},d),{},{strokeColor:Array.isArray(u[r])?u[r][1]:u[r]}))}return c}},{key:"drawGoalLine",value:function(e){var t=e.barXPosition,n=e.barYPosition,r=e.goalX,s=e.goalY,o=e.barWidth,a=e.barHeight,l=new oe(this.barCtx.ctx),c=l.group({className:"apexcharts-bar-goals-groups"});c.node.classList.add("apexcharts-element-hidden"),this.barCtx.w.globals.delayedElements.push({el:c.node}),c.attr("clip-path","url(#gridRectMarkerMask".concat(this.barCtx.w.globals.cuid,")"));var h=null;return this.barCtx.isHorizontal?Array.isArray(r)&&r.forEach(function(u){if(u.x>=-1&&u.x<=l.w.globals.gridWidth+1){var d=u.attrs.strokeHeight!==void 0?u.attrs.strokeHeight:a/2,f=n+d+a/2;h=l.drawLine(u.x,f-2*d,u.x,f,u.attrs.strokeColor?u.attrs.strokeColor:void 0,u.attrs.strokeDashArray,u.attrs.strokeWidth?u.attrs.strokeWidth:2,u.attrs.strokeLineCap),c.add(h)}}):Array.isArray(s)&&s.forEach(function(u){if(u.y>=-1&&u.y<=l.w.globals.gridHeight+1){var d=u.attrs.strokeWidth!==void 0?u.attrs.strokeWidth:o/2,f=t+d+o/2;h=l.drawLine(f-2*d,u.y,f,u.y,u.attrs.strokeColor?u.attrs.strokeColor:void 0,u.attrs.strokeDashArray,u.attrs.strokeHeight?u.attrs.strokeHeight:2,u.attrs.strokeLineCap),c.add(h)}}),c}},{key:"drawBarShadow",value:function(e){var t=e.prevPaths,n=e.currPaths,r=e.color,s=this.w,o=t.x,a=t.x1,l=t.barYPosition,c=n.x,h=n.x1,u=n.barYPosition,d=l+n.barHeight,f=new oe(this.barCtx.ctx),g=new H,m=f.move(a,d)+f.line(o,d)+f.line(c,u)+f.line(h,u)+f.line(a,d)+(s.config.plotOptions.bar.borderRadiusApplication==="around"||this.arrBorderRadius[realIndex][j]==="both"?" Z":" z");return f.drawPath({d:m,fill:g.shadeColor(.5,H.rgb2hex(r)),stroke:"none",strokeWidth:0,fillOpacity:1,classes:"apexcharts-bar-shadow apexcharts-decoration-element"})}},{key:"getZeroValueEncounters",value:function(e){var t,n=e.i,r=e.j,s=this.w,o=0,a=0;return(s.config.plotOptions.bar.horizontal?s.globals.series.map(function(l,c){return c}):((t=s.globals.columnSeries)===null||t===void 0?void 0:t.i.map(function(l){return l}))||[]).forEach(function(l){var c=s.globals.seriesPercent[l][r];c&&o++,l<n&&c===0&&a++}),{nonZeroColumns:o,zeroEncounters:a}}},{key:"getGroupIndex",value:function(e){var t=this.w,n=t.globals.seriesGroups.findIndex(function(o){return o.indexOf(t.globals.seriesNames[e])>-1}),r=this.barCtx.columnGroupIndices,s=r.indexOf(n);return s<0&&(r.push(n),s=r.length-1),{groupIndex:n,columnGroupIndex:s}}}]),i}(),So=function(){function i(e,t){Ee(this,i),this.ctx=e,this.w=e.w;var n=this.w;this.barOptions=n.config.plotOptions.bar,this.isHorizontal=this.barOptions.horizontal,this.strokeWidth=n.config.stroke.width,this.isNullValue=!1,this.isRangeBar=n.globals.seriesRange.length&&this.isHorizontal,this.isVerticalGroupedRangeBar=!n.globals.isBarHorizontal&&n.globals.seriesRange.length&&n.config.plotOptions.bar.rangeBarGroupRows,this.isFunnel=this.barOptions.isFunnel,this.xyRatios=t,this.xyRatios!==null&&(this.xRatio=t.xRatio,this.yRatio=t.yRatio,this.invertedXRatio=t.invertedXRatio,this.invertedYRatio=t.invertedYRatio,this.baseLineY=t.baseLineY,this.baseLineInvertedY=t.baseLineInvertedY),this.yaxisIndex=0,this.translationsIndex=0,this.seriesLen=0,this.pathArr=[];var r=new ci(this.ctx);this.lastActiveBarSerieIndex=r.getActiveConfigSeriesIndex("desc",["bar","column"]),this.columnGroupIndices=[];var s=r.getBarSeriesIndices(),o=new Bt(this.ctx);this.stackedSeriesTotals=o.getStackedSeriesTotals(this.w.config.series.map(function(a,l){return s.indexOf(l)===-1?l:-1}).filter(function(a){return a!==-1})),this.barHelpers=new yP(this)}return Oe(i,[{key:"draw",value:function(e,t){var n=this.w,r=new oe(this.ctx),s=new Bt(this.ctx,n);e=s.getLogSeries(e),this.series=e,this.yRatio=s.getLogYRatios(this.yRatio),this.barHelpers.initVariables(e);var o=r.group({class:"apexcharts-bar-series apexcharts-plot-series"});n.config.dataLabels.enabled&&this.totalItems>this.barOptions.dataLabels.maxItems&&console.warn("WARNING: DataLabels are enabled but there are too many to display. This may cause performance issue when rendering - ApexCharts");for(var a=0,l=0;a<e.length;a++,l++){var c,h,u,d,f=void 0,g=void 0,m=[],b=[],y=n.globals.comboCharts?t[a]:a,w=this.barHelpers.getGroupIndex(y).columnGroupIndex,C=r.group({class:"apexcharts-series",rel:a+1,seriesName:H.escapeString(n.globals.seriesNames[y]),"data:realIndex":y});this.ctx.series.addCollapsedClassToSeries(C,y),e[a].length>0&&(this.visibleI=this.visibleI+1);var M=0,S=0;this.yRatio.length>1&&(this.yaxisIndex=n.globals.seriesYAxisReverseMap[y],this.translationsIndex=y);var O=this.translationsIndex;this.isReversed=n.config.yaxis[this.yaxisIndex]&&n.config.yaxis[this.yaxisIndex].reversed;var T=this.barHelpers.initialPositions(y);g=T.y,M=T.barHeight,h=T.yDivision,d=T.zeroW,f=T.x,S=T.barWidth,c=T.xDivision,u=T.zeroH,this.isHorizontal||b.push(f+S/2);var I=r.group({class:"apexcharts-datalabels","data:realIndex":y});n.globals.delayedElements.push({el:I.node}),I.node.classList.add("apexcharts-element-hidden");var R=r.group({class:"apexcharts-bar-goals-markers"}),z=r.group({class:"apexcharts-bar-shadows"});n.globals.delayedElements.push({el:z.node}),z.node.classList.add("apexcharts-element-hidden");for(var D=0;D<e[a].length;D++){var B=this.barHelpers.getStrokeWidth(a,D,y),K=null,J={indexes:{i:a,j:D,realIndex:y,translationsIndex:O,bc:l},x:f,y:g,strokeWidth:B,elSeries:C};this.isHorizontal?(K=this.drawBarPaths(xe(xe({},J),{},{barHeight:M,zeroW:d,yDivision:h})),S=this.series[a][D]/this.invertedYRatio):(K=this.drawColumnPaths(xe(xe({},J),{},{xDivision:c,barWidth:S,zeroH:u})),M=this.series[a][D]/this.yRatio[O]);var se=this.barHelpers.getPathFillColor(e,a,D,y);if(this.isFunnel&&this.barOptions.isFunnel3d&&this.pathArr.length&&D>0){var ne,ie=this.barHelpers.drawBarShadow({color:typeof se.color=="string"&&((ne=se.color)===null||ne===void 0?void 0:ne.indexOf("url"))===-1?se.color:H.hexToRgba(n.globals.colors[a]),prevPaths:this.pathArr[this.pathArr.length-1],currPaths:K});z.add(ie),n.config.chart.dropShadow.enabled&&new un(this.ctx).dropShadow(ie,n.config.chart.dropShadow,y)}this.pathArr.push(K);var ae=this.barHelpers.drawGoalLine({barXPosition:K.barXPosition,barYPosition:K.barYPosition,goalX:K.goalX,goalY:K.goalY,barHeight:M,barWidth:S});ae&&R.add(ae),g=K.y,f=K.x,D>0&&b.push(f+S/2),m.push(g),this.renderSeries(xe(xe({realIndex:y,pathFill:se.color},se.useRangeColor?{lineFill:se.color}:{}),{},{j:D,i:a,columnGroupIndex:w,pathFrom:K.pathFrom,pathTo:K.pathTo,strokeWidth:B,elSeries:C,x:f,y:g,series:e,barHeight:Math.abs(K.barHeight?K.barHeight:M),barWidth:Math.abs(K.barWidth?K.barWidth:S),elDataLabelsWrap:I,elGoalsMarkers:R,elBarShadows:z,visibleSeries:this.visibleI,type:"bar"}))}n.globals.seriesXvalues[y]=b,n.globals.seriesYvalues[y]=m,o.add(C)}return o}},{key:"renderSeries",value:function(e){var t=e.realIndex,n=e.pathFill,r=e.lineFill,s=e.j,o=e.i,a=e.columnGroupIndex,l=e.pathFrom,c=e.pathTo,h=e.strokeWidth,u=e.elSeries,d=e.x,f=e.y,g=e.y1,m=e.y2,b=e.series,y=e.barHeight,w=e.barWidth,C=e.barXPosition,M=e.barYPosition,S=e.elDataLabelsWrap,O=e.elGoalsMarkers,T=e.elBarShadows,I=e.visibleSeries,R=e.type,z=e.classes,D=this.w,B=new oe(this.ctx);if(!r){var K=typeof D.globals.stroke.colors[t]=="function"?function(ae){var Me,Re=D.config.stroke.colors;return Array.isArray(Re)&&Re.length>0&&((Me=Re[ae])||(Me=""),typeof Me=="function")?Me({value:D.globals.series[ae][s],dataPointIndex:s,w:D}):Me}(t):D.globals.stroke.colors[t];r=this.barOptions.distributed?D.globals.stroke.colors[s]:K}D.config.series[o].data[s]&&D.config.series[o].data[s].strokeColor&&(r=D.config.series[o].data[s].strokeColor),this.isNullValue&&(n="none");var J=s/D.config.chart.animations.animateGradually.delay*(D.config.chart.animations.speed/D.globals.dataPoints)/2.4,se=B.renderPaths({i:o,j:s,realIndex:t,pathFrom:l,pathTo:c,stroke:r,strokeWidth:h,strokeLineCap:D.config.stroke.lineCap,fill:n,animationDelay:J,initialSpeed:D.config.chart.animations.speed,dataChangeSpeed:D.config.chart.animations.dynamicAnimation.speed,className:"apexcharts-".concat(R,"-area ").concat(z),chartType:R});se.attr("clip-path","url(#gridRectBarMask".concat(D.globals.cuid,")"));var ne=D.config.forecastDataPoints;ne.count>0&&s>=D.globals.dataPoints-ne.count&&(se.node.setAttribute("stroke-dasharray",ne.dashArray),se.node.setAttribute("stroke-width",ne.strokeWidth),se.node.setAttribute("fill-opacity",ne.fillOpacity)),g!==void 0&&m!==void 0&&(se.attr("data-range-y1",g),se.attr("data-range-y2",m)),new un(this.ctx).setSelectionFilter(se,t,s),u.add(se);var ie=new bP(this).handleBarDataLabels({x:d,y:f,y1:g,y2:m,i:o,j:s,series:b,realIndex:t,columnGroupIndex:a,barHeight:y,barWidth:w,barXPosition:C,barYPosition:M,renderedPath:se,visibleSeries:I});return ie.dataLabels!==null&&S.add(ie.dataLabels),ie.totalDataLabels&&S.add(ie.totalDataLabels),u.add(S),O&&u.add(O),T&&u.add(T),u}},{key:"drawBarPaths",value:function(e){var t,n=e.indexes,r=e.barHeight,s=e.strokeWidth,o=e.zeroW,a=e.x,l=e.y,c=e.yDivision,h=e.elSeries,u=this.w,d=n.i,f=n.j;if(u.globals.isXNumeric)t=(l=(u.globals.seriesX[d][f]-u.globals.minX)/this.invertedXRatio-r)+r*this.visibleI;else if(u.config.plotOptions.bar.hideZeroBarsWhenGrouped){var g=this.barHelpers.getZeroValueEncounters({i:d,j:f}),m=g.nonZeroColumns,b=g.zeroEncounters;m>0&&(r=this.seriesLen*r/m),t=l+r*this.visibleI,t-=r*b}else t=l+r*this.visibleI;this.isFunnel&&(o-=(this.barHelpers.getXForValue(this.series[d][f],o)-o)/2),a=this.barHelpers.getXForValue(this.series[d][f],o);var y=this.barHelpers.getBarpaths({barYPosition:t,barHeight:r,x1:o,x2:a,strokeWidth:s,isReversed:this.isReversed,series:this.series,realIndex:n.realIndex,i:d,j:f,w:u});return u.globals.isXNumeric||(l+=c),this.barHelpers.barBackground({j:f,i:d,y1:t-r*this.visibleI,y2:r*this.seriesLen,elSeries:h}),{pathTo:y.pathTo,pathFrom:y.pathFrom,x1:o,x:a,y:l,goalX:this.barHelpers.getGoalValues("x",o,null,d,f),barYPosition:t,barHeight:r}}},{key:"drawColumnPaths",value:function(e){var t,n=e.indexes,r=e.x,s=e.y,o=e.xDivision,a=e.barWidth,l=e.zeroH,c=e.strokeWidth,h=e.elSeries,u=this.w,d=n.realIndex,f=n.translationsIndex,g=n.i,m=n.j,b=n.bc;if(u.globals.isXNumeric){var y=this.getBarXForNumericXAxis({x:r,j:m,realIndex:d,barWidth:a});r=y.x,t=y.barXPosition}else if(u.config.plotOptions.bar.hideZeroBarsWhenGrouped){var w=this.barHelpers.getZeroValueEncounters({i:g,j:m}),C=w.nonZeroColumns,M=w.zeroEncounters;C>0&&(a=this.seriesLen*a/C),t=r+a*this.visibleI,t-=a*M}else t=r+a*this.visibleI;s=this.barHelpers.getYForValue(this.series[g][m],l,f);var S=this.barHelpers.getColumnPaths({barXPosition:t,barWidth:a,y1:l,y2:s,strokeWidth:c,isReversed:this.isReversed,series:this.series,realIndex:d,i:g,j:m,w:u});return u.globals.isXNumeric||(r+=o),this.barHelpers.barBackground({bc:b,j:m,i:g,x1:t-c/2-a*this.visibleI,x2:a*this.seriesLen+c/2,elSeries:h}),{pathTo:S.pathTo,pathFrom:S.pathFrom,x:r,y:s,goalY:this.barHelpers.getGoalValues("y",null,l,g,m,f),barXPosition:t,barWidth:a}}},{key:"getBarXForNumericXAxis",value:function(e){var t=e.x,n=e.barWidth,r=e.realIndex,s=e.j,o=this.w,a=r;return o.globals.seriesX[r].length||(a=o.globals.maxValsInArrayIndex),H.isNumber(o.globals.seriesX[a][s])&&(t=(o.globals.seriesX[a][s]-o.globals.minX)/this.xRatio-n*this.seriesLen/2),{barXPosition:t+n*this.visibleI,x:t}}},{key:"getPreviousPath",value:function(e,t){for(var n,r=this.w,s=0;s<r.globals.previousPaths.length;s++){var o=r.globals.previousPaths[s];o.paths&&o.paths.length>0&&parseInt(o.realIndex,10)===parseInt(e,10)&&r.globals.previousPaths[s].paths[t]!==void 0&&(n=r.globals.previousPaths[s].paths[t].d)}return n}}]),i}(),x0=function(i){Da(t,So);var e=Ra(t);function t(){return Ee(this,t),e.apply(this,arguments)}return Oe(t,[{key:"draw",value:function(n,r){var s=this,o=this.w;this.graphics=new oe(this.ctx),this.bar=new So(this.ctx,this.xyRatios);var a=new Bt(this.ctx,o);n=a.getLogSeries(n),this.yRatio=a.getLogYRatios(this.yRatio),this.barHelpers.initVariables(n),o.config.chart.stackType==="100%"&&(n=o.globals.comboCharts?r.map(function(g){return o.globals.seriesPercent[g]}):o.globals.seriesPercent.slice()),this.series=n,this.barHelpers.initializeStackedPrevVars(this);for(var l=this.graphics.group({class:"apexcharts-bar-series apexcharts-plot-series"}),c=0,h=0,u=function(g,m){var b=void 0,y=void 0,w=void 0,C=void 0,M=o.globals.comboCharts?r[g]:g,S=s.barHelpers.getGroupIndex(M),O=S.groupIndex,T=S.columnGroupIndex;s.groupCtx=s[o.globals.seriesGroups[O]];var I=[],R=[],z=0;s.yRatio.length>1&&(s.yaxisIndex=o.globals.seriesYAxisReverseMap[M][0],z=M),s.isReversed=o.config.yaxis[s.yaxisIndex]&&o.config.yaxis[s.yaxisIndex].reversed;var D=s.graphics.group({class:"apexcharts-series",seriesName:H.escapeString(o.globals.seriesNames[M]),rel:g+1,"data:realIndex":M});s.ctx.series.addCollapsedClassToSeries(D,M);var B=s.graphics.group({class:"apexcharts-datalabels","data:realIndex":M}),K=s.graphics.group({class:"apexcharts-bar-goals-markers"}),J=0,se=0,ne=s.initialPositions(c,h,b,y,w,C,z);h=ne.y,J=ne.barHeight,y=ne.yDivision,C=ne.zeroW,c=ne.x,se=ne.barWidth,b=ne.xDivision,w=ne.zeroH,o.globals.barHeight=J,o.globals.barWidth=se,s.barHelpers.initializeStackedXYVars(s),s.groupCtx.prevY.length===1&&s.groupCtx.prevY[0].every(function(Mt){return isNaN(Mt)})&&(s.groupCtx.prevY[0]=s.groupCtx.prevY[0].map(function(){return w}),s.groupCtx.prevYF[0]=s.groupCtx.prevYF[0].map(function(){return 0}));for(var ie=0;ie<o.globals.dataPoints;ie++){var ae=s.barHelpers.getStrokeWidth(g,ie,M),Me={indexes:{i:g,j:ie,realIndex:M,translationsIndex:z,bc:m},strokeWidth:ae,x:c,y:h,elSeries:D,columnGroupIndex:T,seriesGroup:o.globals.seriesGroups[O]},Re=null;s.isHorizontal?(Re=s.drawStackedBarPaths(xe(xe({},Me),{},{zeroW:C,barHeight:J,yDivision:y})),se=s.series[g][ie]/s.invertedYRatio):(Re=s.drawStackedColumnPaths(xe(xe({},Me),{},{xDivision:b,barWidth:se,zeroH:w})),J=s.series[g][ie]/s.yRatio[z]);var _e=s.barHelpers.drawGoalLine({barXPosition:Re.barXPosition,barYPosition:Re.barYPosition,goalX:Re.goalX,goalY:Re.goalY,barHeight:J,barWidth:se});_e&&K.add(_e),h=Re.y,c=Re.x,I.push(c),R.push(h);var Je=s.barHelpers.getPathFillColor(n,g,ie,M),rt="",Ge=o.globals.isBarHorizontal?"apexcharts-flip-x":"apexcharts-flip-y";(s.barHelpers.arrBorderRadius[M][ie]==="bottom"&&o.globals.series[M][ie]>0||s.barHelpers.arrBorderRadius[M][ie]==="top"&&o.globals.series[M][ie]<0)&&(rt=Ge),D=s.renderSeries(xe(xe({realIndex:M,pathFill:Je.color},Je.useRangeColor?{lineFill:Je.color}:{}),{},{j:ie,i:g,columnGroupIndex:T,pathFrom:Re.pathFrom,pathTo:Re.pathTo,strokeWidth:ae,elSeries:D,x:c,y:h,series:n,barHeight:J,barWidth:se,elDataLabelsWrap:B,elGoalsMarkers:K,type:"bar",visibleSeries:T,classes:rt}))}o.globals.seriesXvalues[M]=I,o.globals.seriesYvalues[M]=R,s.groupCtx.prevY.push(s.groupCtx.yArrj),s.groupCtx.prevYF.push(s.groupCtx.yArrjF),s.groupCtx.prevYVal.push(s.groupCtx.yArrjVal),s.groupCtx.prevX.push(s.groupCtx.xArrj),s.groupCtx.prevXF.push(s.groupCtx.xArrjF),s.groupCtx.prevXVal.push(s.groupCtx.xArrjVal),l.add(D)},d=0,f=0;d<n.length;d++,f++)u(d,f);return l}},{key:"initialPositions",value:function(n,r,s,o,a,l,c){var h,u,d=this.w;if(this.isHorizontal){o=d.globals.gridHeight/d.globals.dataPoints;var f=d.config.plotOptions.bar.barHeight;h=String(f).indexOf("%")===-1?parseInt(f,10):o*parseInt(f,10)/100,l=d.globals.padHorizontal+(this.isReversed?d.globals.gridWidth-this.baseLineInvertedY:this.baseLineInvertedY),r=(o-h)/2}else{u=s=d.globals.gridWidth/d.globals.dataPoints;var g=d.config.plotOptions.bar.columnWidth;d.globals.isXNumeric&&d.globals.dataPoints>1?u=(s=d.globals.minXDiff/this.xRatio)*parseInt(this.barOptions.columnWidth,10)/100:String(g).indexOf("%")===-1?u=parseInt(g,10):u*=parseInt(g,10)/100,a=this.isReversed?this.baseLineY[c]:d.globals.gridHeight-this.baseLineY[c],n=d.globals.padHorizontal+(s-u)/2}var m=d.globals.barGroups.length||1;return{x:n,y:r,yDivision:o,xDivision:s,barHeight:h/m,barWidth:u/m,zeroH:a,zeroW:l}}},{key:"drawStackedBarPaths",value:function(n){for(var r,s=n.indexes,o=n.barHeight,a=n.strokeWidth,l=n.zeroW,c=n.x,h=n.y,u=n.columnGroupIndex,d=n.seriesGroup,f=n.yDivision,g=n.elSeries,m=this.w,b=h+u*o,y=s.i,w=s.j,C=s.realIndex,M=s.translationsIndex,S=0,O=0;O<this.groupCtx.prevXF.length;O++)S+=this.groupCtx.prevXF[O][w];var T=y;if(m.config.series[C].name&&(T=d.indexOf(m.config.series[C].name)),T>0){var I=l;this.groupCtx.prevXVal[T-1][w]<0?I=this.series[y][w]>=0?this.groupCtx.prevX[T-1][w]+S-2*(this.isReversed?S:0):this.groupCtx.prevX[T-1][w]:this.groupCtx.prevXVal[T-1][w]>=0&&(I=this.series[y][w]>=0?this.groupCtx.prevX[T-1][w]:this.groupCtx.prevX[T-1][w]-S+2*(this.isReversed?S:0)),r=I}else r=l;c=this.series[y][w]===null?r:r+this.series[y][w]/this.invertedYRatio-2*(this.isReversed?this.series[y][w]/this.invertedYRatio:0);var R=this.barHelpers.getBarpaths({barYPosition:b,barHeight:o,x1:r,x2:c,strokeWidth:a,isReversed:this.isReversed,series:this.series,realIndex:s.realIndex,seriesGroup:d,i:y,j:w,w:m});return this.barHelpers.barBackground({j:w,i:y,y1:b,y2:o,elSeries:g}),h+=f,{pathTo:R.pathTo,pathFrom:R.pathFrom,goalX:this.barHelpers.getGoalValues("x",l,null,y,w,M),barXPosition:r,barYPosition:b,x:c,y:h}}},{key:"drawStackedColumnPaths",value:function(n){var r=n.indexes,s=n.x,o=n.y,a=n.xDivision,l=n.barWidth,c=n.zeroH,h=n.columnGroupIndex,u=n.seriesGroup,d=n.elSeries,f=this.w,g=r.i,m=r.j,b=r.bc,y=r.realIndex,w=r.translationsIndex;if(f.globals.isXNumeric){var C=f.globals.seriesX[y][m];C||(C=0),s=(C-f.globals.minX)/this.xRatio-l/2*f.globals.barGroups.length}for(var M,S=s+h*l,O=0,T=0;T<this.groupCtx.prevYF.length;T++)O+=isNaN(this.groupCtx.prevYF[T][m])?0:this.groupCtx.prevYF[T][m];var I=g;if(u&&(I=u.indexOf(f.globals.seriesNames[y])),I>0&&!f.globals.isXNumeric||I>0&&f.globals.isXNumeric&&f.globals.seriesX[y-1][m]===f.globals.seriesX[y][m]){var R,z,D,B=Math.min(this.yRatio.length+1,y+1);if(this.groupCtx.prevY[I-1]!==void 0&&this.groupCtx.prevY[I-1].length)for(var K=1;K<B;K++){var J;if(!isNaN((J=this.groupCtx.prevY[I-K])===null||J===void 0?void 0:J[m])){D=this.groupCtx.prevY[I-K][m];break}}for(var se=1;se<B;se++){var ne,ie;if(((ne=this.groupCtx.prevYVal[I-se])===null||ne===void 0?void 0:ne[m])<0){z=this.series[g][m]>=0?D-O+2*(this.isReversed?O:0):D;break}if(((ie=this.groupCtx.prevYVal[I-se])===null||ie===void 0?void 0:ie[m])>=0){z=this.series[g][m]>=0?D:D+O-2*(this.isReversed?O:0);break}}z===void 0&&(z=f.globals.gridHeight),M=(R=this.groupCtx.prevYF[0])!==null&&R!==void 0&&R.every(function(Me){return Me===0})&&this.groupCtx.prevYF.slice(1,I).every(function(Me){return Me.every(function(Re){return isNaN(Re)})})?c:z}else M=c;o=this.series[g][m]?M-this.series[g][m]/this.yRatio[w]+2*(this.isReversed?this.series[g][m]/this.yRatio[w]:0):M;var ae=this.barHelpers.getColumnPaths({barXPosition:S,barWidth:l,y1:M,y2:o,yRatio:this.yRatio[w],strokeWidth:this.strokeWidth,isReversed:this.isReversed,series:this.series,seriesGroup:u,realIndex:r.realIndex,i:g,j:m,w:f});return this.barHelpers.barBackground({bc:b,j:m,i:g,x1:S,x2:l,elSeries:d}),{pathTo:ae.pathTo,pathFrom:ae.pathFrom,goalY:this.barHelpers.getGoalValues("y",null,c,g,m),barXPosition:S,x:f.globals.isXNumeric?s:s+a,y:o}}}]),t}(),cp=function(i){Da(t,So);var e=Ra(t);function t(){return Ee(this,t),e.apply(this,arguments)}return Oe(t,[{key:"draw",value:function(n,r,s){var o=this,a=this.w,l=new oe(this.ctx),c=a.globals.comboCharts?r:a.config.chart.type,h=new ki(this.ctx);this.candlestickOptions=this.w.config.plotOptions.candlestick,this.boxOptions=this.w.config.plotOptions.boxPlot,this.isHorizontal=a.config.plotOptions.bar.horizontal;var u=new Bt(this.ctx,a);n=u.getLogSeries(n),this.series=n,this.yRatio=u.getLogYRatios(this.yRatio),this.barHelpers.initVariables(n);for(var d=l.group({class:"apexcharts-".concat(c,"-series apexcharts-plot-series")}),f=function(m){o.isBoxPlot=a.config.chart.type==="boxPlot"||a.config.series[m].type==="boxPlot";var b,y,w,C,M=void 0,S=void 0,O=[],T=[],I=a.globals.comboCharts?s[m]:m,R=o.barHelpers.getGroupIndex(I).columnGroupIndex,z=l.group({class:"apexcharts-series",seriesName:H.escapeString(a.globals.seriesNames[I]),rel:m+1,"data:realIndex":I});o.ctx.series.addCollapsedClassToSeries(z,I),n[m].length>0&&(o.visibleI=o.visibleI+1);var D,B,K=0;o.yRatio.length>1&&(o.yaxisIndex=a.globals.seriesYAxisReverseMap[I][0],K=I);var J=o.barHelpers.initialPositions(I);S=J.y,D=J.barHeight,y=J.yDivision,C=J.zeroW,M=J.x,B=J.barWidth,b=J.xDivision,w=J.zeroH,T.push(M+B/2);for(var se=l.group({class:"apexcharts-datalabels","data:realIndex":I}),ne=l.group({class:"apexcharts-bar-goals-markers"}),ie=function(Me){var Re=o.barHelpers.getStrokeWidth(m,Me,I),_e=null,Je={indexes:{i:m,j:Me,realIndex:I,translationsIndex:K},x:M,y:S,strokeWidth:Re,elSeries:z};_e=o.isHorizontal?o.drawHorizontalBoxPaths(xe(xe({},Je),{},{yDivision:y,barHeight:D,zeroW:C})):o.drawVerticalBoxPaths(xe(xe({},Je),{},{xDivision:b,barWidth:B,zeroH:w})),S=_e.y,M=_e.x;var rt=o.barHelpers.drawGoalLine({barXPosition:_e.barXPosition,barYPosition:_e.barYPosition,goalX:_e.goalX,goalY:_e.goalY,barHeight:D,barWidth:B});rt&&ne.add(rt),Me>0&&T.push(M+B/2),O.push(S),_e.pathTo.forEach(function(Ge,Mt){var Ue=!o.isBoxPlot&&o.candlestickOptions.wick.useFillColor?_e.color[Mt]:a.globals.stroke.colors[m],$e=h.fillPath({seriesNumber:I,dataPointIndex:Me,color:_e.color[Mt],value:n[m][Me]});o.renderSeries({realIndex:I,pathFill:$e,lineFill:Ue,j:Me,i:m,pathFrom:_e.pathFrom,pathTo:Ge,strokeWidth:Re,elSeries:z,x:M,y:S,series:n,columnGroupIndex:R,barHeight:D,barWidth:B,elDataLabelsWrap:se,elGoalsMarkers:ne,visibleSeries:o.visibleI,type:a.config.chart.type})})},ae=0;ae<a.globals.dataPoints;ae++)ie(ae);a.globals.seriesXvalues[I]=T,a.globals.seriesYvalues[I]=O,d.add(z)},g=0;g<n.length;g++)f(g);return d}},{key:"drawVerticalBoxPaths",value:function(n){var r=n.indexes,s=n.x;n.y;var o=n.xDivision,a=n.barWidth,l=n.zeroH,c=n.strokeWidth,h=this.w,u=new oe(this.ctx),d=r.i,f=r.j,g=h.config.plotOptions.candlestick.colors,m=this.boxOptions.colors,b=r.realIndex,y=function(se){return Array.isArray(se)?se[b]:se},w=y(g.upward),C=y(g.downward),M=this.yRatio[r.translationsIndex],S=this.getOHLCValue(b,f),O=l,T=l,I=S.o<S.c?[w]:[C];this.isBoxPlot&&(I=[y(m.lower),y(m.upper)]);var R=Math.min(S.o,S.c),z=Math.max(S.o,S.c),D=S.m;h.globals.isXNumeric&&(s=(h.globals.seriesX[b][f]-h.globals.minX)/this.xRatio-a/2);var B=s+a*this.visibleI;this.series[d][f]===void 0||this.series[d][f]===null?(R=l,z=l):(R=l-R/M,z=l-z/M,O=l-S.h/M,T=l-S.l/M,D=l-S.m/M);var K=u.move(B,l),J=u.move(B+a/2,R);return h.globals.previousPaths.length>0&&(J=this.getPreviousPath(b,f,!0)),K=this.isBoxPlot?[u.move(B,R)+u.line(B+a/2,R)+u.line(B+a/2,O)+u.line(B+a/4,O)+u.line(B+a-a/4,O)+u.line(B+a/2,O)+u.line(B+a/2,R)+u.line(B+a,R)+u.line(B+a,D)+u.line(B,D)+u.line(B,R+c/2),u.move(B,D)+u.line(B+a,D)+u.line(B+a,z)+u.line(B+a/2,z)+u.line(B+a/2,T)+u.line(B+a-a/4,T)+u.line(B+a/4,T)+u.line(B+a/2,T)+u.line(B+a/2,z)+u.line(B,z)+u.line(B,D)+"z"]:[u.move(B,z)+u.line(B+a/2,z)+u.line(B+a/2,O)+u.line(B+a/2,z)+u.line(B+a,z)+u.line(B+a,R)+u.line(B+a/2,R)+u.line(B+a/2,T)+u.line(B+a/2,R)+u.line(B,R)+u.line(B,z-c/2)],J+=u.move(B,R),h.globals.isXNumeric||(s+=o),{pathTo:K,pathFrom:J,x:s,y:z,goalY:this.barHelpers.getGoalValues("y",null,l,d,f,r.translationsIndex),barXPosition:B,color:I}}},{key:"drawHorizontalBoxPaths",value:function(n){var r=n.indexes;n.x;var s=n.y,o=n.yDivision,a=n.barHeight,l=n.zeroW,c=n.strokeWidth,h=this.w,u=new oe(this.ctx),d=r.i,f=r.j,g=this.boxOptions.colors.lower;this.isBoxPlot&&(g=[this.boxOptions.colors.lower,this.boxOptions.colors.upper]);var m=this.invertedYRatio,b=r.realIndex,y=this.getOHLCValue(b,f),w=l,C=l,M=Math.min(y.o,y.c),S=Math.max(y.o,y.c),O=y.m;h.globals.isXNumeric&&(s=(h.globals.seriesX[b][f]-h.globals.minX)/this.invertedXRatio-a/2);var T=s+a*this.visibleI;this.series[d][f]===void 0||this.series[d][f]===null?(M=l,S=l):(M=l+M/m,S=l+S/m,w=l+y.h/m,C=l+y.l/m,O=l+y.m/m);var I=u.move(l,T),R=u.move(M,T+a/2);return h.globals.previousPaths.length>0&&(R=this.getPreviousPath(b,f,!0)),I=[u.move(M,T)+u.line(M,T+a/2)+u.line(w,T+a/2)+u.line(w,T+a/2-a/4)+u.line(w,T+a/2+a/4)+u.line(w,T+a/2)+u.line(M,T+a/2)+u.line(M,T+a)+u.line(O,T+a)+u.line(O,T)+u.line(M+c/2,T),u.move(O,T)+u.line(O,T+a)+u.line(S,T+a)+u.line(S,T+a/2)+u.line(C,T+a/2)+u.line(C,T+a-a/4)+u.line(C,T+a/4)+u.line(C,T+a/2)+u.line(S,T+a/2)+u.line(S,T)+u.line(O,T)+"z"],R+=u.move(M,T),h.globals.isXNumeric||(s+=o),{pathTo:I,pathFrom:R,x:S,y:s,goalX:this.barHelpers.getGoalValues("x",l,null,d,f),barYPosition:T,color:g}}},{key:"getOHLCValue",value:function(n,r){var s=this.w,o=new Bt(this.ctx,s),a=o.getLogValAtSeriesIndex(s.globals.seriesCandleH[n][r],n),l=o.getLogValAtSeriesIndex(s.globals.seriesCandleO[n][r],n),c=o.getLogValAtSeriesIndex(s.globals.seriesCandleM[n][r],n),h=o.getLogValAtSeriesIndex(s.globals.seriesCandleC[n][r],n),u=o.getLogValAtSeriesIndex(s.globals.seriesCandleL[n][r],n);return{o:this.isBoxPlot?a:l,h:this.isBoxPlot?l:a,m:c,l:this.isBoxPlot?h:u,c:this.isBoxPlot?u:h}}}]),t}(),b0=function(){function i(e){Ee(this,i),this.ctx=e,this.w=e.w}return Oe(i,[{key:"checkColorRange",value:function(){var e=this.w,t=!1,n=e.config.plotOptions[e.config.chart.type];return n.colorScale.ranges.length>0&&n.colorScale.ranges.map(function(r,s){r.from<=0&&(t=!0)}),t}},{key:"getShadeColor",value:function(e,t,n,r){var s=this.w,o=1,a=s.config.plotOptions[e].shadeIntensity,l=this.determineColor(e,t,n);s.globals.hasNegs||r?o=s.config.plotOptions[e].reverseNegativeShade?l.percent<0?l.percent/100*(1.25*a):(1-l.percent/100)*(1.25*a):l.percent<=0?1-(1+l.percent/100)*a:(1-l.percent/100)*a:(o=1-l.percent/100,e==="treemap"&&(o=(1-l.percent/100)*(1.25*a)));var c=l.color,h=new H;if(s.config.plotOptions[e].enableShades)if(this.w.config.theme.mode==="dark"){var u=h.shadeColor(-1*o,l.color);c=H.hexToRgba(H.isColorHex(u)?u:H.rgb2hex(u),s.config.fill.opacity)}else{var d=h.shadeColor(o,l.color);c=H.hexToRgba(H.isColorHex(d)?d:H.rgb2hex(d),s.config.fill.opacity)}return{color:c,colorProps:l}}},{key:"determineColor",value:function(e,t,n){var r=this.w,s=r.globals.series[t][n],o=r.config.plotOptions[e],a=o.colorScale.inverse?n:t;o.distributed&&r.config.chart.type==="treemap"&&(a=n);var l=r.globals.colors[a],c=null,h=Math.min.apply(Math,Gt(r.globals.series[t])),u=Math.max.apply(Math,Gt(r.globals.series[t]));o.distributed||e!=="heatmap"||(h=r.globals.minY,u=r.globals.maxY),o.colorScale.min!==void 0&&(h=o.colorScale.min<r.globals.minY?o.colorScale.min:r.globals.minY,u=o.colorScale.max>r.globals.maxY?o.colorScale.max:r.globals.maxY);var d=Math.abs(u)+Math.abs(h),f=100*s/(d===0?d-1e-6:d);return o.colorScale.ranges.length>0&&o.colorScale.ranges.map(function(g,m){if(s>=g.from&&s<=g.to){l=g.color,c=g.foreColor?g.foreColor:null,h=g.from,u=g.to;var b=Math.abs(u)+Math.abs(h);f=100*s/(b===0?b-1e-6:b)}}),{color:l,foreColor:c,percent:f}}},{key:"calculateDataLabels",value:function(e){var t=e.text,n=e.x,r=e.y,s=e.i,o=e.j,a=e.colorProps,l=e.fontSize,c=this.w.config.dataLabels,h=new oe(this.ctx),u=new ko(this.ctx),d=null;if(c.enabled){d=h.group({class:"apexcharts-data-labels"});var f=c.offsetX,g=c.offsetY,m=n+f,b=r+parseFloat(c.style.fontSize)/3+g;u.plotDataLabelsText({x:m,y:b,text:t,i:s,j:o,color:a.foreColor,parent:d,fontSize:l,dataLabelsConfig:c})}return d}},{key:"addListeners",value:function(e){var t=new oe(this.ctx);e.node.addEventListener("mouseenter",t.pathMouseEnter.bind(this,e)),e.node.addEventListener("mouseleave",t.pathMouseLeave.bind(this,e)),e.node.addEventListener("mousedown",t.pathMouseDown.bind(this,e))}}]),i}(),vP=function(){function i(e,t){Ee(this,i),this.ctx=e,this.w=e.w,this.xRatio=t.xRatio,this.yRatio=t.yRatio,this.dynamicAnim=this.w.config.chart.animations.dynamicAnimation,this.helpers=new b0(e),this.rectRadius=this.w.config.plotOptions.heatmap.radius,this.strokeWidth=this.w.config.stroke.show?this.w.config.stroke.width:0}return Oe(i,[{key:"draw",value:function(e){var t=this.w,n=new oe(this.ctx),r=n.group({class:"apexcharts-heatmap"});r.attr("clip-path","url(#gridRectMask".concat(t.globals.cuid,")"));var s=t.globals.gridWidth/t.globals.dataPoints,o=t.globals.gridHeight/t.globals.series.length,a=0,l=!1;this.negRange=this.helpers.checkColorRange();var c=e.slice();t.config.yaxis[0].reversed&&(l=!0,c.reverse());for(var h=l?0:c.length-1;l?h<c.length:h>=0;l?h++:h--){var u=n.group({class:"apexcharts-series apexcharts-heatmap-series",seriesName:H.escapeString(t.globals.seriesNames[h]),rel:h+1,"data:realIndex":h});if(this.ctx.series.addCollapsedClassToSeries(u,h),t.config.chart.dropShadow.enabled){var d=t.config.chart.dropShadow;new un(this.ctx).dropShadow(u,d,h)}for(var f=0,g=t.config.plotOptions.heatmap.shadeIntensity,m=0,b=0;b<t.globals.dataPoints;b++)if(t.globals.seriesX.length&&!t.globals.allSeriesHasEqualX&&t.globals.minX+t.globals.minXDiff*b<t.globals.seriesX[h][m])f+=s;else{if(m>=c[h].length)break;var y=this.helpers.getShadeColor(t.config.chart.type,h,m,this.negRange),w=y.color,C=y.colorProps;t.config.fill.type==="image"&&(w=new ki(this.ctx).fillPath({seriesNumber:h,dataPointIndex:m,opacity:t.globals.hasNegs?C.percent<0?1-(1+C.percent/100):g+C.percent/100:C.percent/100,patternID:H.randomId(),width:t.config.fill.image.width?t.config.fill.image.width:s,height:t.config.fill.image.height?t.config.fill.image.height:o}));var M=this.rectRadius,S=n.drawRect(f,a,s,o,M);if(S.attr({cx:f,cy:a}),S.node.classList.add("apexcharts-heatmap-rect"),u.add(S),S.attr({fill:w,i:h,index:h,j:m,val:e[h][m],"stroke-width":this.strokeWidth,stroke:t.config.plotOptions.heatmap.useFillColorAsStroke?w:t.globals.stroke.colors[0],color:w}),this.helpers.addListeners(S),t.config.chart.animations.enabled&&!t.globals.dataChanged){var O=1;t.globals.resized||(O=t.config.chart.animations.speed),this.animateHeatMap(S,f,a,s,o,O)}if(t.globals.dataChanged){var T=1;if(this.dynamicAnim.enabled&&t.globals.shouldAnimate){T=this.dynamicAnim.speed;var I=t.globals.previousPaths[h]&&t.globals.previousPaths[h][m]&&t.globals.previousPaths[h][m].color;I||(I="rgba(255, 255, 255, 0)"),this.animateHeatColor(S,H.isColorHex(I)?I:H.rgb2hex(I),H.isColorHex(w)?w:H.rgb2hex(w),T)}}var R=(0,t.config.dataLabels.formatter)(t.globals.series[h][m],{value:t.globals.series[h][m],seriesIndex:h,dataPointIndex:m,w:t}),z=this.helpers.calculateDataLabels({text:R,x:f+s/2,y:a+o/2,i:h,j:m,colorProps:C,series:c});z!==null&&u.add(z),f+=s,m++}a+=o,r.add(u)}var D=t.globals.yAxisScale[0].result.slice();return t.config.yaxis[0].reversed?D.unshift(""):D.push(""),t.globals.yAxisScale[0].result=D,r}},{key:"animateHeatMap",value:function(e,t,n,r,s,o){var a=new fo(this.ctx);a.animateRect(e,{x:t+r/2,y:n+s/2,width:0,height:0},{x:t,y:n,width:r,height:s},o,function(){a.animationCompleted(e)})}},{key:"animateHeatColor",value:function(e,t,n,r){e.attr({fill:t}).animate(r).attr({fill:n})}}]),i}(),y0=function(){function i(e){Ee(this,i),this.ctx=e,this.w=e.w}return Oe(i,[{key:"drawYAxisTexts",value:function(e,t,n,r){var s=this.w,o=s.config.yaxis[0],a=s.globals.yLabelFormatters[0];return new oe(this.ctx).drawText({x:e+o.labels.offsetX,y:t+o.labels.offsetY,text:a(r,n),textAnchor:"middle",fontSize:o.labels.style.fontSize,fontFamily:o.labels.style.fontFamily,foreColor:Array.isArray(o.labels.style.colors)?o.labels.style.colors[n]:o.labels.style.colors})}}]),i}(),v0=function(){function i(e){Ee(this,i),this.ctx=e,this.w=e.w;var t=this.w;this.chartType=this.w.config.chart.type,this.initialAnim=this.w.config.chart.animations.enabled,this.dynamicAnim=this.initialAnim&&this.w.config.chart.animations.dynamicAnimation.enabled,this.animBeginArr=[0],this.animDur=0,this.donutDataLabels=this.w.config.plotOptions.pie.donut.labels,this.lineColorArr=t.globals.stroke.colors!==void 0?t.globals.stroke.colors:t.globals.colors,this.defaultSize=Math.min(t.globals.gridWidth,t.globals.gridHeight),this.centerY=this.defaultSize/2,this.centerX=t.globals.gridWidth/2,t.config.chart.type==="radialBar"?this.fullAngle=360:this.fullAngle=Math.abs(t.config.plotOptions.pie.endAngle-t.config.plotOptions.pie.startAngle),this.initialAngle=t.config.plotOptions.pie.startAngle%this.fullAngle,t.globals.radialSize=this.defaultSize/2.05-t.config.stroke.width-(t.config.chart.sparkline.enabled?0:t.config.chart.dropShadow.blur),this.donutSize=t.globals.radialSize*parseInt(t.config.plotOptions.pie.donut.size,10)/100;var n=t.config.plotOptions.pie.customScale,r=t.globals.gridWidth/2,s=t.globals.gridHeight/2;this.translateX=r-r*n,this.translateY=s-s*n,this.dataLabelsGroup=new oe(this.ctx).group({class:"apexcharts-datalabels-group",transform:"translate(".concat(this.translateX,", ").concat(this.translateY,") scale(").concat(n,")")}),this.maxY=0,this.sliceLabels=[],this.sliceSizes=[],this.prevSectorAngleArr=[]}return Oe(i,[{key:"draw",value:function(e){var t=this,n=this.w,r=new oe(this.ctx),s=r.group({class:"apexcharts-pie"});if(n.globals.noData)return s;for(var o=0,a=0;a<e.length;a++)o+=H.negToZero(e[a]);var l=[],c=r.group();o===0&&(o=1e-5),e.forEach(function(C){t.maxY=Math.max(t.maxY,C)}),n.config.yaxis[0].max&&(this.maxY=n.config.yaxis[0].max),n.config.grid.position==="back"&&this.chartType==="polarArea"&&this.drawPolarElements(s);for(var h=0;h<e.length;h++){var u=this.fullAngle*H.negToZero(e[h])/o;l.push(u),this.chartType==="polarArea"?(l[h]=this.fullAngle/e.length,this.sliceSizes.push(n.globals.radialSize*e[h]/this.maxY)):this.sliceSizes.push(n.globals.radialSize)}if(n.globals.dataChanged){for(var d,f=0,g=0;g<n.globals.previousPaths.length;g++)f+=H.negToZero(n.globals.previousPaths[g]);for(var m=0;m<n.globals.previousPaths.length;m++)d=this.fullAngle*H.negToZero(n.globals.previousPaths[m])/f,this.prevSectorAngleArr.push(d)}if(this.donutSize<0&&(this.donutSize=0),this.chartType==="donut"){var b=r.drawCircle(this.donutSize);b.attr({cx:this.centerX,cy:this.centerY,fill:n.config.plotOptions.pie.donut.background?n.config.plotOptions.pie.donut.background:"transparent"}),c.add(b)}var y=this.drawArcs(l,e);if(this.sliceLabels.forEach(function(C){y.add(C)}),c.attr({transform:"translate(".concat(this.translateX,", ").concat(this.translateY,") scale(").concat(n.config.plotOptions.pie.customScale,")")}),c.add(y),s.add(c),this.donutDataLabels.show){var w=this.renderInnerDataLabels(this.dataLabelsGroup,this.donutDataLabels,{hollowSize:this.donutSize,centerX:this.centerX,centerY:this.centerY,opacity:this.donutDataLabels.show});s.add(w)}return n.config.grid.position==="front"&&this.chartType==="polarArea"&&this.drawPolarElements(s),s}},{key:"drawArcs",value:function(e,t){var n=this.w,r=new un(this.ctx),s=new oe(this.ctx),o=new ki(this.ctx),a=s.group({class:"apexcharts-slices"}),l=this.initialAngle,c=this.initialAngle,h=this.initialAngle,u=this.initialAngle;this.strokeWidth=n.config.stroke.show?n.config.stroke.width:0;for(var d=0;d<e.length;d++){var f=s.group({class:"apexcharts-series apexcharts-pie-series",seriesName:H.escapeString(n.globals.seriesNames[d]),rel:d+1,"data:realIndex":d});a.add(f),c=u,h=(l=h)+e[d],u=c+this.prevSectorAngleArr[d];var g=h<l?this.fullAngle+h-l:h-l,m=o.fillPath({seriesNumber:d,size:this.sliceSizes[d],value:t[d]}),b=this.getChangedPath(c,u),y=s.drawPath({d:b,stroke:Array.isArray(this.lineColorArr)?this.lineColorArr[d]:this.lineColorArr,strokeWidth:0,fill:m,fillOpacity:n.config.fill.opacity,classes:"apexcharts-pie-area apexcharts-".concat(this.chartType.toLowerCase(),"-slice-").concat(d)});if(y.attr({index:0,j:d}),r.setSelectionFilter(y,0,d),n.config.chart.dropShadow.enabled){var w=n.config.chart.dropShadow;r.dropShadow(y,w,d)}this.addListeners(y,this.donutDataLabels),oe.setAttrs(y.node,{"data:angle":g,"data:startAngle":l,"data:strokeWidth":this.strokeWidth,"data:value":t[d]});var C={x:0,y:0};this.chartType==="pie"||this.chartType==="polarArea"?C=H.polarToCartesian(this.centerX,this.centerY,n.globals.radialSize/1.25+n.config.plotOptions.pie.dataLabels.offset,(l+g/2)%this.fullAngle):this.chartType==="donut"&&(C=H.polarToCartesian(this.centerX,this.centerY,(n.globals.radialSize+this.donutSize)/2+n.config.plotOptions.pie.dataLabels.offset,(l+g/2)%this.fullAngle)),f.add(y);var M=0;if(!this.initialAnim||n.globals.resized||n.globals.dataChanged?this.animBeginArr.push(0):((M=g/this.fullAngle*n.config.chart.animations.speed)===0&&(M=1),this.animDur=M+this.animDur,this.animBeginArr.push(this.animDur)),this.dynamicAnim&&n.globals.dataChanged?this.animatePaths(y,{size:this.sliceSizes[d],endAngle:h,startAngle:l,prevStartAngle:c,prevEndAngle:u,animateStartingPos:!0,i:d,animBeginArr:this.animBeginArr,shouldSetPrevPaths:!0,dur:n.config.chart.animations.dynamicAnimation.speed}):this.animatePaths(y,{size:this.sliceSizes[d],endAngle:h,startAngle:l,i:d,totalItems:e.length-1,animBeginArr:this.animBeginArr,dur:M}),n.config.plotOptions.pie.expandOnClick&&this.chartType!=="polarArea"&&y.node.addEventListener("mouseup",this.pieClicked.bind(this,d)),n.globals.selectedDataPoints[0]!==void 0&&n.globals.selectedDataPoints[0].indexOf(d)>-1&&this.pieClicked(d),n.config.dataLabels.enabled){var S=C.x,O=C.y,T=100*g/this.fullAngle+"%";if(g!==0&&n.config.plotOptions.pie.dataLabels.minAngleToShowLabel<e[d]){var I=n.config.dataLabels.formatter;I!==void 0&&(T=I(n.globals.seriesPercent[d][0],{seriesIndex:d,w:n}));var R=n.globals.dataLabels.style.colors[d],z=s.group({class:"apexcharts-datalabels"}),D=s.drawText({x:S,y:O,text:T,textAnchor:"middle",fontSize:n.config.dataLabels.style.fontSize,fontFamily:n.config.dataLabels.style.fontFamily,fontWeight:n.config.dataLabels.style.fontWeight,foreColor:R});if(z.add(D),n.config.dataLabels.dropShadow.enabled){var B=n.config.dataLabels.dropShadow;r.dropShadow(D,B)}D.node.classList.add("apexcharts-pie-label"),n.config.chart.animations.animate&&n.globals.resized===!1&&(D.node.classList.add("apexcharts-pie-label-delay"),D.node.style.animationDelay=n.config.chart.animations.speed/940+"s"),this.sliceLabels.push(z)}}}return a}},{key:"addListeners",value:function(e,t){var n=new oe(this.ctx);e.node.addEventListener("mouseenter",n.pathMouseEnter.bind(this,e)),e.node.addEventListener("mouseleave",n.pathMouseLeave.bind(this,e)),e.node.addEventListener("mouseleave",this.revertDataLabelsInner.bind(this,e.node,t)),e.node.addEventListener("mousedown",n.pathMouseDown.bind(this,e)),this.donutDataLabels.total.showAlways||(e.node.addEventListener("mouseenter",this.printDataLabelsInner.bind(this,e.node,t)),e.node.addEventListener("mousedown",this.printDataLabelsInner.bind(this,e.node,t)))}},{key:"animatePaths",value:function(e,t){var n=this.w,r=t.endAngle<t.startAngle?this.fullAngle+t.endAngle-t.startAngle:t.endAngle-t.startAngle,s=r,o=t.startAngle,a=t.startAngle;t.prevStartAngle!==void 0&&t.prevEndAngle!==void 0&&(o=t.prevEndAngle,s=t.prevEndAngle<t.prevStartAngle?this.fullAngle+t.prevEndAngle-t.prevStartAngle:t.prevEndAngle-t.prevStartAngle),t.i===n.config.series.length-1&&(r+a>this.fullAngle?t.endAngle=t.endAngle-(r+a):r+a<this.fullAngle&&(t.endAngle=t.endAngle+(this.fullAngle-(r+a)))),r===this.fullAngle&&(r=this.fullAngle-.01),this.animateArc(e,o,a,r,s,t)}},{key:"animateArc",value:function(e,t,n,r,s,o){var a,l=this,c=this.w,h=new fo(this.ctx),u=o.size;(isNaN(t)||isNaN(s))&&(t=n,s=r,o.dur=0);var d=r,f=n,g=t<n?this.fullAngle+t-n:t-n;c.globals.dataChanged&&o.shouldSetPrevPaths&&o.prevEndAngle&&(a=l.getPiePath({me:l,startAngle:o.prevStartAngle,angle:o.prevEndAngle<o.prevStartAngle?this.fullAngle+o.prevEndAngle-o.prevStartAngle:o.prevEndAngle-o.prevStartAngle,size:u}),e.attr({d:a})),o.dur!==0?e.animate(o.dur,o.animBeginArr[o.i]).after(function(){l.chartType!=="pie"&&l.chartType!=="donut"&&l.chartType!=="polarArea"||this.animate(c.config.chart.animations.dynamicAnimation.speed).attr({"stroke-width":l.strokeWidth}),o.i===c.config.series.length-1&&h.animationCompleted(e)}).during(function(m){d=g+(r-g)*m,o.animateStartingPos&&(d=s+(r-s)*m,f=t-s+(n-(t-s))*m),a=l.getPiePath({me:l,startAngle:f,angle:d,size:u}),e.node.setAttribute("data:pathOrig",a),e.attr({d:a})}):(a=l.getPiePath({me:l,startAngle:f,angle:r,size:u}),o.isTrack||(c.globals.animationEnded=!0),e.node.setAttribute("data:pathOrig",a),e.attr({d:a,"stroke-width":l.strokeWidth}))}},{key:"pieClicked",value:function(e){var t,n=this.w,r=this,s=r.sliceSizes[e]+(n.config.plotOptions.pie.expandOnClick?4:0),o=n.globals.dom.Paper.findOne(".apexcharts-".concat(r.chartType.toLowerCase(),"-slice-").concat(e));if(o.attr("data:pieClicked")!=="true"){var a=n.globals.dom.baseEl.getElementsByClassName("apexcharts-pie-area");Array.prototype.forEach.call(a,function(u){u.setAttribute("data:pieClicked","false");var d=u.getAttribute("data:pathOrig");d&&u.setAttribute("d",d)}),n.globals.capturedDataPointIndex=e,o.attr("data:pieClicked","true");var l=parseInt(o.attr("data:startAngle"),10),c=parseInt(o.attr("data:angle"),10);t=r.getPiePath({me:r,startAngle:l,angle:c,size:s}),c!==360&&o.plot(t)}else{o.attr({"data:pieClicked":"false"}),this.revertDataLabelsInner(o.node,this.donutDataLabels);var h=o.attr("data:pathOrig");o.attr({d:h})}}},{key:"getChangedPath",value:function(e,t){var n="";return this.dynamicAnim&&this.w.globals.dataChanged&&(n=this.getPiePath({me:this,startAngle:e,angle:t-e,size:this.size})),n}},{key:"getPiePath",value:function(e){var t,n=e.me,r=e.startAngle,s=e.angle,o=e.size,a=new oe(this.ctx),l=r,c=Math.PI*(l-90)/180,h=s+r;Math.ceil(h)>=this.fullAngle+this.w.config.plotOptions.pie.startAngle%this.fullAngle&&(h=this.fullAngle+this.w.config.plotOptions.pie.startAngle%this.fullAngle-.01),Math.ceil(h)>this.fullAngle&&(h-=this.fullAngle);var u=Math.PI*(h-90)/180,d=n.centerX+o*Math.cos(c),f=n.centerY+o*Math.sin(c),g=n.centerX+o*Math.cos(u),m=n.centerY+o*Math.sin(u),b=H.polarToCartesian(n.centerX,n.centerY,n.donutSize,h),y=H.polarToCartesian(n.centerX,n.centerY,n.donutSize,l),w=s>180?1:0,C=["M",d,f,"A",o,o,0,w,1,g,m];return t=n.chartType==="donut"?[].concat(C,["L",b.x,b.y,"A",n.donutSize,n.donutSize,0,w,0,y.x,y.y,"L",d,f,"z"]).join(" "):n.chartType==="pie"||n.chartType==="polarArea"?[].concat(C,["L",n.centerX,n.centerY,"L",d,f]).join(" "):[].concat(C).join(" "),a.roundPathCorners(t,2*this.strokeWidth)}},{key:"drawPolarElements",value:function(e){var t=this.w,n=new u0(this.ctx),r=new oe(this.ctx),s=new y0(this.ctx),o=r.group(),a=r.group(),l=n.niceScale(0,Math.ceil(this.maxY),0),c=l.result.reverse(),h=l.result.length;this.maxY=l.niceMax;for(var u=t.globals.radialSize,d=u/(h-1),f=0;f<h-1;f++){var g=r.drawCircle(u);if(g.attr({cx:this.centerX,cy:this.centerY,fill:"none","stroke-width":t.config.plotOptions.polarArea.rings.strokeWidth,stroke:t.config.plotOptions.polarArea.rings.strokeColor}),t.config.yaxis[0].show){var m=s.drawYAxisTexts(this.centerX,this.centerY-u+parseInt(t.config.yaxis[0].labels.style.fontSize,10)/2,f,c[f]);a.add(m)}o.add(g),u-=d}this.drawSpokes(e),e.add(o),e.add(a)}},{key:"renderInnerDataLabels",value:function(e,t,n){var r=this.w,s=new oe(this.ctx),o=t.total.show;e.node.innerHTML="",e.node.style.opacity=n.opacity;var a,l,c=n.centerX,h=this.donutDataLabels.total.label?n.centerY:n.centerY-n.centerY/6;a=t.name.color===void 0?r.globals.colors[0]:t.name.color;var u=t.name.fontSize,d=t.name.fontFamily,f=t.name.fontWeight;l=t.value.color===void 0?r.config.chart.foreColor:t.value.color;var g=t.value.formatter,m="",b="";if(o?(a=t.total.color,u=t.total.fontSize,d=t.total.fontFamily,f=t.total.fontWeight,b=this.donutDataLabels.total.label?t.total.label:"",m=t.total.formatter(r)):r.globals.series.length===1&&(m=g(r.globals.series[0],r),b=r.globals.seriesNames[0]),b&&(b=t.name.formatter(b,t.total.show,r)),t.name.show){var y=s.drawText({x:c,y:h+parseFloat(t.name.offsetY),text:b,textAnchor:"middle",foreColor:a,fontSize:u,fontWeight:f,fontFamily:d});y.node.classList.add("apexcharts-datalabel-label"),e.add(y)}if(t.value.show){var w=t.name.show?parseFloat(t.value.offsetY)+16:t.value.offsetY,C=s.drawText({x:c,y:h+w,text:m,textAnchor:"middle",foreColor:l,fontWeight:t.value.fontWeight,fontSize:t.value.fontSize,fontFamily:t.value.fontFamily});C.node.classList.add("apexcharts-datalabel-value"),e.add(C)}return e}},{key:"printInnerLabels",value:function(e,t,n,r){var s,o=this.w;r?s=e.name.color===void 0?o.globals.colors[parseInt(r.parentNode.getAttribute("rel"),10)-1]:e.name.color:o.globals.series.length>1&&e.total.show&&(s=e.total.color);var a=o.globals.dom.baseEl.querySelector(".apexcharts-datalabel-label"),l=o.globals.dom.baseEl.querySelector(".apexcharts-datalabel-value");n=(0,e.value.formatter)(n,o),r||typeof e.total.formatter!="function"||(n=e.total.formatter(o));var c=t===e.total.label;t=this.donutDataLabels.total.label?e.name.formatter(t,c,o):"",a!==null&&(a.textContent=t),l!==null&&(l.textContent=n),a!==null&&(a.style.fill=s)}},{key:"printDataLabelsInner",value:function(e,t){var n=this.w,r=e.getAttribute("data:value"),s=n.globals.seriesNames[parseInt(e.parentNode.getAttribute("rel"),10)-1];n.globals.series.length>1&&this.printInnerLabels(t,s,r,e);var o=n.globals.dom.baseEl.querySelector(".apexcharts-datalabels-group");o!==null&&(o.style.opacity=1)}},{key:"drawSpokes",value:function(e){var t=this,n=this.w,r=new oe(this.ctx),s=n.config.plotOptions.polarArea.spokes;if(s.strokeWidth!==0){for(var o=[],a=360/n.globals.series.length,l=0;l<n.globals.series.length;l++)o.push(H.polarToCartesian(this.centerX,this.centerY,n.globals.radialSize,n.config.plotOptions.pie.startAngle+a*l));o.forEach(function(c,h){var u=r.drawLine(c.x,c.y,t.centerX,t.centerY,Array.isArray(s.connectorColors)?s.connectorColors[h]:s.connectorColors);e.add(u)})}}},{key:"revertDataLabelsInner",value:function(){var e=this.w;if(this.donutDataLabels.show){var t=e.globals.dom.Paper.findOne(".apexcharts-datalabels-group"),n=this.renderInnerDataLabels(t,this.donutDataLabels,{hollowSize:this.donutSize,centerX:this.centerX,centerY:this.centerY,opacity:this.donutDataLabels.show});e.globals.dom.Paper.findOne(".apexcharts-radialbar, .apexcharts-pie").add(n)}}}]),i}(),wP=function(){function i(e){Ee(this,i),this.ctx=e,this.w=e.w,this.chartType=this.w.config.chart.type,this.initialAnim=this.w.config.chart.animations.enabled,this.dynamicAnim=this.initialAnim&&this.w.config.chart.animations.dynamicAnimation.enabled,this.animDur=0;var t=this.w;this.graphics=new oe(this.ctx),this.lineColorArr=t.globals.stroke.colors!==void 0?t.globals.stroke.colors:t.globals.colors,this.defaultSize=t.globals.svgHeight<t.globals.svgWidth?t.globals.gridHeight:t.globals.gridWidth,this.isLog=t.config.yaxis[0].logarithmic,this.logBase=t.config.yaxis[0].logBase,this.coreUtils=new Bt(this.ctx),this.maxValue=this.isLog?this.coreUtils.getLogVal(this.logBase,t.globals.maxY,0):t.globals.maxY,this.minValue=this.isLog?this.coreUtils.getLogVal(this.logBase,this.w.globals.minY,0):t.globals.minY,this.polygons=t.config.plotOptions.radar.polygons,this.strokeWidth=t.config.stroke.show?t.config.stroke.width:0,this.size=this.defaultSize/2.1-this.strokeWidth-t.config.chart.dropShadow.blur,t.config.xaxis.labels.show&&(this.size=this.size-t.globals.xAxisLabelsWidth/1.75),t.config.plotOptions.radar.size!==void 0&&(this.size=t.config.plotOptions.radar.size),this.dataRadiusOfPercent=[],this.dataRadius=[],this.angleArr=[],this.yaxisLabelsTextsPos=[]}return Oe(i,[{key:"draw",value:function(e){var t=this,n=this.w,r=new ki(this.ctx),s=[],o=new ko(this.ctx);e.length&&(this.dataPointsLen=e[n.globals.maxValsInArrayIndex].length),this.disAngle=2*Math.PI/this.dataPointsLen;var a=n.globals.gridWidth/2,l=n.globals.gridHeight/2,c=a+n.config.plotOptions.radar.offsetX,h=l+n.config.plotOptions.radar.offsetY,u=this.graphics.group({class:"apexcharts-radar-series apexcharts-plot-series",transform:"translate(".concat(c||0,", ").concat(h||0,")")}),d=[],f=null,g=null;if(this.yaxisLabels=this.graphics.group({class:"apexcharts-yaxis"}),e.forEach(function(b,y){var w=b.length===n.globals.dataPoints,C=t.graphics.group().attr({class:"apexcharts-series","data:longestSeries":w,seriesName:H.escapeString(n.globals.seriesNames[y]),rel:y+1,"data:realIndex":y});t.dataRadiusOfPercent[y]=[],t.dataRadius[y]=[],t.angleArr[y]=[],b.forEach(function(K,J){var se=Math.abs(t.maxValue-t.minValue);K-=t.minValue,t.isLog&&(K=t.coreUtils.getLogVal(t.logBase,K,0)),t.dataRadiusOfPercent[y][J]=K/se,t.dataRadius[y][J]=t.dataRadiusOfPercent[y][J]*t.size,t.angleArr[y][J]=J*t.disAngle}),d=t.getDataPointsPos(t.dataRadius[y],t.angleArr[y]);var M=t.createPaths(d,{x:0,y:0});f=t.graphics.group({class:"apexcharts-series-markers-wrap apexcharts-element-hidden"}),g=t.graphics.group({class:"apexcharts-datalabels","data:realIndex":y}),n.globals.delayedElements.push({el:f.node,index:y});var S={i:y,realIndex:y,animationDelay:y,initialSpeed:n.config.chart.animations.speed,dataChangeSpeed:n.config.chart.animations.dynamicAnimation.speed,className:"apexcharts-radar",shouldClipToGrid:!1,bindEventsOnPaths:!1,stroke:n.globals.stroke.colors[y],strokeLineCap:n.config.stroke.lineCap},O=null;n.globals.previousPaths.length>0&&(O=t.getPreviousPath(y));for(var T=0;T<M.linePathsTo.length;T++){var I=t.graphics.renderPaths(xe(xe({},S),{},{pathFrom:O===null?M.linePathsFrom[T]:O,pathTo:M.linePathsTo[T],strokeWidth:Array.isArray(t.strokeWidth)?t.strokeWidth[y]:t.strokeWidth,fill:"none",drawShadow:!1}));C.add(I);var R=r.fillPath({seriesNumber:y}),z=t.graphics.renderPaths(xe(xe({},S),{},{pathFrom:O===null?M.areaPathsFrom[T]:O,pathTo:M.areaPathsTo[T],strokeWidth:0,fill:R,drawShadow:!1}));if(n.config.chart.dropShadow.enabled){var D=new un(t.ctx),B=n.config.chart.dropShadow;D.dropShadow(z,Object.assign({},B,{noUserSpaceOnUse:!0}),y)}C.add(z)}b.forEach(function(K,J){var se=new wo(t.ctx).getMarkerConfig({cssClass:"apexcharts-marker",seriesIndex:y,dataPointIndex:J}),ne=t.graphics.drawMarker(d[J].x,d[J].y,se);ne.attr("rel",J),ne.attr("j",J),ne.attr("index",y),ne.node.setAttribute("default-marker-size",se.pSize);var ie=t.graphics.group({class:"apexcharts-series-markers"});ie&&ie.add(ne),f.add(ie),C.add(f);var ae=n.config.dataLabels;if(ae.enabled){var Me=ae.formatter(n.globals.series[y][J],{seriesIndex:y,dataPointIndex:J,w:n});o.plotDataLabelsText({x:d[J].x,y:d[J].y,text:Me,textAnchor:"middle",i:y,j:y,parent:g,offsetCorrection:!1,dataLabelsConfig:xe({},ae)})}C.add(g)}),s.push(C)}),this.drawPolygons({parent:u}),n.config.xaxis.labels.show){var m=this.drawXAxisTexts();u.add(m)}return s.forEach(function(b){u.add(b)}),u.add(this.yaxisLabels),u}},{key:"drawPolygons",value:function(e){for(var t=this,n=this.w,r=e.parent,s=new y0(this.ctx),o=n.globals.yAxisScale[0].result.reverse(),a=o.length,l=[],c=this.size/(a-1),h=0;h<a;h++)l[h]=c*h;l.reverse();var u=[],d=[];l.forEach(function(f,g){var m=H.getPolygonPos(f,t.dataPointsLen),b="";m.forEach(function(y,w){if(g===0){var C=t.graphics.drawLine(y.x,y.y,0,0,Array.isArray(t.polygons.connectorColors)?t.polygons.connectorColors[w]:t.polygons.connectorColors);d.push(C)}w===0&&t.yaxisLabelsTextsPos.push({x:y.x,y:y.y}),b+=y.x+","+y.y+" "}),u.push(b)}),u.forEach(function(f,g){var m=t.polygons.strokeColors,b=t.polygons.strokeWidth,y=t.graphics.drawPolygon(f,Array.isArray(m)?m[g]:m,Array.isArray(b)?b[g]:b,n.globals.radarPolygons.fill.colors[g]);r.add(y)}),d.forEach(function(f){r.add(f)}),n.config.yaxis[0].show&&this.yaxisLabelsTextsPos.forEach(function(f,g){var m=s.drawYAxisTexts(f.x,f.y,g,o[g]);t.yaxisLabels.add(m)})}},{key:"drawXAxisTexts",value:function(){var e=this,t=this.w,n=t.config.xaxis.labels,r=this.graphics.group({class:"apexcharts-xaxis"}),s=H.getPolygonPos(this.size,this.dataPointsLen);return t.globals.labels.forEach(function(o,a){var l=t.config.xaxis.labels.formatter,c=new ko(e.ctx);if(s[a]){var h=e.getTextPos(s[a],e.size),u=l(o,{seriesIndex:-1,dataPointIndex:a,w:t});c.plotDataLabelsText({x:h.newX,y:h.newY,text:u,textAnchor:h.textAnchor,i:a,j:a,parent:r,className:"apexcharts-xaxis-label",color:Array.isArray(n.style.colors)&&n.style.colors[a]?n.style.colors[a]:"#a8a8a8",dataLabelsConfig:xe({textAnchor:h.textAnchor,dropShadow:{enabled:!1}},n),offsetCorrection:!1}).on("click",function(d){if(typeof t.config.chart.events.xAxisLabelClick=="function"){var f=Object.assign({},t,{labelIndex:a});t.config.chart.events.xAxisLabelClick(d,e.ctx,f)}})}}),r}},{key:"createPaths",value:function(e,t){var n=this,r=[],s=[],o=[],a=[];if(e.length){s=[this.graphics.move(t.x,t.y)],a=[this.graphics.move(t.x,t.y)];var l=this.graphics.move(e[0].x,e[0].y),c=this.graphics.move(e[0].x,e[0].y);e.forEach(function(h,u){l+=n.graphics.line(h.x,h.y),c+=n.graphics.line(h.x,h.y),u===e.length-1&&(l+="Z",c+="Z")}),r.push(l),o.push(c)}return{linePathsFrom:s,linePathsTo:r,areaPathsFrom:a,areaPathsTo:o}}},{key:"getTextPos",value:function(e,t){var n="middle",r=e.x,s=e.y;return Math.abs(e.x)>=10?e.x>0?(n="start",r+=10):e.x<0&&(n="end",r-=10):n="middle",Math.abs(e.y)>=t-10&&(e.y<0?s-=10:e.y>0&&(s+=10)),{textAnchor:n,newX:r,newY:s}}},{key:"getPreviousPath",value:function(e){for(var t=this.w,n=null,r=0;r<t.globals.previousPaths.length;r++){var s=t.globals.previousPaths[r];s.paths.length>0&&parseInt(s.realIndex,10)===parseInt(e,10)&&t.globals.previousPaths[r].paths[0]!==void 0&&(n=t.globals.previousPaths[r].paths[0].d)}return n}},{key:"getDataPointsPos",value:function(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.dataPointsLen;e=e||[],t=t||[];for(var r=[],s=0;s<n;s++){var o={};o.x=e[s]*Math.sin(t[s]),o.y=-e[s]*Math.cos(t[s]),r.push(o)}return r}}]),i}(),kP=function(i){Da(t,v0);var e=Ra(t);function t(n){var r;Ee(this,t),(r=e.call(this,n)).ctx=n,r.w=n.w,r.animBeginArr=[0],r.animDur=0;var s=r.w;return r.startAngle=s.config.plotOptions.radialBar.startAngle,r.endAngle=s.config.plotOptions.radialBar.endAngle,r.totalAngle=Math.abs(s.config.plotOptions.radialBar.endAngle-s.config.plotOptions.radialBar.startAngle),r.trackStartAngle=s.config.plotOptions.radialBar.track.startAngle,r.trackEndAngle=s.config.plotOptions.radialBar.track.endAngle,r.barLabels=r.w.config.plotOptions.radialBar.barLabels,r.donutDataLabels=r.w.config.plotOptions.radialBar.dataLabels,r.radialDataLabels=r.donutDataLabels,r.trackStartAngle||(r.trackStartAngle=r.startAngle),r.trackEndAngle||(r.trackEndAngle=r.endAngle),r.endAngle===360&&(r.endAngle=359.99),r.margin=parseInt(s.config.plotOptions.radialBar.track.margin,10),r.onBarLabelClick=r.onBarLabelClick.bind(bv(r)),r}return Oe(t,[{key:"draw",value:function(n){var r=this.w,s=new oe(this.ctx),o=s.group({class:"apexcharts-radialbar"});if(r.globals.noData)return o;var a=s.group(),l=this.defaultSize/2,c=r.globals.gridWidth/2,h=this.defaultSize/2.05;r.config.chart.sparkline.enabled||(h=h-r.config.stroke.width-r.config.chart.dropShadow.blur);var u=r.globals.fill.colors;if(r.config.plotOptions.radialBar.track.show){var d=this.drawTracks({size:h,centerX:c,centerY:l,colorArr:u,series:n});a.add(d)}var f=this.drawArcs({size:h,centerX:c,centerY:l,colorArr:u,series:n}),g=360;r.config.plotOptions.radialBar.startAngle<0&&(g=this.totalAngle);var m=(360-g)/360;if(r.globals.radialSize=h-h*m,this.radialDataLabels.value.show){var b=Math.max(this.radialDataLabels.value.offsetY,this.radialDataLabels.name.offsetY);r.globals.radialSize+=b*m}return a.add(f.g),r.config.plotOptions.radialBar.hollow.position==="front"&&(f.g.add(f.elHollow),f.dataLabels&&f.g.add(f.dataLabels)),o.add(a),o}},{key:"drawTracks",value:function(n){var r=this.w,s=new oe(this.ctx),o=s.group({class:"apexcharts-tracks"}),a=new un(this.ctx),l=new ki(this.ctx),c=this.getStrokeWidth(n);n.size=n.size-c/2;for(var h=0;h<n.series.length;h++){var u=s.group({class:"apexcharts-radialbar-track apexcharts-track"});o.add(u),u.attr({rel:h+1}),n.size=n.size-c-this.margin;var d=r.config.plotOptions.radialBar.track,f=l.fillPath({seriesNumber:0,size:n.size,fillColors:Array.isArray(d.background)?d.background[h]:d.background,solid:!0}),g=this.trackStartAngle,m=this.trackEndAngle;Math.abs(m)+Math.abs(g)>=360&&(m=360-Math.abs(this.startAngle)-.1);var b=s.drawPath({d:"",stroke:f,strokeWidth:c*parseInt(d.strokeWidth,10)/100,fill:"none",strokeOpacity:d.opacity,classes:"apexcharts-radialbar-area"});if(d.dropShadow.enabled){var y=d.dropShadow;a.dropShadow(b,y)}u.add(b),b.attr("id","apexcharts-radialbarTrack-"+h),this.animatePaths(b,{centerX:n.centerX,centerY:n.centerY,endAngle:m,startAngle:g,size:n.size,i:h,totalItems:2,animBeginArr:0,dur:0,isTrack:!0})}return o}},{key:"drawArcs",value:function(n){var r=this.w,s=new oe(this.ctx),o=new ki(this.ctx),a=new un(this.ctx),l=s.group(),c=this.getStrokeWidth(n);n.size=n.size-c/2;var h=r.config.plotOptions.radialBar.hollow.background,u=n.size-c*n.series.length-this.margin*n.series.length-c*parseInt(r.config.plotOptions.radialBar.track.strokeWidth,10)/100/2,d=u-r.config.plotOptions.radialBar.hollow.margin;r.config.plotOptions.radialBar.hollow.image!==void 0&&(h=this.drawHollowImage(n,l,u,h));var f=this.drawHollow({size:d,centerX:n.centerX,centerY:n.centerY,fill:h||"transparent"});if(r.config.plotOptions.radialBar.hollow.dropShadow.enabled){var g=r.config.plotOptions.radialBar.hollow.dropShadow;a.dropShadow(f,g)}var m=1;!this.radialDataLabels.total.show&&r.globals.series.length>1&&(m=0);var b=null;if(this.radialDataLabels.show){var y=r.globals.dom.Paper.findOne(".apexcharts-datalabels-group");b=this.renderInnerDataLabels(y,this.radialDataLabels,{hollowSize:u,centerX:n.centerX,centerY:n.centerY,opacity:m})}r.config.plotOptions.radialBar.hollow.position==="back"&&(l.add(f),b&&l.add(b));var w=!1;r.config.plotOptions.radialBar.inverseOrder&&(w=!0);for(var C=w?n.series.length-1:0;w?C>=0:C<n.series.length;w?C--:C++){var M=s.group({class:"apexcharts-series apexcharts-radial-series",seriesName:H.escapeString(r.globals.seriesNames[C])});l.add(M),M.attr({rel:C+1,"data:realIndex":C}),this.ctx.series.addCollapsedClassToSeries(M,C),n.size=n.size-c-this.margin;var S=o.fillPath({seriesNumber:C,size:n.size,value:n.series[C]}),O=this.startAngle,T=void 0,I=H.negToZero(n.series[C]>100?100:n.series[C])/100,R=Math.round(this.totalAngle*I)+this.startAngle,z=void 0;r.globals.dataChanged&&(T=this.startAngle,z=Math.round(this.totalAngle*H.negToZero(r.globals.previousPaths[C])/100)+T),Math.abs(R)+Math.abs(O)>360&&(R-=.01),Math.abs(z)+Math.abs(T)>360&&(z-=.01);var D=R-O,B=Array.isArray(r.config.stroke.dashArray)?r.config.stroke.dashArray[C]:r.config.stroke.dashArray,K=s.drawPath({d:"",stroke:S,strokeWidth:c,fill:"none",fillOpacity:r.config.fill.opacity,classes:"apexcharts-radialbar-area apexcharts-radialbar-slice-"+C,strokeDashArray:B});if(oe.setAttrs(K.node,{"data:angle":D,"data:value":n.series[C]}),r.config.chart.dropShadow.enabled){var J=r.config.chart.dropShadow;a.dropShadow(K,J,C)}if(a.setSelectionFilter(K,0,C),this.addListeners(K,this.radialDataLabels),M.add(K),K.attr({index:0,j:C}),this.barLabels.enabled){var se=H.polarToCartesian(n.centerX,n.centerY,n.size,O),ne=this.barLabels.formatter(r.globals.seriesNames[C],{seriesIndex:C,w:r}),ie=["apexcharts-radialbar-label"];this.barLabels.onClick||ie.push("apexcharts-no-click");var ae=this.barLabels.useSeriesColors?r.globals.colors[C]:r.config.chart.foreColor;ae||(ae=r.config.chart.foreColor);var Me=se.x+this.barLabels.offsetX,Re=se.y+this.barLabels.offsetY,_e=s.drawText({x:Me,y:Re,text:ne,textAnchor:"end",dominantBaseline:"middle",fontFamily:this.barLabels.fontFamily,fontWeight:this.barLabels.fontWeight,fontSize:this.barLabels.fontSize,foreColor:ae,cssClass:ie.join(" ")});_e.on("click",this.onBarLabelClick),_e.attr({rel:C+1}),O!==0&&_e.attr({"transform-origin":"".concat(Me," ").concat(Re),transform:"rotate(".concat(O," 0 0)")}),M.add(_e)}var Je=0;!this.initialAnim||r.globals.resized||r.globals.dataChanged||(Je=r.config.chart.animations.speed),r.globals.dataChanged&&(Je=r.config.chart.animations.dynamicAnimation.speed),this.animDur=Je/(1.2*n.series.length)+this.animDur,this.animBeginArr.push(this.animDur),this.animatePaths(K,{centerX:n.centerX,centerY:n.centerY,endAngle:R,startAngle:O,prevEndAngle:z,prevStartAngle:T,size:n.size,i:C,totalItems:2,animBeginArr:this.animBeginArr,dur:Je,shouldSetPrevPaths:!0})}return{g:l,elHollow:f,dataLabels:b}}},{key:"drawHollow",value:function(n){var r=new oe(this.ctx).drawCircle(2*n.size);return r.attr({class:"apexcharts-radialbar-hollow",cx:n.centerX,cy:n.centerY,r:n.size,fill:n.fill}),r}},{key:"drawHollowImage",value:function(n,r,s,o){var a=this.w,l=new ki(this.ctx),c=H.randomId(),h=a.config.plotOptions.radialBar.hollow.image;if(a.config.plotOptions.radialBar.hollow.imageClipped)l.clippedImgArea({width:s,height:s,image:h,patternID:"pattern".concat(a.globals.cuid).concat(c)}),o="url(#pattern".concat(a.globals.cuid).concat(c,")");else{var u=a.config.plotOptions.radialBar.hollow.imageWidth,d=a.config.plotOptions.radialBar.hollow.imageHeight;if(u===void 0&&d===void 0){var f=a.globals.dom.Paper.image(h,function(m){this.move(n.centerX-m.width/2+a.config.plotOptions.radialBar.hollow.imageOffsetX,n.centerY-m.height/2+a.config.plotOptions.radialBar.hollow.imageOffsetY)});r.add(f)}else{var g=a.globals.dom.Paper.image(h,function(m){this.move(n.centerX-u/2+a.config.plotOptions.radialBar.hollow.imageOffsetX,n.centerY-d/2+a.config.plotOptions.radialBar.hollow.imageOffsetY),this.size(u,d)});r.add(g)}}return o}},{key:"getStrokeWidth",value:function(n){var r=this.w;return n.size*(100-parseInt(r.config.plotOptions.radialBar.hollow.size,10))/100/(n.series.length+1)-this.margin}},{key:"onBarLabelClick",value:function(n){var r=parseInt(n.target.getAttribute("rel"),10)-1,s=this.barLabels.onClick,o=this.w;s&&s(o.globals.seriesNames[r],{w:o,seriesIndex:r})}}]),t}(),SP=function(i){Da(t,So);var e=Ra(t);function t(){return Ee(this,t),e.apply(this,arguments)}return Oe(t,[{key:"draw",value:function(n,r){var s=this.w,o=new oe(this.ctx);this.rangeBarOptions=this.w.config.plotOptions.rangeBar,this.series=n,this.seriesRangeStart=s.globals.seriesRangeStart,this.seriesRangeEnd=s.globals.seriesRangeEnd,this.barHelpers.initVariables(n);for(var a=o.group({class:"apexcharts-rangebar-series apexcharts-plot-series"}),l=0;l<n.length;l++){var c,h,u,d,f=void 0,g=void 0,m=s.globals.comboCharts?r[l]:l,b=this.barHelpers.getGroupIndex(m).columnGroupIndex,y=o.group({class:"apexcharts-series",seriesName:H.escapeString(s.globals.seriesNames[m]),rel:l+1,"data:realIndex":m});this.ctx.series.addCollapsedClassToSeries(y,m),n[l].length>0&&(this.visibleI=this.visibleI+1);var w=0,C=0,M=0;this.yRatio.length>1&&(this.yaxisIndex=s.globals.seriesYAxisReverseMap[m][0],M=m);var S=this.barHelpers.initialPositions(m);g=S.y,d=S.zeroW,f=S.x,C=S.barWidth,w=S.barHeight,c=S.xDivision,h=S.yDivision,u=S.zeroH;for(var O=o.group({class:"apexcharts-datalabels","data:realIndex":m}),T=o.group({class:"apexcharts-rangebar-goals-markers"}),I=0;I<s.globals.dataPoints;I++){var R=this.barHelpers.getStrokeWidth(l,I,m),z=this.seriesRangeStart[l][I],D=this.seriesRangeEnd[l][I],B=null,K=null,J=null,se={x:f,y:g,strokeWidth:R,elSeries:y},ne=this.seriesLen;if(s.config.plotOptions.bar.rangeBarGroupRows&&(ne=1),s.config.series[l].data[I]===void 0)break;if(this.isHorizontal){J=g+w*this.visibleI;var ie=(h-w*ne)/2;if(s.config.series[l].data[I].x){var ae=this.detectOverlappingBars({i:l,j:I,barYPosition:J,srty:ie,barHeight:w,yDivision:h,initPositions:S});w=ae.barHeight,J=ae.barYPosition}C=(B=this.drawRangeBarPaths(xe({indexes:{i:l,j:I,realIndex:m},barHeight:w,barYPosition:J,zeroW:d,yDivision:h,y1:z,y2:D},se))).barWidth}else{s.globals.isXNumeric&&(f=(s.globals.seriesX[l][I]-s.globals.minX)/this.xRatio-C/2),K=f+C*this.visibleI;var Me=(c-C*ne)/2;if(s.config.series[l].data[I].x){var Re=this.detectOverlappingBars({i:l,j:I,barXPosition:K,srtx:Me,barWidth:C,xDivision:c,initPositions:S});C=Re.barWidth,K=Re.barXPosition}w=(B=this.drawRangeColumnPaths(xe({indexes:{i:l,j:I,realIndex:m,translationsIndex:M},barWidth:C,barXPosition:K,zeroH:u,xDivision:c},se))).barHeight}var _e=this.barHelpers.drawGoalLine({barXPosition:B.barXPosition,barYPosition:J,goalX:B.goalX,goalY:B.goalY,barHeight:w,barWidth:C});_e&&T.add(_e),g=B.y,f=B.x;var Je=this.barHelpers.getPathFillColor(n,l,I,m);this.renderSeries({realIndex:m,pathFill:Je.color,lineFill:Je.useRangeColor?Je.color:s.globals.stroke.colors[m],j:I,i:l,x:f,y:g,y1:z,y2:D,pathFrom:B.pathFrom,pathTo:B.pathTo,strokeWidth:R,elSeries:y,series:n,barHeight:w,barWidth:C,barXPosition:K,barYPosition:J,columnGroupIndex:b,elDataLabelsWrap:O,elGoalsMarkers:T,visibleSeries:this.visibleI,type:"rangebar"})}a.add(y)}return a}},{key:"detectOverlappingBars",value:function(n){var r=n.i,s=n.j,o=n.barYPosition,a=n.barXPosition,l=n.srty,c=n.srtx,h=n.barHeight,u=n.barWidth,d=n.yDivision,f=n.xDivision,g=n.initPositions,m=this.w,b=[],y=m.config.series[r].data[s].rangeName,w=m.config.series[r].data[s].x,C=Array.isArray(w)?w.join(" "):w,M=m.globals.labels.map(function(O){return Array.isArray(O)?O.join(" "):O}).indexOf(C),S=m.globals.seriesRange[r].findIndex(function(O){return O.x===C&&O.overlaps.length>0});return this.isHorizontal?(o=m.config.plotOptions.bar.rangeBarGroupRows?l+d*M:l+h*this.visibleI+d*M,S>-1&&!m.config.plotOptions.bar.rangeBarOverlap&&(b=m.globals.seriesRange[r][S].overlaps).indexOf(y)>-1&&(o=(h=g.barHeight/b.length)*this.visibleI+d*(100-parseInt(this.barOptions.barHeight,10))/100/2+h*(this.visibleI+b.indexOf(y))+d*M)):(M>-1&&!m.globals.timescaleLabels.length&&(a=m.config.plotOptions.bar.rangeBarGroupRows?c+f*M:c+u*this.visibleI+f*M),S>-1&&!m.config.plotOptions.bar.rangeBarOverlap&&(b=m.globals.seriesRange[r][S].overlaps).indexOf(y)>-1&&(a=(u=g.barWidth/b.length)*this.visibleI+f*(100-parseInt(this.barOptions.barWidth,10))/100/2+u*(this.visibleI+b.indexOf(y))+f*M)),{barYPosition:o,barXPosition:a,barHeight:h,barWidth:u}}},{key:"drawRangeColumnPaths",value:function(n){var r=n.indexes,s=n.x,o=n.xDivision,a=n.barWidth,l=n.barXPosition,c=n.zeroH,h=this.w,u=r.i,d=r.j,f=r.realIndex,g=r.translationsIndex,m=this.yRatio[g],b=this.getRangeValue(f,d),y=Math.min(b.start,b.end),w=Math.max(b.start,b.end);this.series[u][d]===void 0||this.series[u][d]===null?y=c:(y=c-y/m,w=c-w/m);var C=Math.abs(w-y),M=this.barHelpers.getColumnPaths({barXPosition:l,barWidth:a,y1:y,y2:w,strokeWidth:this.strokeWidth,series:this.seriesRangeEnd,realIndex:f,i:f,j:d,w:h});if(h.globals.isXNumeric){var S=this.getBarXForNumericXAxis({x:s,j:d,realIndex:f,barWidth:a});s=S.x,l=S.barXPosition}else s+=o;return{pathTo:M.pathTo,pathFrom:M.pathFrom,barHeight:C,x:s,y:b.start<0&&b.end<0?y:w,goalY:this.barHelpers.getGoalValues("y",null,c,u,d,g),barXPosition:l}}},{key:"preventBarOverflow",value:function(n){var r=this.w;return n<0&&(n=0),n>r.globals.gridWidth&&(n=r.globals.gridWidth),n}},{key:"drawRangeBarPaths",value:function(n){var r=n.indexes,s=n.y,o=n.y1,a=n.y2,l=n.yDivision,c=n.barHeight,h=n.barYPosition,u=n.zeroW,d=this.w,f=r.realIndex,g=r.j,m=this.preventBarOverflow(u+o/this.invertedYRatio),b=this.preventBarOverflow(u+a/this.invertedYRatio),y=this.getRangeValue(f,g),w=Math.abs(b-m),C=this.barHelpers.getBarpaths({barYPosition:h,barHeight:c,x1:m,x2:b,strokeWidth:this.strokeWidth,series:this.seriesRangeEnd,i:f,realIndex:f,j:g,w:d});return d.globals.isXNumeric||(s+=l),{pathTo:C.pathTo,pathFrom:C.pathFrom,barWidth:w,x:y.start<0&&y.end<0?m:b,goalX:this.barHelpers.getGoalValues("x",u,null,f,g),y:s}}},{key:"getRangeValue",value:function(n,r){var s=this.w;return{start:s.globals.seriesRangeStart[n][r],end:s.globals.seriesRangeEnd[n][r]}}}]),t}(),CP=function(){function i(e){Ee(this,i),this.w=e.w,this.lineCtx=e}return Oe(i,[{key:"sameValueSeriesFix",value:function(e,t){var n=this.w;if((n.config.fill.type==="gradient"||n.config.fill.type[e]==="gradient")&&new Bt(this.lineCtx.ctx,n).seriesHaveSameValues(e)){var r=t[e].slice();r[r.length-1]=r[r.length-1]+1e-6,t[e]=r}return t}},{key:"calculatePoints",value:function(e){var t=e.series,n=e.realIndex,r=e.x,s=e.y,o=e.i,a=e.j,l=e.prevY,c=this.w,h=[],u=[],d=this.lineCtx.categoryAxisCorrection+c.config.markers.offsetX;return c.globals.isXNumeric&&(d=(c.globals.seriesX[n][0]-c.globals.minX)/this.lineCtx.xRatio+c.config.markers.offsetX),a===0&&(h.push(d),u.push(H.isNumber(t[o][0])?l+c.config.markers.offsetY:null)),h.push(r+c.config.markers.offsetX),u.push(H.isNumber(t[o][a+1])?s+c.config.markers.offsetY:null),{x:h,y:u}}},{key:"checkPreviousPaths",value:function(e){for(var t=e.pathFromLine,n=e.pathFromArea,r=e.realIndex,s=this.w,o=0;o<s.globals.previousPaths.length;o++){var a=s.globals.previousPaths[o];(a.type==="line"||a.type==="area")&&a.paths.length>0&&parseInt(a.realIndex,10)===parseInt(r,10)&&(a.type==="line"?(this.lineCtx.appendPathFrom=!1,t=s.globals.previousPaths[o].paths[0].d):a.type==="area"&&(this.lineCtx.appendPathFrom=!1,n=s.globals.previousPaths[o].paths[0].d,s.config.stroke.show&&s.globals.previousPaths[o].paths[1]&&(t=s.globals.previousPaths[o].paths[1].d)))}return{pathFromLine:t,pathFromArea:n}}},{key:"determineFirstPrevY",value:function(e){var t,n,r,s=e.i,o=e.realIndex,a=e.series,l=e.prevY,c=e.lineYPosition,h=e.translationsIndex,u=this.w,d=u.config.chart.stacked&&!u.globals.comboCharts||u.config.chart.stacked&&u.globals.comboCharts&&(!this.w.config.chart.stackOnlyBar||((t=this.w.config.series[o])===null||t===void 0?void 0:t.type)==="bar"||((n=this.w.config.series[o])===null||n===void 0?void 0:n.type)==="column");if(((r=a[s])===null||r===void 0?void 0:r[0])!==void 0)l=(c=d&&s>0?this.lineCtx.prevSeriesY[s-1][0]:this.lineCtx.zeroY)-a[s][0]/this.lineCtx.yRatio[h]+2*(this.lineCtx.isReversed?a[s][0]/this.lineCtx.yRatio[h]:0);else if(d&&s>0&&a[s][0]===void 0){for(var f=s-1;f>=0;f--)if(a[f][0]!==null&&a[f][0]!==void 0){l=c=this.lineCtx.prevSeriesY[f][0];break}}return{prevY:l,lineYPosition:c}}}]),i}(),AP=function(i){for(var e,t,n,r,s=function(h){for(var u=[],d=h[0],f=h[1],g=u[0]=hp(d,f),m=1,b=h.length-1;m<b;m++)d=f,f=h[m+1],u[m]=.5*(g+(g=hp(d,f)));return u[m]=g,u}(i),o=i.length-1,a=[],l=0;l<o;l++)n=hp(i[l],i[l+1]),Math.abs(n)<1e-6?s[l]=s[l+1]=0:(r=(e=s[l]/n)*e+(t=s[l+1]/n)*t)>9&&(r=3*n/Math.sqrt(r),s[l]=r*e,s[l+1]=r*t);for(var c=0;c<=o;c++)r=(i[Math.min(o,c+1)][0]-i[Math.max(0,c-1)][0])/(6*(1+s[c]*s[c])),a.push([r||0,s[c]*r||0]);return a},MP=function(i){var e=AP(i),t=i[1],n=i[0],r=[],s=e[1],o=e[0];r.push(n,[n[0]+o[0],n[1]+o[1],t[0]-s[0],t[1]-s[1],t[0],t[1]]);for(var a=2,l=e.length;a<l;a++){var c=i[a],h=e[a];r.push([c[0]-h[0],c[1]-h[1],c[0],c[1]])}return r},TP=function(i,e,t){var n=i.slice(e,t);if(e){if(t-e>1&&n[1].length<6){var r=n[0].length;n[1]=[2*n[0][r-2]-n[0][r-4],2*n[0][r-1]-n[0][r-3]].concat(n[1])}n[0]=n[0].slice(-2)}return n};function hp(i,e){return(e[1]-i[1])/(e[0]-i[0])}var up=function(){function i(e,t,n){Ee(this,i),this.ctx=e,this.w=e.w,this.xyRatios=t,this.pointsChart=!(this.w.config.chart.type!=="bubble"&&this.w.config.chart.type!=="scatter")||n,this.scatter=new c0(this.ctx),this.noNegatives=this.w.globals.minX===Number.MAX_VALUE,this.lineHelpers=new CP(this),this.markers=new wo(this.ctx),this.prevSeriesY=[],this.categoryAxisCorrection=0,this.yaxisIndex=0}return Oe(i,[{key:"draw",value:function(e,t,n,r){var s,o=this.w,a=new oe(this.ctx),l=o.globals.comboCharts?t:o.config.chart.type,c=a.group({class:"apexcharts-".concat(l,"-series apexcharts-plot-series")}),h=new Bt(this.ctx,o);this.yRatio=this.xyRatios.yRatio,this.zRatio=this.xyRatios.zRatio,this.xRatio=this.xyRatios.xRatio,this.baseLineY=this.xyRatios.baseLineY,e=h.getLogSeries(e),this.yRatio=h.getLogYRatios(this.yRatio),this.prevSeriesY=[];for(var u=[],d=0;d<e.length;d++){e=this.lineHelpers.sameValueSeriesFix(d,e);var f=o.globals.comboCharts?n[d]:d,g=this.yRatio.length>1?f:0;this._initSerieVariables(e,d,f);var m=[],b=[],y=[],w=o.globals.padHorizontal+this.categoryAxisCorrection;this.ctx.series.addCollapsedClassToSeries(this.elSeries,f),o.globals.isXNumeric&&o.globals.seriesX.length>0&&(w=(o.globals.seriesX[f][0]-o.globals.minX)/this.xRatio),y.push(w);var C,M=w,S=void 0,O=M,T=this.zeroY,I=this.zeroY;T=this.lineHelpers.determineFirstPrevY({i:d,realIndex:f,series:e,prevY:T,lineYPosition:0,translationsIndex:g}).prevY,o.config.stroke.curve==="monotoneCubic"&&e[d][0]===null?m.push(null):m.push(T),C=T,l==="rangeArea"&&(S=I=this.lineHelpers.determineFirstPrevY({i:d,realIndex:f,series:r,prevY:I,lineYPosition:0,translationsIndex:g}).prevY,b.push(m[0]!==null?I:null));var R=this._calculatePathsFrom({type:l,series:e,i:d,realIndex:f,translationsIndex:g,prevX:O,prevY:T,prevY2:I}),z=[m[0]],D=[b[0]],B={type:l,series:e,realIndex:f,translationsIndex:g,i:d,x:w,y:1,pX:M,pY:C,pathsFrom:R,linePaths:[],areaPaths:[],seriesIndex:n,lineYPosition:0,xArrj:y,yArrj:m,y2Arrj:b,seriesRangeEnd:r},K=this._iterateOverDataPoints(xe(xe({},B),{},{iterations:l==="rangeArea"?e[d].length-1:void 0,isRangeStart:!0}));if(l==="rangeArea"){for(var J=this._calculatePathsFrom({series:r,i:d,realIndex:f,prevX:O,prevY:I}),se=this._iterateOverDataPoints(xe(xe({},B),{},{series:r,xArrj:[w],yArrj:z,y2Arrj:D,pY:S,areaPaths:K.areaPaths,pathsFrom:J,iterations:r[d].length-1,isRangeStart:!1})),ne=K.linePaths.length/2,ie=0;ie<ne;ie++)K.linePaths[ie]=se.linePaths[ie+ne]+K.linePaths[ie];K.linePaths.splice(ne),K.pathFromLine=se.pathFromLine+K.pathFromLine}else K.pathFromArea+="z";this._handlePaths({type:l,realIndex:f,i:d,paths:K}),this.elSeries.add(this.elPointsMain),this.elSeries.add(this.elDataLabelsWrap),u.push(this.elSeries)}if(((s=o.config.series[0])===null||s===void 0?void 0:s.zIndex)!==void 0&&u.sort(function(Re,_e){return Number(Re.node.getAttribute("zIndex"))-Number(_e.node.getAttribute("zIndex"))}),o.config.chart.stacked)for(var ae=u.length-1;ae>=0;ae--)c.add(u[ae]);else for(var Me=0;Me<u.length;Me++)c.add(u[Me]);return c}},{key:"_initSerieVariables",value:function(e,t,n){var r=this.w,s=new oe(this.ctx);this.xDivision=r.globals.gridWidth/(r.globals.dataPoints-(r.config.xaxis.tickPlacement==="on"?1:0)),this.strokeWidth=Array.isArray(r.config.stroke.width)?r.config.stroke.width[n]:r.config.stroke.width;var o=0;if(this.yRatio.length>1&&(this.yaxisIndex=r.globals.seriesYAxisReverseMap[n],o=n),this.isReversed=r.config.yaxis[this.yaxisIndex]&&r.config.yaxis[this.yaxisIndex].reversed,this.zeroY=r.globals.gridHeight-this.baseLineY[o]-(this.isReversed?r.globals.gridHeight:0)+(this.isReversed?2*this.baseLineY[o]:0),this.areaBottomY=this.zeroY,(this.zeroY>r.globals.gridHeight||r.config.plotOptions.area.fillTo==="end")&&(this.areaBottomY=r.globals.gridHeight),this.categoryAxisCorrection=this.xDivision/2,this.elSeries=s.group({class:"apexcharts-series",zIndex:r.config.series[n].zIndex!==void 0?r.config.series[n].zIndex:n,seriesName:H.escapeString(r.globals.seriesNames[n])}),this.elPointsMain=s.group({class:"apexcharts-series-markers-wrap","data:realIndex":n}),r.globals.hasNullValues){var a=this.markers.plotChartMarkers({pointsPos:{x:[0],y:[r.globals.gridHeight+r.globals.markers.largestSize]},seriesIndex:t,j:0,pSize:.1,alwaysDrawMarker:!0,isVirtualPoint:!0});a!==null&&this.elPointsMain.add(a)}this.elDataLabelsWrap=s.group({class:"apexcharts-datalabels","data:realIndex":n});var l=e[t].length===r.globals.dataPoints;this.elSeries.attr({"data:longestSeries":l,rel:t+1,"data:realIndex":n}),this.appendPathFrom=!0}},{key:"_calculatePathsFrom",value:function(e){var t,n,r,s,o=e.type,a=e.series,l=e.i,c=e.realIndex,h=e.translationsIndex,u=e.prevX,d=e.prevY,f=e.prevY2,g=this.w,m=new oe(this.ctx);if(a[l][0]===null){for(var b=0;b<a[l].length;b++)if(a[l][b]!==null){u=this.xDivision*b,d=this.zeroY-a[l][b]/this.yRatio[h],t=m.move(u,d),n=m.move(u,this.areaBottomY);break}}else t=m.move(u,d),o==="rangeArea"&&(t=m.move(u,f)+m.line(u,d)),n=m.move(u,this.areaBottomY)+m.line(u,d);if(r=m.move(0,this.areaBottomY)+m.line(0,this.areaBottomY),s=m.move(0,this.areaBottomY)+m.line(0,this.areaBottomY),g.globals.previousPaths.length>0){var y=this.lineHelpers.checkPreviousPaths({pathFromLine:r,pathFromArea:s,realIndex:c});r=y.pathFromLine,s=y.pathFromArea}return{prevX:u,prevY:d,linePath:t,areaPath:n,pathFromLine:r,pathFromArea:s}}},{key:"_handlePaths",value:function(e){var t=e.type,n=e.realIndex,r=e.i,s=e.paths,o=this.w,a=new oe(this.ctx),l=new ki(this.ctx);this.prevSeriesY.push(s.yArrj),o.globals.seriesXvalues[n]=s.xArrj,o.globals.seriesYvalues[n]=s.yArrj;var c=o.config.forecastDataPoints;if(c.count>0&&t!=="rangeArea"){var h=o.globals.seriesXvalues[n][o.globals.seriesXvalues[n].length-c.count-1],u=a.drawRect(h,0,o.globals.gridWidth,o.globals.gridHeight,0);o.globals.dom.elForecastMask.appendChild(u.node);var d=a.drawRect(0,0,h,o.globals.gridHeight,0);o.globals.dom.elNonForecastMask.appendChild(d.node)}this.pointsChart||o.globals.delayedElements.push({el:this.elPointsMain.node,index:n});var f={i:r,realIndex:n,animationDelay:r,initialSpeed:o.config.chart.animations.speed,dataChangeSpeed:o.config.chart.animations.dynamicAnimation.speed,className:"apexcharts-".concat(t)};if(t==="area")for(var g=l.fillPath({seriesNumber:n}),m=0;m<s.areaPaths.length;m++){var b=a.renderPaths(xe(xe({},f),{},{pathFrom:s.pathFromArea,pathTo:s.areaPaths[m],stroke:"none",strokeWidth:0,strokeLineCap:null,fill:g}));this.elSeries.add(b)}if(o.config.stroke.show&&!this.pointsChart){var y=null;if(t==="line")y=l.fillPath({seriesNumber:n,i:r});else if(o.config.stroke.fill.type==="solid")y=o.globals.stroke.colors[n];else{var w=o.config.fill;o.config.fill=o.config.stroke.fill,y=l.fillPath({seriesNumber:n,i:r}),o.config.fill=w}for(var C=0;C<s.linePaths.length;C++){var M=y;t==="rangeArea"&&(M=l.fillPath({seriesNumber:n}));var S=xe(xe({},f),{},{pathFrom:s.pathFromLine,pathTo:s.linePaths[C],stroke:y,strokeWidth:this.strokeWidth,strokeLineCap:o.config.stroke.lineCap,fill:t==="rangeArea"?M:"none"}),O=a.renderPaths(S);if(this.elSeries.add(O),O.attr("fill-rule","evenodd"),c.count>0&&t!=="rangeArea"){var T=a.renderPaths(S);T.node.setAttribute("stroke-dasharray",c.dashArray),c.strokeWidth&&T.node.setAttribute("stroke-width",c.strokeWidth),this.elSeries.add(T),T.attr("clip-path","url(#forecastMask".concat(o.globals.cuid,")")),O.attr("clip-path","url(#nonForecastMask".concat(o.globals.cuid,")"))}}}}},{key:"_iterateOverDataPoints",value:function(e){var t,n,r=this,s=e.type,o=e.series,a=e.iterations,l=e.realIndex,c=e.translationsIndex,h=e.i,u=e.x,d=e.y,f=e.pX,g=e.pY,m=e.pathsFrom,b=e.linePaths,y=e.areaPaths,w=e.seriesIndex,C=e.lineYPosition,M=e.xArrj,S=e.yArrj,O=e.y2Arrj,T=e.isRangeStart,I=e.seriesRangeEnd,R=this.w,z=new oe(this.ctx),D=this.yRatio,B=m.prevY,K=m.linePath,J=m.areaPath,se=m.pathFromLine,ne=m.pathFromArea,ie=H.isNumber(R.globals.minYArr[l])?R.globals.minYArr[l]:R.globals.minY;a||(a=R.globals.dataPoints>1?R.globals.dataPoints-1:R.globals.dataPoints);var ae=function(Ce,Tt){return Tt-Ce/D[c]+2*(r.isReversed?Ce/D[c]:0)},Me=d,Re=R.config.chart.stacked&&!R.globals.comboCharts||R.config.chart.stacked&&R.globals.comboCharts&&(!this.w.config.chart.stackOnlyBar||((t=this.w.config.series[l])===null||t===void 0?void 0:t.type)==="bar"||((n=this.w.config.series[l])===null||n===void 0?void 0:n.type)==="column"),_e=R.config.stroke.curve;Array.isArray(_e)&&(_e=Array.isArray(w)?_e[w[h]]:_e[h]);for(var Je,rt=0,Ge=0;Ge<a&&o[h].length!==0;Ge++){var Mt=o[h][Ge+1]===void 0||o[h][Ge+1]===null;if(R.globals.isXNumeric){var Ue=R.globals.seriesX[l][Ge+1];R.globals.seriesX[l][Ge+1]===void 0&&(Ue=R.globals.seriesX[l][a-1]),u=(Ue-R.globals.minX)/this.xRatio}else u+=this.xDivision;Re?h>0&&R.globals.collapsedSeries.length<R.config.series.length-1?C=this.prevSeriesY[function(Ce){for(var Tt=Ce;Tt>0;Tt--){if(!(R.globals.collapsedSeriesIndices.indexOf((w==null?void 0:w[Tt])||Tt)>-1))return Tt;Tt--}return 0}(h-1)][Ge+1]:C=this.zeroY:C=this.zeroY,Mt?d=ae(ie,C):(d=ae(o[h][Ge+1],C),s==="rangeArea"&&(Me=ae(I[h][Ge+1],C))),M.push(o[h][Ge+1]===null?null:u),!Mt||R.config.stroke.curve!=="smooth"&&R.config.stroke.curve!=="monotoneCubic"?(S.push(d),O.push(Me)):(S.push(null),O.push(null));var $e=this.lineHelpers.calculatePoints({series:o,x:u,y:d,realIndex:l,i:h,j:Ge,prevY:B}),ot=this._createPaths({type:s,series:o,i:h,realIndex:l,j:Ge,x:u,y:d,y2:Me,xArrj:M,yArrj:S,y2Arrj:O,pX:f,pY:g,pathState:rt,segmentStartX:Je,linePath:K,areaPath:J,linePaths:b,areaPaths:y,curve:_e,isRangeStart:T});y=ot.areaPaths,b=ot.linePaths,f=ot.pX,g=ot.pY,rt=ot.pathState,Je=ot.segmentStartX,J=ot.areaPath,K=ot.linePath,!this.appendPathFrom||R.globals.hasNullValues||_e==="monotoneCubic"&&s==="rangeArea"||(se+=z.line(u,this.areaBottomY),ne+=z.line(u,this.areaBottomY)),this.handleNullDataPoints(o,$e,h,Ge,l),this._handleMarkersAndLabels({type:s,pointsPos:$e,i:h,j:Ge,realIndex:l,isRangeStart:T})}return{yArrj:S,xArrj:M,pathFromArea:ne,areaPaths:y,pathFromLine:se,linePaths:b,linePath:K,areaPath:J}}},{key:"_handleMarkersAndLabels",value:function(e){var t=e.type,n=e.pointsPos,r=e.isRangeStart,s=e.i,o=e.j,a=e.realIndex,l=this.w,c=new ko(this.ctx);if(this.pointsChart)this.scatter.draw(this.elSeries,o,{realIndex:a,pointsPos:n,zRatio:this.zRatio,elParent:this.elPointsMain});else{l.globals.series[s].length>1&&this.elPointsMain.node.classList.add("apexcharts-element-hidden");var h=this.markers.plotChartMarkers({pointsPos:n,seriesIndex:a,j:o+1});h!==null&&this.elPointsMain.add(h)}var u=c.drawDataLabel({type:t,isRangeStart:r,pos:n,i:a,j:o+1});u!==null&&this.elDataLabelsWrap.add(u)}},{key:"_createPaths",value:function(e){var t=e.type,n=e.series,r=e.i;e.realIndex;var s,o=e.j,a=e.x,l=e.y,c=e.xArrj,h=e.yArrj,u=e.y2,d=e.y2Arrj,f=e.pX,g=e.pY,m=e.pathState,b=e.segmentStartX,y=e.linePath,w=e.areaPath,C=e.linePaths,M=e.areaPaths,S=e.curve,O=e.isRangeStart,T=new oe(this.ctx),I=this.areaBottomY,R=t==="rangeArea",z=t==="rangeArea"&&O;switch(S){case"monotoneCubic":var D=O?h:d;switch(m){case 0:if(D[o+1]===null)break;m=1;case 1:if(!(R?c.length===n[r].length:o===n[r].length-2))break;case 2:var B=O?c:c.slice().reverse(),K=O?D:D.slice().reverse(),J=(s=K,B.map(function(Ue,$e){return[Ue,s[$e]]}).filter(function(Ue){return Ue[1]!==null})),se=J.length>1?MP(J):J,ne=[];R&&(z?M=J:ne=M.reverse());var ie=0,ae=0;if(function(Ue,$e){for(var ot=function(ct){var L=[],F=0;return ct.forEach(function(te){te!==null?F++:F>0&&(L.push(F),F=0)}),F>0&&L.push(F),L}(Ue),Ce=[],Tt=0,Et=0;Tt<ot.length;Et+=ot[Tt++])Ce[Tt]=TP($e,Et,Et+ot[Tt]);return Ce}(K,se).forEach(function(Ue){ie++;var $e=function(Tt){for(var Et="",ct=0;ct<Tt.length;ct++){var L=Tt[ct],F=L.length;F>4?(Et+="C".concat(L[0],", ").concat(L[1]),Et+=", ".concat(L[2],", ").concat(L[3]),Et+=", ".concat(L[4],", ").concat(L[5])):F>2&&(Et+="S".concat(L[0],", ").concat(L[1]),Et+=", ".concat(L[2],", ").concat(L[3]))}return Et}(Ue),ot=ae,Ce=(ae+=Ue.length)-1;z?y=T.move(J[ot][0],J[ot][1])+$e:R?y=T.move(ne[ot][0],ne[ot][1])+T.line(J[ot][0],J[ot][1])+$e+T.line(ne[Ce][0],ne[Ce][1]):(y=T.move(J[ot][0],J[ot][1])+$e,w=y+T.line(J[Ce][0],I)+T.line(J[ot][0],I)+"z",M.push(w)),C.push(y)}),R&&ie>1&&!z){var Me=C.slice(ie).reverse();C.splice(ie),Me.forEach(function(Ue){return C.push(Ue)})}m=0}break;case"smooth":var Re=.35*(a-f);if(n[r][o]===null)m=0;else switch(m){case 0:if(b=f,y=z?T.move(f,d[o])+T.line(f,g):T.move(f,g),w=T.move(f,g),n[r][o+1]===null||n[r][o+1]===void 0){C.push(y),M.push(w);break}if(m=1,o<n[r].length-2){var _e=T.curve(f+Re,g,a-Re,l,a,l);y+=_e,w+=_e;break}case 1:if(n[r][o+1]===null)y+=z?T.line(f,u):T.move(f,g),w+=T.line(f,I)+T.line(b,I)+"z",C.push(y),M.push(w),m=-1;else{var Je=T.curve(f+Re,g,a-Re,l,a,l);y+=Je,w+=Je,o>=n[r].length-2&&(z&&(y+=T.curve(a,l,a,l,a,u)+T.move(a,u)),w+=T.curve(a,l,a,l,a,I)+T.line(b,I)+"z",C.push(y),M.push(w),m=-1)}}f=a,g=l;break;default:var rt=function(Ue,$e,ot){var Ce=[];switch(Ue){case"stepline":Ce=T.line($e,null,"H")+T.line(null,ot,"V");break;case"linestep":Ce=T.line(null,ot,"V")+T.line($e,null,"H");break;case"straight":Ce=T.line($e,ot)}return Ce};if(n[r][o]===null)m=0;else switch(m){case 0:if(b=f,y=z?T.move(f,d[o])+T.line(f,g):T.move(f,g),w=T.move(f,g),n[r][o+1]===null||n[r][o+1]===void 0){C.push(y),M.push(w);break}if(m=1,o<n[r].length-2){var Ge=rt(S,a,l);y+=Ge,w+=Ge;break}case 1:if(n[r][o+1]===null)y+=z?T.line(f,u):T.move(f,g),w+=T.line(f,I)+T.line(b,I)+"z",C.push(y),M.push(w),m=-1;else{var Mt=rt(S,a,l);y+=Mt,w+=Mt,o>=n[r].length-2&&(z&&(y+=T.line(a,u)),w+=T.line(a,I)+T.line(b,I)+"z",C.push(y),M.push(w),m=-1)}}f=a,g=l}return{linePaths:C,areaPaths:M,pX:f,pY:g,pathState:m,segmentStartX:b,linePath:y,areaPath:w}}},{key:"handleNullDataPoints",value:function(e,t,n,r,s){var o=this.w;if(e[n][r]===null&&o.config.markers.showNullDataPoints||e[n].length===1){var a=this.strokeWidth-o.config.markers.strokeWidth/2;a>0||(a=0);var l=this.markers.plotChartMarkers({pointsPos:t,seriesIndex:s,j:r+1,pSize:a,alwaysDrawMarker:!0});l!==null&&this.elPointsMain.add(l)}}}]),i}();window.TreemapSquared={},window.TreemapSquared.generate=function(){function i(a,l,c,h){this.xoffset=a,this.yoffset=l,this.height=h,this.width=c,this.shortestEdge=function(){return Math.min(this.height,this.width)},this.getCoordinates=function(u){var d,f=[],g=this.xoffset,m=this.yoffset,b=s(u)/this.height,y=s(u)/this.width;if(this.width>=this.height)for(d=0;d<u.length;d++)f.push([g,m,g+b,m+u[d]/b]),m+=u[d]/b;else for(d=0;d<u.length;d++)f.push([g,m,g+u[d]/y,m+y]),g+=u[d]/y;return f},this.cutArea=function(u){var d;if(this.width>=this.height){var f=u/this.height,g=this.width-f;d=new i(this.xoffset+f,this.yoffset,g,this.height)}else{var m=u/this.width,b=this.height-m;d=new i(this.xoffset,this.yoffset+m,this.width,b)}return d}}function e(a,l,c,h,u){h=h===void 0?0:h,u=u===void 0?0:u;var d=t(function(f,g){var m,b=[],y=g/s(f);for(m=0;m<f.length;m++)b[m]=f[m]*y;return b}(a,l*c),[],new i(h,u,l,c),[]);return function(f){var g,m,b=[];for(g=0;g<f.length;g++)for(m=0;m<f[g].length;m++)b.push(f[g][m]);return b}(d)}function t(a,l,c,h){var u,d,f;if(a.length!==0)return u=c.shortestEdge(),function(g,m,b){var y;if(g.length===0)return!0;(y=g.slice()).push(m);var w=n(g,b),C=n(y,b);return w>=C}(l,d=a[0],u)?(l.push(d),t(a.slice(1),l,c,h)):(f=c.cutArea(s(l),h),h.push(c.getCoordinates(l)),t(a,[],f,h)),h;h.push(c.getCoordinates(l))}function n(a,l){var c=Math.min.apply(Math,a),h=Math.max.apply(Math,a),u=s(a);return Math.max(Math.pow(l,2)*h/Math.pow(u,2),Math.pow(u,2)/(Math.pow(l,2)*c))}function r(a){return a&&a.constructor===Array}function s(a){var l,c=0;for(l=0;l<a.length;l++)c+=a[l];return c}function o(a){var l,c=0;if(r(a[0]))for(l=0;l<a.length;l++)c+=o(a[l]);else c=s(a);return c}return function a(l,c,h,u,d){u=u===void 0?0:u,d=d===void 0?0:d;var f,g,m=[],b=[];if(r(l[0])){for(g=0;g<l.length;g++)m[g]=o(l[g]);for(f=e(m,c,h,u,d),g=0;g<l.length;g++)b.push(a(l[g],f[g][2]-f[g][0],f[g][3]-f[g][1],f[g][0],f[g][1]))}else b=e(l,c,h,u,d);return b}}();var EP=function(){function i(e,t){Ee(this,i),this.ctx=e,this.w=e.w,this.strokeWidth=this.w.config.stroke.width,this.helpers=new b0(e),this.dynamicAnim=this.w.config.chart.animations.dynamicAnimation,this.labels=[]}return Oe(i,[{key:"draw",value:function(e){var t=this,n=this.w,r=new oe(this.ctx),s=new ki(this.ctx),o=r.group({class:"apexcharts-treemap"});if(n.globals.noData)return o;var a=[];return e.forEach(function(l){var c=l.map(function(h){return Math.abs(h)});a.push(c)}),this.negRange=this.helpers.checkColorRange(),n.config.series.forEach(function(l,c){l.data.forEach(function(h){Array.isArray(t.labels[c])||(t.labels[c]=[]),t.labels[c].push(h.x)})}),window.TreemapSquared.generate(a,n.globals.gridWidth,n.globals.gridHeight).forEach(function(l,c){var h=r.group({class:"apexcharts-series apexcharts-treemap-series",seriesName:H.escapeString(n.globals.seriesNames[c]),rel:c+1,"data:realIndex":c});if(n.config.chart.dropShadow.enabled){var u=n.config.chart.dropShadow;new un(t.ctx).dropShadow(o,u,c)}var d=r.group({class:"apexcharts-data-labels"}),f={xMin:1/0,yMin:1/0,xMax:-1/0,yMax:-1/0};l.forEach(function(se,ne){var ie=se[0],ae=se[1],Me=se[2],Re=se[3];f.xMin=Math.min(f.xMin,ie),f.yMin=Math.min(f.yMin,ae),f.xMax=Math.max(f.xMax,Me),f.yMax=Math.max(f.yMax,Re);var _e=t.helpers.getShadeColor(n.config.chart.type,c,ne,t.negRange),Je=_e.color,rt=s.fillPath({color:Je,seriesNumber:c,dataPointIndex:ne}),Ge=r.drawRect(ie,ae,Me-ie,Re-ae,n.config.plotOptions.treemap.borderRadius,"#fff",1,t.strokeWidth,n.config.plotOptions.treemap.useFillColorAsStroke?Je:n.globals.stroke.colors[c]);Ge.attr({cx:ie,cy:ae,index:c,i:c,j:ne,width:Me-ie,height:Re-ae,fill:rt}),Ge.node.classList.add("apexcharts-treemap-rect"),t.helpers.addListeners(Ge);var Mt={x:ie+(Me-ie)/2,y:ae+(Re-ae)/2,width:0,height:0},Ue={x:ie,y:ae,width:Me-ie,height:Re-ae};if(n.config.chart.animations.enabled&&!n.globals.dataChanged){var $e=1;n.globals.resized||($e=n.config.chart.animations.speed),t.animateTreemap(Ge,Mt,Ue,$e)}if(n.globals.dataChanged){var ot=1;t.dynamicAnim.enabled&&n.globals.shouldAnimate&&(ot=t.dynamicAnim.speed,n.globals.previousPaths[c]&&n.globals.previousPaths[c][ne]&&n.globals.previousPaths[c][ne].rect&&(Mt=n.globals.previousPaths[c][ne].rect),t.animateTreemap(Ge,Mt,Ue,ot))}var Ce=t.getFontSize(se),Tt=n.config.dataLabels.formatter(t.labels[c][ne],{value:n.globals.series[c][ne],seriesIndex:c,dataPointIndex:ne,w:n});n.config.plotOptions.treemap.dataLabels.format==="truncate"&&(Ce=parseInt(n.config.dataLabels.style.fontSize,10),Tt=t.truncateLabels(Tt,Ce,ie,ae,Me,Re));var Et=null;n.globals.series[c][ne]&&(Et=t.helpers.calculateDataLabels({text:Tt,x:(ie+Me)/2,y:(ae+Re)/2+t.strokeWidth/2+Ce/3,i:c,j:ne,colorProps:_e,fontSize:Ce,series:e})),n.config.dataLabels.enabled&&Et&&t.rotateToFitLabel(Et,Ce,Tt,ie,ae,Me,Re),h.add(Ge),Et!==null&&h.add(Et)});var g=n.config.plotOptions.treemap.seriesTitle;if(n.config.series.length>1&&g&&g.show){var m=n.config.series[c].name||"";if(m&&f.xMin<1/0&&f.yMin<1/0){var b=g.offsetX,y=g.offsetY,w=g.borderColor,C=g.borderWidth,M=g.borderRadius,S=g.style,O=S.color||n.config.chart.foreColor,T={left:S.padding.left,right:S.padding.right,top:S.padding.top,bottom:S.padding.bottom},I=r.getTextRects(m,S.fontSize,S.fontFamily),R=I.width+T.left+T.right,z=I.height+T.top+T.bottom,D=f.xMin+(b||0),B=f.yMin+(y||0),K=r.drawRect(D,B,R,z,M,S.background,1,C,w),J=r.drawText({x:D+T.left,y:B+T.top+.75*I.height,text:m,fontSize:S.fontSize,fontFamily:S.fontFamily,fontWeight:S.fontWeight,foreColor:O,cssClass:S.cssClass||""});h.add(K),h.add(J)}}h.add(d),o.add(h)}),o}},{key:"getFontSize",value:function(e){var t=this.w,n=function r(s){var o,a=0;if(Array.isArray(s[0]))for(o=0;o<s.length;o++)a+=r(s[o]);else for(o=0;o<s.length;o++)a+=s[o].length;return a}(this.labels)/function r(s){var o,a=0;if(Array.isArray(s[0]))for(o=0;o<s.length;o++)a+=r(s[o]);else for(o=0;o<s.length;o++)a+=1;return a}(this.labels);return function(r,s){var o=r*s,a=Math.pow(o,.5);return Math.min(a/n,parseInt(t.config.dataLabels.style.fontSize,10))}(e[2]-e[0],e[3]-e[1])}},{key:"rotateToFitLabel",value:function(e,t,n,r,s,o,a){var l=new oe(this.ctx),c=l.getTextRects(n,t);if(c.width+this.w.config.stroke.width+5>o-r&&c.width<=a-s){var h=l.rotateAroundCenter(e.node);e.node.setAttribute("transform","rotate(-90 ".concat(h.x," ").concat(h.y,") translate(").concat(c.height/3,")"))}}},{key:"truncateLabels",value:function(e,t,n,r,s,o){var a=new oe(this.ctx),l=a.getTextRects(e,t).width+this.w.config.stroke.width+5>s-n&&o-r>s-n?o-r:s-n,c=a.getTextBasedOnMaxWidth({text:e,maxWidth:l,fontSize:t});return e.length!==c.length&&l/t<5?"":c}},{key:"animateTreemap",value:function(e,t,n,r){var s=new fo(this.ctx);s.animateRect(e,t,n,r,function(){s.animationCompleted(e)})}}]),i}(),w0=86400,OP=10/w0,IP=function(){function i(e){Ee(this,i),this.ctx=e,this.w=e.w,this.timeScaleArray=[],this.utc=this.w.config.xaxis.labels.datetimeUTC}return Oe(i,[{key:"calculateTimeScaleTicks",value:function(e,t){var n=this,r=this.w;if(r.globals.allSeriesCollapsed)return r.globals.labels=[],r.globals.timescaleLabels=[],[];var s=new dn(this.ctx),o=(t-e)/864e5;this.determineInterval(o),r.globals.disableZoomIn=!1,r.globals.disableZoomOut=!1,o<OP?r.globals.disableZoomIn=!0:o>5e4&&(r.globals.disableZoomOut=!0);var a=s.getTimeUnitsfromTimestamp(e,t,this.utc),l=r.globals.gridWidth/o,c=l/24,h=c/60,u=h/60,d=Math.floor(24*o),f=Math.floor(1440*o),g=Math.floor(o*w0),m=Math.floor(o),b=Math.floor(o/30),y=Math.floor(o/365),w={minMillisecond:a.minMillisecond,minSecond:a.minSecond,minMinute:a.minMinute,minHour:a.minHour,minDate:a.minDate,minMonth:a.minMonth,minYear:a.minYear},C={firstVal:w,currentMillisecond:w.minMillisecond,currentSecond:w.minSecond,currentMinute:w.minMinute,currentHour:w.minHour,currentMonthDate:w.minDate,currentDate:w.minDate,currentMonth:w.minMonth,currentYear:w.minYear,daysWidthOnXAxis:l,hoursWidthOnXAxis:c,minutesWidthOnXAxis:h,secondsWidthOnXAxis:u,numberOfSeconds:g,numberOfMinutes:f,numberOfHours:d,numberOfDays:m,numberOfMonths:b,numberOfYears:y};switch(this.tickInterval){case"years":this.generateYearScale(C);break;case"months":case"half_year":this.generateMonthScale(C);break;case"months_days":case"months_fortnight":case"days":case"week_days":this.generateDayScale(C);break;case"hours":this.generateHourScale(C);break;case"minutes_fives":case"minutes":this.generateMinuteScale(C);break;case"seconds_tens":case"seconds_fives":case"seconds":this.generateSecondScale(C)}var M=this.timeScaleArray.map(function(S){var O={position:S.position,unit:S.unit,year:S.year,day:S.day?S.day:1,hour:S.hour?S.hour:0,month:S.month+1};return S.unit==="month"?xe(xe({},O),{},{day:1,value:S.value+1}):S.unit==="day"||S.unit==="hour"?xe(xe({},O),{},{value:S.value}):S.unit==="minute"?xe(xe({},O),{},{value:S.value,minute:S.value}):S.unit==="second"?xe(xe({},O),{},{value:S.value,minute:S.minute,second:S.second}):S});return M.filter(function(S){var O=1,T=Math.ceil(r.globals.gridWidth/120),I=S.value;r.config.xaxis.tickAmount!==void 0&&(T=r.config.xaxis.tickAmount),M.length>T&&(O=Math.floor(M.length/T));var R=!1,z=!1;switch(n.tickInterval){case"years":S.unit==="year"&&(R=!0);break;case"half_year":O=7,S.unit==="year"&&(R=!0);break;case"months":O=1,S.unit==="year"&&(R=!0);break;case"months_fortnight":O=15,S.unit!=="year"&&S.unit!=="month"||(R=!0),I===30&&(z=!0);break;case"months_days":O=10,S.unit==="month"&&(R=!0),I===30&&(z=!0);break;case"week_days":O=8,S.unit==="month"&&(R=!0);break;case"days":O=1,S.unit==="month"&&(R=!0);break;case"hours":S.unit==="day"&&(R=!0);break;case"minutes_fives":case"seconds_fives":I%5!=0&&(z=!0);break;case"seconds_tens":I%10!=0&&(z=!0)}if(n.tickInterval==="hours"||n.tickInterval==="minutes_fives"||n.tickInterval==="seconds_tens"||n.tickInterval==="seconds_fives"){if(!z)return!0}else if((I%O==0||R)&&!z)return!0})}},{key:"recalcDimensionsBasedOnFormat",value:function(e,t){var n=this.w,r=this.formatDates(e),s=this.removeOverlappingTS(r);n.globals.timescaleLabels=s.slice(),new xh(this.ctx).plotCoords()}},{key:"determineInterval",value:function(e){var t=24*e,n=60*t;switch(!0){case e/365>5:this.tickInterval="years";break;case e>800:this.tickInterval="half_year";break;case e>180:this.tickInterval="months";break;case e>90:this.tickInterval="months_fortnight";break;case e>60:this.tickInterval="months_days";break;case e>30:this.tickInterval="week_days";break;case e>2:this.tickInterval="days";break;case t>2.4:this.tickInterval="hours";break;case n>15:this.tickInterval="minutes_fives";break;case n>5:this.tickInterval="minutes";break;case n>1:this.tickInterval="seconds_tens";break;case 60*n>20:this.tickInterval="seconds_fives";break;default:this.tickInterval="seconds"}}},{key:"generateYearScale",value:function(e){var t=e.firstVal,n=e.currentMonth,r=e.currentYear,s=e.daysWidthOnXAxis,o=e.numberOfYears,a=t.minYear,l=0,c=new dn(this.ctx),h="year";if(t.minDate>1||t.minMonth>0){var u=c.determineRemainingDaysOfYear(t.minYear,t.minMonth,t.minDate);l=(c.determineDaysOfYear(t.minYear)-u+1)*s,a=t.minYear+1,this.timeScaleArray.push({position:l,value:a,unit:h,year:a,month:H.monthMod(n+1)})}else t.minDate===1&&t.minMonth===0&&this.timeScaleArray.push({position:l,value:a,unit:h,year:r,month:H.monthMod(n+1)});for(var d=a,f=l,g=0;g<o;g++)d++,f=c.determineDaysOfYear(d-1)*s+f,this.timeScaleArray.push({position:f,value:d,unit:h,year:d,month:1})}},{key:"generateMonthScale",value:function(e){var t=e.firstVal,n=e.currentMonthDate,r=e.currentMonth,s=e.currentYear,o=e.daysWidthOnXAxis,a=e.numberOfMonths,l=r,c=0,h=new dn(this.ctx),u="month",d=0;if(t.minDate>1){c=(h.determineDaysOfMonths(r+1,t.minYear)-n+1)*o,l=H.monthMod(r+1);var f=s+d,g=H.monthMod(l),m=l;l===0&&(u="year",m=f,g=1,f+=d+=1),this.timeScaleArray.push({position:c,value:m,unit:u,year:f,month:g})}else this.timeScaleArray.push({position:c,value:l,unit:u,year:s,month:H.monthMod(r)});for(var b=l+1,y=c,w=0,C=1;w<a;w++,C++){(b=H.monthMod(b))===0?(u="year",d+=1):u="month";var M=this._getYear(s,b,d);y=h.determineDaysOfMonths(b,M)*o+y;var S=b===0?M:b;this.timeScaleArray.push({position:y,value:S,unit:u,year:M,month:b===0?1:b}),b++}}},{key:"generateDayScale",value:function(e){var t=e.firstVal,n=e.currentMonth,r=e.currentYear,s=e.hoursWidthOnXAxis,o=e.numberOfDays,a=new dn(this.ctx),l="day",c=t.minDate+1,h=c,u=function(C,M,S){return C>a.determineDaysOfMonths(M+1,S)&&(h=1,l="month",f=M+=1),M},d=(24-t.minHour)*s,f=c,g=u(h,n,r);t.minHour===0&&t.minDate===1?(d=0,f=H.monthMod(t.minMonth),l="month",h=t.minDate):t.minDate!==1&&t.minHour===0&&t.minMinute===0&&(d=0,c=t.minDate,f=c,g=u(h=c,n,r),f!==1&&(l="day")),this.timeScaleArray.push({position:d,value:f,unit:l,year:this._getYear(r,g,0),month:H.monthMod(g),day:h});for(var m=d,b=0;b<o;b++){l="day",g=u(h+=1,g,this._getYear(r,g,0));var y=this._getYear(r,g,0);m=24*s+m;var w=h===1?H.monthMod(g):h;this.timeScaleArray.push({position:m,value:w,unit:l,year:y,month:H.monthMod(g),day:w})}}},{key:"generateHourScale",value:function(e){var t=e.firstVal,n=e.currentDate,r=e.currentMonth,s=e.currentYear,o=e.minutesWidthOnXAxis,a=e.numberOfHours,l=new dn(this.ctx),c="hour",h=function(O,T){return O>l.determineDaysOfMonths(T+1,s)&&(b=1,T+=1),{month:T,date:b}},u=function(O,T){return O>l.determineDaysOfMonths(T+1,s)?T+=1:T},d=60-(t.minMinute+t.minSecond/60),f=d*o,g=t.minHour+1,m=g;d===60&&(f=0,m=g=t.minHour);var b=n;m>=24&&(m=0,c="day",g=b+=1);var y=h(b,r).month;y=u(b,y),g>31&&(g=b=1),this.timeScaleArray.push({position:f,value:g,unit:c,day:b,hour:m,year:s,month:H.monthMod(y)}),m++;for(var w=f,C=0;C<a;C++){c="hour",m>=24&&(m=0,c="day",y=h(b+=1,y).month,y=u(b,y));var M=this._getYear(s,y,0);w=60*o+w;var S=m===0?b:m;this.timeScaleArray.push({position:w,value:S,unit:c,hour:m,day:b,year:M,month:H.monthMod(y)}),m++}}},{key:"generateMinuteScale",value:function(e){for(var t=e.currentMillisecond,n=e.currentSecond,r=e.currentMinute,s=e.currentHour,o=e.currentDate,a=e.currentMonth,l=e.currentYear,c=e.minutesWidthOnXAxis,h=e.secondsWidthOnXAxis,u=e.numberOfMinutes,d=r+1,f=o,g=a,m=l,b=s,y=(60-n-t/1e3)*h,w=0;w<u;w++)d>=60&&(d=0,(b+=1)===24&&(b=0)),this.timeScaleArray.push({position:y,value:d,unit:"minute",hour:b,minute:d,day:f,year:this._getYear(m,g,0),month:H.monthMod(g)}),y+=c,d++}},{key:"generateSecondScale",value:function(e){for(var t=e.currentMillisecond,n=e.currentSecond,r=e.currentMinute,s=e.currentHour,o=e.currentDate,a=e.currentMonth,l=e.currentYear,c=e.secondsWidthOnXAxis,h=e.numberOfSeconds,u=n+1,d=r,f=o,g=a,m=l,b=s,y=(1e3-t)/1e3*c,w=0;w<h;w++)u>=60&&(u=0,++d>=60&&(d=0,++b===24&&(b=0))),this.timeScaleArray.push({position:y,value:u,unit:"second",hour:b,minute:d,second:u,day:f,year:this._getYear(m,g,0),month:H.monthMod(g)}),y+=c,u++}},{key:"createRawDateString",value:function(e,t){var n=e.year;return e.month===0&&(e.month=1),n+="-"+("0"+e.month.toString()).slice(-2),e.unit==="day"?n+=e.unit==="day"?"-"+("0"+t).slice(-2):"-01":n+="-"+("0"+(e.day?e.day:"1")).slice(-2),e.unit==="hour"?n+=e.unit==="hour"?"T"+("0"+t).slice(-2):"T00":n+="T"+("0"+(e.hour?e.hour:"0")).slice(-2),e.unit==="minute"?n+=":"+("0"+t).slice(-2):n+=":"+(e.minute?("0"+e.minute).slice(-2):"00"),e.unit==="second"?n+=":"+("0"+t).slice(-2):n+=":00",this.utc&&(n+=".000Z"),n}},{key:"formatDates",value:function(e){var t=this,n=this.w;return e.map(function(r){var s=r.value.toString(),o=new dn(t.ctx),a=t.createRawDateString(r,s),l=o.getDate(o.parseDate(a));if(t.utc||(l=o.getDate(o.parseDateWithTimezone(a))),n.config.xaxis.labels.format===void 0){var c="dd MMM",h=n.config.xaxis.labels.datetimeFormatter;r.unit==="year"&&(c=h.year),r.unit==="month"&&(c=h.month),r.unit==="day"&&(c=h.day),r.unit==="hour"&&(c=h.hour),r.unit==="minute"&&(c=h.minute),r.unit==="second"&&(c=h.second),s=o.formatDate(l,c)}else s=o.formatDate(l,n.config.xaxis.labels.format);return{dateString:a,position:r.position,value:s,unit:r.unit,year:r.year,month:r.month}})}},{key:"removeOverlappingTS",value:function(e){var t,n=this,r=new oe(this.ctx),s=!1;e.length>0&&e[0].value&&e.every(function(l){return l.value.length===e[0].value.length})&&(s=!0,t=r.getTextRects(e[0].value).width);var o=0,a=e.map(function(l,c){if(c>0&&n.w.config.xaxis.labels.hideOverlappingLabels){var h=s?t:r.getTextRects(e[o].value).width,u=e[o].position;return l.position>u+h+10?(o=c,l):null}return l});return a=a.filter(function(l){return l!==null})}},{key:"_getYear",value:function(e,t,n){return e+Math.floor(t/12)+n}}]),i}(),PP=function(){function i(e,t){Ee(this,i),this.ctx=t,this.w=t.w,this.el=e}return Oe(i,[{key:"setupElements",value:function(){var e=this.w,t=e.globals,n=e.config,r=n.chart.type;t.axisCharts=["line","area","bar","rangeBar","rangeArea","candlestick","boxPlot","scatter","bubble","radar","heatmap","treemap"].includes(r),t.xyCharts=["line","area","bar","rangeBar","rangeArea","candlestick","boxPlot","scatter","bubble"].includes(r),t.isBarHorizontal=["bar","rangeBar","boxPlot"].includes(r)&&n.plotOptions.bar.horizontal,t.chartClass=".apexcharts".concat(t.chartID),t.dom.baseEl=this.el,t.dom.elWrap=document.createElement("div"),oe.setAttrs(t.dom.elWrap,{id:t.chartClass.substring(1),class:"apexcharts-canvas ".concat(t.chartClass.substring(1))}),this.el.appendChild(t.dom.elWrap),t.dom.Paper=window.SVG().addTo(t.dom.elWrap),t.dom.Paper.attr({class:"apexcharts-svg","xmlns:data":"ApexChartsNS",transform:"translate(".concat(n.chart.offsetX,", ").concat(n.chart.offsetY,")")}),t.dom.Paper.node.style.background=n.theme.mode!=="dark"||n.chart.background?n.theme.mode!=="light"||n.chart.background?n.chart.background:"#fff":"#424242",this.setSVGDimensions(),t.dom.elLegendForeign=document.createElementNS(t.SVGNS,"foreignObject"),oe.setAttrs(t.dom.elLegendForeign,{x:0,y:0,width:t.svgWidth,height:t.svgHeight}),t.dom.elLegendWrap=document.createElement("div"),t.dom.elLegendWrap.classList.add("apexcharts-legend"),t.dom.elWrap.appendChild(t.dom.elLegendWrap),t.dom.Paper.node.appendChild(t.dom.elLegendForeign),t.dom.elGraphical=t.dom.Paper.group().attr({class:"apexcharts-inner apexcharts-graphical"}),t.dom.elDefs=t.dom.Paper.defs(),t.dom.Paper.add(t.dom.elGraphical),t.dom.elGraphical.add(t.dom.elDefs)}},{key:"plotChartType",value:function(e,t){var n=this.w,r=this.ctx,s=n.config,o=n.globals,a={line:{series:[],i:[]},area:{series:[],i:[]},scatter:{series:[],i:[]},bubble:{series:[],i:[]},bar:{series:[],i:[]},candlestick:{series:[],i:[]},boxPlot:{series:[],i:[]},rangeBar:{series:[],i:[]},rangeArea:{series:[],seriesRangeEnd:[],i:[]}},l=s.chart.type||"line",c=null,h=0;o.series.forEach(function(O,T){var I=e[T].type==="column"?"bar":e[T].type||(l==="column"?"bar":l);a[I]?(I==="rangeArea"?(a[I].series.push(o.seriesRangeStart[T]),a[I].seriesRangeEnd.push(o.seriesRangeEnd[T])):a[I].series.push(O),a[I].i.push(T),I==="bar"&&(n.globals.columnSeries=a.bar)):["heatmap","treemap","pie","donut","polarArea","radialBar","radar"].includes(I)?c=I:console.warn("You have specified an unrecognized series type (".concat(I,").")),l!==I&&I!=="scatter"&&h++}),h>0&&(c&&console.warn("Chart or series type ".concat(c," cannot appear with other chart or series types.")),a.bar.series.length>0&&s.plotOptions.bar.horizontal&&(h-=a.bar.series.length,a.bar={series:[],i:[]},n.globals.columnSeries={series:[],i:[]},console.warn("Horizontal bars are not supported in a mixed/combo chart. Please turn off `plotOptions.bar.horizontal`"))),o.comboCharts||(o.comboCharts=h>0);var u=new up(r,t),d=new cp(r,t);r.pie=new v0(r);var f=new kP(r);r.rangeBar=new SP(r,t);var g=new wP(r),m=[];if(o.comboCharts){var b,y,w=new Bt(r);if(a.area.series.length>0&&(b=m).push.apply(b,Gt(w.drawSeriesByGroup(a.area,o.areaGroups,"area",u))),a.bar.series.length>0)if(s.chart.stacked){var C=new x0(r,t);m.push(C.draw(a.bar.series,a.bar.i))}else r.bar=new So(r,t),m.push(r.bar.draw(a.bar.series,a.bar.i));if(a.rangeArea.series.length>0&&m.push(u.draw(a.rangeArea.series,"rangeArea",a.rangeArea.i,a.rangeArea.seriesRangeEnd)),a.line.series.length>0&&(y=m).push.apply(y,Gt(w.drawSeriesByGroup(a.line,o.lineGroups,"line",u))),a.candlestick.series.length>0&&m.push(d.draw(a.candlestick.series,"candlestick",a.candlestick.i)),a.boxPlot.series.length>0&&m.push(d.draw(a.boxPlot.series,"boxPlot",a.boxPlot.i)),a.rangeBar.series.length>0&&m.push(r.rangeBar.draw(a.rangeBar.series,a.rangeBar.i)),a.scatter.series.length>0){var M=new up(r,t,!0);m.push(M.draw(a.scatter.series,"scatter",a.scatter.i))}if(a.bubble.series.length>0){var S=new up(r,t,!0);m.push(S.draw(a.bubble.series,"bubble",a.bubble.i))}}else switch(s.chart.type){case"line":m=u.draw(o.series,"line");break;case"area":m=u.draw(o.series,"area");break;case"bar":s.chart.stacked?m=new x0(r,t).draw(o.series):(r.bar=new So(r,t),m=r.bar.draw(o.series));break;case"candlestick":m=new cp(r,t).draw(o.series,"candlestick");break;case"boxPlot":m=new cp(r,t).draw(o.series,s.chart.type);break;case"rangeBar":m=r.rangeBar.draw(o.series);break;case"rangeArea":m=u.draw(o.seriesRangeStart,"rangeArea",void 0,o.seriesRangeEnd);break;case"heatmap":m=new vP(r,t).draw(o.series);break;case"treemap":m=new EP(r,t).draw(o.series);break;case"pie":case"donut":case"polarArea":m=r.pie.draw(o.series);break;case"radialBar":m=f.draw(o.series);break;case"radar":m=g.draw(o.series);break;default:m=u.draw(o.series)}return m}},{key:"setSVGDimensions",value:function(){var e=this.w,t=e.globals,n=e.config;n.chart.width=n.chart.width||"100%",n.chart.height=n.chart.height||"auto",t.svgWidth=n.chart.width,t.svgHeight=n.chart.height;var r=H.getDimensions(this.el),s=n.chart.width.toString().split(/[0-9]+/g).pop();s==="%"?H.isNumber(r[0])&&(r[0].width===0&&(r=H.getDimensions(this.el.parentNode)),t.svgWidth=r[0]*parseInt(n.chart.width,10)/100):s!=="px"&&s!==""||(t.svgWidth=parseInt(n.chart.width,10));var o=String(n.chart.height).toString().split(/[0-9]+/g).pop();if(t.svgHeight!=="auto"&&t.svgHeight!=="")if(o==="%"){var a=H.getDimensions(this.el.parentNode);t.svgHeight=a[1]*parseInt(n.chart.height,10)/100}else t.svgHeight=parseInt(n.chart.height,10);else t.svgHeight=t.axisCharts?t.svgWidth/1.61:t.svgWidth/1.2;if(t.svgWidth=Math.max(t.svgWidth,0),t.svgHeight=Math.max(t.svgHeight,0),oe.setAttrs(t.dom.Paper.node,{width:t.svgWidth,height:t.svgHeight}),o!=="%"){var l=n.chart.sparkline.enabled?0:t.axisCharts?n.chart.parentHeightOffset:0;t.dom.Paper.node.parentNode.parentNode.style.minHeight="".concat(t.svgHeight+l,"px")}t.dom.elWrap.style.width="".concat(t.svgWidth,"px"),t.dom.elWrap.style.height="".concat(t.svgHeight,"px")}},{key:"shiftGraphPosition",value:function(){var e=this.w.globals,t=e.translateY,n=e.translateX;oe.setAttrs(e.dom.elGraphical.node,{transform:"translate(".concat(n,", ").concat(t,")")})}},{key:"resizeNonAxisCharts",value:function(){var e=this.w,t=e.globals,n=0,r=e.config.chart.sparkline.enabled?1:15;r+=e.config.grid.padding.bottom,["top","bottom"].includes(e.config.legend.position)&&e.config.legend.show&&!e.config.legend.floating&&(n=new d0(this.ctx).legendHelpers.getLegendDimensions().clwh+7);var s=e.globals.dom.baseEl.querySelector(".apexcharts-radialbar, .apexcharts-pie"),o=2.05*e.globals.radialSize;if(s&&!e.config.chart.sparkline.enabled&&e.config.plotOptions.radialBar.startAngle!==0){var a=H.getBoundingClientRect(s);o=a.bottom;var l=a.bottom-a.top;o=Math.max(2.05*e.globals.radialSize,l)}var c=Math.ceil(o+t.translateY+n+r);t.dom.elLegendForeign&&t.dom.elLegendForeign.setAttribute("height",c),e.config.chart.height&&String(e.config.chart.height).includes("%")||(t.dom.elWrap.style.height="".concat(c,"px"),oe.setAttrs(t.dom.Paper.node,{height:c}),t.dom.Paper.node.parentNode.parentNode.style.minHeight="".concat(c,"px"))}},{key:"coreCalculations",value:function(){new op(this.ctx).init()}},{key:"resetGlobals",value:function(){var e=this,t=function(){return e.w.config.series.map(function(){return[]})},n=new l0,r=this.w.globals;n.initGlobalVars(r),r.seriesXvalues=t(),r.seriesYvalues=t()}},{key:"isMultipleY",value:function(){return!!(Array.isArray(this.w.config.yaxis)&&this.w.config.yaxis.length>1)&&(this.w.globals.isMultipleYAxis=!0,!0)}},{key:"xySettings",value:function(){var e=this.w,t=null;if(e.globals.axisCharts){if(e.config.xaxis.crosshairs.position==="back"&&new lp(this.ctx).drawXCrosshairs(),e.config.yaxis[0].crosshairs.position==="back"&&new lp(this.ctx).drawYCrosshairs(),e.config.xaxis.type==="datetime"&&e.config.xaxis.labels.formatter===void 0){this.ctx.timeScale=new IP(this.ctx);var n=[];isFinite(e.globals.minX)&&isFinite(e.globals.maxX)&&!e.globals.isBarHorizontal?n=this.ctx.timeScale.calculateTimeScaleTicks(e.globals.minX,e.globals.maxX):e.globals.isBarHorizontal&&(n=this.ctx.timeScale.calculateTimeScaleTicks(e.globals.minY,e.globals.maxY)),this.ctx.timeScale.recalcDimensionsBasedOnFormat(n)}t=new Bt(this.ctx).getCalculatedRatios()}return t}},{key:"updateSourceChart",value:function(e){this.ctx.w.globals.selection=void 0,this.ctx.updateHelpers._updateOptions({chart:{selection:{xaxis:{min:e.w.globals.minX,max:e.w.globals.maxX}}}},!1,!1)}},{key:"setupBrushHandler",value:function(){var e=this,t=this.ctx,n=this.w;if(n.config.chart.brush.enabled&&typeof n.config.chart.events.selection!="function"){var r=Array.isArray(n.config.chart.brush.targets)?n.config.chart.brush.targets:[n.config.chart.brush.target];r.forEach(function(s){var o=t.constructor.getChartByID(s);o.w.globals.brushSource=e.ctx,typeof o.w.config.chart.events.zoomed!="function"&&(o.w.config.chart.events.zoomed=function(){return e.updateSourceChart(o)}),typeof o.w.config.chart.events.scrolled!="function"&&(o.w.config.chart.events.scrolled=function(){return e.updateSourceChart(o)})}),n.config.chart.events.selection=function(s,o){r.forEach(function(a){t.constructor.getChartByID(a).ctx.updateHelpers._updateOptions({xaxis:{min:o.xaxis.min,max:o.xaxis.max}},!1,!1,!1,!1)})}}}}]),i}(),LP=function(){function i(e){Ee(this,i),this.ctx=e,this.w=e.w}return Oe(i,[{key:"_updateOptions",value:function(e){var t=this,n=arguments.length>1&&arguments[1]!==void 0&&arguments[1],r=!(arguments.length>2&&arguments[2]!==void 0)||arguments[2],s=!(arguments.length>3&&arguments[3]!==void 0)||arguments[3],o=arguments.length>4&&arguments[4]!==void 0&&arguments[4];return new Promise(function(a){var l=[t.ctx];s&&(l=t.ctx.getSyncedCharts()),t.ctx.w.globals.isExecCalled&&(l=[t.ctx],t.ctx.w.globals.isExecCalled=!1),l.forEach(function(c,h){var u=c.w;if(u.globals.shouldAnimate=r,n||(u.globals.resized=!0,u.globals.dataChanged=!0,r&&c.series.getPreviousPaths()),e&&uo(e)==="object"&&(c.config=new Va(e),e=Bt.extendArrayProps(c.config,e,u),c.w.globals.chartID!==t.ctx.w.globals.chartID&&delete e.series,u.config=H.extend(u.config,e),o&&(u.globals.lastXAxis=e.xaxis?H.clone(e.xaxis):[],u.globals.lastYAxis=e.yaxis?H.clone(e.yaxis):[],u.globals.initialConfig=H.extend({},u.config),u.globals.initialSeries=H.clone(u.config.series),e.series))){for(var d=0;d<u.globals.collapsedSeriesIndices.length;d++){var f=u.config.series[u.globals.collapsedSeriesIndices[d]];u.globals.collapsedSeries[d].data=u.globals.axisCharts?f.data.slice():f}for(var g=0;g<u.globals.ancillaryCollapsedSeriesIndices.length;g++){var m=u.config.series[u.globals.ancillaryCollapsedSeriesIndices[g]];u.globals.ancillaryCollapsedSeries[g].data=u.globals.axisCharts?m.data.slice():m}c.series.emptyCollapsedSeries(u.config.series)}return c.update(e).then(function(){h===l.length-1&&a(c)})})})}},{key:"_updateSeries",value:function(e,t){var n=this,r=arguments.length>2&&arguments[2]!==void 0&&arguments[2];return new Promise(function(s){var o,a=n.w;return a.globals.shouldAnimate=t,a.globals.dataChanged=!0,t&&n.ctx.series.getPreviousPaths(),a.globals.axisCharts?((o=e.map(function(l,c){return n._extendSeries(l,c)})).length===0&&(o=[{data:[]}]),a.config.series=o):a.config.series=e.slice(),r&&(a.globals.initialConfig.series=H.clone(a.config.series),a.globals.initialSeries=H.clone(a.config.series)),n.ctx.update().then(function(){s(n.ctx)})})}},{key:"_extendSeries",value:function(e,t){var n=this.w,r=n.config.series[t];return xe(xe({},n.config.series[t]),{},{name:e.name?e.name:r==null?void 0:r.name,color:e.color?e.color:r==null?void 0:r.color,type:e.type?e.type:r==null?void 0:r.type,group:e.group?e.group:r==null?void 0:r.group,hidden:e.hidden!==void 0?e.hidden:r==null?void 0:r.hidden,data:e.data?e.data:r==null?void 0:r.data,zIndex:e.zIndex!==void 0?e.zIndex:t})}},{key:"toggleDataPointSelection",value:function(e,t){var n=this.w,r=null,s=".apexcharts-series[data\\:realIndex='".concat(e,"']");return n.globals.axisCharts?r=n.globals.dom.Paper.findOne("".concat(s," path[j='").concat(t,"'], ").concat(s," circle[j='").concat(t,"'], ").concat(s," rect[j='").concat(t,"']")):t===void 0&&(r=n.globals.dom.Paper.findOne("".concat(s," path[j='").concat(e,"']")),n.config.chart.type!=="pie"&&n.config.chart.type!=="polarArea"&&n.config.chart.type!=="donut"||this.ctx.pie.pieClicked(e)),r?(new oe(this.ctx).pathMouseDown(r,null),r.node?r.node:null):(console.warn("toggleDataPointSelection: Element not found"),null)}},{key:"forceXAxisUpdate",value:function(e){var t=this.w;if(["min","max"].forEach(function(r){e.xaxis[r]!==void 0&&(t.config.xaxis[r]=e.xaxis[r],t.globals.lastXAxis[r]=e.xaxis[r])}),e.xaxis.categories&&e.xaxis.categories.length&&(t.config.xaxis.categories=e.xaxis.categories),t.config.xaxis.convertedCatToNumeric){var n=new ja(e);e=n.convertCatToNumericXaxis(e,this.ctx)}return e}},{key:"forceYAxisUpdate",value:function(e){return e.chart&&e.chart.stacked&&e.chart.stackType==="100%"&&(Array.isArray(e.yaxis)?e.yaxis.forEach(function(t,n){e.yaxis[n].min=0,e.yaxis[n].max=100}):(e.yaxis.min=0,e.yaxis.max=100)),e}},{key:"revertDefaultAxisMinMax",value:function(e){var t=this,n=this.w,r=n.globals.lastXAxis,s=n.globals.lastYAxis;e&&e.xaxis&&(r=e.xaxis),e&&e.yaxis&&(s=e.yaxis),n.config.xaxis.min=r.min,n.config.xaxis.max=r.max;var o=function(a){s[a]!==void 0&&(n.config.yaxis[a].min=s[a].min,n.config.yaxis[a].max=s[a].max)};n.config.yaxis.map(function(a,l){n.globals.zoomed||s[l]!==void 0?o(l):t.ctx.opts.yaxis[l]!==void 0&&(a.min=t.ctx.opts.yaxis[l].min,a.max=t.ctx.opts.yaxis[l].max)})}}]),i}();(function(){function i(){for(var s=arguments.length>0&&arguments[0]!==u?arguments[0]:[],o=arguments.length>1?arguments[1]:u,a=arguments.length>2?arguments[2]:u,l=arguments.length>3?arguments[3]:u,c=arguments.length>4?arguments[4]:u,h=arguments.length>5?arguments[5]:u,u=arguments.length>6?arguments[6]:u,d=s.slice(o,a||u),f=l.slice(c,h||u),g=0,m={pos:[0,0],start:[0,0]},b={pos:[0,0],start:[0,0]};d[g]=e.call(m,d[g]),f[g]=e.call(b,f[g]),d[g][0]!=f[g][0]||d[g][0]=="M"||d[g][0]=="A"&&(d[g][4]!=f[g][4]||d[g][5]!=f[g][5])?(Array.prototype.splice.apply(d,[g,1].concat(n.call(m,d[g]))),Array.prototype.splice.apply(f,[g,1].concat(n.call(b,f[g])))):(d[g]=t.call(m,d[g]),f[g]=t.call(b,f[g])),!(++g==d.length&&g==f.length);)g==d.length&&d.push(["C",m.pos[0],m.pos[1],m.pos[0],m.pos[1],m.pos[0],m.pos[1]]),g==f.length&&f.push(["C",b.pos[0],b.pos[1],b.pos[0],b.pos[1],b.pos[0],b.pos[1]]);return{start:d,dest:f}}function e(s){switch(s[0]){case"z":case"Z":s[0]="L",s[1]=this.start[0],s[2]=this.start[1];break;case"H":s[0]="L",s[2]=this.pos[1];break;case"V":s[0]="L",s[2]=s[1],s[1]=this.pos[0];break;case"T":s[0]="Q",s[3]=s[1],s[4]=s[2],s[1]=this.reflection[1],s[2]=this.reflection[0];break;case"S":s[0]="C",s[6]=s[4],s[5]=s[3],s[4]=s[2],s[3]=s[1],s[2]=this.reflection[1],s[1]=this.reflection[0]}return s}function t(s){var o=s.length;return this.pos=[s[o-2],s[o-1]],"SCQT".indexOf(s[0])!=-1&&(this.reflection=[2*this.pos[0]-s[o-4],2*this.pos[1]-s[o-3]]),s}function n(s){var o=[s];switch(s[0]){case"M":return this.pos=this.start=[s[1],s[2]],o;case"L":s[5]=s[3]=s[1],s[6]=s[4]=s[2],s[1]=this.pos[0],s[2]=this.pos[1];break;case"Q":s[6]=s[4],s[5]=s[3],s[4]=1*s[4]/3+2*s[2]/3,s[3]=1*s[3]/3+2*s[1]/3,s[2]=1*this.pos[1]/3+2*s[2]/3,s[1]=1*this.pos[0]/3+2*s[1]/3;break;case"A":o=function(a,l){var c,h,u,d,f,g,m,b,y,w,C,M,S,O,T,I,R,z,D,B,K,J,se,ne,ie,ae,Me=Math.abs(l[1]),Re=Math.abs(l[2]),_e=l[3]%360,Je=l[4],rt=l[5],Ge=l[6],Mt=l[7],Ue=new mt(a),$e=new mt(Ge,Mt),ot=[];if(Me===0||Re===0||Ue.x===$e.x&&Ue.y===$e.y)return[["C",Ue.x,Ue.y,$e.x,$e.y,$e.x,$e.y]];for(c=new mt((Ue.x-$e.x)/2,(Ue.y-$e.y)/2).transform(new Fe().rotate(_e)),h=c.x*c.x/(Me*Me)+c.y*c.y/(Re*Re),h>1&&(Me*=h=Math.sqrt(h),Re*=h),u=new Fe().rotate(_e).scale(1/Me,1/Re).rotate(-_e),Ue=Ue.transform(u),$e=$e.transform(u),d=[$e.x-Ue.x,$e.y-Ue.y],g=d[0]*d[0]+d[1]*d[1],f=Math.sqrt(g),d[0]/=f,d[1]/=f,m=g<4?Math.sqrt(1-g/4):0,Je===rt&&(m*=-1),b=new mt(($e.x+Ue.x)/2+m*-d[1],($e.y+Ue.y)/2+m*d[0]),y=new mt(Ue.x-b.x,Ue.y-b.y),w=new mt($e.x-b.x,$e.y-b.y),C=Math.acos(y.x/Math.sqrt(y.x*y.x+y.y*y.y)),y.y<0&&(C*=-1),M=Math.acos(w.x/Math.sqrt(w.x*w.x+w.y*w.y)),w.y<0&&(M*=-1),rt&&C>M&&(M+=2*Math.PI),!rt&&C<M&&(M-=2*Math.PI),O=Math.ceil(2*Math.abs(C-M)/Math.PI),I=[],R=C,S=(M-C)/O,T=4*Math.tan(S/4)/3,K=0;K<=O;K++)D=Math.cos(R),z=Math.sin(R),B=new mt(b.x+D,b.y+z),I[K]=[new mt(B.x+T*z,B.y-T*D),B,new mt(B.x-T*z,B.y+T*D)],R+=S;for(I[0][0]=I[0][1].clone(),I[I.length-1][2]=I[I.length-1][1].clone(),u=new Fe().rotate(_e).scale(Me,Re).rotate(-_e),K=0,J=I.length;K<J;K++)I[K][0]=I[K][0].transform(u),I[K][1]=I[K][1].transform(u),I[K][2]=I[K][2].transform(u);for(K=1,J=I.length;K<J;K++)se=(B=I[K-1][2]).x,ne=B.y,ie=(B=I[K][0]).x,ae=B.y,Ge=(B=I[K][1]).x,Mt=B.y,ot.push(["C",se,ne,ie,ae,Ge,Mt]);return ot}(this.pos,s),s=o[0]}return s[0]="C",this.pos=[s[5],s[6]],this.reflection=[2*s[5]-s[3],2*s[6]-s[4]],o}function r(){var s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],o=arguments.length>1?arguments[1]:void 0;if(o===!1)return!1;for(var a=o,l=s.length;a<l;++a)if(s[a][0]=="M")return a;return!1}Ye(vi,{morph:function(s,o,a,l,c){for(var h=this.parse(s),u=this.parse(o),d=0,f=0,g=!1,m=!1;d!==!1||f!==!1;){var b;g=r(h,d!==!1&&d+1),m=r(u,f!==!1&&f+1),d===!1&&(d=(b=new vi(y.start).bbox()).height==0||b.width==0?h.push(h[0])-1:h.push(["M",b.x+b.width/2,b.y+b.height/2])-1),f===!1&&(f=(b=new vi(y.dest).bbox()).height==0||b.width==0?u.push(u[0])-1:u.push(["M",b.x+b.width/2,b.y+b.height/2])-1);var y=i(h,d,g,u,f,m);h=h.slice(0,d).concat(y.start,g===!1?[]:h.slice(g)),u=u.slice(0,f).concat(y.dest,m===!1?[]:u.slice(m)),d=g!==!1&&d+y.start.length,f=m!==!1&&f+y.dest.length}this._array=h,this.destination=new vi,this.destination._array=u;var w=this.fromArray(h.map(function(C,M){var S=u[M].map(function(O,T){return T===0?O:l.step(C[T],u[M][T],a,c[M],c)});return S}));return w}})})();const k0=i=>(i.changedTouches&&(i=i.changedTouches[0]),{x:i.clientX,y:i.clientY});class RP{constructor(e){e.remember("_draggable",this),this.el=e,this.drag=this.drag.bind(this),this.startDrag=this.startDrag.bind(this),this.endDrag=this.endDrag.bind(this)}init(e){e?(this.el.on("mousedown.drag",this.startDrag),this.el.on("touchstart.drag",this.startDrag,{passive:!1})):(this.el.off("mousedown.drag"),this.el.off("touchstart.drag"))}startDrag(e){const t=!e.type.indexOf("mouse");if(t&&e.which!==1&&e.buttons!==0||this.el.dispatch("beforedrag",{event:e,handler:this}).defaultPrevented)return;e.preventDefault(),e.stopPropagation(),this.init(!1),this.box=this.el.bbox(),this.lastClick=this.el.point(k0(e));const n=(t?"mouseup":"touchend")+".drag";or(window,(t?"mousemove":"touchmove")+".drag",this.drag,this,{passive:!1}),or(window,n,this.endDrag,this,{passive:!1}),this.el.fire("dragstart",{event:e,handler:this,box:this.box})}drag(e){const{box:t,lastClick:n}=this,r=this.el.point(k0(e)),s=r.x-n.x,o=r.y-n.y;if(!s&&!o)return t;const a=t.x+s,l=t.y+o;this.box=new Ft(a,l,t.w,t.h),this.lastClick=r,this.el.dispatch("dragmove",{event:e,handler:this,box:this.box}).defaultPrevented||this.move(a,l)}move(e,t){this.el.type==="svg"?Fr.prototype.move.call(this.el,e,t):this.el.move(e,t)}endDrag(e){this.drag(e),this.el.fire("dragend",{event:e,handler:this,box:this.box}),ai(window,"mousemove.drag"),ai(window,"touchmove.drag"),ai(window,"mouseup.drag"),ai(window,"touchend.drag"),this.init(!0)}}/*!
    * @svgdotjs/svg.select.js - An extension of svg.js which allows to select elements with mouse
    * @version 4.0.1
    * https://github.com/svgdotjs/svg.select.js
    *
    * @copyright Ulrich-Matthias Schfer
    * @license MIT
    *
    * BUILT: Mon Jul 01 2024 15:04:42 GMT+0200 (Central European Summer Time)
    */function dp(i,e,t,n=null){return function(r){r.preventDefault(),r.stopPropagation();var s=r.pageX||r.touches[0].pageX,o=r.pageY||r.touches[0].pageY;e.fire(i,{x:s,y:o,event:r,index:n,points:t})}}function fp([i,e],{a:t,b:n,c:r,d:s,e:o,f:a}){return[i*t+e*r+o,i*n+e*s+a]}Ye(hn,{draggable(i=!0){return(this.remember("_draggable")||new RP(this)).init(i),this}});let S0=class{constructor(i){this.el=i,i.remember("_selectHandler",this),this.selection=new Fr,this.order=["lt","t","rt","r","rb","b","lb","l","rot"],this.mutationHandler=this.mutationHandler.bind(this);const e=Na();this.observer=new e.MutationObserver(this.mutationHandler)}init(i){this.createHandle=i.createHandle||this.createHandleFn,this.createRot=i.createRot||this.createRotFn,this.updateHandle=i.updateHandle||this.updateHandleFn,this.updateRot=i.updateRot||this.updateRotFn,this.el.root().put(this.selection),this.updatePoints(),this.createSelection(),this.createResizeHandles(),this.updateResizeHandles(),this.createRotationHandle(),this.updateRotationHandle(),this.observer.observe(this.el.node,{attributes:!0})}active(i,e){if(!i)return this.selection.clear().remove(),void this.observer.disconnect();this.init(e)}createSelection(){this.selection.polygon(this.handlePoints).addClass("svg_select_shape")}updateSelection(){this.selection.get(0).plot(this.handlePoints)}createResizeHandles(){this.handlePoints.forEach((i,e,t)=>{const n=this.order[e];this.createHandle.call(this,this.selection,i,e,t,n),this.selection.get(e+1).addClass("svg_select_handle svg_select_handle_"+n).on("mousedown.selection touchstart.selection",dp(n,this.el,this.handlePoints,e))})}createHandleFn(i){i.polyline()}updateHandleFn(i,e,t,n){const r=n.at(t-1),s=n[(t+1)%n.length],o=e,a=[o[0]-r[0],o[1]-r[1]],l=[o[0]-s[0],o[1]-s[1]],c=Math.sqrt(a[0]*a[0]+a[1]*a[1]),h=Math.sqrt(l[0]*l[0]+l[1]*l[1]),u=[a[0]/c,a[1]/c],d=[l[0]/h,l[1]/h],f=[o[0]-10*u[0],o[1]-10*u[1]],g=[o[0]-10*d[0],o[1]-10*d[1]];i.plot([f,o,g])}updateResizeHandles(){this.handlePoints.forEach((i,e,t)=>{const n=this.order[e];this.updateHandle.call(this,this.selection.get(e+1),i,e,t,n)})}createRotFn(i){i.line(),i.circle(5)}getPoint(i){return this.handlePoints[this.order.indexOf(i)]}getPointHandle(i){return this.selection.get(this.order.indexOf(i)+1)}updateRotFn(i,e){const t=this.getPoint("t");i.get(0).plot(t[0],t[1],e[0],e[1]),i.get(1).center(e[0],e[1])}createRotationHandle(){const i=this.selection.group().addClass("svg_select_handle_rot").on("mousedown.selection touchstart.selection",dp("rot",this.el,this.handlePoints));this.createRot.call(this,i)}updateRotationHandle(){const i=this.selection.findOne("g.svg_select_handle_rot");this.updateRot(i,this.rotationPoint,this.handlePoints)}updatePoints(){const i=this.el.bbox(),e=this.el.parent().screenCTM().inverseO().multiplyO(this.el.screenCTM());this.handlePoints=this.getHandlePoints(i).map(t=>fp(t,e)),this.rotationPoint=fp(this.getRotationPoint(i),e)}getHandlePoints({x:i,x2:e,y:t,y2:n,cx:r,cy:s}=this.el.bbox()){return[[i,t],[r,t],[e,t],[e,s],[e,n],[r,n],[i,n],[i,s]]}getRotationPoint({y:i,cx:e}=this.el.bbox()){return[e,i-20]}mutationHandler(){this.updatePoints(),this.updateSelection(),this.updateResizeHandles(),this.updateRotationHandle()}};const C0=i=>function(e=!0,t={}){typeof e=="object"&&(t=e,e=!0);let n=this.remember("_"+i.name);return n||(e.prototype instanceof S0?(n=new e(this),e=!0):n=new i(this),this.remember("_"+i.name,n)),n.active(e,t),this};/*!
    * @svgdotjs/svg.resize.js - An extension for svg.js which allows to resize elements which are selected
    * @version 2.0.4
    * https://github.com/svgdotjs/svg.resize.js
    *
    * @copyright [object Object]
    * @license MIT
    *
    * BUILT: Fri Sep 13 2024 12:43:14 GMT+0200 (Central European Summer Time)
    *//*!
    * @svgdotjs/svg.select.js - An extension of svg.js which allows to select elements with mouse
    * @version 4.0.1
    * https://github.com/svgdotjs/svg.select.js
    *
    * @copyright Ulrich-Matthias Schfer
    * @license MIT
    *
    * BUILT: Mon Jul 01 2024 15:04:42 GMT+0200 (Central European Summer Time)
    */function pp(i,e,t,n=null){return function(r){r.preventDefault(),r.stopPropagation();var s=r.pageX||r.touches[0].pageX,o=r.pageY||r.touches[0].pageY;e.fire(i,{x:s,y:o,event:r,index:n,points:t})}}function gp([i,e],{a:t,b:n,c:r,d:s,e:o,f:a}){return[i*t+e*r+o,i*n+e*s+a]}Ye(hn,{select:C0(S0)}),Ye([Ts,Es,Cs],{pointSelect:C0(class{constructor(i){this.el=i,i.remember("_pointSelectHandler",this),this.selection=new Fr,this.order=["lt","t","rt","r","rb","b","lb","l","rot"],this.mutationHandler=this.mutationHandler.bind(this);const e=Na();this.observer=new e.MutationObserver(this.mutationHandler)}init(i){this.createHandle=i.createHandle||this.createHandleFn,this.updateHandle=i.updateHandle||this.updateHandleFn,this.el.root().put(this.selection),this.updatePoints(),this.createSelection(),this.createPointHandles(),this.updatePointHandles(),this.observer.observe(this.el.node,{attributes:!0})}active(i,e){if(!i)return this.selection.clear().remove(),void this.observer.disconnect();this.init(e)}createSelection(){this.selection.polygon(this.points).addClass("svg_select_shape_pointSelect")}updateSelection(){this.selection.get(0).plot(this.points)}createPointHandles(){this.points.forEach((i,e,t)=>{this.createHandle.call(this,this.selection,i,e,t),this.selection.get(e+1).addClass("svg_select_handle_point").on("mousedown.selection touchstart.selection",dp("point",this.el,this.points,e))})}createHandleFn(i){i.circle(5)}updateHandleFn(i,e){i.center(e[0],e[1])}updatePointHandles(){this.points.forEach((i,e,t)=>{this.updateHandle.call(this,this.selection.get(e+1),i,e,t)})}updatePoints(){const i=this.el.parent().screenCTM().inverseO().multiplyO(this.el.screenCTM());this.points=this.el.array().map(e=>fp(e,i))}mutationHandler(){this.updatePoints(),this.updateSelection(),this.updatePointHandles()}})});class A0{constructor(e){this.el=e,e.remember("_selectHandler",this),this.selection=new Fr,this.order=["lt","t","rt","r","rb","b","lb","l","rot"],this.mutationHandler=this.mutationHandler.bind(this);const t=Na();this.observer=new t.MutationObserver(this.mutationHandler)}init(e){this.createHandle=e.createHandle||this.createHandleFn,this.createRot=e.createRot||this.createRotFn,this.updateHandle=e.updateHandle||this.updateHandleFn,this.updateRot=e.updateRot||this.updateRotFn,this.el.root().put(this.selection),this.updatePoints(),this.createSelection(),this.createResizeHandles(),this.updateResizeHandles(),this.createRotationHandle(),this.updateRotationHandle(),this.observer.observe(this.el.node,{attributes:!0})}active(e,t){if(!e)return this.selection.clear().remove(),void this.observer.disconnect();this.init(t)}createSelection(){this.selection.polygon(this.handlePoints).addClass("svg_select_shape")}updateSelection(){this.selection.get(0).plot(this.handlePoints)}createResizeHandles(){this.handlePoints.forEach((e,t,n)=>{const r=this.order[t];this.createHandle.call(this,this.selection,e,t,n,r),this.selection.get(t+1).addClass("svg_select_handle svg_select_handle_"+r).on("mousedown.selection touchstart.selection",pp(r,this.el,this.handlePoints,t))})}createHandleFn(e){e.polyline()}updateHandleFn(e,t,n,r){const s=r.at(n-1),o=r[(n+1)%r.length],a=t,l=[a[0]-s[0],a[1]-s[1]],c=[a[0]-o[0],a[1]-o[1]],h=Math.sqrt(l[0]*l[0]+l[1]*l[1]),u=Math.sqrt(c[0]*c[0]+c[1]*c[1]),d=[l[0]/h,l[1]/h],f=[c[0]/u,c[1]/u],g=[a[0]-10*d[0],a[1]-10*d[1]],m=[a[0]-10*f[0],a[1]-10*f[1]];e.plot([g,a,m])}updateResizeHandles(){this.handlePoints.forEach((e,t,n)=>{const r=this.order[t];this.updateHandle.call(this,this.selection.get(t+1),e,t,n,r)})}createRotFn(e){e.line(),e.circle(5)}getPoint(e){return this.handlePoints[this.order.indexOf(e)]}getPointHandle(e){return this.selection.get(this.order.indexOf(e)+1)}updateRotFn(e,t){const n=this.getPoint("t");e.get(0).plot(n[0],n[1],t[0],t[1]),e.get(1).center(t[0],t[1])}createRotationHandle(){const e=this.selection.group().addClass("svg_select_handle_rot").on("mousedown.selection touchstart.selection",pp("rot",this.el,this.handlePoints));this.createRot.call(this,e)}updateRotationHandle(){const e=this.selection.findOne("g.svg_select_handle_rot");this.updateRot(e,this.rotationPoint,this.handlePoints)}updatePoints(){const e=this.el.bbox(),t=this.el.parent().screenCTM().inverseO().multiplyO(this.el.screenCTM());this.handlePoints=this.getHandlePoints(e).map(n=>gp(n,t)),this.rotationPoint=gp(this.getRotationPoint(e),t)}getHandlePoints({x:e,x2:t,y:n,y2:r,cx:s,cy:o}=this.el.bbox()){return[[e,n],[s,n],[t,n],[t,o],[t,r],[s,r],[e,r],[e,o]]}getRotationPoint({y:e,cx:t}=this.el.bbox()){return[t,e-20]}mutationHandler(){this.updatePoints(),this.updateSelection(),this.updateResizeHandles(),this.updateRotationHandle()}}const M0=i=>function(e=!0,t={}){typeof e=="object"&&(t=e,e=!0);let n=this.remember("_"+i.name);return n||(e.prototype instanceof A0?(n=new e(this),e=!0):n=new i(this),this.remember("_"+i.name,n)),n.active(e,t),this};Ye(hn,{select:M0(A0)}),Ye([Ts,Es,Cs],{pointSelect:M0(class{constructor(i){this.el=i,i.remember("_pointSelectHandler",this),this.selection=new Fr,this.order=["lt","t","rt","r","rb","b","lb","l","rot"],this.mutationHandler=this.mutationHandler.bind(this);const e=Na();this.observer=new e.MutationObserver(this.mutationHandler)}init(i){this.createHandle=i.createHandle||this.createHandleFn,this.updateHandle=i.updateHandle||this.updateHandleFn,this.el.root().put(this.selection),this.updatePoints(),this.createSelection(),this.createPointHandles(),this.updatePointHandles(),this.observer.observe(this.el.node,{attributes:!0})}active(i,e){if(!i)return this.selection.clear().remove(),void this.observer.disconnect();this.init(e)}createSelection(){this.selection.polygon(this.points).addClass("svg_select_shape_pointSelect")}updateSelection(){this.selection.get(0).plot(this.points)}createPointHandles(){this.points.forEach((i,e,t)=>{this.createHandle.call(this,this.selection,i,e,t),this.selection.get(e+1).addClass("svg_select_handle_point").on("mousedown.selection touchstart.selection",pp("point",this.el,this.points,e))})}createHandleFn(i){i.circle(5)}updateHandleFn(i,e){i.center(e[0],e[1])}updatePointHandles(){this.points.forEach((i,e,t)=>{this.updateHandle.call(this,this.selection.get(e+1),i,e,t)})}updatePoints(){const i=this.el.parent().screenCTM().inverseO().multiplyO(this.el.screenCTM());this.points=this.el.array().map(e=>gp(e,i))}mutationHandler(){this.updatePoints(),this.updateSelection(),this.updatePointHandles()}})});const bh=i=>(i.changedTouches&&(i=i.changedTouches[0]),{x:i.clientX,y:i.clientY}),T0=i=>{let e=1/0,t=1/0,n=-1/0,r=-1/0;for(let s=0;s<i.length;s++){const o=i[s];e=Math.min(e,o[0]),t=Math.min(t,o[1]),n=Math.max(n,o[0]),r=Math.max(r,o[1])}return new Ft(e,t,n-e,r-t)};class E0{constructor(e){this.el=e,e.remember("_ResizeHandler",this),this.lastCoordinates=null,this.eventType="",this.lastEvent=null,this.handleResize=this.handleResize.bind(this),this.resize=this.resize.bind(this),this.endResize=this.endResize.bind(this),this.rotate=this.rotate.bind(this),this.movePoint=this.movePoint.bind(this)}active(e,t){this.preserveAspectRatio=t.preserveAspectRatio??!1,this.aroundCenter=t.aroundCenter??!1,this.grid=t.grid??0,this.degree=t.degree??0,this.el.off(".resize"),e&&(this.el.on(["lt.resize","rt.resize","rb.resize","lb.resize","t.resize","r.resize","b.resize","l.resize","rot.resize","point.resize"],this.handleResize),this.lastEvent&&(this.eventType==="rot"?this.rotate(this.lastEvent):this.eventType==="point"?this.movePoint(this.lastEvent):this.resize(this.lastEvent)))}handleResize(e){this.eventType=e.type;const{event:t,index:n,points:r}=e.detail,s=!t.type.indexOf("mouse");if(s&&(t.which||t.buttons)!==1||this.el.dispatch("beforeresize",{event:e,handler:this}).defaultPrevented)return;this.box=this.el.bbox(),this.startPoint=this.el.point(bh(t)),this.index=n,this.points=r.slice();const o=(s?"mousemove":"touchmove")+".resize",a=(s?"mouseup":"touchcancel.resize touchend")+".resize";e.type==="point"?or(window,o,this.movePoint):e.type==="rot"?or(window,o,this.rotate):or(window,o,this.resize),or(window,a,this.endResize)}resize(e){this.lastEvent=e;const t=this.snapToGrid(this.el.point(bh(e)));let n=t.x-this.startPoint.x,r=t.y-this.startPoint.y;this.preserveAspectRatio&&this.aroundCenter&&(n*=2,r*=2);const s=this.box.x+n,o=this.box.y+r,a=this.box.x2+n,l=this.box.y2+r;let c=new Ft(this.box);if(this.eventType.includes("l")&&(c.x=Math.min(s,this.box.x2),c.x2=Math.max(s,this.box.x2)),this.eventType.includes("r")&&(c.x=Math.min(a,this.box.x),c.x2=Math.max(a,this.box.x)),this.eventType.includes("t")&&(c.y=Math.min(o,this.box.y2),c.y2=Math.max(o,this.box.y2)),this.eventType.includes("b")&&(c.y=Math.min(l,this.box.y),c.y2=Math.max(l,this.box.y)),c.width=c.x2-c.x,c.height=c.y2-c.y,this.preserveAspectRatio){const h=c.width/this.box.width,u=c.height/this.box.height,d=["lt","t","rt","r","rb","b","lb","l"],f=(d.indexOf(this.eventType)+4)%d.length,g=this.aroundCenter?[this.box.cx,this.box.cy]:this.points[f];let m=this.eventType.includes("t")||this.eventType.includes("b")?u:h;m=this.eventType.length===2?Math.max(h,u):m,c=function(b,y,w){const C=[[b.x,b.y],[b.x+b.width,b.y],[b.x+b.width,b.y+b.height],[b.x,b.y+b.height]].map(([M,S])=>{const O=M-y[0],T=(S-y[1])*w;return[O*w+y[0],T+y[1]]});return T0(C)}(this.box,g,m)}this.el.dispatch("resize",{box:new Ft(c),angle:0,eventType:this.eventType,event:e,handler:this}).defaultPrevented||this.el.size(c.width,c.height).move(c.x,c.y)}movePoint(e){this.lastEvent=e;const{x:t,y:n}=this.snapToGrid(this.el.point(bh(e))),r=this.el.array().slice();r[this.index]=[t,n],this.el.dispatch("resize",{box:T0(r),angle:0,eventType:this.eventType,event:e,handler:this}).defaultPrevented||this.el.plot(r)}rotate(e){this.lastEvent=e;const t=this.startPoint,n=this.el.point(bh(e)),{cx:r,cy:s}=this.box,o=t.x-r,a=t.y-s,l=n.x-r,c=n.y-s,h=Math.sqrt(o*o+a*a)*Math.sqrt(l*l+c*c);if(h===0)return;let u=Math.acos((o*l+a*c)/h)/Math.PI*180;if(!u)return;n.x<t.x&&(u=-u);const d=new Fe(this.el),{x:f,y:g}=new mt(r,s).transformO(d),{rotate:m}=d.decompose(),b=this.snapToAngle(m+u)-m;this.el.dispatch("resize",{box:this.box,angle:b,eventType:this.eventType,event:e,handler:this}).defaultPrevented||this.el.transform(d.rotateO(b,f,g))}endResize(e){this.eventType!=="rot"&&this.eventType!=="point"&&this.resize(e),this.lastEvent=null,this.eventType="",ai(window,"mousemove.resize touchmove.resize"),ai(window,"mouseup.resize touchend.resize")}snapToGrid(e){return this.grid&&(e.x=Math.round(e.x/this.grid)*this.grid,e.y=Math.round(e.y/this.grid)*this.grid),e}snapToAngle(e){return this.degree&&(e=Math.round(e/this.degree)*this.degree),e}}Ye(hn,{resize:function(i=!0,e={}){typeof i=="object"&&(e=i,i=!0);let t=this.remember("_ResizeHandler");return t||(i.prototype instanceof E0?(t=new i(this),i=!0):t=new E0(this),this.remember("_resizeHandler",t)),t.active(i,e),this}}),window.SVG===void 0&&(window.SVG=UI),window.Apex===void 0&&(window.Apex={});var O0=function(){function i(e){Ee(this,i),this.ctx=e,this.w=e.w}return Oe(i,[{key:"initModules",value:function(){this.ctx.publicMethods=["updateOptions","updateSeries","appendData","appendSeries","isSeriesHidden","highlightSeries","toggleSeries","showSeries","hideSeries","setLocale","resetSeries","zoomX","toggleDataPointSelection","dataURI","exportToCSV","addXaxisAnnotation","addYaxisAnnotation","addPointAnnotation","clearAnnotations","removeAnnotation","paper","destroy"],this.ctx.eventList=["click","mousedown","mousemove","mouseleave","touchstart","touchmove","touchleave","mouseup","touchend"],this.ctx.animations=new fo(this.ctx),this.ctx.axes=new rP(this.ctx),this.ctx.core=new PP(this.ctx.el,this.ctx),this.ctx.config=new Va({}),this.ctx.data=new sp(this.ctx),this.ctx.grid=new h0(this.ctx),this.ctx.graphics=new oe(this.ctx),this.ctx.coreUtils=new Bt(this.ctx),this.ctx.crosshairs=new lp(this.ctx),this.ctx.events=new nP(this.ctx),this.ctx.exports=new $a(this.ctx),this.ctx.fill=new ki(this.ctx),this.ctx.localization=new iP(this.ctx),this.ctx.options=new Os,this.ctx.responsive=new sP(this.ctx),this.ctx.series=new ci(this.ctx),this.ctx.theme=new oP(this.ctx),this.ctx.formatters=new Ya(this.ctx),this.ctx.titleSubtitle=new aP(this.ctx),this.ctx.legend=new d0(this.ctx),this.ctx.toolbar=new f0(this.ctx),this.ctx.tooltip=new m0(this.ctx),this.ctx.dimensions=new xh(this.ctx),this.ctx.updateHelpers=new LP(this.ctx),this.ctx.zoomPanSelection=new fP(this.ctx),this.ctx.w.globals.tooltip=new m0(this.ctx)}}]),i}(),I0=function(){function i(e){Ee(this,i),this.ctx=e,this.w=e.w}return Oe(i,[{key:"clear",value:function(e){var t=e.isUpdating;this.ctx.zoomPanSelection&&this.ctx.zoomPanSelection.destroy(),this.ctx.toolbar&&this.ctx.toolbar.destroy(),this.ctx.animations=null,this.ctx.axes=null,this.ctx.annotations=null,this.ctx.core=null,this.ctx.data=null,this.ctx.grid=null,this.ctx.series=null,this.ctx.responsive=null,this.ctx.theme=null,this.ctx.formatters=null,this.ctx.titleSubtitle=null,this.ctx.legend=null,this.ctx.dimensions=null,this.ctx.options=null,this.ctx.crosshairs=null,this.ctx.zoomPanSelection=null,this.ctx.updateHelpers=null,this.ctx.toolbar=null,this.ctx.localization=null,this.ctx.w.globals.tooltip=null,this.clearDomElements({isUpdating:t})}},{key:"killSVG",value:function(e){e.each(function(){this.removeClass("*"),this.off()},!0),e.clear()}},{key:"clearDomElements",value:function(e){var t=this,n=e.isUpdating,r=this.w.globals.dom.Paper.node;r.parentNode&&r.parentNode.parentNode&&!n&&(r.parentNode.parentNode.style.minHeight="unset");var s=this.w.globals.dom.baseEl;s&&this.ctx.eventList.forEach(function(a){s.removeEventListener(a,t.ctx.events.documentEvent)});var o=this.w.globals.dom;if(this.ctx.el!==null)for(;this.ctx.el.firstChild;)this.ctx.el.removeChild(this.ctx.el.firstChild);this.killSVG(o.Paper),o.Paper.remove(),o.elWrap=null,o.elGraphical=null,o.elLegendWrap=null,o.elLegendForeign=null,o.baseEl=null,o.elGridRect=null,o.elGridRectMask=null,o.elGridRectBarMask=null,o.elGridRectMarkerMask=null,o.elForecastMask=null,o.elNonForecastMask=null,o.elDefs=null}}]),i}(),mp=new WeakMap,P0=function(){function i(e,t){Ee(this,i),this.opts=t,this.ctx=this,this.w=new tP(t).init(),this.el=e,this.w.globals.cuid=H.randomId(),this.w.globals.chartID=this.w.config.chart.id?H.escapeString(this.w.config.chart.id):this.w.globals.cuid,new O0(this).initModules(),this.create=H.bind(this.create,this),this.windowResizeHandler=this._windowResizeHandler.bind(this),this.parentResizeHandler=this._parentResizeCallback.bind(this)}return Oe(i,[{key:"render",value:function(){var e=this;return new Promise(function(t,n){if(H.elementExists(e.el)){Apex._chartInstances===void 0&&(Apex._chartInstances=[]),e.w.config.chart.id&&Apex._chartInstances.push({id:e.w.globals.chartID,group:e.w.config.chart.group,chart:e}),e.setLocale(e.w.config.chart.defaultLocale);var r=e.w.config.chart.events.beforeMount;typeof r=="function"&&r(e,e.w),e.events.fireEvent("beforeMount",[e,e.w]),window.addEventListener("resize",e.windowResizeHandler),function(d,f){var g=!1;if(d.nodeType!==Node.DOCUMENT_FRAGMENT_NODE){var m=d.getBoundingClientRect();d.style.display!=="none"&&m.width!==0||(g=!0)}var b=new ResizeObserver(function(y){g&&f.call(d,y),g=!0});d.nodeType===Node.DOCUMENT_FRAGMENT_NODE?Array.from(d.children).forEach(function(y){return b.observe(y)}):b.observe(d),mp.set(f,b)}(e.el.parentNode,e.parentResizeHandler);var s=e.el.getRootNode&&e.el.getRootNode(),o=H.is("ShadowRoot",s),a=e.el.ownerDocument,l=o?s.getElementById("apexcharts-css"):a.getElementById("apexcharts-css");if(!l){var c;(l=document.createElement("style")).id="apexcharts-css",l.textContent=`@keyframes opaque {
      0% {
        opacity: 0
      }
    
      to {
        opacity: 1
      }
    }
    
    @keyframes resizeanim {
    
      0%,
      to {
        opacity: 0
      }
    }
    
    .apexcharts-canvas {
      position: relative;
      direction: ltr !important;
      user-select: none
    }
    
    .apexcharts-canvas ::-webkit-scrollbar {
      -webkit-appearance: none;
      width: 6px
    }
    
    .apexcharts-canvas ::-webkit-scrollbar-thumb {
      border-radius: 4px;
      background-color: rgba(0, 0, 0, .5);
      box-shadow: 0 0 1px rgba(255, 255, 255, .5);
      -webkit-box-shadow: 0 0 1px rgba(255, 255, 255, .5)
    }
    
    .apexcharts-inner {
      position: relative
    }
    
    .apexcharts-text tspan {
      font-family: inherit
    }
    
    rect.legend-mouseover-inactive,
    .legend-mouseover-inactive rect,
    .legend-mouseover-inactive path,
    .legend-mouseover-inactive circle,
    .legend-mouseover-inactive line,
    .legend-mouseover-inactive text.apexcharts-yaxis-title-text,
    .legend-mouseover-inactive text.apexcharts-yaxis-label {
      transition: .15s ease all;
      opacity: .2
    }
    
    .apexcharts-legend-text {
      padding-left: 15px;
      margin-left: -15px;
    }
    
    .apexcharts-series-collapsed {
      opacity: 0
    }
    
    .apexcharts-tooltip {
      border-radius: 5px;
      box-shadow: 2px 2px 6px -4px #999;
      cursor: default;
      font-size: 14px;
      left: 62px;
      opacity: 0;
      pointer-events: none;
      position: absolute;
      top: 20px;
      display: flex;
      flex-direction: column;
      overflow: hidden;
      white-space: nowrap;
      z-index: 12;
      transition: .15s ease all
    }
    
    .apexcharts-tooltip.apexcharts-active {
      opacity: 1;
      transition: .15s ease all
    }
    
    .apexcharts-tooltip.apexcharts-theme-light {
      border: 1px solid #e3e3e3;
      background: rgba(255, 255, 255, .96)
    }
    
    .apexcharts-tooltip.apexcharts-theme-dark {
      color: #fff;
      background: rgba(30, 30, 30, .8)
    }
    
    .apexcharts-tooltip * {
      font-family: inherit
    }
    
    .apexcharts-tooltip-title {
      padding: 6px;
      font-size: 15px;
      margin-bottom: 4px
    }
    
    .apexcharts-tooltip.apexcharts-theme-light .apexcharts-tooltip-title {
      background: #eceff1;
      border-bottom: 1px solid #ddd
    }
    
    .apexcharts-tooltip.apexcharts-theme-dark .apexcharts-tooltip-title {
      background: rgba(0, 0, 0, .7);
      border-bottom: 1px solid #333
    }
    
    .apexcharts-tooltip-text-goals-value,
    .apexcharts-tooltip-text-y-value,
    .apexcharts-tooltip-text-z-value {
      display: inline-block;
      margin-left: 5px;
      font-weight: 600
    }
    
    .apexcharts-tooltip-text-goals-label:empty,
    .apexcharts-tooltip-text-goals-value:empty,
    .apexcharts-tooltip-text-y-label:empty,
    .apexcharts-tooltip-text-y-value:empty,
    .apexcharts-tooltip-text-z-value:empty,
    .apexcharts-tooltip-title:empty {
      display: none
    }
    
    .apexcharts-tooltip-text-goals-label,
    .apexcharts-tooltip-text-goals-value {
      padding: 6px 0 5px
    }
    
    .apexcharts-tooltip-goals-group,
    .apexcharts-tooltip-text-goals-label,
    .apexcharts-tooltip-text-goals-value {
      display: flex
    }
    
    .apexcharts-tooltip-text-goals-label:not(:empty),
    .apexcharts-tooltip-text-goals-value:not(:empty) {
      margin-top: -6px
    }
    
    .apexcharts-tooltip-marker {
      display: inline-block;
      position: relative;
      width: 16px;
      height: 16px;
      font-size: 16px;
      line-height: 16px;
      margin-right: 4px;
      text-align: center;
      vertical-align: middle;
      color: inherit;
    }
    
    .apexcharts-tooltip-marker::before {
      content: "";
      display: inline-block;
      width: 100%;
      text-align: center;
      color: currentcolor;
      text-rendering: optimizeLegibility;
      -webkit-font-smoothing: antialiased;
      font-size: 26px;
      font-family: Arial, Helvetica, sans-serif;
      line-height: 14px;
      font-weight: 900;
    }
    
    .apexcharts-tooltip-marker[shape="circle"]::before {
      content: "\\25CF";
    }
    
    .apexcharts-tooltip-marker[shape="square"]::before,
    .apexcharts-tooltip-marker[shape="rect"]::before {
      content: "\\25A0";
      transform: translate(-1px, -2px);
    }
    
    .apexcharts-tooltip-marker[shape="line"]::before {
      content: "\\2500";
    }
    
    .apexcharts-tooltip-marker[shape="diamond"]::before {
      content: "\\25C6";
      font-size: 28px;
    }
    
    .apexcharts-tooltip-marker[shape="triangle"]::before {
      content: "\\25B2";
      font-size: 22px;
    }
    
    .apexcharts-tooltip-marker[shape="cross"]::before {
      content: "\\2715";
      font-size: 18px;
    }
    
    .apexcharts-tooltip-marker[shape="plus"]::before {
      content: "\\2715";
      transform: rotate(45deg) translate(-1px, -1px);
      font-size: 18px;
    }
    
    .apexcharts-tooltip-marker[shape="star"]::before {
      content: "\\2605";
      font-size: 18px;
    }
    
    .apexcharts-tooltip-marker[shape="sparkle"]::before {
      content: "\\2726";
      font-size: 20px;
    }
    
    .apexcharts-tooltip-series-group {
      padding: 0 10px;
      display: none;
      text-align: left;
      justify-content: left;
      align-items: center
    }
    
    .apexcharts-tooltip-series-group.apexcharts-active .apexcharts-tooltip-marker {
      opacity: 1
    }
    
    .apexcharts-tooltip-series-group.apexcharts-active,
    .apexcharts-tooltip-series-group:last-child {
      padding-bottom: 4px
    }
    
    .apexcharts-tooltip-y-group {
      padding: 6px 0 5px
    }
    
    .apexcharts-custom-tooltip,
    .apexcharts-tooltip-box {
      padding: 4px 8px
    }
    
    .apexcharts-tooltip-boxPlot {
      display: flex;
      flex-direction: column-reverse
    }
    
    .apexcharts-tooltip-box>div {
      margin: 4px 0
    }
    
    .apexcharts-tooltip-box span.value {
      font-weight: 700
    }
    
    .apexcharts-tooltip-rangebar {
      padding: 5px 8px
    }
    
    .apexcharts-tooltip-rangebar .category {
      font-weight: 600;
      color: #777
    }
    
    .apexcharts-tooltip-rangebar .series-name {
      font-weight: 700;
      display: block;
      margin-bottom: 5px
    }
    
    .apexcharts-xaxistooltip,
    .apexcharts-yaxistooltip {
      opacity: 0;
      pointer-events: none;
      color: #373d3f;
      font-size: 13px;
      text-align: center;
      border-radius: 2px;
      position: absolute;
      z-index: 10;
      background: #eceff1;
      border: 1px solid #90a4ae
    }
    
    .apexcharts-xaxistooltip {
      padding: 9px 10px;
      transition: .15s ease all
    }
    
    .apexcharts-xaxistooltip.apexcharts-theme-dark {
      background: rgba(0, 0, 0, .7);
      border: 1px solid rgba(0, 0, 0, .5);
      color: #fff
    }
    
    .apexcharts-xaxistooltip:after,
    .apexcharts-xaxistooltip:before {
      left: 50%;
      border: solid transparent;
      content: " ";
      height: 0;
      width: 0;
      position: absolute;
      pointer-events: none
    }
    
    .apexcharts-xaxistooltip:after {
      border-color: transparent;
      border-width: 6px;
      margin-left: -6px
    }
    
    .apexcharts-xaxistooltip:before {
      border-color: transparent;
      border-width: 7px;
      margin-left: -7px
    }
    
    .apexcharts-xaxistooltip-bottom:after,
    .apexcharts-xaxistooltip-bottom:before {
      bottom: 100%
    }
    
    .apexcharts-xaxistooltip-top:after,
    .apexcharts-xaxistooltip-top:before {
      top: 100%
    }
    
    .apexcharts-xaxistooltip-bottom:after {
      border-bottom-color: #eceff1
    }
    
    .apexcharts-xaxistooltip-bottom:before {
      border-bottom-color: #90a4ae
    }
    
    .apexcharts-xaxistooltip-bottom.apexcharts-theme-dark:after,
    .apexcharts-xaxistooltip-bottom.apexcharts-theme-dark:before {
      border-bottom-color: rgba(0, 0, 0, .5)
    }
    
    .apexcharts-xaxistooltip-top:after {
      border-top-color: #eceff1
    }
    
    .apexcharts-xaxistooltip-top:before {
      border-top-color: #90a4ae
    }
    
    .apexcharts-xaxistooltip-top.apexcharts-theme-dark:after,
    .apexcharts-xaxistooltip-top.apexcharts-theme-dark:before {
      border-top-color: rgba(0, 0, 0, .5)
    }
    
    .apexcharts-xaxistooltip.apexcharts-active {
      opacity: 1;
      transition: .15s ease all
    }
    
    .apexcharts-yaxistooltip {
      padding: 4px 10px
    }
    
    .apexcharts-yaxistooltip.apexcharts-theme-dark {
      background: rgba(0, 0, 0, .7);
      border: 1px solid rgba(0, 0, 0, .5);
      color: #fff
    }
    
    .apexcharts-yaxistooltip:after,
    .apexcharts-yaxistooltip:before {
      top: 50%;
      border: solid transparent;
      content: " ";
      height: 0;
      width: 0;
      position: absolute;
      pointer-events: none
    }
    
    .apexcharts-yaxistooltip:after {
      border-color: transparent;
      border-width: 6px;
      margin-top: -6px
    }
    
    .apexcharts-yaxistooltip:before {
      border-color: transparent;
      border-width: 7px;
      margin-top: -7px
    }
    
    .apexcharts-yaxistooltip-left:after,
    .apexcharts-yaxistooltip-left:before {
      left: 100%
    }
    
    .apexcharts-yaxistooltip-right:after,
    .apexcharts-yaxistooltip-right:before {
      right: 100%
    }
    
    .apexcharts-yaxistooltip-left:after {
      border-left-color: #eceff1
    }
    
    .apexcharts-yaxistooltip-left:before {
      border-left-color: #90a4ae
    }
    
    .apexcharts-yaxistooltip-left.apexcharts-theme-dark:after,
    .apexcharts-yaxistooltip-left.apexcharts-theme-dark:before {
      border-left-color: rgba(0, 0, 0, .5)
    }
    
    .apexcharts-yaxistooltip-right:after {
      border-right-color: #eceff1
    }
    
    .apexcharts-yaxistooltip-right:before {
      border-right-color: #90a4ae
    }
    
    .apexcharts-yaxistooltip-right.apexcharts-theme-dark:after,
    .apexcharts-yaxistooltip-right.apexcharts-theme-dark:before {
      border-right-color: rgba(0, 0, 0, .5)
    }
    
    .apexcharts-yaxistooltip.apexcharts-active {
      opacity: 1
    }
    
    .apexcharts-yaxistooltip-hidden {
      display: none
    }
    
    .apexcharts-xcrosshairs,
    .apexcharts-ycrosshairs {
      pointer-events: none;
      opacity: 0;
      transition: .15s ease all
    }
    
    .apexcharts-xcrosshairs.apexcharts-active,
    .apexcharts-ycrosshairs.apexcharts-active {
      opacity: 1;
      transition: .15s ease all
    }
    
    .apexcharts-ycrosshairs-hidden {
      opacity: 0
    }
    
    .apexcharts-selection-rect {
      cursor: move
    }
    
    .svg_select_shape {
      stroke-width: 1;
      stroke-dasharray: 10 10;
      stroke: black;
      stroke-opacity: 0.1;
      pointer-events: none;
      fill: none;
    }
    
    .svg_select_handle {
      stroke-width: 3;
      stroke: black;
      fill: none;
    }
    
    .svg_select_handle_r {
      cursor: e-resize;
    }
    
    .svg_select_handle_l {
      cursor: w-resize;
    }
    
    .apexcharts-svg.apexcharts-zoomable.hovering-zoom {
      cursor: crosshair
    }
    
    .apexcharts-svg.apexcharts-zoomable.hovering-pan {
      cursor: move
    }
    
    .apexcharts-menu-icon,
    .apexcharts-pan-icon,
    .apexcharts-reset-icon,
    .apexcharts-selection-icon,
    .apexcharts-toolbar-custom-icon,
    .apexcharts-zoom-icon,
    .apexcharts-zoomin-icon,
    .apexcharts-zoomout-icon {
      cursor: pointer;
      width: 20px;
      height: 20px;
      line-height: 24px;
      color: #6e8192;
      text-align: center
    }
    
    .apexcharts-menu-icon svg,
    .apexcharts-reset-icon svg,
    .apexcharts-zoom-icon svg,
    .apexcharts-zoomin-icon svg,
    .apexcharts-zoomout-icon svg {
      fill: #6e8192
    }
    
    .apexcharts-selection-icon svg {
      fill: #444;
      transform: scale(.76)
    }
    
    .apexcharts-theme-dark .apexcharts-menu-icon svg,
    .apexcharts-theme-dark .apexcharts-pan-icon svg,
    .apexcharts-theme-dark .apexcharts-reset-icon svg,
    .apexcharts-theme-dark .apexcharts-selection-icon svg,
    .apexcharts-theme-dark .apexcharts-toolbar-custom-icon svg,
    .apexcharts-theme-dark .apexcharts-zoom-icon svg,
    .apexcharts-theme-dark .apexcharts-zoomin-icon svg,
    .apexcharts-theme-dark .apexcharts-zoomout-icon svg {
      fill: #f3f4f5
    }
    
    .apexcharts-canvas .apexcharts-reset-zoom-icon.apexcharts-selected svg,
    .apexcharts-canvas .apexcharts-selection-icon.apexcharts-selected svg,
    .apexcharts-canvas .apexcharts-zoom-icon.apexcharts-selected svg {
      fill: #008ffb
    }
    
    .apexcharts-theme-light .apexcharts-menu-icon:hover svg,
    .apexcharts-theme-light .apexcharts-reset-icon:hover svg,
    .apexcharts-theme-light .apexcharts-selection-icon:not(.apexcharts-selected):hover svg,
    .apexcharts-theme-light .apexcharts-zoom-icon:not(.apexcharts-selected):hover svg,
    .apexcharts-theme-light .apexcharts-zoomin-icon:hover svg,
    .apexcharts-theme-light .apexcharts-zoomout-icon:hover svg {
      fill: #333
    }
    
    .apexcharts-menu-icon,
    .apexcharts-selection-icon {
      position: relative
    }
    
    .apexcharts-reset-icon {
      margin-left: 5px
    }
    
    .apexcharts-menu-icon,
    .apexcharts-reset-icon,
    .apexcharts-zoom-icon {
      transform: scale(.85)
    }
    
    .apexcharts-zoomin-icon,
    .apexcharts-zoomout-icon {
      transform: scale(.7)
    }
    
    .apexcharts-zoomout-icon {
      margin-right: 3px
    }
    
    .apexcharts-pan-icon {
      transform: scale(.62);
      position: relative;
      left: 1px;
      top: 0
    }
    
    .apexcharts-pan-icon svg {
      fill: #fff;
      stroke: #6e8192;
      stroke-width: 2
    }
    
    .apexcharts-pan-icon.apexcharts-selected svg {
      stroke: #008ffb
    }
    
    .apexcharts-pan-icon:not(.apexcharts-selected):hover svg {
      stroke: #333
    }
    
    .apexcharts-toolbar {
      position: absolute;
      z-index: 11;
      max-width: 176px;
      text-align: right;
      border-radius: 3px;
      padding: 0 6px 2px;
      display: flex;
      justify-content: space-between;
      align-items: center
    }
    
    .apexcharts-menu {
      background: #fff;
      position: absolute;
      top: 100%;
      border: 1px solid #ddd;
      border-radius: 3px;
      padding: 3px;
      right: 10px;
      opacity: 0;
      min-width: 110px;
      transition: .15s ease all;
      pointer-events: none
    }
    
    .apexcharts-menu.apexcharts-menu-open {
      opacity: 1;
      pointer-events: all;
      transition: .15s ease all
    }
    
    .apexcharts-menu-item {
      padding: 6px 7px;
      font-size: 12px;
      cursor: pointer
    }
    
    .apexcharts-theme-light .apexcharts-menu-item:hover {
      background: #eee
    }
    
    .apexcharts-theme-dark .apexcharts-menu {
      background: rgba(0, 0, 0, .7);
      color: #fff
    }
    
    @media screen and (min-width:768px) {
      .apexcharts-canvas:hover .apexcharts-toolbar {
        opacity: 1
      }
    }
    
    .apexcharts-canvas .apexcharts-element-hidden,
    .apexcharts-datalabel.apexcharts-element-hidden,
    .apexcharts-hide .apexcharts-series-points {
      opacity: 0;
    }
    
    .apexcharts-hidden-element-shown {
      opacity: 1;
      transition: 0.25s ease all;
    }
    
    .apexcharts-datalabel,
    .apexcharts-datalabel-label,
    .apexcharts-datalabel-value,
    .apexcharts-datalabels,
    .apexcharts-pie-label {
      cursor: default;
      pointer-events: none
    }
    
    .apexcharts-pie-label-delay {
      opacity: 0;
      animation-name: opaque;
      animation-duration: .3s;
      animation-fill-mode: forwards;
      animation-timing-function: ease
    }
    
    .apexcharts-radialbar-label {
      cursor: pointer;
    }
    
    .apexcharts-annotation-rect,
    .apexcharts-area-series .apexcharts-area,
    .apexcharts-gridline,
    .apexcharts-line,
    .apexcharts-point-annotation-label,
    .apexcharts-radar-series path:not(.apexcharts-marker),
    .apexcharts-radar-series polygon,
    .apexcharts-toolbar svg,
    .apexcharts-tooltip .apexcharts-marker,
    .apexcharts-xaxis-annotation-label,
    .apexcharts-yaxis-annotation-label,
    .apexcharts-zoom-rect,
    .no-pointer-events {
      pointer-events: none
    }
    
    .apexcharts-tooltip-active .apexcharts-marker {
      transition: .15s ease all
    }
    
    .apexcharts-radar-series .apexcharts-yaxis {
      pointer-events: none;
    }
    
    .resize-triggers {
      animation: 1ms resizeanim;
      visibility: hidden;
      opacity: 0;
      height: 100%;
      width: 100%;
      overflow: hidden
    }
    
    .contract-trigger:before,
    .resize-triggers,
    .resize-triggers>div {
      content: " ";
      display: block;
      position: absolute;
      top: 0;
      left: 0
    }
    
    .resize-triggers>div {
      height: 100%;
      width: 100%;
      background: #eee;
      overflow: auto
    }
    
    .contract-trigger:before {
      overflow: hidden;
      width: 200%;
      height: 200%
    }
    
    .apexcharts-bar-goals-markers {
      pointer-events: none
    }
    
    .apexcharts-bar-shadows {
      pointer-events: none
    }
    
    .apexcharts-rangebar-goals-markers {
      pointer-events: none
    }`;var h=((c=e.opts.chart)===null||c===void 0?void 0:c.nonce)||e.w.config.chart.nonce;h&&l.setAttribute("nonce",h),o?s.prepend(l):a.head.appendChild(l)}var u=e.create(e.w.config.series,{});if(!u)return t(e);e.mount(u).then(function(){typeof e.w.config.chart.events.mounted=="function"&&e.w.config.chart.events.mounted(e,e.w),e.events.fireEvent("mounted",[e,e.w]),t(u)}).catch(function(d){n(d)})}else n(new Error("Element not found"))})}},{key:"create",value:function(e,t){var n=this,r=this.w;new O0(this).initModules();var s=this.w.globals;if(s.noData=!1,s.animationEnded=!1,!H.elementExists(this.el))return s.animationEnded=!0,this.destroy(),null;if(this.responsive.checkResponsiveConfig(t),r.config.xaxis.convertedCatToNumeric&&new ja(r.config).convertCatToNumericXaxis(r.config,this.ctx),this.core.setupElements(),r.config.chart.type==="treemap"&&(r.config.grid.show=!1,r.config.yaxis[0].show=!1),s.svgWidth===0)return s.animationEnded=!0,null;var o=e;e.forEach(function(d,f){d.hidden&&(o=n.legend.legendHelpers.getSeriesAfterCollapsing({realIndex:f}))});var a=Bt.checkComboSeries(o,r.config.chart.type);s.comboCharts=a.comboCharts,s.comboBarCount=a.comboBarCount;var l=o.every(function(d){return d.data&&d.data.length===0});(o.length===0||l&&s.collapsedSeries.length<1)&&this.series.handleNoData(),this.events.setupEventHandlers(),this.data.parseData(o),this.theme.init(),new wo(this).setGlobalMarkerSize(),this.formatters.setLabelFormatters(),this.titleSubtitle.draw(),s.noData&&s.collapsedSeries.length!==s.series.length&&!r.config.legend.showForSingleSeries||this.legend.init(),this.series.hasAllSeriesEqualX(),s.axisCharts&&(this.core.coreCalculations(),r.config.xaxis.type!=="category"&&this.formatters.setLabelFormatters(),this.ctx.toolbar.minX=r.globals.minX,this.ctx.toolbar.maxX=r.globals.maxX),this.formatters.heatmapLabelFormatters(),new Bt(this).getLargestMarkerSize(),this.dimensions.plotCoords();var c=this.core.xySettings();this.grid.createGridMask();var h=this.core.plotChartType(o,c),u=new ko(this);return u.bringForward(),r.config.dataLabels.background.enabled&&u.dataLabelsBackground(),this.core.shiftGraphPosition(),{elGraph:h,xyRatios:c,dimensions:{plot:{left:r.globals.translateX,top:r.globals.translateY,width:r.globals.gridWidth,height:r.globals.gridHeight}}}}},{key:"mount",value:function(){var e=this,t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,n=this,r=n.w;return new Promise(function(s,o){if(n.el===null)return o(new Error("Not enough data to display or target element not found"));(t===null||r.globals.allSeriesCollapsed)&&n.series.handleNoData(),n.grid=new h0(n);var a,l,c=n.grid.drawGrid();if(n.annotations=new eP(n),n.annotations.drawImageAnnos(),n.annotations.drawTextAnnos(),r.config.grid.position==="back"&&(c&&r.globals.dom.elGraphical.add(c.el),c!=null&&(a=c.elGridBorders)!==null&&a!==void 0&&a.node&&r.globals.dom.elGraphical.add(c.elGridBorders)),Array.isArray(t.elGraph))for(var h=0;h<t.elGraph.length;h++)r.globals.dom.elGraphical.add(t.elGraph[h]);else r.globals.dom.elGraphical.add(t.elGraph);r.config.grid.position==="front"&&(c&&r.globals.dom.elGraphical.add(c.el),c!=null&&(l=c.elGridBorders)!==null&&l!==void 0&&l.node&&r.globals.dom.elGraphical.add(c.elGridBorders)),r.config.xaxis.crosshairs.position==="front"&&n.crosshairs.drawXCrosshairs(),r.config.yaxis[0].crosshairs.position==="front"&&n.crosshairs.drawYCrosshairs(),r.config.chart.type!=="treemap"&&n.axes.drawAxis(r.config.chart.type,c);var u=new Ga(e.ctx,c),d=new ap(e.ctx,c);if(c!==null&&(u.xAxisLabelCorrections(c.xAxisTickWidth),d.setYAxisTextAlignments(),r.config.yaxis.map(function(g,m){r.globals.ignoreYAxisIndexes.indexOf(m)===-1&&d.yAxisTitleRotate(m,g.opposite)})),n.annotations.drawAxesAnnotations(),!r.globals.noData){if(r.config.tooltip.enabled&&!r.globals.noData&&n.w.globals.tooltip.drawTooltip(t.xyRatios),r.globals.axisCharts&&(r.globals.isXNumeric||r.config.xaxis.convertedCatToNumeric||r.globals.isRangeBar))(r.config.chart.zoom.enabled||r.config.chart.selection&&r.config.chart.selection.enabled||r.config.chart.pan&&r.config.chart.pan.enabled)&&n.zoomPanSelection.init({xyRatios:t.xyRatios});else{var f=r.config.chart.toolbar.tools;["zoom","zoomin","zoomout","selection","pan","reset"].forEach(function(g){f[g]=!1})}r.config.chart.toolbar.show&&!r.globals.allSeriesCollapsed&&n.toolbar.createToolbar()}r.globals.memory.methodsToExec.length>0&&r.globals.memory.methodsToExec.forEach(function(g){g.method(g.params,!1,g.context)}),r.globals.axisCharts||r.globals.noData||n.core.resizeNonAxisCharts(),s(n)})}},{key:"destroy",value:function(){window.removeEventListener("resize",this.windowResizeHandler),function(t,n){var r=mp.get(n);r&&(r.disconnect(),mp.delete(n))}(this.el.parentNode,this.parentResizeHandler);var e=this.w.config.chart.id;e&&Apex._chartInstances.forEach(function(t,n){t.id===H.escapeString(e)&&Apex._chartInstances.splice(n,1)}),new I0(this.ctx).clear({isUpdating:!1})}},{key:"updateOptions",value:function(e){var t=this,n=arguments.length>1&&arguments[1]!==void 0&&arguments[1],r=!(arguments.length>2&&arguments[2]!==void 0)||arguments[2],s=!(arguments.length>3&&arguments[3]!==void 0)||arguments[3],o=!(arguments.length>4&&arguments[4]!==void 0)||arguments[4],a=this.w;return a.globals.selection=void 0,e.series&&(this.series.resetSeries(!1,!0,!1),e.series.length&&e.series[0].data&&(e.series=e.series.map(function(l,c){return t.updateHelpers._extendSeries(l,c)})),this.updateHelpers.revertDefaultAxisMinMax()),e.xaxis&&(e=this.updateHelpers.forceXAxisUpdate(e)),e.yaxis&&(e=this.updateHelpers.forceYAxisUpdate(e)),a.globals.collapsedSeriesIndices.length>0&&this.series.clearPreviousPaths(),e.theme&&(e=this.theme.updateThemeOptions(e)),this.updateHelpers._updateOptions(e,n,r,s,o)}},{key:"updateSeries",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],t=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1],n=!(arguments.length>2&&arguments[2]!==void 0)||arguments[2];return this.series.resetSeries(!1),this.updateHelpers.revertDefaultAxisMinMax(),this.updateHelpers._updateSeries(e,t,n)}},{key:"appendSeries",value:function(e){var t=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1],n=!(arguments.length>2&&arguments[2]!==void 0)||arguments[2],r=this.w.config.series.slice();return r.push(e),this.series.resetSeries(!1),this.updateHelpers.revertDefaultAxisMinMax(),this.updateHelpers._updateSeries(r,t,n)}},{key:"appendData",value:function(e){var t=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1],n=this;n.w.globals.dataChanged=!0,n.series.getPreviousPaths();for(var r=n.w.config.series.slice(),s=0;s<r.length;s++)if(e[s]!==null&&e[s]!==void 0)for(var o=0;o<e[s].data.length;o++)r[s].data.push(e[s].data[o]);return n.w.config.series=r,t&&(n.w.globals.initialSeries=H.clone(n.w.config.series)),this.update()}},{key:"update",value:function(e){var t=this;return new Promise(function(n,r){new I0(t.ctx).clear({isUpdating:!0});var s=t.create(t.w.config.series,e);if(!s)return n(t);t.mount(s).then(function(){typeof t.w.config.chart.events.updated=="function"&&t.w.config.chart.events.updated(t,t.w),t.events.fireEvent("updated",[t,t.w]),t.w.globals.isDirty=!0,n(t)}).catch(function(o){r(o)})})}},{key:"getSyncedCharts",value:function(){var e=this.getGroupedCharts(),t=[this];return e.length&&(t=[],e.forEach(function(n){t.push(n)})),t}},{key:"getGroupedCharts",value:function(){var e=this;return Apex._chartInstances.filter(function(t){if(t.group)return!0}).map(function(t){return e.w.config.chart.group===t.group?t.chart:e})}},{key:"toggleSeries",value:function(e){return this.series.toggleSeries(e)}},{key:"highlightSeriesOnLegendHover",value:function(e,t){return this.series.toggleSeriesOnHover(e,t)}},{key:"showSeries",value:function(e){this.series.showSeries(e)}},{key:"hideSeries",value:function(e){this.series.hideSeries(e)}},{key:"highlightSeries",value:function(e){this.series.highlightSeries(e)}},{key:"isSeriesHidden",value:function(e){this.series.isSeriesHidden(e)}},{key:"resetSeries",value:function(){var e=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0],t=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1];this.series.resetSeries(e,t)}},{key:"addEventListener",value:function(e,t){this.events.addEventListener(e,t)}},{key:"removeEventListener",value:function(e,t){this.events.removeEventListener(e,t)}},{key:"addXaxisAnnotation",value:function(e){var t=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1],n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:void 0,r=this;n&&(r=n),r.annotations.addXaxisAnnotationExternal(e,t,r)}},{key:"addYaxisAnnotation",value:function(e){var t=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1],n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:void 0,r=this;n&&(r=n),r.annotations.addYaxisAnnotationExternal(e,t,r)}},{key:"addPointAnnotation",value:function(e){var t=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1],n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:void 0,r=this;n&&(r=n),r.annotations.addPointAnnotationExternal(e,t,r)}},{key:"clearAnnotations",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:void 0,t=this;e&&(t=e),t.annotations.clearAnnotations(t)}},{key:"removeAnnotation",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:void 0,n=this;t&&(n=t),n.annotations.removeAnnotation(n,e)}},{key:"getChartArea",value:function(){return this.w.globals.dom.baseEl.querySelector(".apexcharts-inner")}},{key:"getSeriesTotalXRange",value:function(e,t){return this.coreUtils.getSeriesTotalsXRange(e,t)}},{key:"getHighestValueInSeries",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;return new op(this.ctx).getMinYMaxY(e).highestY}},{key:"getLowestValueInSeries",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;return new op(this.ctx).getMinYMaxY(e).lowestY}},{key:"getSeriesTotal",value:function(){return this.w.globals.seriesTotals}},{key:"toggleDataPointSelection",value:function(e,t){return this.updateHelpers.toggleDataPointSelection(e,t)}},{key:"zoomX",value:function(e,t){this.ctx.toolbar.zoomUpdateOptions(e,t)}},{key:"setLocale",value:function(e){this.localization.setCurrentLocaleValues(e)}},{key:"dataURI",value:function(e){return new $a(this.ctx).dataURI(e)}},{key:"getSvgString",value:function(e){return new $a(this.ctx).getSvgString(e)}},{key:"exportToCSV",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return new $a(this.ctx).exportToCSV(e)}},{key:"paper",value:function(){return this.w.globals.dom.Paper}},{key:"_parentResizeCallback",value:function(){this.w.globals.animationEnded&&this.w.config.chart.redrawOnParentResize&&this._windowResize()}},{key:"_windowResize",value:function(){var e=this;clearTimeout(this.w.globals.resizeTimer),this.w.globals.resizeTimer=window.setTimeout(function(){e.w.globals.resized=!0,e.w.globals.dataChanged=!1,e.ctx.update()},150)}},{key:"_windowResizeHandler",value:function(){var e=this.w.config.chart.redrawOnWindowResize;typeof e=="function"&&(e=e()),e&&this._windowResize()}}],[{key:"getChartByID",value:function(e){var t=H.escapeString(e);if(Apex._chartInstances){var n=Apex._chartInstances.filter(function(r){return r.id===t})[0];return n&&n.chart}}},{key:"initOnLoad",value:function(){for(var e=document.querySelectorAll("[data-apexcharts]"),t=0;t<e.length;t++)new i(e[t],JSON.parse(e[t].getAttribute("data-options"))).render()}},{key:"exec",value:function(e,t){var n=this.getChartByID(e);if(n){n.w.globals.isExecCalled=!0;var r=null;if(n.publicMethods.indexOf(t)!==-1){for(var s=arguments.length,o=new Array(s>2?s-2:0),a=2;a<s;a++)o[a-2]=arguments[a];r=n[t].apply(n,o)}return r}}},{key:"merge",value:function(e,t){return H.extend(e,t)}}]),i}();const L0=["animationEnd","beforeMount","mounted","updated","click","mouseMove","mouseLeave","legendClick","markerClick","selection","dataPointSelection","dataPointMouseEnter","dataPointMouseLeave","beforeZoom","beforeResetZoom","zoomed","scrolled","brushScrolled"],yh=Ml({name:"apexchart",props:{options:{type:Object},type:{type:String},series:{type:Array,required:!0},width:{default:"100%"},height:{default:"auto"}},emits:L0,setup(i,{emit:e}){const t=mn(null),n=mn(null),r=D=>D&&typeof D=="object"&&!Array.isArray(D)&&D!=null,s=(D,B)=>{typeof Object.assign!="function"&&function(){Object.assign=function(J){if(J==null)throw new TypeError("Cannot convert undefined or null to object");let se=Object(J);for(let ne=1;ne<arguments.length;ne++){let ie=arguments[ne];if(ie!=null)for(let ae in ie)ie.hasOwnProperty(ae)&&(se[ae]=ie[ae])}return se}}();let K=Object.assign({},D);return r(D)&&r(B)&&Object.keys(B).forEach(J=>{r(B[J])?J in D?K[J]=s(D[J],B[J]):Object.assign(K,{[J]:B[J]}):Object.assign(K,{[J]:B[J]})}),K},o=async()=>{if(await wl(),n.value)return;const D={chart:{type:i.type||i.options.chart.type||"line",height:i.height,width:i.width,events:{}},series:i.series},B=i.options.chart?i.options.chart.events:null;L0.forEach(J=>{let se=(...ne)=>e(J,...ne);D.chart.events[J]=(...ne)=>{se(...ne),B&&B.hasOwnProperty(J)&&B[J](...ne)}});const K=s(i.options,D);return n.value=new P0(t.value,K),n.value.render()},a=()=>(l(),o()),l=()=>{n.value.destroy(),n.value=null},c=(D,B)=>n.value.updateSeries(D,B),h=(D,B,K,J)=>n.value.updateOptions(D,B,K,J),u=D=>n.value.toggleSeries(D),d=D=>{n.value.showSeries(D)},f=D=>{n.value.hideSeries(D)},g=(D,B)=>n.value.appendSeries(D,B),m=()=>{n.value.resetSeries()},b=(D,B)=>{n.value.toggleDataPointSelection(D,B)},y=D=>n.value.appendData(D),w=(D,B)=>n.value.zoomX(D,B),C=D=>n.value.dataURI(D),M=D=>n.value.setLocale(D),S=(D,B)=>{n.value.addXaxisAnnotation(D,B)},O=(D,B)=>{n.value.addYaxisAnnotation(D,B)},T=(D,B)=>{n.value.addPointAnnotation(D,B)},I=(D,B)=>{n.value.removeAnnotation(D,B)},R=()=>{n.value.clearAnnotations()};Vg(()=>{window.ApexCharts=P0}),Ol(()=>{t.value=Pu().proxy.$el,o()}),mu(()=>{n.value&&l()});const z=e1(i);return qi(z.options,()=>{!n.value&&i.options?o():n.value.updateOptions(i.options)}),qi(z.series,()=>{!n.value&&i.series?o():n.value.updateSeries(i.series)},{deep:!0}),qi(z.type,()=>{a()}),qi(z.width,()=>{a()}),qi(z.height,()=>{a()}),{chart:n,init:o,refresh:a,destroy:l,updateOptions:h,updateSeries:c,toggleSeries:u,showSeries:d,hideSeries:f,resetSeries:m,zoomX:w,toggleDataPointSelection:b,appendData:y,appendSeries:g,addXaxisAnnotation:S,addYaxisAnnotation:O,addPointAnnotation:T,removeAnnotation:I,clearAnnotations:R,setLocale:M,dataURI:C}},render(){return ta("div",{class:"vue-apexcharts"})}}),DP=i=>{i.component(yh.name,yh)};yh.install=DP;const NP={key:0,class:"stats"},_P={class:"stats-nav"},zP=["onClick"],FP={class:"stats-chart"},BP={key:1,class:"stats-overlay"},HP=pv(Ml({__name:"Charts",setup(i){const e=mn(!0),t=mn(!1),n=mn(),r=mn(),s=mn(),o=mn();Ol(async()=>{n.value=await vI(),r.value=n.value[0].link}),qi(r,()=>{if(!n.value)return;const l=n.value.find(u=>u.link===r.value);t.value=!(l&&l.data.length>1);const{seriesData:c,annotations:h}=l&&l.data.length>1?a(l.data):{seriesData:[],annotations:{}};s.value=[{name:"Aufrufe",data:c}],o.value={chart:{height:350,type:"line",id:"views-diff-line"},annotations:h,stroke:{curve:"smooth"},xaxis:{type:"datetime"},title:{text:"Aufrufe"},dataLabels:{enabled:!1},grid:{padding:{right:30,left:20}}},e.value=!1});function a(l){const c=[],h={xaxis:[],points:[]};for(let u=1;u<l.length;u++){const d=l[u],f=l[u-1],g=d.views-f.views,m=new Date(d.date).getTime();c.push({x:m,y:g});const b=d.chapters-f.chapters;b!==0&&h.xaxis.push({x:m,strokeDashArray:0,borderColor:"#9333ea",label:{borderColor:"#9333ea",style:{color:"#fff",background:"#9333ea"},text:`${b>0?"+":""}${b} Kapitel`}});const y=["reviews","recommendations","favorites","bookmarks","offlineLibraries","bookshelves"],w={reviews:"#b45309",recommendations:"#c026d3",favorites:"#dc2626",bookmarks:"#16a34a",offlineLibraries:"#0891b2",bookshelves:"#4b5563"};let C=0;y.forEach(M=>{d[M]!==f[M]&&(h.points.push({x:m,y:g,marker:{size:10,offsetY:25*C,fillColor:w[M],strokeColor:w[M],cssClass:`apexcharts-icon-${M}`},image:{path:"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgaGVpZ2h0PSIxNiIgdmlld0JveD0iMCAwIDI0IDI0IiBmaWxsPSJub25lIiBzdHJva2U9IndoaXRlIiBzdHJva2Utd2lkdGg9IjIiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIgY2xhc3M9Imljb24gaWNvbi10YWJsZXIgaWNvbnMtdGFibGVyLW91dGxpbmUgaWNvbi10YWJsZXItYm9vayI+PHBhdGggc3Ryb2tlPSJub25lIiBkPSJNMCAwaDI0djI0SDB6IiBmaWxsPSJub25lIi8+PHBhdGggZD0iTTMgMTlhOSA5IDAgMCAxIDkgMGE5IDkgMCAwIDEgOSAwIiAvPjxwYXRoIGQ9Ik0zIDZhOSA5IDAgMCAxIDkgMGE5IDkgMCAwIDEgOSAwIiAvPjxwYXRoIGQ9Ik0zIDZsMCAxMyIgLz48cGF0aCBkPSJNMTIgNmwwIDEzIiAvPjxwYXRoIGQ9Ik0yMSA2bDAgMTMiIC8+PC9zdmc+",width:16,height:16,offsetY:25*C}}),C++)})}return{seriesData:c,annotations:h}}return(l,c)=>e.value?bn("",!0):(Xt(),xn("div",NP,[It("nav",_P,[(Xt(!0),xn(pi,null,H1(n.value,h=>(Xt(),xn("button",{type:"button",class:Tn(["nav-btn",h.link===r.value?"is-active":""]),onClick:u=>r.value=h.link},ll(h.title),11,zP))),256))]),It("div",FP,[e.value?bn("",!0):(Xt(),Ko(On(yh),{key:0,type:"line",height:"350",options:o.value,series:s.value},null,8,["options","series"])),t.value?(Xt(),xn("div",BP,c[0]||(c[0]=[It("p",null,"Noch keine Daten verfgbar",-1)]))):bn("",!0)])]))}}),[["__scopeId","data-v-bf66d06d"]]);async function XP(){var e,t;{const n=GM_getResourceText("customCSS");GM_addStyle(n)}let i=document.querySelector("#textarea-chapter");if(i&&i.parentElement){const n=document.createElement("div");i.parentElement.append(n),Km(fI).mount(n).setTextarea(i)}if(window.location.pathname.startsWith("/stats")){await gv();const n=document.querySelector(".container-storylist");n&&Array.from(n.querySelectorAll("tbody tr")).map(async s=>{var C;let o=s.querySelector('[data-ff-sort-colname="title_catname_statusinfo"]');if(!o)return;let a=(o.dataset.ffSortVal||"").trim();if(!a)return;let l=((C=o.querySelector("a"))==null?void 0:C.href)||null;if(!l)return;let c=s.querySelector('[data-ff-sort-colname="chaptercount"]'),h=s.querySelector('[data-ff-sort-colname="storylen"]'),u=s.querySelector('[data-ff-sort-colname="reviewcount"]'),d=s.querySelector('[data-ff-sort-colname="recommendationcount"]'),f=s.querySelector('[data-ff-sort-colname="hits"]'),g=s.querySelector('[data-ff-sort-colname="favcount"]'),m=s.querySelector('[data-ff-sort-colname="storybookmarkcount"]'),b=s.querySelector('[data-ff-sort-colname="offlinelibrarycount"]'),y=s.querySelector('[data-ff-sort-colname="bookshelfcount"]'),w={chapters:c?parseInt(c.dataset.ffSortVal):1,words:h?parseInt(h.dataset.ffSortVal):1,reviews:u?parseInt(u.dataset.ffSortVal):0,recommendations:d?parseInt(d.dataset.ffSortVal):0,views:f?parseInt(f.dataset.ffSortVal):0,favorites:g?parseInt(g.dataset.ffSortVal):0,bookmarks:m?parseInt(m.dataset.ffSortVal):0,offlineLibraries:b?parseInt(b.dataset.ffSortVal):0,bookshelves:y?parseInt(y.dataset.ffSortVal):0};await yI(a,l,w)});let r=document.querySelector("h2");if(r){const s=document.createElement("div");(t=r.parentElement)==null||t.insertBefore(s,(e=r==null?void 0:r.nextElementSibling)==null?void 0:e.nextElementSibling),Km(HP).mount(s)}}}XP()})();
    